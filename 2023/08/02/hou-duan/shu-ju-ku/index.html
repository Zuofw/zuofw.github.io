<!DOCTYPE html>
<html lang="zh-CN">
    <head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/#5.8.0'>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="Volantis" content="5.8.0">
  <meta charset="utf-8">
  <!-- SEOç›¸å…³ -->
  
  <link rel="canonical" href="https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/"/>
  <!-- æ¸²æŸ“ä¼˜åŒ– -->
    <meta http-equiv='x-dns-prefetch-control' content='on' />
      <link rel='dns-prefetch' href='https://unpkg.com'>
      <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Content-Security-Policy" content=" default-src 'self' https:; block-all-mixed-content; base-uri 'self' https:; form-action 'self' https:; worker-src 'self' https:; connect-src 'self' https: *; img-src 'self' data: https: *; media-src 'self' https: *; font-src 'self' data: https: *; frame-src 'self' https: *; manifest-src 'self' https: *; child-src https:; script-src 'self' https: 'unsafe-inline' *; style-src 'self' https: 'unsafe-inline' *; ">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <!-- import head_begin begin -->
  <!-- import head_begin end -->
  <!-- Custom Files headBegin begin-->
  
  <!-- Custom Files headBegin end-->
  <!-- front-matter head_begin begin -->
  <!-- front-matter head_begin end -->
  <link rel="preload" href="/css/style.css" as="style">
  <link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
<link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <!-- feed -->
  <!-- é¡µé¢å…ƒæ•°æ® -->
  <title>æ•°æ®åº“ - QingQiu'Blog</title>
  <meta name="keywords" content="database,åšå®¢ï¼Œå­¦ä¹ ï¼Œæˆé•¿">
  <meta desc name="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª - QingQiu - QingQiu'Blog">
  
<meta property="og:type" content="article">
<meta property="og:title" content="æ•°æ®åº“">
<meta property="og:url" content="https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/index.html">
<meta property="og:site_name" content="QingQiu&#39;Blog">
<meta property="og:description" content="æ•°æ®åº“æ•°æ®åº“åŒæ­¥é—®é¢˜ï¼š Mysqlé¢è¯•æŒ‡å—60 é“ MySQL ç²¾é€‰é¢è¯•é¢˜ğŸ‘ | äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯ (javabetter.cn) ä»‹ç»ä¸€ä¸‹MySQLçš„ç´¢å¼•MySQLçš„ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥å¸®åŠ©MySQLå¿«é€Ÿæç¬‘çš„æŸ¥è¯¢ï¼Œæ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ B+æ ‘çš„ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆ MySQL è¦ä½¿ç”¨ B+æ ‘ç‰¹ç‚¹ï¼š   åªæœ‰å¶å­èŠ‚ç‚¹ä¼šå­˜æ”¾å®é™…çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç´¢å¼•+è®°å½•ï¼Œéå¶å­èŠ‚åªå­˜æ”¾ç´¢å¼• æ‰€æœ‰ç´¢å¼•éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸­">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
<meta property="article:published_time" content="2023-08-02T07:36:58.000Z">
<meta property="article:modified_time" content="2024-07-19T08:43:15.512Z">
<meta property="article:author" content="QingQiu">
<meta property="article:tag" content="database">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
  <style>
    /* é¦–å±æ ·å¼ */
    #safearea {
  display: none;
}
:root {
  --color-site-body: #f4f4f4;
  --color-site-bg: #f4f4f4;
  --color-site-inner: #fff;
  --color-site-footer: #666;
  --color-card: #fff;
  --color-text: #444;
  --color-block: #f6f6f6;
  --color-inlinecode: #c74f00;
  --color-codeblock: #fff7ea;
  --color-h1: #3a3a3a;
  --color-h2: #3a3a3a;
  --color-h3: #333;
  --color-h4: #444;
  --color-h5: #555;
  --color-h6: #666;
  --color-p: #444;
  --color-list: #666;
  --color-list-hl: #30ad91;
  --color-meta: #888;
  --color-read-bkg: #e0d8c8;
  --color-read-post: #f8f1e2;
  --color-copyright-bkg: #f5f5f5;
}
* {
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  outline: none;
  margin: 0;
  padding: 0;
}
*::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
*::-webkit-scrollbar-track-piece {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: #3dd9b6;
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
*::-webkit-scrollbar-thumb:hover {
  background: #ff5722;
}
html {
  color: var(--color-text);
  width: 100%;
  height: 100%;
  font-family: UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  font-size: 16px;
}
html >::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
html >::-webkit-scrollbar-track-piece {
  background: transparent;
}
html >::-webkit-scrollbar-thumb {
  background: #54b5a0 linear-gradient(45deg, rgba(255,255,255,0.4) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.4) 75%, transparent 75%, transparent);
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
html >::-webkit-scrollbar-thumb:hover {
  background: #54b5a0 linear-gradient(45deg, rgba(255,255,255,0.4) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.4) 75%, transparent 75%, transparent);
}
body {
  background-color: var(--color-site-body);
  text-rendering: optimizelegibility;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  line-height: 1.6;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}
body.modal-active {
  overflow: hidden;
}
@media screen and (max-width: 680px) {
  body.modal-active {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
a {
  color: #2092ec;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
a:hover {
  color: #ff5722;
}
a:active,
a:hover {
  outline: 0;
}
ul,
ol {
  padding-left: 0;
}
ul li,
ol li {
  list-style: none;
}
header {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
img {
  border: 0;
  background: none;
  max-width: 100%;
}
svg:not(:root) {
  overflow: hidden;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  height: 0;
  border: 0;
  border-radius: 1px;
  -webkit-border-radius: 1px;
  border-bottom: 1px solid rgba(68,68,68,0.1);
}
button,
input {
  color: inherit;
  font: inherit;
  margin: 0;
}
button {
  overflow: visible;
  text-transform: none;
  -webkit-appearance: button;
  cursor: pointer;
}
@supports (backdrop-filter: blur(20px)) {
  .blur {
    background: rgba(255,255,255,0.9) !important;
    backdrop-filter: saturate(200%) blur(20px);
  }
}
.shadow {
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.shadow.floatable {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.shadow.floatable:hover {
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
}
#l_cover {
  min-height: 64px;
}
.cover-wrapper {
  top: 0;
  left: 0;
  max-width: 100%;
  height: 100vh;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  align-self: center;
  align-content: center;
  color: var(--color-site-inner);
  padding: 0 16px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  position: relative;
  overflow: hidden;
  margin-bottom: -100px;
}
.cover-wrapper .cover-bg {
  position: absolute;
  width: 100%;
  height: 100%;
  background-position: center;
  background-size: cover;
  -webkit-background-size: cover;
  -moz-background-size: cover;
}
.cover-wrapper .cover-bg.lazyload:not(.loaded) {
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
}
.cover-wrapper .cover-bg.lazyload.loaded {
  animation-delay: 0s;
  animation-duration: 0.5s;
  animation-fill-mode: forwards;
  animation-timing-function: ease-out;
  animation-name: fadeIn;
}
@-moz-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  z-index: 1;
  position: relative;
  width: 100%;
  height: 100%;
}
.cover-wrapper#full {
  height: calc(100vh + 100px);
  padding-bottom: 100px;
}
.cover-wrapper#half {
  max-height: 640px;
  min-height: 400px;
  height: calc(36vh - 64px + 200px);
}
.cover-wrapper #scroll-down {
  width: 100%;
  height: 64px;
  position: absolute;
  bottom: 100px;
  text-align: center;
  cursor: pointer;
}
.cover-wrapper #scroll-down .scroll-down-effects {
  color: #fff;
  font-size: 24px;
  line-height: 64px;
  position: absolute;
  width: 24px;
  left: calc(50% - 12px);
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  animation: scroll-down-effect 1.5s infinite;
  -webkit-animation: scroll-down-effect 1.5s infinite;
  -khtml-animation: scroll-down-effect 1.5s infinite;
  -moz-animation: scroll-down-effect 1.5s infinite;
  -o-animation: scroll-down-effect 1.5s infinite;
  -ms-animation: scroll-down-effect 1.5s infinite;
}
@-moz-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  margin-top: 64px;
  margin-bottom: 100px;
}
.cover-wrapper .cover-body,
.cover-wrapper .cover-body .top,
.cover-wrapper .cover-body .bottom {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  max-width: 100%;
}
.cover-wrapper .cover-body .bottom {
  margin-top: 32px;
}
.cover-wrapper .cover-body .title {
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
  font-size: 3.125rem;
  line-height: 1.2;
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cover-wrapper .cover-body .subtitle {
  font-size: 20px;
}
.cover-wrapper .cover-body .logo {
  max-height: 120px;
  max-width: calc(100% - 4 * 16px);
}
@media screen and (min-height: 1024px) {
  .cover-wrapper .cover-body .title {
    font-size: 3rem;
  }
  .cover-wrapper .cover-body .subtitle {
    font-size: 1.05rem;
  }
  .cover-wrapper .cover-body .logo {
    max-height: 150px;
  }
}
.cover-wrapper .cover-body .m_search {
  position: relative;
  max-width: calc(100% - 16px);
  width: 320px;
  vertical-align: middle;
}
.cover-wrapper .cover-body .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  width: 100%;
}
.cover-wrapper .cover-body .m_search .icon,
.cover-wrapper .cover-body .m_search .input {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.cover-wrapper .cover-body .m_search .icon {
  position: absolute;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  line-height: 2.5rem;
  width: 32px;
  top: 0;
  left: 5px;
  color: rgba(68,68,68,0.75);
}
.cover-wrapper .cover-body .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  height: 2.5rem;
  width: 100%;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  font-size: 0.875rem;
  -webkit-appearance: none;
  padding-left: 36px;
  border-radius: 1.4rem;
  -webkit-border-radius: 1.4rem;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(10px);
  border: none;
  color: var(--color-text);
}
@media screen and (max-width: 500px) {
  .cover-wrapper .cover-body .m_search .input {
    padding-left: 36px;
  }
}
.cover-wrapper .cover-body .m_search .input:hover {
  background: rgba(255,255,255,0.8);
}
.cover-wrapper .cover-body .m_search .input:focus {
  background: #fff;
}
.cover-wrapper .list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  -khtml-flex-wrap: wrap;
  -moz-flex-wrap: wrap;
  -o-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  align-items: stretch;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.cover-wrapper .list-h a {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 0;
  -ms-flex: 1 0;
  flex: 1 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  font-weight: 600;
}
.cover-wrapper .list-h a img {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  border-radius: 2px;
  -webkit-border-radius: 2px;
  margin: 4px;
  min-width: 40px;
  max-width: 44px;
}
@media screen and (max-width: 768px) {
  .cover-wrapper .list-h a img {
    min-width: 36px;
    max-width: 40px;
  }
}
@media screen and (max-width: 500px) {
  .cover-wrapper .list-h a img {
    margin: 2px 4px;
    min-width: 32px;
    max-width: 36px;
  }
}
@media screen and (max-width: 375px) {
  .cover-wrapper .list-h a img {
    min-width: 28px;
    max-width: 32px;
  }
}
.cover-wrapper {
  max-width: 100%;
}
.cover-wrapper.search .bottom .menu {
  margin-top: 16px;
}
.cover-wrapper.search .bottom .menu .list-h a {
  white-space: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  align-items: baseline;
  padding: 2px;
  margin: 4px;
  color: var(--color-site-inner);
  opacity: 0.75;
  -webkit-opacity: 0.75;
  -moz-opacity: 0.75;
  text-shadow: 0 1px 2px rgba(0,0,0,0.05);
  border-bottom: 2px solid transparent;
}
.cover-wrapper.search .bottom .menu .list-h a i {
  margin-right: 4px;
}
.cover-wrapper.search .bottom .menu .list-h a p {
  font-size: 0.9375rem;
}
.cover-wrapper.search .bottom .menu .list-h a:hover,
.cover-wrapper.search .bottom .menu .list-h a.active,
.cover-wrapper.search .bottom .menu .list-h a:active {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
  border-bottom: 2px solid var(--color-site-inner);
}
.cover-wrapper.dock .menu,
.cover-wrapper.featured .menu,
.cover-wrapper.focus .menu {
  border-radius: 6px;
  -webkit-border-radius: 6px;
}
.cover-wrapper.dock .menu .list-h a,
.cover-wrapper.featured .menu .list-h a,
.cover-wrapper.focus .menu .list-h a {
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  padding: 12px;
  line-height: 24px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  border-bottom: none;
  text-align: center;
  align-content: flex-end;
  color: rgba(68,68,68,0.7);
  font-size: 1.5rem;
}
@media screen and (max-width: 500px) {
  .cover-wrapper.dock .menu .list-h a,
  .cover-wrapper.featured .menu .list-h a,
  .cover-wrapper.focus .menu .list-h a {
    padding: 12px 8px;
  }
}
.cover-wrapper.dock .menu .list-h a i,
.cover-wrapper.featured .menu .list-h a i,
.cover-wrapper.focus .menu .list-h a i {
  margin: 8px;
}
.cover-wrapper.dock .menu .list-h a p,
.cover-wrapper.featured .menu .list-h a p,
.cover-wrapper.focus .menu .list-h a p {
  font-size: 0.875rem;
}
.cover-wrapper.dock .menu .list-h a.active,
.cover-wrapper.featured .menu .list-h a.active,
.cover-wrapper.focus .menu .list-h a.active {
  background: var(--color-card);
  backdrop-filter: none;
}
.cover-wrapper.dock .menu .list-h a.active i,
.cover-wrapper.featured .menu .list-h a.active i,
.cover-wrapper.focus .menu .list-h a.active i,
.cover-wrapper.dock .menu .list-h a.active i+p,
.cover-wrapper.featured .menu .list-h a.active i+p,
.cover-wrapper.focus .menu .list-h a.active i+p {
  color: #3dd9b6;
}
.cover-wrapper.dock .menu .list-h a.active img+p,
.cover-wrapper.featured .menu .list-h a.active img+p,
.cover-wrapper.focus .menu .list-h a.active img+p {
  color: var(--color-text);
}
.cover-wrapper.dock .menu .list-h a:hover,
.cover-wrapper.featured .menu .list-h a:hover,
.cover-wrapper.focus .menu .list-h a:hover {
  background: var(--color-card);
}
.cover-wrapper.dock .top {
  margin-bottom: 48px;
}
.cover-wrapper.dock .menu {
  background: rgba(255,255,255,0.5);
  position: absolute;
  bottom: 0;
  max-width: 100%;
}
.cover-wrapper.dock .menu .list-h {
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  margin: 4px;
}
.cover-wrapper.dock .menu .list-h a+a {
  margin-left: 4px;
}
@media screen and (max-width: 500px) {
  .cover-wrapper.dock .menu .list-h {
    overflow-x: scroll;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar {
    height: 0;
    width: 0;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece {
    background: transparent;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb {
    background: #3dd9b6;
    cursor: pointer;
    border-radius: 0;
    -webkit-border-radius: 0;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover {
    background: #ff5722;
  }
}
@supports (backdrop-filter: blur(20px)) {
  .cover-wrapper.dock .menu {
    background: rgba(255,255,255,0.5);
    backdrop-filter: saturate(200%) blur(20px);
  }
}
@font-face {
  font-family: 'UbuntuMono';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
@font-face {
  font-family: 'Varela Round';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
.l_header {
  position: fixed;
  z-index: 1000;
  top: 0;
  width: 100%;
  height: 64px;
  background: var(--color-card);
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.l_header.auto {
  transition: opacity 0.4s ease;
  -webkit-transition: opacity 0.4s ease;
  -khtml-transition: opacity 0.4s ease;
  -moz-transition: opacity 0.4s ease;
  -o-transition: opacity 0.4s ease;
  -ms-transition: opacity 0.4s ease;
  visibility: hidden;
}
.l_header.auto.show {
  opacity: 1 !important;
  -webkit-opacity: 1 !important;
  -moz-opacity: 1 !important;
  visibility: visible;
}
.l_header .container {
  margin-left: 16px;
  margin-right: 16px;
}
.l_header #wrapper {
  height: 100%;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.l_header #wrapper .nav-main,
.l_header #wrapper .nav-sub {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  justify-content: space-between;
  -webkit-justify-content: space-between;
  -khtml-justify-content: space-between;
  -moz-justify-content: space-between;
  -o-justify-content: space-between;
  -ms-justify-content: space-between;
  align-items: center;
}
.l_header #wrapper .nav-main {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.l_header #wrapper.sub .nav-main {
  transform: translateY(-64px);
  -webkit-transform: translateY(-64px);
  -khtml-transform: translateY(-64px);
  -moz-transform: translateY(-64px);
  -o-transform: translateY(-64px);
  -ms-transform: translateY(-64px);
}
.l_header #wrapper .nav-sub {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
  height: 64px;
  width: calc(100% - 2 * 16px);
  position: absolute;
}
.l_header #wrapper .nav-sub ::-webkit-scrollbar {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (min-width: 2048px) {
  .l_header #wrapper .nav-sub {
    max-width: 55vw;
    margin: auto;
  }
}
.l_header #wrapper.sub .nav-sub {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
}
.l_header #wrapper .title {
  position: relative;
  color: var(--color-text);
  padding-left: 24px;
  max-height: 64px;
}
.l_header #wrapper .nav-main .title {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-shrink: 0;
  line-height: 64px;
  padding: 0 24px;
  font-size: 1.25rem;
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
}
.l_header #wrapper .nav-main .title img {
  height: 64px;
}
.l_header .nav-sub {
  max-width: 1080px;
  margin: auto;
}
.l_header .nav-sub .title {
  font-weight: bold;
  font-family: UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  line-height: 1.2;
  max-height: 64px;
  white-space: normal;
  flex-shrink: 1;
}
.l_header .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  line-height: 64px;
  align-items: center;
}
.l_header .switcher .s-toc {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (max-width: 768px) {
  .l_header .switcher .s-toc {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
  }
}
.l_header .switcher >li {
  height: 48px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  margin: 2px;
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li {
    margin: 0 1px;
    height: 48px;
  }
}
.l_header .switcher >li >a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  align-items: center;
  width: 48px;
  height: 48px;
  padding: 0.85em 1.1em;
  border-radius: 100px;
  -webkit-border-radius: 100px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  color: #3dd9b6;
}
.l_header .switcher >li >a:hover {
  border: none;
}
.l_header .switcher >li >a.active,
.l_header .switcher >li >a:active {
  border: none;
  background: var(--color-site-bg);
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li >a {
    width: 36px;
    height: 48px;
  }
}
.l_header .nav-sub .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
}
.l_header .m_search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  height: 64px;
  width: 240px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (max-width: 1024px) {
  .l_header .m_search {
    width: 44px;
    min-width: 44px;
  }
  .l_header .m_search input::placeholder {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
  }
  .l_header .m_search:hover {
    width: 240px;
  }
  .l_header .m_search:hover input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (min-width: 500px) {
  .l_header .m_search:hover .input {
    width: 100%;
  }
  .l_header .m_search:hover .input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search {
    min-width: 0;
  }
  .l_header .m_search input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.l_header .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  width: 100%;
  align-items: center;
}
.l_header .m_search .icon {
  position: absolute;
  width: 36px;
  left: 5px;
  color: var(--color-meta);
}
@media screen and (max-width: 500px) {
  .l_header .m_search .icon {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
.l_header .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding-top: 8px;
  padding-bottom: 8px;
  line-height: 1.3;
  width: 100%;
  color: var(--color-text);
  background: #fafafa;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  padding-left: 40px;
  font-size: 0.875rem;
  border-radius: 8px;
  -webkit-border-radius: 8px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (min-width: 500px) {
  .l_header .m_search .input:focus {
    box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
    -webkit-box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search .input {
    background: var(--color-block);
    padding-left: 8px;
    border: none;
  }
  .l_header .m_search .input:hover,
  .l_header .m_search .input:focus {
    border: none;
  }
}
@media (max-width: 500px) {
  .l_header .m_search {
    left: 0;
    width: 0;
    overflow: hidden;
    position: absolute;
    background: #fff;
    transition: all 0.28s ease;
    -webkit-transition: all 0.28s ease;
    -khtml-transition: all 0.28s ease;
    -moz-transition: all 0.28s ease;
    -o-transition: all 0.28s ease;
    -ms-transition: all 0.28s ease;
  }
  .l_header .m_search .input {
    border-radius: 32px;
    -webkit-border-radius: 32px;
    margin-left: 16px;
    padding-left: 16px;
  }
  .l_header.z_search-open .m_search {
    width: 100%;
  }
  .l_header.z_search-open .m_search .input {
    width: calc(100% - 120px);
  }
}
ul.m-pc >li>a {
  color: inherit;
  border-bottom: 2px solid transparent;
}
ul.m-pc >li>a:active,
ul.m-pc >li>a.active {
  border-bottom: 2px solid #3dd9b6;
}
ul.m-pc li:hover >ul.list-v,
ul.list-v li:hover >ul.list-v {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.nav-list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  align-items: stretch;
}
ul.nav-list-h>li {
  position: relative;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  height: 100%;
  line-height: 2.4;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
ul.nav-list-h>li >a {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 600;
}
ul.list-v {
  z-index: 1;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: absolute;
  background: var(--color-card);
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  margin-top: -6px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  padding: 8px 0;
}
ul.list-v.show {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.list-v hr {
  margin-top: 8px;
  margin-bottom: 8px;
}
ul.list-v >li {
  white-space: nowrap;
  word-break: keep-all;
}
ul.list-v >li.header {
  font-size: 0.78125rem;
  font-weight: bold;
  line-height: 2em;
  color: var(--color-meta);
  margin: 8px 16px 4px;
}
ul.list-v >li.header i {
  margin-right: 8px;
}
ul.list-v >li ul {
  margin-left: 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: -40px;
}
ul.list-v .aplayer-container {
  min-height: 64px;
  padding: 6px 16px;
}
ul.list-v >li>a {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  color: var(--color-list);
  font-size: 0.875rem;
  font-weight: bold;
  line-height: 36px;
  padding: 0 20px 0 16px;
  text-overflow: ellipsis;
  margin: 0 4px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
@media screen and (max-width: 1024px) {
  ul.list-v >li>a {
    line-height: 40px;
  }
}
ul.list-v >li>a >i {
  margin-right: 8px;
}
ul.list-v >li>a:active,
ul.list-v >li>a.active {
  color: var(--color-list-hl);
}
ul.list-v >li>a:hover {
  color: var(--color-list-hl);
  background: var(--color-site-bg);
}
.l_header .menu >ul>li>a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding: 0 8px;
}
.l_header .menu >ul>li>a >i {
  margin-right: 4px;
}
.l_header ul.nav-list-h>li {
  color: var(--color-list);
  line-height: 64px;
}
.l_header ul.nav-list-h>li >a {
  max-height: 64px;
  overflow: hidden;
  color: inherit;
}
.l_header ul.nav-list-h>li >a:active,
.l_header ul.nav-list-h>li >a.active {
  color: #3dd9b6;
}
.l_header ul.nav-list-h>li:hover>a {
  color: var(--color-list-hl);
}
.l_header ul.nav-list-h>li i.music {
  animation: rotate-effect 1.5s linear infinite;
  -webkit-animation: rotate-effect 1.5s linear infinite;
  -khtml-animation: rotate-effect 1.5s linear infinite;
  -moz-animation: rotate-effect 1.5s linear infinite;
  -o-animation: rotate-effect 1.5s linear infinite;
  -ms-animation: rotate-effect 1.5s linear infinite;
}
@-moz-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-webkit-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-o-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
.menu-phone li ul.list-v {
  right: calc(100% - 0.5 * 16px);
}
.menu-phone li ul.list-v ul {
  right: calc(100% - 0.5 * 16px);
}
#wrapper {
  max-width: 1080px;
  margin: auto;
}
@media screen and (min-width: 2048px) {
  #wrapper {
    max-width: 55vw;
  }
}
#wrapper .menu {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
  margin: 0 16px 0 0;
}
#wrapper .menu .list-v ul {
  left: calc(100% - 0.5 * 16px);
}
.menu-phone {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: 16px;
  right: 8px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.menu-phone ul {
  right: calc(100% - 0.5 * 16px);
}
@media screen and (max-width: 500px) {
  .menu-phone {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: block;
  }
}
.l_header {
  max-width: 65vw;
  left: calc((100% - 65vw) * 0.5);
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}
@media screen and (max-width: 2048px) {
  .l_header {
    max-width: 1112px;
    left: calc((100% - 1112px) * 0.5);
  }
}
@media screen and (max-width: 1112px) {
  .l_header {
    left: 0;
    border-radius: 0;
    -webkit-border-radius: 0;
    max-width: 100%;
  }
}
@media screen and (max-width: 500px) {
  .l_header .container {
    margin-left: 0;
    margin-right: 0;
  }
  .l_header #wrapper .nav-main .title {
    padding-left: 16px;
    padding-right: 16px;
  }
  .l_header #wrapper .nav-sub {
    width: 100%;
  }
  .l_header #wrapper .nav-sub .title {
    overflow-y: scroll;
    margin-top: 2px;
    padding: 8px 16px;
  }
  .l_header #wrapper .switcher {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
    margin-right: 8px;
  }
  .l_header .menu {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
@media screen and (max-width: 500px) {
  .list-v li {
    max-width: 270px;
  }
}
#u-search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 60px 20px;
  z-index: 1001;
}
@media screen and (max-width: 680px) {
  #u-search {
    padding: 0px;
  }
}

  </style>
  <link rel="stylesheet" href="/css/style.css" media="print" onload="this.media='all';this.onload=null">
  <noscript><link rel="stylesheet" href="/css/style.css"></noscript>
  
<script>
if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode))
    document.write(
	'<style>'+
		'html{'+
			'overflow-x: hidden !important;'+
			'overflow-y: hidden !important;'+
		'}'+
		'.kill-ie{'+
			'text-align:center;'+
			'height: 100%;'+
			'margin-top: 15%;'+
			'margin-bottom: 5500%;'+
		'}'+
    '.kill-t{'+
      'font-size: 2rem;'+
    '}'+
    '.kill-c{'+
      'font-size: 1.2rem;'+
    '}'+
		'#l_header,#l_body{'+
			'display: none;'+
		'}'+
	'</style>'+
    '<div class="kill-ie">'+
        `<span class="kill-t"><b>æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨æ— æ³•è®¿é—®æœ¬ç«™</b></span><br/>`+
        `<span class="kill-c">å¾®è½¯å·²ç»äº2016å¹´ç»ˆæ­¢äº†å¯¹ Internet Explorer (IE) 10 åŠæ›´æ—©ç‰ˆæœ¬çš„æ”¯æŒï¼Œ<br/>ç»§ç»­ä½¿ç”¨å­˜åœ¨æå¤§çš„å®‰å…¨éšæ‚£ï¼Œè¯·ä½¿ç”¨å½“ä»£ä¸»æµçš„æµè§ˆå™¨è¿›è¡Œè®¿é—®ã€‚</span><br/>`+
        `<a target="_blank" rel="noopener" href="https://blogs.windows.com/windowsexperience/2021/05/19/the-future-of-internet-explorer-on-windows-10-is-in-microsoft-edge/"><strong>äº†è§£è¯¦æƒ… ></strong></a>`+
    '</div>');
</script>


<noscript>
	<style>
		html{
			overflow-x: hidden !important;
			overflow-y: hidden !important;
		}
		.kill-noscript{
			text-align:center;
			height: 100%;
			margin-top: 15%;
			margin-bottom: 5500%;
		}
    .kill-t{
      font-size: 2rem;
    }
    .kill-c{
      font-size: 1.2rem;
    }
		#l_header,#l_body{
			display: none;
		}
	</style>
    <div class="kill-noscript">
        <span class="kill-t"><b>æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨æ— æ³•è®¿é—®æœ¬ç«™</b></span><br/>
        <span class="kill-c">æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</span><br/>
        <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=å¯ç”¨JavaScript"><strong>äº†è§£è¯¦æƒ… ></strong></a>
    </div>
</noscript>


  <script>
  /************è¿™ä¸ªæ–‡ä»¶å­˜æ”¾ä¸éœ€è¦é‡è½½çš„å…¨å±€å˜é‡å’Œå…¨å±€å‡½æ•°*********/
  window.volantis = {}; // volantis å…¨å±€å˜é‡
  volantis.debug = "env"; // è°ƒè¯•æ¨¡å¼
  volantis.dom = {}; // é¡µé¢Dom see: /source/js/app.js etc.

  volantis.GLOBAL_CONFIG ={
    debug: "env",
    cdn: {"js":{"app":"/js/app.js","parallax":"/js/plugins/parallax.js","rightMenu":"/js/plugins/rightMenu.js","rightMenus":"/js/plugins/rightMenus.js","sites":"/js/plugins/tags/sites.js","friends":"/js/plugins/tags/friends.js","contributors":"/js/plugins/tags/contributors.js","search":"/js/search/hexo.js"},"css":{"style":"/css/style.css"}},
    default: {"avatar":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg","link":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/link/8f277b4ee0ecd.svg","cover":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg","image":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/image/2659360.svg"},
    lastupdate: new Date(1721378675930),
    sidebar: {
      for_page: ["blogger","category","tagcloud","donate"],
      for_post: ["toc"],
      webinfo: {
        lastupd: {
          enable: true,
          friendlyShow: true
        },
        runtime: {
          data: "2020/01/01",
          unit: "å¤©"
        }
      }
    },
    plugins: {
      message: {"enable":true,"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/css/iziToast.min.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/js/iziToast.min.js","icon":{"default":"fa-solid fa-info-circle light-blue","quection":"fa-solid fa-question-circle light-blue"},"time":{"default":5000,"quection":20000},"position":"topRight","transitionIn":"bounceInLeft","transitionOut":"fadeOutRight","titleColor":"var(--color-text)","messageColor":"var(--color-text)","backgroundColor":"var(--color-card)","zindex":2147483647,"copyright":{"enable":true,"title":"çŸ¥è¯†å…±äº«è®¸å¯åè®®","message":"è¯·éµå®ˆ CC BY-NC-SA 4.0 åè®®ã€‚","icon":"far fa-copyright light-blue"},"aplayer":{"enable":true,"play":"fa-solid fa-play","pause":"fa-solid fa-pause"},"rightmenu":{"enable":true,"notice":true}},
      fancybox: {"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.umd.js"},
      
      
      
    }
  }

  /******************** volantis.EventListener ********************************/
  // äº‹ä»¶ç›‘å¬å™¨ see: /source/js/app.js
  volantis.EventListener = {}
  // è¿™é‡Œå­˜æ”¾pjaxåˆ‡æ¢é¡µé¢æ—¶å°†è¢«ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨
  volantis.EventListener.list = []
  //æ„é€ æ–¹æ³•
  function volantisEventListener(type, f, ele) {
    this.type = type
    this.f = f
    this.ele = ele
  }
  // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
  volantis.EventListener.remove = () => {
    volantis.EventListener.list.forEach(function (i) {
      i.ele.removeEventListener(i.type, i.f, false)
    })
    volantis.EventListener.list = []
  }
  /******************** volantis.dom.$ ********************************/
  // æ³¨ï¼šè¿™é‡Œæ²¡æœ‰é€‰æ‹©å™¨ï¼Œä¹Ÿæ²¡æœ‰forEachä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªdomï¼Œè¿™é‡Œé‡æ–°å°è£…ä¸»é¢˜å¸¸ç”¨çš„domæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯domå¯¹è±¡ï¼Œå¯¹è±¡åŒ…å«äº†ä»¥ä¸‹æ–¹æ³•ï¼ŒåŒæ—¶ä¿ç•™domçš„åŸç”ŸAPI
  function volantisDom(ele) {
    if (!ele) ele = document.createElement("div")
    this.ele = ele;
    // ==============================================================
    this.ele.find = (c) => {
      let q = this.ele.querySelector(c)
      if (q)
        return new volantisDom(q)
    }
    // ==============================================================
    this.ele.hasClass = (c) => {
      return this.ele.className.match(new RegExp('(\\s|^)' + c + '(\\s|$)'));
    }
    this.ele.addClass = (c) => {
      this.ele.classList.add(c);
      return this.ele
    }
    this.ele.removeClass = (c) => {
      this.ele.classList.remove(c);
      return this.ele
    }
    this.ele.toggleClass = (c) => {
      if (this.ele.hasClass(c)) {
        this.ele.removeClass(c)
      } else {
        this.ele.addClass(c)
      }
      return this.ele
    }
    // ==============================================================
    // å‚æ•° r ä¸º true è¡¨ç¤ºpjaxåˆ‡æ¢é¡µé¢æ—¶äº‹ä»¶ç›‘å¬å™¨å°†è¢«ç§»é™¤ï¼Œfalseä¸ç§»é™¤
    this.ele.on = (c, f, r = 1) => {
      this.ele.addEventListener(c, f, false)
      if (r) {
        volantis.EventListener.list.push(new volantisEventListener(c, f, this.ele))
      }
      return this.ele
    }
    this.ele.click = (f, r) => {
      this.ele.on("click", f, r)
      return this.ele
    }
    this.ele.scroll = (f, r) => {
      this.ele.on("scroll", f, r)
      return this.ele
    }
    // ==============================================================
    this.ele.html = (c) => {
      // if(c=== undefined){
      //   return this.ele.innerHTML
      // }else{
      this.ele.innerHTML = c
      return this.ele
      // }
    }
    // ==============================================================
    this.ele.hide = (c) => {
      this.ele.style.display = "none"
      return this.ele
    }
    this.ele.show = (c) => {
      this.ele.style.display = "block"
      return this.ele
    }
    // ==============================================================
    return this.ele
  }
  volantis.dom.$ = (ele) => {
    return !!ele ? new volantisDom(ele) : null;
  }
  /******************** RunItem ********************************/
  function RunItem() {
    this.list = []; // å­˜æ”¾å›è°ƒå‡½æ•°
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = ()=>{
          volantis.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) =>{
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index,1);
        }
      }
    }
    // æ„é€ ä¸€ä¸ªå¯ä»¥runçš„å¯¹è±¡
    function Item(fn, name) {
      // å‡½æ•°åç§°
      this.name = name || fn.name;
      // runæ–¹æ³•
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }
  /******************** Pjax ********************************/
  // /layout/_plugins/pjax/index.ejs
  // volantis.pjax.send(callBack[,"callBackName"]) ä¼ å…¥pjax:sendå›è°ƒå‡½æ•°
  // volantis.pjax.push(callBack[,"callBackName"]) ä¼ å…¥pjax:completeå›è°ƒå‡½æ•°
  // volantis.pjax.error(callBack[,"callBackName"]) ä¼ å…¥pjax:errorå›è°ƒå‡½æ•°
  volantis.pjax = {};
  volantis.pjax.method = {
    complete: new RunItem(),
    error: new RunItem(),
    send: new RunItem(),
  };
  volantis.pjax = Object.assign(volantis.pjax, {
    push: volantis.pjax.method.complete.push,
    error: volantis.pjax.method.error.push,
    send: volantis.pjax.method.send.push,
  });
  /******************** RightMenu ********************************/
  // volantis.rightmenu.handle(callBack[,"callBackName"]) å¤–éƒ¨èœå•é¡¹æ§åˆ¶
  // å¯åœ¨ volantis.mouseEvent å¤„è·å–å³é”®äº‹ä»¶
  volantis.rightmenu = {};
  volantis.rightmenu.method = {
    handle: new RunItem(),
  }
  volantis.rightmenu = Object.assign(volantis.rightmenu, {
    handle: volantis.rightmenu.method.handle.push,
  });
  /********************  Dark Mode  ********************************/
  // /layout/_partial/scripts/darkmode.ejs
  // volantis.dark.mode å½“å‰æ¨¡å¼ dark or light
  // volantis.dark.toggle() æš—é»‘æ¨¡å¼è§¦å‘å™¨
  // volantis.dark.push(callBack[,"callBackName"]) ä¼ å…¥è§¦å‘å™¨å›è°ƒå‡½æ•°
  volantis.dark = {};
  volantis.dark.method = {
    toggle: new RunItem(),
  };
  volantis.dark = Object.assign(volantis.dark, {
    push: volantis.dark.method.toggle.push,
  });
  /********************  Message  ********************************/
  // VolantisApp.message
  /********************  isMobile  ********************************/
  // /source/js/app.js
  // volantis.isMobile
  // volantis.isMobileOld
  /********************è„šæœ¬åŠ¨æ€åŠ è½½å‡½æ•°********************************/
  // volantis.js(src, cb)  cb å¯ä»¥ä¼ å…¥onloadå›è°ƒå‡½æ•° æˆ–è€… JSONå¯¹è±¡ ä¾‹å¦‚: volantis.js("src", ()=>{}) æˆ– volantis.js("src", {defer:true,onload:()=>{}})
  // volantis.css(src)

  // è¿”å›Promiseå¯¹è±¡ï¼Œå¦‚ä¸‹æ–¹æ³•åŒæ­¥åŠ è½½èµ„æºï¼Œè¿™åˆ©äºå¤„ç†æ–‡ä»¶èµ„æºä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ï¼šAPlayer éœ€è¦åœ¨ MetingJS ä¹‹å‰åŠ è½½
  // (async () => {
  //     await volantis.js("...theme.plugins.aplayer.js.aplayer...")
  //     await volantis.js("...theme.plugins.aplayer.js.meting...")
  // })();

  // å·²ç»åŠ å…¥äº†setTimeout
  volantis.js = (src, cb) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("head")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }
  volantis.css = (src) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  }
  /********************æŒ‰éœ€åŠ è½½çš„æ’ä»¶********************************/
  // volantis.import.jQuery().then(()=>{})
  volantis.import = {
    jQuery: () => {
      if (typeof jQuery == "undefined") {
        return volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/jquery/dist/jquery.min.js")
      } else {
        return new Promise(resolve => {
          resolve()
        });
      }
    }
  }
  /********************** requestAnimationFrame ********************************/
  // 1ã€requestAnimationFrame ä¼šæŠŠæ¯ä¸€å¸§ä¸­çš„æ‰€æœ‰ DOM æ“ä½œé›†ä¸­èµ·æ¥ï¼Œåœ¨ä¸€æ¬¡é‡ç»˜æˆ–å›æµä¸­å°±å®Œæˆï¼Œå¹¶ä¸”é‡ç»˜æˆ–å›æµçš„æ—¶é—´é—´éš”ç´§ç´§è·Ÿéšæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé¢‘ç‡ä¸ºæ¯ç§’60å¸§ã€‚
  // 2ã€åœ¨éšè—æˆ–ä¸å¯è§çš„å…ƒç´ ä¸­ï¼ŒrequestAnimationFrame å°†ä¸ä¼šè¿›è¡Œé‡ç»˜æˆ–å›æµï¼Œè¿™å½“ç„¶å°±æ„å‘³ç€æ›´å°‘çš„çš„ cpuï¼Œgpu å’Œå†…å­˜ä½¿ç”¨é‡ã€‚
  volantis.requestAnimationFrame = (fn)=>{
    if (!window.requestAnimationFrame) {
      window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
    }
    window.requestAnimationFrame(fn)
  }
  /************************ layoutHelper *****************************************/
  volantis.layoutHelper = (helper, html, opt)=>{
    opt = Object.assign({clean:false, pjax:true}, opt)
    function myhelper(helper, html, clean) {
      volantis.tempDiv = document.createElement("div");
      volantis.tempDiv.innerHTML = html;
      let layoutHelper = document.querySelector("#layoutHelper-"+helper)
      if (layoutHelper) {
        if (clean) {
          layoutHelper.innerHTML = ""
        }
        layoutHelper.append(volantis.tempDiv);
      }
    }
    myhelper(helper, html, opt.clean)
    if (opt.pjax) {
      volantis.pjax.push(()=>{
        myhelper(helper, html, opt.clean)
      },"layoutHelper-"+helper)
    }
  }
  /****************************** æ»šåŠ¨äº‹ä»¶å¤„ç† ****************************************/
  volantis.scroll = {
    engine: new RunItem(),
    unengine: new RunItem(),
  };
  volantis.scroll = Object.assign(volantis.scroll, {
    push: volantis.scroll.engine.push,
  });
  // æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨çš„è·ç¦»
  volantis.scroll.getScrollTop = () =>{
    let scrollPos;
    if (window.pageYOffset) {
      scrollPos = window.pageYOffset;
    } else if (document.compatMode && document.compatMode != 'BackCompat') {
      scrollPos = document.documentElement.scrollTop;
    } else if (document.body) {
      scrollPos = document.body.scrollTop;
    }
    return scrollPos;
  }
  // ä½¿ç”¨ requestAnimationFrame å¤„ç†æ»šåŠ¨äº‹ä»¶
  // `volantis.scroll.del` ä¸­å­˜å‚¨äº†ä¸€ä¸ªæ•°å€¼, è¯¥æ•°å€¼æ£€æµ‹ä¸€å®šæ—¶é—´é—´éš”å†…æ»šåŠ¨æ¡æ»šåŠ¨çš„ä½ç§», æ•°å€¼çš„æ£€æµ‹é¢‘ç‡æ˜¯æµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡. æ•°å€¼ä¸ºæ­£æ•°æ—¶, è¡¨ç¤ºå‘ä¸‹æ»šåŠ¨. æ•°å€¼ä¸ºè´Ÿæ•°æ—¶, è¡¨ç¤ºå‘ä¸Šæ»šåŠ¨.
  volantis.scroll.handleScrollEvents = () => {
    volantis.scroll.lastScrollTop = volantis.scroll.getScrollTop()
    function loop() {
      const scrollTop = volantis.scroll.getScrollTop();
      if (volantis.scroll.lastScrollTop !== scrollTop) {
        volantis.scroll.del = scrollTop - volantis.scroll.lastScrollTop;
        volantis.scroll.lastScrollTop = scrollTop;
        // if (volantis.scroll.del > 0) {
        //   console.log("å‘ä¸‹æ»šåŠ¨");
        // } else {
        //   console.log("å‘ä¸Šæ»šåŠ¨");
        // }
        // æ³¨é”€è¿‡æœŸçš„unengineæœªæ»šåŠ¨äº‹ä»¶
        volantis.scroll.unengine.list=[]
        volantis.scroll.engine.start();
      }else{
        volantis.scroll.unengine.start();
      }
      volantis.requestAnimationFrame(loop)
    }
    volantis.requestAnimationFrame(loop)
  }
  volantis.scroll.handleScrollEvents()
  volantis.scroll.ele = null;
  // è§¦å‘é¡µé¢æ»šåŠ¨è‡³ç›®æ ‡å…ƒç´ ä½ç½®
  volantis.scroll.to = (ele, option = {}) => {
    if (!ele) return;
    volantis.scroll.ele = ele;
    // é»˜è®¤é…ç½®
    opt = {
      top: ele.getBoundingClientRect().top + document.documentElement.scrollTop,
      behavior: "smooth"
    }
    // å®šä¹‰é…ç½®
    if ("top" in option) {
      opt.top = option.top
    }
    if ("behavior" in option) {
      opt.behavior = option.behavior
    }
    if ("addTop" in option) {
      opt.top += option.addTop
    }
    if (!("observerDic" in option)) {
      option.observerDic = 100
    }
    // æ»šåŠ¨
    window.scrollTo(opt);
    // ç›‘è§†å™¨
    // ç›‘è§†å¹¶çŸ«æ­£å…ƒç´ æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®
    // ç”¨äºå¤„ç† lazyload å¼•èµ·çš„ cls å¯¼è‡´çš„å®šä½å¤±è´¥é—®é¢˜
    // option.observer = false
    if (option.observer) {
      setTimeout(() => {
        if (volantis.scroll.ele != ele) {
          return
        }
        volantis.scroll.unengine.push(() => {
          let me = ele.getBoundingClientRect().top
          if(!(me >= -option.observerDic && me <= option.observerDic)){
            volantis.scroll.to(ele, option)
          }
          volantis.scroll.unengine.remove("unengineObserver")
        },"unengineObserver")
      },1000)
    }
  }
  /********************** Content Visibility ********************************/
  // è§ source/css/first.styl å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ åˆ é™¤ .post-story å³å¯
  // ä¸€ä¸ªå…ƒç´ è¢«å£°æ˜ content-visibility å±æ€§å å¦‚æœå…ƒç´ ä¸åœ¨ viewport ä¸­ æµè§ˆå™¨ä¸ä¼šè®¡ç®—å…¶åä»£å…ƒç´ æ ·å¼å’Œå±æ€§ ä»è€ŒèŠ‚çœ Style & Layout è€—æ—¶
  // content-visibility çš„å‰¯ä½œç”¨: é”šç‚¹å¤±æ•ˆ ç­‰ç­‰(å®éªŒåˆæœŸ æš‚ä¸æ˜ç¡®), ä½¿ç”¨æ­¤æ–¹æ³•æ¸…é™¤æ ·å¼
  volantis.cleanContentVisibility = ()=>{
    if (document.querySelector(".post-story")) {
      console.log("cleanContentVisibility");
      document.querySelectorAll(".post-story").forEach(e=>{
        e.classList.remove("post-story")
      })
    }
  }
  /******************************************************************************/
  /******************************************************************************/
  /******************************************************************************/
  //å›¾åƒåŠ è½½å‡ºé”™æ—¶çš„å¤„ç†
  function errorImgAvatar(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg";
    img.onerror = null;
  }
  function errorImgCover(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg";
    img.onerror = null;
  }
  /******************************************************************************/
</script>

  <!-- import head_end begin -->
  <!-- import head_end end -->
  <!-- Custom Files headEnd begin-->
  
  <!-- Custom Files headEnd end-->
  <!-- front-matter head_end begin -->
  <!-- front-matter head_end end -->

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
  <body itemscope itemtype="http://schema.org/WebPage">
    <!-- import body_begin begin-->
    <!-- import body_begin end-->
    <!-- Custom Files bodyBegin begin-->
    
    <!-- Custom Files bodyBegin end-->
    <!-- front-matter body_begin begin -->
    <!-- front-matter body_begin end -->
    <header itemscope itemtype="http://schema.org/WPHeader" id="l_header" class="l_header auto shadow floatable blur show" style='opacity: 0' >
  <div class='container'>
  <div id='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
        <li><a id="s-comment" class="fa-solid fa-comments fa-fw" target="_self"  href="/" onclick="return false;" title="comment"></a></li>
        
          <li><a id="s-toc" class="s-toc fa-solid fa-list fa-fw" target="_self"  href="/" onclick="return false;" title="toc"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
            <img no-lazy class='logo' src='https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/Logo-NavBar@3x.png'/>
          
          
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h m-pc'>
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="åšå®¢"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fa-solid fa-rss fa-fw'></i>åšå®¢
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/categories/" title="åˆ†ç±»"
                  
                  
                  
                    active-action="action-categories"
                  >
                  <i class='fa-solid fa-folder-open fa-fw'></i>åˆ†ç±»
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="æ ‡ç­¾"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fa-solid fa-tags fa-fw'></i>æ ‡ç­¾
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="å½’æ¡£"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fa-solid fa-archive fa-fw'></i>å½’æ¡£
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/friends/" title="å‹é“¾"
                  
                  
                  
                    active-action="action-friends"
                  >
                  <i class='fa-solid fa-link fa-fw'></i>å‹é“¾
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/about/" title="å…³äº"
                  
                  
                  
                    active-action="action-about"
                  >
                  <i class='fa-solid fa-info-circle fa-fw'></i>å…³äº
                </a>
                
              </li>
            
          
          
				</ul>
			</div>
      
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fa-solid fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>
      

			<ul class='switcher nav-list-h m-phone'>
				
					<li><a class="s-search fa-solid fa-search fa-fw" target="_self" href="/" onclick="return false;" title="search"></a></li>
				
				<li>
          <a class="s-menu fa-solid fa-bars fa-fw" target="_self" href="/" onclick="return false;" title="menu"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="åšå®¢"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fa-solid fa-rss fa-fw'></i>åšå®¢
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/categories/" title="åˆ†ç±»"
                  
                  
                  
                    active-action="action-categories"
                  >
                  <i class='fa-solid fa-folder-open fa-fw'></i>åˆ†ç±»
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="æ ‡ç­¾"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fa-solid fa-tags fa-fw'></i>æ ‡ç­¾
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="å½’æ¡£"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fa-solid fa-archive fa-fw'></i>å½’æ¡£
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/friends/" title="å‹é“¾"
                  
                  
                  
                    active-action="action-friends"
                  >
                  <i class='fa-solid fa-link fa-fw'></i>å‹é“¾
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/about/" title="å…³äº"
                  
                  
                  
                    active-action="action-about"
                  >
                  <i class='fa-solid fa-info-circle fa-fw'></i>å…³äº
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>

      <!-- Custom Files header begin -->
      
      <!-- Custom Files header end -->
		</div>
	</div>
  </div>
</header>

    <div id="l_body">
      <div id="l_cover">
  
    
      <!-- see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs -->
      <div id="none" class='cover-wrapper post dock' style="display: none;">
        
  <div class='cover-bg lazyload placeholder' data-bg="https://gcore.jsdelivr.net/gh/MHG-LAB/cron@gh-pages/bing/bing.jpg"></div>

<div class='cover-body'>
  <div class='top'>
    
    
      <p class="title">Volantis</p>
    
    
  </div>
  <div class='bottom'>
    <div class='menu navigation'>
      <div class='list-h'>
        
          
            <a href="/v4/getting-started/"
              
              
              active-action="action-v4getting-started">
              <img src='https://unpkg.com/volantis-static@0.0.1654736714924/media/twemoji/assets/svg/1f5c3.svg'><p>æ–‡æ¡£</p>
            </a>
          
            <a href="/faqs/"
              
              
              active-action="action-faqs">
              <img src='https://unpkg.com/volantis-static@0.0.1654736714924/media/twemoji/assets/svg/1f516.svg'><p>å¸®åŠ©</p>
            </a>
          
            <a href="/examples/"
              
              
              active-action="action-examples">
              <img src='https://unpkg.com/volantis-static@0.0.1654736714924/media/twemoji/assets/svg/1f396.svg'><p>ç¤ºä¾‹</p>
            </a>
          
            <a href="/contributors/"
              
              
              active-action="action-contributors">
              <img src='https://unpkg.com/volantis-static@0.0.1654736714924/media/twemoji/assets/svg/1f389.svg'><p>ç¤¾åŒº</p>
            </a>
          
            <a href="/archives/"
              
              
              active-action="action-archives">
              <img src='https://unpkg.com/volantis-static@0.0.1654736714924/media/twemoji/assets/svg/1f4f0.svg'><p>åšå®¢</p>
            </a>
          
            <a target="_blank" rel="noopener" href="https://github.com/volantis-x/hexo-theme-volantis/"
              
              
              active-action="action-https:githubcomvolantis-xhexo-theme-volantis">
              <img src='https://unpkg.com/volantis-static@0.0.1654736714924/media/twemoji/assets/svg/1f9ec.svg'><p>æºç </p>
            </a>
          
        
      </div>
    </div>
  </div>
</div>

        <div id="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
      </div>
    
  
</div>

      <div id="safearea">
        <div class="body-wrapper">
          
<div id="l_main" class=''>
  <article itemscope itemtype="http://schema.org/Article" class="article post white-box reveal md shadow floatable blur article-type-post" id="post" itemscope itemprop="blogPost">
  <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/">
  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="QingQiu'Blog">
  </span>
  <span hidden itemprop="post" itemscope itemtype="http://schema.org/Post">
    <meta itemprop="name" content="QingQiu'Blog">
    <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
  </span>
  


  
    <span hidden>
      <meta itemprop="image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
    </span>
  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title" itemprop="name headline">
        æ•°æ®åº“
      </h1>
      <div class='new-meta-box'>
        
          
            
<div class='new-meta-item author' itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a itemprop="url" class='author' href="/" rel="nofollow">
    <img itemprop="image" src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/apple-touch-icon.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/apple-touch-icon.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
    <p itemprop="name">è¯·è®¾ç½®æ–‡ç« ä½œè€…</p>
  </a>
</div>

          
        
          
            
  <div class='new-meta-item category'>
    <i class="fa-solid fa-folder-open fa-fw" aria-hidden="true"></i>
    <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a>
    
      <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing">
        <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url"><span itemprop="name">æ•°æ®åº“</span></a>
      </span>
    
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateCreated datePublished" datetime="2023-08-02T15:36:58+08:00">
  <a class='notlink'>
    <i class="fa-solid fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2023å¹´8æœˆ2æ—¥</p>
  </a>
</div>

          
        
          
            



          
        
        <!-- Custom Files topMeta begin-->
        
        <!-- Custom Files topMeta end-->
      </div>
    
  </div>


  <div id="layoutHelper-page-plugins"></div>
  <div id="post-body" itemprop="articleBody">
    <h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><p>æ•°æ®åº“åŒæ­¥é—®é¢˜ï¼š</p>
<h2 id="Mysqlé¢è¯•æŒ‡å—"><a href="#Mysqlé¢è¯•æŒ‡å—" class="headerlink" title="Mysqlé¢è¯•æŒ‡å—"></a>Mysqlé¢è¯•æŒ‡å—</h2><p><a target="_blank" rel="noopener" href="https://javabetter.cn/interview/mysql-60.html">60 é“ MySQL ç²¾é€‰é¢è¯•é¢˜ğŸ‘ | äºŒå“¥çš„Javaè¿›é˜¶ä¹‹è·¯ (javabetter.cn)</a></p>
<h3 id="ä»‹ç»ä¸€ä¸‹MySQLçš„ç´¢å¼•"><a href="#ä»‹ç»ä¸€ä¸‹MySQLçš„ç´¢å¼•" class="headerlink" title="ä»‹ç»ä¸€ä¸‹MySQLçš„ç´¢å¼•"></a>ä»‹ç»ä¸€ä¸‹MySQLçš„ç´¢å¼•</h3><p>MySQLçš„ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥å¸®åŠ©MySQLå¿«é€Ÿæç¬‘çš„æŸ¥è¯¢ï¼Œæ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p>
<h3 id="B-æ ‘çš„ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆ-MySQL-è¦ä½¿ç”¨-B-æ ‘"><a href="#B-æ ‘çš„ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆ-MySQL-è¦ä½¿ç”¨-B-æ ‘" class="headerlink" title="B+æ ‘çš„ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆ MySQL è¦ä½¿ç”¨ B+æ ‘"></a>B+æ ‘çš„ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆ MySQL è¦ä½¿ç”¨ B+æ ‘</h3><p>ç‰¹ç‚¹ï¼š </p>
<ol>
<li>åªæœ‰å¶å­èŠ‚ç‚¹ä¼šå­˜æ”¾å®é™…çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç´¢å¼•+è®°å½•ï¼Œéå¶å­èŠ‚åªå­˜æ”¾ç´¢å¼•</li>
<li>æ‰€æœ‰ç´¢å¼•éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸­å‡ºç°ï¼Œå¶å­èŠ‚ç‚¹ä¹‹é—´æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨</li>
<li>éå¶å­èŠ‚ç‚¹çš„ç´¢å¼•ä¹Ÿä¼šåŒæ—¶å­˜åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”æ˜¯å¶å­èŠ‚ç‚¹ä¸­ç´¢å¼•ä¸­çš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼</li>
<li>éå¶å­èŠ‚ç‚¹æœ‰å¤šå°‘ä¸ªå­èŠ‚ç‚¹ï¼Œå°±æœ‰å¤šå°‘ä¸ªç´¢å¼•</li>
</ol>
<p>çœ‹çœ‹å‡ ä¸ªéš”ç¦»çº§åˆ«å’Œè§£å†³åŠæ³•<br>GBKhå’ŒUTF-8ä¸æ˜¯ä¸€ç§ç¼–ç æ–¹å¼<br>mysqlä¸­ä½¿ç”¨çš„utf-8æ˜¯utf8mb3 ä½¿ç”¨1<del>3ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦<br>è€Œutf-8ä½¿ç”¨1</del>4<br>MVCC ï¼ˆMulti-Version Concurrency Control ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰MVCC ï¼ˆMulti-Version Concurrency Control ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æŒ‡çš„å°±æ˜¯åœ¨ä½¿ç”¨ READ COMMITTD ã€ REPEATABLE READ è¿™ä¸¤ç§éš”ç¦»çº§åˆ«çš„äº‹åŠ¡åœ¨æ‰§è¡Œæ™®é€šçš„ SEELCT æ“ä½œæ—¶è®¿é—®è®°å½•çš„ç‰ˆæœ¬é“¾çš„è¿‡ç¨‹ï¼Œè¿™æ ·å­å¯ä»¥ä½¿ä¸åŒäº‹åŠ¡çš„ è¯»-å†™ ã€ å†™-è¯» æ“ä½œå¹¶å‘æ‰§è¡Œï¼Œä»è€Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<ul>
<li>sqlè¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼šmysql8.0 clientå‘é€sqlè¯­å¥-&gt;sqlè§£æ-&gt;æ‰§è¡Œä¼˜åŒ–å’Œæ‰§è¡Œè®¡åˆ’ç”Ÿæˆ-&gt;æ‰§è¡Œ-&gt;è¿”å›ç»“æœ</li>
<li>éš”ç¦»ç­‰çº§ï¼š<img src="/2023/08/02/hou-duan/shu-ju-ku/%E9%9A%94%E7%A6%BB%E7%AD%89%E7%BA%A7.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E9%9A%94%E7%A6%BB%E7%AD%89%E7%BA%A7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="|575"><ul>
<li>MySQLé»˜è®¤æ˜¯å¯é‡å¤è¯»ï¼Œå¯ä»¥è§£å†³å¹»è¯»ã€‚ç„¶åä¸²è¡ŒåŒ–æ˜¯åŸºäºé”å®ç°çš„ï¼Œå¯é‡å¤è¯»å’Œè¯»å·²æäº¤éƒ½æ˜¯åŸºäºMVCCå®ç°çš„ï¼Œå¯é‡å¤è¯»åœ¨å½“å‰è¯»çš„æƒ…å†µä¸‹éœ€è¦åŠ é”æ‰èƒ½ä¿è¯ä¸ä¼šå‡ºç°å¹»è¯»ï¼Œæ‰€ä»¥ä»…ä»…ä½¿ç”¨MVCCä¸èƒ½è§£å†³å¹»è¯»</li>
</ul>
</li>
<li>æ—¥å¿—ï¼š<ul>
<li>ç§ç±»ï¼šé”™è¯¯æ—¥å¿—ï¼ŒæŸ¥è¯¢æ—¥å¿—ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—ï¼ŒBinary Log, ä¸­ç»§æ—¥å¿—ï¼Œäº‹åŠ¡æ—¥å¿—</li>
</ul>
<ol>
<li>undo log æœ‰ä¸¤ç§<ul>
<li>insert undo log æ‰§è¡Œinsert æ“ä½œäº§ç”Ÿçš„undo log isnertåªå¯¹äº‹åŠ¡æœ¬èº«å¯è§ï¼Œå…¶ä»–äº‹åŠ¡ä¸å¯è§ï¼Œæ‰€ä»¥äº‹åŠ¡æäº¤ä¹‹åå¯ä»¥ç›´æ¥åˆ é™¤</li>
<li>update undo log æä¾›MVCCæœºåˆ¶ï¼Œæäº¤æ—¶æ”¾å…¥undo log é“¾è¡¨ï¼Œç­‰å¾…purgeçº¿ç¨‹è¿›è¡Œæœ€åçš„åˆ é™¤<ul>
<li>purgeï¼šä¼šå®šæœŸæ£€æŸ¥ undo log å’Œæ•°æ®è¡Œï¼Œæ‰¾å‡ºé‚£äº›å·²ç»ä¸å†éœ€è¦çš„ï¼Œç„¶åå°†å®ƒä»¬ä»ç£ç›˜ä¸Šåˆ é™¤ï¼Œä»è€Œå›æ”¶ç£ç›˜ç©ºé—´ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>æ…¢æŸ¥è¯¢æ—¥å¿—ï¼šè®°å½•æ‰§è¡Œæ—¶é—´æŸ¥è¿‡æŒ‡å®šé˜ˆå€¼çš„æ‰€æœ‰SQLæŸ¥è¯¢ï¼Œ</li>
<li>Binlog: ä¸»è¦è®°å½•äº†æ•°æ®åº“çš„ä¿®æ”¹æ“ä½œï¼Œäº‹åŠ¡ä¿¡æ¯å’Œä¸€äº›ç‰¹æ®Šäº‹ä»¶ï¼šæœåŠ¡å™¨çš„å¯åŠ¨å’Œåœæ­¢ï¼Œä¸»ä»å¤åˆ¶çŠ¶æ€å˜æ›´äº‹ä»¶ç­‰</li>
<li>redo log å¦‚ä½•ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ï¼Ÿ <ul>
<li>äº‹åŠ¡æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆè®°å½•åœ¨redo logè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ•°æ®æ–‡ä»¶ï¼Œredo log ä¿å­˜åœ¨å†…å­˜ä¸­çš„log bufferï¼Œç„¶åè¢«å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ä¸­çš„redo log fileä¸­</li>
<li>äº‹åŠ¡æäº¤æ—¶ï¼Œç›¸å…³çš„æ•°æ®è¿˜æ²¡æœ‰æ²¡åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œåªè¦ä¿è¯redo log è¢«åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼Œå³ä½¿ç³»ç»Ÿåœ¨äº‹åŠ¡æäº¤åå´©æºƒäº†ï¼Œä¹Ÿå¯ä»¥åœ¨ç³»ç»Ÿé‡å¯ä¹‹åé€šè¿‡redo log é‡Œæ¢å¤æ•°æ®ï¼Œ</li>
<li>ä¸ºä»€ä¹ˆè¦å…ˆå†™å…¥redo log ï¼Œå› ä¸ºredo log æ—¶é¡ºåºå†™å…¥çš„ï¼Œè€Œå†™æ•°æ®éœ€è¦æ¶‰åŠéšæœºI/Oï¼Œèƒ½å¤Ÿæé«˜æ•°æ®åº“çš„æ€§èƒ½</li>
</ul>
</li>
<li>é¡µè¡¨ä¿®æ”¹ä¹‹åä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ·ç›˜ï¼Ÿå› ä¸ºåˆ·æ–°åˆ°ç£ç›˜ä¸­éå¸¸è€—æ—¶ï¼Œæ‰€ä»¥ä½¿ç”¨é¢„å†™å¼æ—¥å¿—çš„æŠ€æœ¯ï¼Œå…ˆå†™å…¥redologï¼Œä¹‹åå¼‚æ­¥åˆ·æ–°å†…å­˜ä¸­çš„redologåˆ°ç£ç›˜ä¸­ï¼Œä¹‹åå†™å…¥æ•°æ®åˆ°å†…å­˜ä¸­çš„æ•°æ®é¡µä¸­ï¼Œä¹‹åå†™å…¥binlogï¼Œå†…å­˜ä¸­çš„æ•°æ®é¡µä¼šåœ¨é€‚å½“å®é™…åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚</li>
<li>binlogå’Œredologçš„åŒºåˆ«ï¼š<ul>
<li>ç”¨é€”ä¸Šï¼šbinlogç”¨äºä¸»ä»å¤åˆ¶å’Œæ•°æ®æ¢å¤ï¼Œå¤åˆ¶æ—¶ä¼šæŠŠä¸»æœåŠ¡å™¨ä¸Šçš„binlogå‘ç»™ä»æœåŠ¡å™¨ï¼Œç„¶åä»æœåŠ¡å™¨æ ¹æ®binlogä¸­çš„è®°å½•æ¥æ›´æ–°;è€Œredo log ç”¨äºä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§</li>
<li>æ ¼å¼ï¼šbinlog:å¯ä»¥æ˜¯è¯­å¥æ ¼å¼æˆ–è€…è¡Œæ ¼å¼ï¼Œè¯­å¥è®°å½•SQLæ‰§è¡Œçš„è¯­å¥ï¼Œè¡Œæ ¼å¼è®°å½•æ¯ä¸€è¡Œçš„æ•°æ®å˜åŒ–ã€‚redo logä»¥ç‰©ç†æ ¼å¼è®°å½•æ•°æ®é¡µçš„ä¿®æ”¹ï¼Œè®°å½•çš„æ˜¯æŸä¸ªæ•°æ®é¡µçš„æŸä¸ªä½ç½®ï¼Œå°†æŸä¸ªæ•°æ®ä¿®æ”¹ä¸ºäº†ä»€ä¹ˆ</li>
<li>å†™å…¥æ—¶æœºï¼šbinlog äº‹åŠ¡æäº¤æ—¶ï¼Œredo log äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å°±å¼€å§‹å†™å…¥ï¼Œäº‹åŠ¡æäº¤æ—¶ç¡®ä¿å·²ç»å°†redo log å†™å…¥ç£ç›˜ä¸­</li>
<li>æ¸…ç†æ–¹å¼ï¼šbinlog éœ€æ‰‹åŠ¨æ¸…ç†æˆ–è€…è®¾ç½®è¿‡æœŸæ—¶é—´æ¸…ç†ï¼› redo log å½“æ•°æ®é¡µçš„ä¿®æ”¹åˆ·æ–°åˆ°ç£ç›˜ä¸­ä¹‹åï¼Œredo log å³å¯è¢«è¦†ç›–é‡æ–°ä½¿ç”¨</li>
</ul>
</li>
<li>undo log å¦‚ä½•ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ï¼šäº‹åŠ¡å¼€å§‹æ‰§è¡Œæ—¶ï¼Œudno log ä¸­ä¼šè®°å½•ä¿®æ”¹å‰çš„æ•°æ®ï¼Œå¦‚æœäº‹åŠ¡ä½“éª„å‚²æˆåŠŸï¼Œundo log å³å¯ä»¥è¢«æ¸…ç†ï¼Œå¦‚æœå¤±è´¥å°±ä¼šä½¿ç”¨undo log å›æ»šäº‹åŠ¡ã€‚</li>
<li>MVCC(ä¹è§‚é”)å¦‚ä½•å®ç°ï¼šæ¯ä¸ªæ•°æ®è¡Œä¸­éƒ½æœ‰ä¸¤ä¸ªéšè—åˆ—ï¼šä¸€ä¸ªç”¨äºè®°å½•æ”¹è¡Œåˆ›å»ºæ—¶çš„äº‹åŠ¡IDï¼Œä¸€ä¸ªè®°å½•åˆ é™¤è¯¥è¡Œçš„äº‹åŠ¡IDï¼Œå½“äº‹åŠ¡å¼€å§‹æ—¶ï¼Œä»–ä¼šæ ¹æ®å½“å‰æ‰€æœ‰æ´»è·ƒçš„äº‹åŠ¡äº§ç”ŸRead View ï¼Œå…¶ä¸­è®°å½•äº†ï¼š<ul>
<li>åˆ›å»ºè¿™ä¸ªRead Viewæ—¶ä¸‹ä¸ªå³å°†è¢«åˆ†é…çš„äº‹åŠ¡ID m_low_limit_id</li>
<li>æ´»è·ƒåˆ—è¡¨ä¸­æœ€å°çš„äº‹åŠ¡ID m_up_limit_id</li>
<li>Read Viewåˆ›å»ºæ—¶ï¼Œå…¶ä»–æœªæäº¤çš„æ´»è·ƒäº‹åŠ¡IDåˆ—è¡¨ m_ids</li>
<li>åˆ›å»ºè¯¥Read View çš„äº‹åŠ¡ID m_creator_trx_id<br> ä¹‹åå¯¹æ•°æ®è¡Œè¿›è¡Œè¯»å–æ—¶ï¼Œæ£€æŸ¥è¯¥è¡Œçš„åˆ›å»ºäº‹åŠ¡IDå’Œåˆ é™¤äº‹åŠ¡ID <img src="/2023/08/02/hou-duan/shu-ju-ku/ReadView%E5%8F%AF%E8%A7%81%E6%80%A7.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/ReadView%E5%8F%AF%E8%A7%81%E6%80%A7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ReadViewå¯è§æ€§|525"></li>
<li>å¦‚æœåˆ›å»ºIDå¤§äºm_low_limit_idï¼Œè¯´æ˜æ˜¯åœ¨å½“å‰äº‹åŠ¡ä¹‹ååˆ›å»ºçš„ï¼Œä¸å¯è§</li>
<li>å¦‚æœåˆ é™¤IDå°äºm_up_limit_idï¼Œè¯´æ˜åœ¨å½“å‰äº‹åŠ¡å¼€å§‹å‰å°±å·²ç»è¢«åˆ é™¤äº†ï¼Œä¸å¯è§</li>
<li>å¦‚æœåˆ›å»ºäº‹åŠ¡IDå°äºm_low_limit_idä½†åˆ é™¤IDå¤§äºm_up_limit_idï¼Œéœ€è¦ä¸m_idsåˆ—è¡¨ä¸­æ¯”å¯¹ï¼Œå¦‚æœå­˜åœ¨äºm_idsåˆ—è¡¨ä¸­ï¼Œåˆ™ä¸å¯è§</li>
</ul>
</li>
<li></li>
</ol>
</li>
<li>å¤–é”®ï¼š<ul>
<li>ä¸å»ºè®®ä½¿ç”¨å¤–é”®ï¼Œå¤–é”®åº”è¯¥åœ¨åº”ç”¨å±‚ä¸­ä¿è¯ï¼Œè€Œä¸æ˜¯åœ¨æ•°æ®åº“ä¸Šä½¿ç”¨å¤–é”®ï¼Œå› ä¸ºå¤–é”®å¯¹åˆ†åº“åˆ†è¡¨æ— æ³•ç”Ÿæ•ˆï¼ŒåŒæ—¶éœ€è¦ç»´æŠ¤å¤–é”®ï¼Œå½“æˆ‘ä»¬åšä¸€äº›æ¶‰åŠå¤–é”®çš„CUDæ“ä½œæ—¶ï¼Œéœ€è¦è§¦å‘ç›¸å…³çš„æ“ä½œå»æ£€æŸ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ï¼Œä»è€Œæ¶ˆè€—é¢å¤–èµ„æºï¼Œ</li>
</ul>
</li>
<li>é›†ç¾¤ï¼š<ul>
<li>redo log å’Œ undo logéƒ½æ˜¯ç”±InnoDBå¼•æ“å®ç°çš„</li>
<li>bin log æ˜¯ç”±mysqlçº§åˆ«çš„æ—¥å¿—<ul>
<li>redoå’Œbin çš„åŒºåˆ«ï¼šRedo logæ˜¯è®°å½•äº†æ•°æ®çš„ä¿®æ”¹ï¼Œå¤§å°åˆ°ä¸€å®šç¨‹åº¦ï¼Œæ–°çš„æ—¥å¿—ä¼šè¦†ç›–ï¼Œå…ˆå†™redoå†å†™binï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§</li>
<li>Binlogæ˜¯è®°å½•äº†æ‰§è¡Œäº†ä»€ä¹ˆsqlè¯­å¥ï¼Œä¸ä¼šè¦†ç›–æ—§æ—¥å¿—ï¼Œç”¨äºå®ç°mysqlçš„ä¸»ä»å¤åˆ¶</li>
</ul>
</li>
<li>redologçš„ä¼˜åŠ¿ï¼šé¡ºåºå†™ï¼Œé¢„å†™å…¥ï¼Œç£ç›˜åŒæ­¥è¿‡ç¨‹ä¸­å¯ä»¥ä¸€æ¬¡åŒæ­¥å¤šä¸ªäº‹åŠ¡çš„Redo logï¼šå…ˆæŠŠä¿®æ”¹å†™å…¥redologï¼Œå†ä¿®æ”¹å†…å­˜ä¸­çš„æ•°æ®ï¼Œäº‹åŠ¡æäº¤æ—¶å†å…¥bin logï¼Œä¹‹åå†å°†æ•°æ®å†™å…¥ç£ç›˜ä¸­ </li>
<li>ä¸»ä»å¤åˆ¶ï¼š<ul>
<li>masterèŠ‚ç‚¹ä¼šä¸æ–­å°†sqlå‘½ä»¤å†™å…¥Binary Logï¼Œå­èŠ‚ç‚¹ä½¿ç”¨I/Oçº¿ç¨‹è¯»å…¥masterèŠ‚ç‚¹ä¸­çš„Bin Log</li>
<li>å­—èŠ‚ç‚¹ä½¿ç”¨SQLçº¿ç¨‹æ‰§è¡ŒBin Logçš„è¯­å¥</li>
</ul>
</li>
</ul>
</li>
<li>å­˜å‚¨å¼•æ“çš„åŒºåˆ«ï¼šMyISAM å’Œ InnoDB çš„åŒºåˆ«<ul>
<li>MySQLçš„å­˜å‚¨å¼•æ“é‡‡ç”¨çš„æ˜¯æ’ä»¶å¼æ¶æ„ï¼Œæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä¸ºä¸åŒçš„æ•°æ®åº“è¡¨è®¾è®¡ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œå­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨è€Œä¸æ˜¯æ•°æ®åº“çš„ã€‚</li>
<li>InnodDBæ”¯æŒäº‹åŠ¡</li>
<li>InnoDBæ”¯æŒè¡Œçº§é”å®šï¼ŒMyISAMæ“ä½œæ—¶ç›´æ¥é”å®šæ•´ä¸ªè¡¨</li>
<li>InnoDBæ”¯æŒå¤–é”®å’Œçº§è”åˆ é™¤/æ›´æ–°</li>
<li>InnoBDå­˜å‚¨æ•°æ®æ›´å¤§</li>
<li>å´©æºƒæ¢å¤æ›´å¥½</li>
<li>InnoDBä»¥èšç°‡çš„æ–¹å¼å­˜å‚¨æ•°æ®ï¼ŒMyISAMæ˜¯å°†æ•°æ®å’Œç´¢å¼•åˆ†å¼€å­˜å‚¨</li>
<li>InnoDBæ”¯æŒMVCC</li>
</ul>
</li>
<li>äº‹åŠ¡ï¼š<ul>
<li>å¹¶å‘äº‹åŠ¡å¸¦æ¥äº†å“ªäº›é—®é¢˜ï¼š<ol>
<li>è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹åå›æ»šçš„æ•°æ®</li>
<li>ä¸¢å¤±ä¿®æ”¹:ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼Œå…ˆæäº¤çš„ä¼šä¸¢å¤±ä¿®æ”¹</li>
<li>ä¸å¯é‡å¤è¯»ï¼šæ‰§è¡Œç›¸åŒçš„ä¸¤ä¸ªè¯­å¥ï¼Œç»“æœä¸ä¸€æ ·</li>
<li>å¹»è¯»ï¼šå¤šäº†è®°å½•æˆ–è€…æ˜¯å°‘äº†è®°å½•<ul>
<li>3å’Œ4çš„åŒºåˆ«ï¼š3æ˜¯è®°å½•è¢«ä¿®æ”¹ï¼Œ4æ˜¯è®°å½•æ¡æ•°å˜åŒ–</li>
</ul>
</li>
</ol>
</li>
<li>mysqlä¸­çš„éš”ç¦»ç­‰çº§ï¼š é»˜è®¤æ˜¯å¯é‡å¤è¯»ï¼Œèƒ½å¤Ÿé˜²æ­¢å¹»è¯» å®ç°æ˜¯é€šè¿‡ <strong>é”å’ŒMVCC(å¤šç‰ˆæœ¬æ§åˆ¶å¹¶å‘æ§åˆ¶)</strong> å®ç°çš„<ol>
<li>è¯»æœªæäº¤ï¼šå…è®¸äº‹åŠ¡è¯»å–æœªæäº¤çš„äº‹åŠ¡çš„ä¿®æ”¹ï¼Œä¼šå‡ºç°è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»</li>
<li>è¯»å·²æäº¤ï¼šåªèƒ½è¯»åˆ°æäº¤çš„äº‹åŠ¡çš„ä¿®æ”¹ï¼Œé¿å…è„è¯»ï¼Œä½†æ˜¯è¿˜æœ‰å¹»è¯» ï¼ˆè¯»æ•°æ®æ—¶åŠ ä¸Šå…±äº«é”ï¼Œè¯»å–åç«‹åˆ»é‡Šæ”¾ï¼‰</li>
<li>å¯é‡å¤è¯»ï¼šåŒä¸€äº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–ç»Ÿä¸€æ•°æ®è¿”å›ç»“æœè¦ä¸€è‡´ (äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾é”ï¼ŒåŒæ—¶ä½¿ç”¨MVCCæ¥ä¿è¯æ¯ä¸ªäº‹åŠ¡éƒ½çœ‹åˆ°ä¸€ä¸ªä¸€è‡´çš„å¿«ç…§)</li>
<li>å¯ä¸²è¡ŒåŒ–ï¼šå¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œå½±å“æ•ˆç‡</li>
</ol>
</li>
<li>MVCCçš„åŸç†ï¼š</li>
<li>è¿™ä¸¤ä¸ªéšè—çš„åˆ—å°±æ˜¯undo logæ—¥å¿—<img src="/2023/08/02/hou-duan/shu-ju-ku/undolog.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/undolog.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="|700"><ul>
<li>è¿™ä¿©å°±æ˜¯éšè—åˆ—ï¼Œtrx_idå½“å‰ä¿®æ”¹ä¹‹åçš„äº‹åŠ¡idï¼Œroll_pointeræŒ‡å‘ä¿®æ”¹ä¹‹å‰çš„ä¿¡æ¯</li>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/undolog%E8%A1%A8.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/undolog%E8%A1%A8.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="|725"></li>
<li>MVCCå®ç°åŸç†ï¼šReadView<ul>
<li>ä¸»è¦å†…å®¹ï¼š<ul>
<li>m_ids:ç”ŸæˆReadViewæ—¶å½“å‰ç³»ç»Ÿæ´»è·ƒçš„è¯»å†™äº‹åŠ¡idåˆ—è¡¨</li>
<li>min_trx_id:åœ¨ç”ŸæˆReadViewæ—¶å½“å‰ç³»ç»Ÿæ´»è·ƒçš„è¯»å†™äº‹åŠ¡ä¸­æœ€å°çš„äº‹åŠ¡idï¼Œä¹Ÿå°±æ˜¯min (m_ids)</li>
<li>max_trx_id:è¡¨ç¤ºç”ŸæˆReadVeiwæ—¶ç³»ç»Ÿåº”è¯¥åˆ†é…ç»™ä¸‹ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„idå€¼</li>
<li>creator_trx_idï¼šè¡¨ç¤ºç”Ÿæˆè¯¥ReadViewçš„äº‹åŠ¡id</li>
</ul>
</li>
<li>åŸç†ï¼šåœ¨è®¿é—®æŸæ¡è®°å½•æ—¶æ ¹æ®ä»¥ä¸‹æ–¹å¼æ¥åˆ¤æ–­ï¼š<ol>
<li>trx_id == creator_trx_idï¼Œè¡¨ç¤ºæ˜¯è‡ªå·±ä¿®æ”¹è¿‡çš„è®°å½•ï¼Œå¯è§</li>
<li>trx_id &lt; min_trx_id å¯ä»¥è¢«è®¿é—®</li>
<li>trx_id &gt; max_trx_idï¼Œä¸å¯è¢«è®¿é—®</li>
<li>trx_id &gt; min  &amp;&amp; trx_id &lt; max éœ€è¦åˆ¤æ–­ï¼šå¦‚æœtrx_idåœ¨m_idsä¸­ï¼Œè¡¨ç¤ºä»ç„¶æ´»è·ƒï¼Œä¸å¯è®¿é—®ï¼Œä¸åœ¨è¡¨ç¤ºå·²ç»è¢«æäº¤ï¼Œå¯ä»¥è®¿é—®äº†</li>
<li>å¦‚æœæŸä¸ªç‰ˆæœ¬å¯¹å½“å‰äº‹åŠ¡ä¸å¯è§ï¼Œåˆ™é¡ºç€ç‰ˆæœ¬è¿æ‰¾ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œç›´åˆ°æœ€åï¼Œå¦‚æœæœ€åä¸€ä¸ªç‰ˆæœ¬ä¹Ÿä¸å¯è§çš„è¯ï¼Œæ„å‘³ç€è¿™æ¡è®°å½•å¯¹è¿™ä¸ªäº‹åŠ¡å®Œå…¨ä¸å¯è§ï¼ŒæŸ¥è¯¢ç»“æœä¸è¿”å›è¿™ä¸ªè®°å½•</li>
</ol>
</li>
<li>è¯»å·²æäº¤æ¯æ¬¡è¯»éƒ½ä¼šç”Ÿæˆä¸€ä¸ªReadViewï¼Œè€Œå¯é‡å¤è¯»æ™ºæ…§åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡ŒæŸ¥è¯¢è¯­å¥æ—¶ç”Ÿæˆä¸€ä¸ªReadView</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ç´¢å¼•å¸¸é—®ï¼š<ul>
<li>è¦†ç›–ç´¢å¼•ï¼šæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”æŸ¥è¯¢è¿‡ç¨‹ä¸­å·²ç»æ‰¾åˆ°äº†æ‰€æœ‰éœ€è¦çš„åˆ—ï¼Œä¸éœ€è¦ç»§ç»­å›è¡¨äº†</li>
<li>ç´¢å¼•å¤±æ•ˆé—®é¢˜ï¼š<ol>
<li>ä½¿ç”¨äº†!= &lt; &gt; LIKE ï¼Œå‡½æ•°æ“ä½œæˆ–è€…è¡¨è¾¾å¼æ“ä½œ</li>
<li>è”åˆç´¢å¼•ä¸­æ²¡æœ‰éµå¾ªæœ€å·¦å‰ç¼€ï¼Œè·³è¿‡äº†ä¸­é—´çš„ç´¢å¼•å­—æ®µ</li>
<li></li>
</ol>
</li>
</ul>
</li>
<li>SQLè¯­å¥ï¼š<ul>
<li>å¸¸è§å‡½æ•°ï¼š<ol>
<li>Concat()æŠŠå¤šåˆ—æ‹¼æ¥åœ¨ä¸€èµ·</li>
<li>RTrim() å»é™¤å¤šæœ‰ç©ºæ ¼</li>
<li>ASç»™åˆ—èµ·åˆ«å</li>
</ol>
</li>
<li>å­˜å‚¨è¿‡ç¨‹ï¼šå­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ç§åœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„é¢„ç¼–è¯‘çš„SQLè¯­å¥é›†åˆï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„åå­—æ¥æ‰§è¡Œã€‚å­˜å‚¨è¿‡ç¨‹å¯ä»¥æ¥æ”¶å‚æ•°ï¼Œå¹¶ä¸”å¯ä»¥è¿”å›å€¼ï¼Œé•¿å“Ÿä¸ªä¸è¿›è¡Œæ‰¹å¤„ç†<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">USE test;
CREATE PROCEDURE productpricing()
BEGIN
	SELECT * FROM hello;
END;

è°ƒç”¨
CALL productpricing()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<h3 id="InooDBè¯¦è§£"><a href="#InooDBè¯¦è§£" class="headerlink" title="InooDBè¯¦è§£"></a>InooDBè¯¦è§£</h3><ol>
<li>InooDBå¤§å°ä¸€èˆ¬ä¸º16kb</li>
<li>InooDBé¡µè¡¨:<img src="/2023/08/02/hou-duan/shu-ju-ku/InnoDB%E6%95%B0%E6%8D%AE%E9%A1%B5.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/InnoDB%E6%95%B0%E6%8D%AE%E9%A1%B5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>File Headerï¼š<img src="/2023/08/02/hou-duan/shu-ju-ku/FileHeader.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/FileHeader.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>Page Headerï¼š<img src="/2023/08/02/hou-duan/shu-ju-ku/PageHeader.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/PageHeader.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>infimumu+supremum æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•ã€‚ä¸å­˜æ”¾çœŸæ˜¯æ•°æ®<img src="/2023/08/02/hou-duan/shu-ju-ku/%E6%95%B0%E6%8D%AE%E9%A1%B5%E8%AF%A6%E8%A7%A3.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E6%95%B0%E6%8D%AE%E9%A1%B5%E8%AF%A6%E8%A7%A3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><ul>
<li>heap_noåˆ†åˆ«ä¸º0å’Œ1ï¼Œ record_typeåˆ†ä¸º4ç§ï¼Œ0æ™®é€šè®°å½•ï¼Œ1è¡¨ç¤ºB+æ ‘éå¶èŠ‚ç‚¹è®°å½•ï¼Œ2æœ€å°è®°å½•ï¼Œ3æœ€å¤§è®°å½•ã€‚</li>
<li>next_record ç”±å½“å‰çœŸå®æ•°æ®æŒ‡å‘å“ä¸€è·³è®°å½•çš„çœŸå®æ•°æ®ã€‚å“ä¸€è·³è®°å½•ä¸æ˜¯æŒ‰ç…§æ’å…¥é¡ºåºçš„ä¸‹ä¸€æ¡ï¼Œè€Œæ˜¯æ ¹æ®ä¸»é”®æ’åºä¹‹åçš„ä¸‹ä¸€æ¡ã€‚infimumçš„ä¸‹ä¸€æ¡è®°å½•æ˜¯ç”¨æˆ·è®°å½•ä¸­ä¸»é”®æœ€å°çš„ï¼Œç”¨æˆ·è®°å½•ä¸­ä¸»é”®æœ€å¤§çš„ä¸‹ä¸€æ¡æŒ‡å‘supremum</li>
<li>ä¸ºä»€ä¹ˆæŒ‡å‘çš„æ˜¯çœŸæ˜¯æ•°æ®çš„å¼€å¤´ï¼Ÿ<ul>
<li>å› ä¸ºå‘å·¦è¯»å–ä¸ºè®°å½•å¤´ä¿¡æ¯ï¼Œå‘å³è¯»å–çœŸå®æ•°æ®ã€‚ è®°å½•å¤´ä¿¡æ¯åˆšå¥½æ˜¯<strong>é€†åºçš„ï¼</strong></li>
</ul>
</li>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/next_record%E7%A4%BA%E4%BE%8B.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/next_record%E7%A4%BA%E4%BE%8B.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ul>
</li>
<li>User Record ï¼š <ul>
<li>ç”±é¢å¤–è®°å½•ä¿¡æ¯å’Œå®é™…ä¿¡æ¯ç»„æˆ</li>
<li>é¢å¤–è®°å½•ï¼š<ul>
<li>å˜é•¿å­—æ®µçš„çœŸå®æ•°æ®çš„å­—èŠ‚é•¿åº¦éƒ½æ”¾åœ¨è®°å½•çš„å¼€å¤´ï¼Œé€†åºå­˜æ”¾ã€‚ä¸å­˜æ”¾NULLçš„å­—èŠ‚é•¿åº¦</li>
<li>NULLLå€¼åˆ—è¡¨ï¼ŒNULLå€¼å­˜å‚¨åœ¨è¿™é‡Œï¼Œå¹¶ä¸”æ˜¯é€†åºå­˜å‚¨ï¼Œå¦‚æœå­˜åœ¨NULLå€¼å°±ä¸ä¼šå­˜åœ¨è¿™ä¸ªåˆ—è¡¨</li>
<li>è®°å½•å¤´ä¿¡æ¯ï¼š<img src="/2023/08/02/hou-duan/shu-ju-ku/%E8%AE%B0%E5%BD%95%E5%A4%B4%E4%BF%A1%E6%81%AF.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E8%AE%B0%E5%BD%95%E5%A4%B4%E4%BF%A1%E6%81%AF.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><ul>
<li>delete_maskæ ‡è®°çš„è®°å½•ä¸ä¼šç†ç§‘åˆ é™¤ï¼Œè€Œæ˜¯ä¼šæ”¾åœ¨åƒåœ¾åˆ—è¡¨ä¸­ï¼Œç­‰å¾…è¦†ç›–ã€‚</li>
<li>heap_noæ˜¯æ ¹æ®ä¸»é”®çš„å¤§å°æ¥ç¡®å®šçš„</li>
</ul>
</li>
</ul>
</li>
<li>çœŸå®ä¿¡æ¯ï¼š<ul>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/%E9%9A%90%E8%97%8F%E5%88%97.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E9%9A%90%E8%97%8F%E5%88%97.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>å¦‚æœæœªæŒ‡å®šä¸»é”®ï¼Œä¼šç”Ÿæˆrow_idéšè—åˆ—</li>
</ul>
</li>
</ul>
</li>
<li>Page  Directory ï¼š<ul>
<li>å°†æ­£å¸¸çš„æ‰€æœ‰è®°å½•åˆ’åˆ†ä¸ºå‡ ä¸ªç»„ï¼ŒåŒ…æ‹¬æœ€å¤§å’Œæœ€å°è®°å½•ï¼Œä¸åŒ…æ‹¬å·²åˆ é™¤çš„è®°å½•,æœ€å°è®°å½•æ‰€åœ¨çš„åˆ†ç»„åªåŒ…æ‹¬è‡ªå·±ã€‚</li>
<li>æ¯ç»„æœ€åä¸€ä¸ªè®°å½•çš„å¤´ä¿¡æ¯ä¸­çš„n_owndæ¥è¡¨ç¤ºè¯¥ç»„ä¸­è®°å½•æ•°ã€‚</li>
<li>å°†æ¯ç»„çš„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡æ‹¿å‡ºæ¥æ”¾å…¥PageDirectoryä¸­ï¼Œåç§»é‡è¢«ç§°ä¸ºæ§½(slot)</li>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/PageDirectory%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/PageDirectory%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ul>
</li>
<li>File Trailer: ç”¨äºæ£€éªŒä¸€ä¸ªé¡µæ˜¯å¦å®Œæ•´ï¼š</li>
</ol>
<h3 id="ç´¢å¼•ï¼š"><a href="#ç´¢å¼•ï¼š" class="headerlink" title="ç´¢å¼•ï¼š"></a>ç´¢å¼•ï¼š</h3><h4 id="å›è¡¨é—®é¢˜"><a href="#å›è¡¨é—®é¢˜" class="headerlink" title="å›è¡¨é—®é¢˜"></a>å›è¡¨é—®é¢˜</h4><p>å½“æŸ¥è¯¢çš„æ•°æ®åœ¨ç´¢å¼•æ ‘ä¸­æ‰¾ä¸åˆ°æ—¶ï¼Œå°±éœ€è¦å›åˆ°ä¸»é”®ç´¢å¼•æ ‘ç§å»è·å–ã€‚<br>è¦†ç›–ç´¢å¼•ï¼š<br>æŸ¥è¯¢æ—¶ä»ç´¢å¼•åˆ—å°±èƒ½å¤Ÿè·å–äº†ï¼Œå°±ä¸éœ€è¦å›åˆ°ä¸»é”®æ ‘ä¸­æŸ¥æ‰¾äº†</p>
<ul>
<li>å‰æ<ol>
<li>æ•°æ®é¡µé“¾è¡¨ä¸­çš„å‰åä¿è¯å‰ä¸€ä¸ªæ•°æ®é¡µä¸­çš„ä¸»é”®çš„æœ€å¤§å€¼å¤§äºåä¸€ä¸ªé¡µè¡¨ä¸­ä¸»é”®çš„æœ€å°å€¼ï¼Œä¹Ÿå°±ä¸»é”®é€’å¢ï¼Œæ¯ä¸€ä¸ªé¡µè¡¨å†…ï¼Œä¸»é”®ä¹Ÿé€’å¢</li>
<li>å»ºç«‹ä¸€ä¸ªç›®å½•é¡¹ï¼šåŒ…æ‹¬ key:é¡µä¸­ä¸»é”®æœ€å°å€¼ page_no:é¡µå·ã€‚</li>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ol>
</li>
<li>mysqlä¸­çš„å®ç°ï¼š<ol>
<li>ä½¿ç”¨ç”¨æˆ·è®°å½•çš„æ•°æ®é¡µæ¥å­˜å‚¨ç›®å½•é¡¹ï¼Œå¹¶ä¸”ä½¿ç”¨record_type = 1æ¥æ ‡æ˜ï¼ŒåªåŒ…å«keyå’Œpage_noå³å¯</li>
<li>ä½¿ç”¨åŒå‘åˆ—è¡¨æ¥ç»´æŠ¤å¤šä¸ªç›®å½•é¡¹</li>
<li>ä½¿ç”¨æ ‘çš„ç»“æ„æ¥é‡å¤å»ºç«‹ç´¢å¼•ï¼ŒåŠ å¿«è®¿é—®<img src="/2023/08/02/hou-duan/shu-ju-ku/%E7%B4%A2%E5%BC%95.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E7%B4%A2%E5%BC%95.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><img src="/2023/08/02/hou-duan/shu-ju-ku/B+%E6%A0%91.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/B+%E6%A0%91.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>çœŸæ­£çš„æ•°æ®é¡µéƒ½æ”¾åœ¨æœ€åº•å±‚çš„å¶å­èŠ‚ç‚¹</li>
</ol>
<ul>
<li>èšç°‡ç´¢å¼•ï¼š1. ä½¿ç”¨ä¸»é”®å€¼å¤§å°è¿›è¡Œè®°å½•å’Œæ’åº 2. å¶å­èŠ‚ç‚¹æ˜¯å®Œæ•´çš„ç”¨æˆ·è®°å½•ã€‚ç´¢å¼•å³æ•°æ®ï¼Œæ•°æ®å³ç´¢å¼•</li>
<li>äºŒçº§ç´¢å¼•ï¼š1.ä½¿ç”¨éä¸»é”®å€¼æ¥è¿›è¡Œè®°å½•å’Œæ’åº 2. å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ç´¢å¼•é”®å’Œä¸»é”®çš„å€¼ 3. æŸ¥è¯¢åˆ°å¶å­èŠ‚ç‚¹ä¹‹åéœ€è¦å†æŸ¥æ‰¾ä¸€å˜ä¸»é”®çš„ç´¢å¼•æ¥æ‰¾åˆ°çœŸæ­£çš„ç”¨æˆ·è®°å½•ã€‚ ä¼˜ç‚¹æ˜¯èŠ‚çœç©ºé—´ã€‚<img src="/2023/08/02/hou-duan/shu-ju-ku/%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>è”åˆç´¢å¼•ï¼š1.ä½¿ç”¨å¤šä¸ªåˆ—çš„å¤§å°æ¥è¿›è¡Œæ’åºã€‚å…ˆæŒ‰ç…§ä¸€ä¸ªåˆ—æ’åºï¼Œåˆ—å¤§å°ç›¸åŒæ—¶ï¼Œä½¿ç”¨ä¸‹ä¸€ä¸ªåˆ—å¤§å°æ¥æ’åºã€‚2. å¯¹äºè¿™å¤šä¸ªåˆ—åªéœ€è¦å»ºç«‹ä¸€ä¸ªB+æ ‘å³å¯ï¼ŒèŠ‚çœäº†ç©ºé—´3.å®è´¨ä¸Šä¹Ÿæ˜¯äºŒçº§ç´¢å¼•</li>
<li>å¯¹æ¯”ï¼šMyISAM<ul>
<li>å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºï¼Œæœ‰è¡Œå·</li>
<li>ç´¢å¼•æ”¾åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ä¸»é”®å€¼+è¡Œå·ä½œä¸ºç´¢å¼•ï¼Œæ‰€ä»¥å…¨æ˜¯äºŒçº§ç´¢å¼•ï¼Œè€Œä¸”ä¸èƒ½äºŒåˆ†æŸ¥æ‰¾ã€‚</li>
</ul>
</li>
<li>SQLå»ºç«‹ç´¢å¼•ï¼šæ¯ä¸€ä¸ªè¡¨ä¼šè‡ªåŠ¨ä¸ºä¸»é”®æˆ–è€…uniqueå»ºç«‹ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œå¯ä½¿ç”¨è¯­å¥æŒ‡å®šå»ºç«‹å…¶ä»–åˆ—çš„ç´¢å¼•<img src="/2023/08/02/hou-duan/shu-ju-ku/sql%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/sql%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>åˆ é™¤ç´¢å¼•ï¼šALTER TABLE index_demo DROP INDEX idx_c2_c3;</li>
</ul>
</li>
<li>ç‹¬ç«‹è¡¨ç©ºé—´ï¼š<ol>
<li>åŒºï¼šè¡¨ç©ºé—´åˆ†ä¸ºå¤šä¸ªåŒºï¼ŒåŒºåŒ…å«å¤šä¸ªé¡µ</li>
</ol>
</li>
</ul>
<h3 id="æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹"><a href="#æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹"></a>æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹</h3><ul>
<li>select <ol>
<li>ä½¿ç”¨è¿æ¥å™¨è¿æ¥mysql server,æœŸé—´é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ show processlistæ¥æŸ¥çœ‹å¤šå°‘ä¸ªå®¢æˆ·ç«¯è¿æ¥äº†</li>
<li>æŸ¥è¯¢ç¼“å­˜(8.0) å·²æŠ›å¼ƒ</li>
<li>è§£æSQL ï¼š<ol>
<li>è¯æ³•åˆ†æï¼Œæ ¹æ®å­—ç¬¦ä¸²è¯†åˆ«å…³é”®è¯ï¼Œåˆ†ç±»å­—ç¬¦ä¸²</li>
<li>è¯­æ³•åˆ†æï¼Œè¯­æ³•è§£æå™¨ä¼šæ ¹æ®è¯­æ³•è§„åˆ™æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆMySQLè¯­æ³•ç§’å¦‚æœæ²¡é—®é¢˜å°±ä¼šæ„å‡ºSQLè¯­æ³•æ ‘</li>
</ol>
</li>
<li>æ‰§è¡ŒSQLè¯­å¥ï¼Œ<code>SELECT</code>&nbsp;æŸ¥è¯¢è¯­å¥æµç¨‹ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‹é¢è¿™ä¸‰ä¸ªé˜¶æ®µï¼š<ul>
<li>prepare é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯é¢„å¤„ç†é˜¶æ®µï¼›æ£€æŸ¥è¡¨å’Œå­—æ®µæ˜¯å¦å­˜åœ¨ï¼Œå°†* æ‰©å±•ä¸ºè¡¨ä¸Šçš„åˆ—</li>
<li>optimize é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ä¼˜åŒ–é˜¶æ®µï¼›<strong>ä¼˜åŒ–å™¨ä¸»è¦è´Ÿè´£å°† SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæ–¹æ¡ˆç¡®å®šä¸‹æ¥</strong>ï¼Œæ¯”å¦‚åœ¨è¡¨é‡Œé¢æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œä¼˜åŒ–å™¨ä¼šåŸºäºæŸ¥è¯¢æˆæœ¬çš„è€ƒè™‘ï¼Œæ¥å†³å®šé€‰æ‹©ä½¿ç”¨å“ªä¸ªç´¢å¼•ã€‚</li>
<li>execute é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œé˜¶æ®µï¼›æ ¹æ®æ‰§è¡Œè®¡åˆ’æ‰§è¡Œ SQL æŸ¥è¯¢è¯­å¥ï¼Œä»å­˜å‚¨å¼•æ“è¯»å–è®°å½•ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼›</li>
</ul>
</li>
</ol>
</li>
<li>MySQLä¸€è¡Œè®°å½•å¦‚ä½•<ul>
<li>æ¯å»ºç«‹ä¸€ä¸ªæ•°æ®åº“éƒ½ä¼šå’‹/var.lib/mysql/ä¸‹å»ºç«‹ä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹</li>
<li>æ–‡ä»¶å¤¹ä¸­æœ‰ä¸‰ä¸ªæ–‡ä»¶</li>
<li>db.opt ç”¨æ¥å­˜å‚¨æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†å’Œå­—ç¬¦æ£€éªŒè§„åˆ™</li>
<li>tableNaem.frm å¯¹åº”çš„è¡¨ç»“æ„ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œä¸»è¦åŒ…å«è¡¨ç»“æ„çš„å®šä¹‰</li>
<li>tableName.ibd è¡¨ä¸­çš„æ•°æ®ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­</li>
</ul>
</li>
<li>è¡¨ç©ºé—´æ–‡ä»¶çš„ç»“æ„ ï¼š<ul>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/%E8%A1%A8%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E8%A1%A8%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
<li>æ®µ <ul>
<li>ç´¢å¼•æ®µï¼šå­˜æ”¾ B + æ ‘çš„éå¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆï¼›</li>
<li>æ•°æ®æ®µï¼šå­˜æ”¾ B + æ ‘çš„å¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆï¼›</li>
<li>å›æ»šæ®µï¼šå­˜æ”¾çš„æ˜¯å›æ»šæ•°æ®çš„åŒºçš„é›†åˆï¼Œä¹‹å‰è®²<a target="_blank" rel="noopener" href="https://xiaolincoding.com/mysql/transaction/mvcc.html">äº‹åŠ¡éš”ç¦»&nbsp;(opens new window)</a>çš„æ—¶å€™å°±ä»‹ç»åˆ°äº† MVCC åˆ©ç”¨äº†å›æ»šæ®µå®ç°äº†å¤šç‰ˆæœ¬æŸ¥è¯¢æ•°æ®ã€‚</li>
</ul>
</li>
<li>åŒº InnoDB ä½¿ç”¨çš„æ˜¯B+æ ‘ ä»¥é¡µä¸ºå•ä½æ¥æ¥åˆ†é…ç©ºé—´æ—¶ï¼Œé“¾è¡¨ä¸­ç›¸é‚»çš„ä¸¤ä¸ªé¡µçš„ç‰©ç†ä½ç½®æ˜¯ä¸è¿ç»­çš„ï¼Œä¸ºäº†é˜²æ­¢éšæœºI/Oï¼Œå¯ä»¥æŒ‰ç…§åŒºæ¥åˆ†é…ï¼Œä¸€ä¸ªåŒºå¯ä»¥åŒ…å«å¤šä¸ªé¡µï¼Œè¿™æ ·é¡µåœ¨ä½ç½®ä¸Šå°±æ˜¯ç›¸é‚»çš„äº†å¯ä»¥ä½¿ç”¨é¡ºåºI/O</li>
<li>é¡µ è¯»å–æ•°æ®ä»¥é¡µä¸ºå•ä½ï¼Œå½“è¯»å–ä¸€è¡Œæ—¶ï¼Œä¼šå°†ä¸€é¡µä¸€åŒè¯»å–å‡ºæ¥ï¼Œæ”¾å…¥å†…å­˜ä¸­ é»˜è®¤é¡µ 16kb ,é¡µæ˜¯ InnoDB å­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•å…ƒï¼Œ</li>
<li>è¡Œ è®°å½•æŒ‰ç…§è¡Œ<ul>
<li>è¡Œæ ¼å¼ï¼šCOMPACT <img src="/2023/08/02/hou-duan/shu-ju-ku/compact.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/compact.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><ul>
<li>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ï¼Œç”¨äºä¿å­˜æ•°æ®å ç”¨çš„å¤§å°ï¼Œ åœ¨åˆ—è¡¨ä¸­é‡‡ç”¨é€†åºå­˜æ”¾æ•°æ®å ç”¨çš„å®é™…å­—èŠ‚ï¼Œå½“ä¸€è¡Œä¸­æ²¡æœ‰å˜é•¿å­—æ®µæ—¶ï¼Œä¾‹å¦‚å…¨intæ—¶ï¼Œå°±ä¸ä¼šå­˜åœ¨å˜é•¿å­—æ®µåˆ—è¡¨äº†ã€‚</li>
<li>NULLåˆ—è¡¨ï¼Œæ•°æ®ä¸­ä¸ºNULL çš„æ•°æ®ä¼šæ”¾åœ¨NULLå€¼åˆ—è¡¨ä¸­çš„ã€‚NULLå€¼ä¹Ÿæ˜¯æŒ‰ç…§é€†åºå­˜å‚¨çš„ï¼Œä½¿ç”¨äºŒè¿›åˆ¶ 0 1 æ¥è¡¨ç¤ºæ˜¯å¦ä¸ºNULLå€¼ï¼Œ1 ä¸ºæ˜¯  <strong>å½“æ•°æ®è¡¨çš„å­—æ®µéƒ½å®šä¹‰æˆ NOT NULL çš„æ—¶å€™ï¼Œè¿™æ—¶å€™è¡¨é‡Œçš„è¡Œæ ¼å¼å°±ä¸ä¼šæœ‰ NULL å€¼åˆ—è¡¨äº†</strong>ã€‚</li>
<li>è®°å½•å¤´ä¿¡æ¯</li>
<li>delete_mask ï¼šæ ‡è¯†æ­¤æ¡æ•°æ®æ˜¯å¦è¢«åˆ é™¤ã€‚ä»è¿™é‡Œå¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬æ‰§è¡Œ detele åˆ é™¤è®°å½•çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šçœŸæ­£çš„åˆ é™¤è®°å½•ï¼Œåªæ˜¯å°†è¿™ä¸ªè®°å½•çš„ delete_mask æ ‡è®°ä¸º 1ã€‚</li>
<li>next_recordï¼šä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®ã€‚ä»è¿™é‡Œå¯ä»¥çŸ¥é“ï¼Œè®°å½•ä¸è®°å½•ä¹‹é—´æ˜¯é€šè¿‡é“¾è¡¨ç»„ç»‡çš„ã€‚åœ¨å‰é¢æˆ‘ä¹Ÿæåˆ°äº†ï¼ŒæŒ‡å‘çš„æ˜¯ä¸‹ä¸€æ¡è®°å½•çš„ã€Œè®°å½•å¤´ä¿¡æ¯ã€å’Œã€ŒçœŸå®æ•°æ®ã€ä¹‹é—´çš„ä½ç½®ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‘å·¦è¯»å°±æ˜¯è®°å½•å¤´ä¿¡æ¯ï¼Œå‘å³è¯»å°±æ˜¯çœŸå®æ•°æ®ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚</li>
<li>record_typeï¼šè¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œ0è¡¨ç¤ºæ™®é€šè®°å½•ï¼Œ1è¡¨ç¤ºB+æ ‘éå¶å­èŠ‚ç‚¹è®°å½•ï¼Œ2è¡¨ç¤ºæœ€å°è®°å½•ï¼Œ3è¡¨ç¤ºæœ€å¤§è®°å½•</li>
</ul>
</li>
<li>çœŸå®æ•°æ®éƒ¨åˆ†<ul>
<li>row_id æœªæŒ‡å®šä¸»é”®æˆ–è€…å”¯ä¸€çº¦æŸåˆ—æ—¶ï¼Œä¼šæœ‰ï¼Œå ç”¨6ä¸ªå­—èŠ‚</li>
<li>trx_idäº‹åŠ¡idè¡¨ç¤ºæ•°æ®ç”±å“ªä¸ªäº‹åŠ¡ç”Ÿæˆçš„ï¼Œå¿…éœ€</li>
<li>roll_pointer è®°å½•ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æŒ‡é’ˆï¼Œå¿…éœ€</li>
</ul>
</li>
</ul>
</li>
<li><strong>ä¸€è¡Œæ•°æ®çš„æœ€å¤§å­—èŠ‚æ•° 65535(ä¸åŒ…å« TEXTã€BLOBs è¿™ç§å¤§å¯¹è±¡ç±»å‹)ï¼Œå…¶å®æ˜¯åŒ…å«ã€Œå˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ã€å’Œ ã€ŒNULL å€¼åˆ—è¡¨ã€æ‰€å ç”¨çš„å­—èŠ‚æ•°çš„</strong></li>
<li>å¦‚æœä¸€ä¸ªæ•°æ®é¡µå­˜ä¸äº†ä¸€æ¡è®°å½•ï¼ŒInnoDB å­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨å°†æº¢å‡ºçš„æ•°æ®å­˜æ”¾åˆ°ã€Œæº¢å‡ºé¡µã€ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p>Compact è¡Œæ ¼å¼é’ˆå¯¹è¡Œæº¢å‡ºçš„å¤„ç†æ˜¯è¿™æ ·çš„ï¼šå½“å‘ç”Ÿè¡Œæº¢å‡ºæ—¶ï¼Œåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„åªä¼šä¿å­˜è¯¥åˆ—çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼Œè€ŒæŠŠå‰©ä½™çš„æ•°æ®æ”¾åœ¨ã€Œæº¢å‡ºé¡µã€ä¸­ï¼Œç„¶åçœŸå®æ•°æ®å¤„ç”¨ 20 å­—èŠ‚å­˜å‚¨æŒ‡å‘æº¢å‡ºé¡µçš„åœ°å€ï¼Œä»è€Œå¯ä»¥æ‰¾åˆ°å‰©ä½™æ•°æ®æ‰€åœ¨çš„é¡µã€‚</p>
<p>Compressed å’Œ Dynamic è¿™ä¸¤ç§æ ¼å¼é‡‡ç”¨å®Œå…¨çš„è¡Œæº¢å‡ºæ–¹å¼ï¼Œè®°å½•çš„çœŸå®æ•°æ®å¤„ä¸ä¼šå­˜å‚¨è¯¥åˆ—çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼Œåªå­˜å‚¨ 20 ä¸ªå­—èŠ‚çš„æŒ‡é’ˆæ¥æŒ‡å‘æº¢å‡ºé¡µã€‚è€Œå®é™…çš„æ•°æ®éƒ½å­˜å‚¨åœ¨æº¢å‡ºé¡µä¸­ã€‚<br>ç´¢å¼•åˆ†ç±»ï¼š</p>
<ul>
<li>æŒ‰ã€Œæ•°æ®ç»“æ„ã€åˆ†ç±»ï¼š<strong>B+treeç´¢å¼•ã€Hashç´¢å¼•ã€Full-textç´¢å¼•</strong>ã€‚</li>
<li>æŒ‰ã€Œç‰©ç†å­˜å‚¨ã€åˆ†ç±»ï¼š<strong>èšç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰ã€äºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰</strong>ã€‚</li>
<li>æŒ‰ã€Œå­—æ®µç‰¹æ€§ã€åˆ†ç±»ï¼š<strong>ä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€æ™®é€šç´¢å¼•ã€å‰ç¼€ç´¢å¼•</strong>ã€‚</li>
<li>æŒ‰ã€Œå­—æ®µä¸ªæ•°ã€åˆ†ç±»ï¼š<strong>å•åˆ—ç´¢å¼•ã€è”åˆç´¢å¼•</strong>ã€‚</li>
</ul>
<h3 id="MySqlæŸ¥è¯¢ä¼˜åŒ–"><a href="#MySqlæŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="MySqlæŸ¥è¯¢ä¼˜åŒ–"></a>MySqlæŸ¥è¯¢ä¼˜åŒ–</h3><ul>
<li>å•è¡¨ <ol>
<li>æ ¹æ®æœç´¢æ¡ä»¶ï¼Œæ‰¾å‡ºæ‰€æœ‰å¯èƒ½ä½¿ç”¨çš„ç´¢å¼•</li>
<li>è®¡ç®—å…¨è¡¨æ‰«æçš„ä»£ä»·</li>
<li>è®¡ç®—ä½¿ç”¨ä¸åŒç´¢å¼•æ‰§è¡ŒæŸ¥è¯¢çš„ä»£ä»·</li>
<li>å¯¹æ¯”å„ç§æ‰§è¡Œæ–¹æ¡ˆçš„ä»£ä»·ï¼Œæ‰¾å‡ºæˆæœ¬æœ€ä½çš„é‚£ä¸€ä¸ª</li>
</ol>
</li>
<li>å¤šè¡¨è¿æ¥ï¼š<ol>
<li>å•æ¬¡æŸ¥è¯¢é©±åŠ¨è¡¨çš„æˆæœ¬</li>
<li>å¤šæ¬¡æŸ¥è¯¢è¢«é©±åŠ¨è¡¨çš„æˆæœ¬ï¼ˆå…·ä½“æŸ¥è¯¢å¤šå°‘æ¬¡å–å†³äºå¯¹é©±åŠ¨è¡¨æŸ¥è¯¢çš„ç»“æœé›†ä¸­æœ‰å¤šå°‘æ¡è®°å½•ï¼‰</li>
</ol>
</li>
<li>è¿æ¥æŸ¥è¯¢æˆæœ¬å å¤§å¤´çš„å…¶å®æ˜¯ é©±åŠ¨è¡¨æ‰‡å‡ºæ•° x å•æ¬¡è®¿é—®è¢«é©±åŠ¨è¡¨çš„æˆæœ¬ ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä¼˜åŒ–<ol>
<li>é‡ç‚¹å…¶å®æ˜¯ä¸‹è¾¹è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼š</li>
<li>å°½é‡å‡å°‘é©±åŠ¨è¡¨çš„æ‰‡å‡º</li>
<li>å¯¹è¢«é©±åŠ¨è¡¨çš„è®¿é—®æˆæœ¬å°½é‡ä½</li>
</ol>
</li>
</ul>
<h3 id="Buffer-Pool-ç¼“å†²æ± "><a href="#Buffer-Pool-ç¼“å†²æ± " class="headerlink" title="Buffer Pool ç¼“å†²æ± "></a>Buffer Pool ç¼“å†²æ± </h3><p>è„é¡µï¼šç¼“å†²æ± ä¸­çš„æ•°æ®å·²ç»ä¿®æ”¹ä½†æ˜¯æ²¡æœ‰åŒæ­¥åˆ°ç£ç›˜ä¸­</p>
<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h3><ul>
<li>æ¨¡å¼: é€»è¾‘æ¨¡å¼ï¼Œæ˜¯å¼€å‘è€…å¯è§çš„æ¨¡å¼ï¼Œæ˜¯æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ï¼Œæ˜¯æ‰€æœ‰ç”¨æˆ·çš„å…¬å…±æ•°æ®è§†å›¾ã€‚</li>
<li>å¤–æ¨¡å¼:å­æ¨¡å¼ï¼Œç”¨æˆ·æ¨¡å¼ï¼Œç”¨æˆ·å¯è§</li>
<li>å†…æ¨¡å¼: å­˜å‚¨æ¨¡å¼ï¼Œæ˜¯ç‰©ç†å­˜å‚¨æ¨¡å¼</li>
</ul>
<h2 id="schema-å’Œ-database-åŒºåˆ«"><a href="#schema-å’Œ-database-åŒºåˆ«" class="headerlink" title="schema å’Œ database åŒºåˆ«"></a>schema å’Œ database åŒºåˆ«</h2><p>database æ˜¯ä¸€æ ‹æ¥¼ï¼Œschema(æ¨¡å¼) æ˜¯ä¸€ä¸ªä¸ªæˆ¿é—´ï¼Œä½†æ˜¯åœ¨mysqlä¸­ä¸¤ç§æ²¡æœ‰åŒºåˆ«ã€‚</p>
<ul>
<li>è§†å›¾å’Œè¡¨çš„åŒºåˆ«ï¼šè§†å›¾æ˜¯è¡¨çš„å­é›†ï¼Œå¸¸ç”¨äºå°†æŸ¥è¯¢ç»“æœä¿å­˜åœ¨è§†å›¾ä¸­ï¼Œæ–¹ä¾¿å†æ¬¡è°ƒç”¨</li>
<li>è¯­æ³•ï¼šâ€™CREATE VIEW viewName AS æŸ¥è¯¢å‡ºæ¥çš„è¡¨â€™</li>
</ul>
<h2 id="èŒƒå¼"><a href="#èŒƒå¼" class="headerlink" title="èŒƒå¼"></a>èŒƒå¼</h2><ul>
<li>1NF ä¿è¯åŸå­æ€§å³å¯ï¼Œä¸å¯å†åˆ†å‰²äº†</li>
<li>2NF è¦æœ‰ä¸»é”®ï¼Œä¸”ä¸å­˜åœ¨éƒ¨ä»½ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯å…¶ä»–éä¸»é”®çš„éƒ¨åˆ†è¦æ²»ç†æ¥äºä¸»é”®å³å¯</li>
<li>3NF éä¸»é”®ä¹‹é—´ä¸å­˜åœ¨ä¼ é€’ä¾èµ–ï¼Œä¾‹å¦‚ å­¦å·, å§“å, å¹´é¾„, å­¦é™¢åç§°, å­¦é™¢ç”µè¯ï¼Œæ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼Œå› ä¸ºåé¢å‡ ä¸ªå±æ€§éƒ½è¦å’Œä¸»é”®ç›¸å…³è”ï¼Œä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œä½†æ˜¯é€šè¿‡ å­¦å· -&gt; å­¦ç”Ÿ -&gt; æ‰€åœ¨é™¢ -&gt; é™¢ç”µè¯ ï¼Œæ‰€ä»¥å­˜åœ¨ä¼ é€’ä¾èµ–åº”ä¿®æ”¹ä¸ºï¼šå­¦ç”Ÿï¼š(å­¦å·, å§“å, å¹´é¾„, æ‰€åœ¨å­¦é™¢)ï¼›å­¦é™¢ï¼š(å­¦é™¢ï¼Œå­¦é™¢åç§°ï¼Œ ç”µè¯)ã€‚</li>
<li>BCNF æ¶ˆé™¤å‡ ä¸ªä¸»é”®ä¹‹é—´çš„ä¼ é€’ä¾èµ–</li>
</ul>
<h2 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a><a target="_blank" rel="noopener" href="https://xiaolincoding.com/mysql/transaction/mvcc.html#%E4%BA%8B%E5%8A%A1%E6%9C%89%E5%93%AA%E4%BA%9B%E7%89%B9%E6%80%A7">ACID</a></h2><ul>
<li><p>Atomicityï¼ˆåŸå­æ€§ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«æ¢å¤ï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p>
</li>
<li><p>Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</p>
</li>
<li><p>Isolationï¼ˆéš”ç¦»æ€§ï¼‰ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</p>
</li>
<li><p>Durabilityï¼ˆæŒä¹…æ€§ï¼‰ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p>
</li>
</ul>
<h2 id="E-Ræ¨¡å‹"><a href="#E-Ræ¨¡å‹" class="headerlink" title="E-Ræ¨¡å‹"></a>E-Ræ¨¡å‹</h2><p>E-Ræ¨¡å‹æ˜¯Entity-Relationshipæ¨¡å‹çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§ç”¨äºæ•°æ®åº“è®¾è®¡çš„æ¦‚å¿µæ€§æ•°æ®æ¨¡å‹ã€‚å®ƒç”¨æ¥æè¿°ç°å®ä¸–ç•Œä¸­çš„æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠè¿™äº›æ•°æ®çš„å±æ€§ã€‚E-Ræ¨¡å‹æä¾›äº†ä¸€ç§å›¾å½¢åŒ–çš„æ–¹å¼æ¥è¡¨ç¤ºæ•°æ®æ¨¡å‹ï¼Œä½¿æ•°æ®åº“è®¾è®¡å¸ˆèƒ½å¤Ÿæ›´å®¹æ˜“åœ°ç†è§£å’Œè§„åˆ’æ•°æ®åº“ç»“æ„ã€‚</p>
<p>E-Ræ¨¡å‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ol>
<li><p>å®ä½“ï¼ˆEntityï¼‰ï¼šå®ä½“æ˜¯ç°å®ä¸–ç•Œä¸­å¯ä»¥è¢«è¯†åˆ«çš„ç‹¬ç«‹å¯¹è±¡ï¼Œä¾‹å¦‚äººã€ç‰©å“ã€åœ°ç‚¹æˆ–æ¦‚å¿µã€‚æ¯ä¸ªå®ä½“éƒ½æœ‰ä¸€äº›å±æ€§ï¼Œç”¨æ¥æè¿°è¿™ä¸ªå®ä½“çš„ç‰¹å¾ã€‚</p>
</li>
<li><p>å±æ€§ï¼ˆAttributeï¼‰ï¼šå±æ€§æ˜¯æè¿°å®ä½“çš„ç‰¹å¾æˆ–å±æ€§ï¼Œå®ƒä»¬ç”¨æ¥å­˜å‚¨æœ‰å…³å®ä½“çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªâ€äººâ€å®ä½“ï¼Œå±æ€§å¯ä»¥åŒ…æ‹¬å§“åã€å¹´é¾„ã€æ€§åˆ«ç­‰ã€‚</p>
</li>
<li><p>å…³ç³»ï¼ˆRelationshipï¼‰ï¼šå…³ç³»è¡¨ç¤ºä¸åŒå®ä½“ä¹‹é—´çš„è”ç³»æˆ–è¿æ¥ã€‚å…³ç³»å¯ä»¥æ˜¯ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šçš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªâ€é›‡å‘˜â€å®ä½“å¯ä»¥ä¸ä¸€ä¸ªâ€éƒ¨é—¨â€å®ä½“ä¹‹é—´æœ‰ä¸€ä¸ªâ€å±äºâ€å…³ç³»ï¼Œè¡¨ç¤ºé›‡å‘˜å±äºæŸä¸ªéƒ¨é—¨ã€‚</p>
</li>
<li><p>ä¸»é”®ï¼ˆPrimary Keyï¼‰ï¼šä¸»é”®æ˜¯ä¸€ä¸ªå±æ€§æˆ–å±æ€§ç»„åˆï¼Œç”¨æ¥å”¯ä¸€æ ‡è¯†å®ä½“é›†ä¸­çš„æ¯ä¸ªå®ä½“ã€‚å®ƒç¡®ä¿äº†æ¯ä¸ªå®ä½“éƒ½å…·æœ‰å”¯ä¸€çš„æ ‡è¯†ã€‚</p>
</li>
<li><p>å¤–é”®ï¼ˆForeign Keyï¼‰ï¼šå¤–é”®æ˜¯ä¸€ä¸ªå®ä½“ä¸­çš„å±æ€§ï¼Œå®ƒå¼•ç”¨äº†å¦ä¸€ä¸ªå®ä½“çš„ä¸»é”®ï¼Œç”¨äºå»ºç«‹å®ä½“ä¹‹é—´çš„å…³è”ã€‚</p>
</li>
</ol>
<p>é€šè¿‡ä½¿ç”¨E-Ræ¨¡å‹ï¼Œæ•°æ®åº“è®¾è®¡å¸ˆå¯ä»¥æ›´å¥½åœ°ç†è§£æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä»è€Œè§„åˆ’æ•°æ®åº“çš„ç»“æ„ï¼ŒåŒ…æ‹¬è¡¨çš„è®¾è®¡ã€å…³ç³»çš„å»ºç«‹å’Œæ•°æ®çš„å­˜å‚¨ã€‚ä¸€æ—¦E-Ræ¨¡å‹å®Œæˆï¼Œå®ƒå¯ä»¥ç”¨ä½œè®¾è®¡æ•°æ®åº“æ¶æ„çš„åŸºç¡€ï¼Œè¿›è€Œåˆ›å»ºç‰©ç†æ•°æ®åº“æ¨¡å¼ï¼ˆå¦‚å…³ç³»æ¨¡å‹ï¼‰ï¼Œä»¥å®é™…å­˜å‚¨å’Œç®¡ç†æ•°æ®ã€‚è¿™æœ‰åŠ©äºç¡®ä¿æ•°æ®åº“èƒ½å¤Ÿæœ‰æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢ä¿¡æ¯ï¼Œå¹¶æ»¡è¶³åº”ç”¨ç¨‹åºçš„éœ€æ±‚ã€‚</p>
<h2 id="è‡ªè”ç»“ï¼Œå˜é‡ä¸ä¼šï¼Œè¡¥ä¸€è¡¥å»"><a href="#è‡ªè”ç»“ï¼Œå˜é‡ä¸ä¼šï¼Œè¡¥ä¸€è¡¥å»" class="headerlink" title="è‡ªè”ç»“ï¼Œå˜é‡ä¸ä¼šï¼Œè¡¥ä¸€è¡¥å»"></a>è‡ªè”ç»“ï¼Œå˜é‡ä¸ä¼šï¼Œè¡¥ä¸€è¡¥å»</h2><p>æ‰“å¼€</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>æ•°æ®ç±»å‹</strong></p>
<p>å…³ç³»å‹æ•°æ®åº“ï¼šå»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ ç›¸äº’é“¾æ¥çš„äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“</p>
<h2 id="SQLè¯­å¥"><a href="#SQLè¯­å¥" class="headerlink" title="SQLè¯­å¥"></a>SQLè¯­å¥</h2><ol>
<li><p><strong>æ•°å€¼ç±»å‹</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">TINYINT 1byte -128 - 127  0 - 255 /*åé¢åŠ ä¸Šunsigned å³å¯æŒ‡å®šä¸ºæ— ç¬¦å·*/
SMALLINT 2
MEDIUMINT 3
INT 4
BIGINT 8
FLOAT 4
DOUBLE 8
DECIMAL çœ‹ç²¾åº¦å’Œæ ‡åº¦  125.25 ç²¾åº¦ä¸º5 æ ‡åº¦ä¸º2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
<li><p><strong>å­—ç¬¦ä¸²ç±»å‹</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CHAR() å®šé•¿å­—ç¬¦ä¸²
VARCHAR æ ¹æ®å†…å®¹è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦
TINYTEXT çŸ­æ–‡æœ¬å­—ç¬¦ä¸²<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
<li><p><strong>æ—¥æœŸç±»</strong></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DATE YYYY-MM-DD
TIME HH:MM:SS
YEAR YYYY
DATETIME YYYY-MM-DD HH:MM:SS
TIMESTAMP YYYY-MM-DD HH:MM:SS æ—¶é—´æˆ³<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¸¸ç”¨å‡½æ•°</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DATE_FORMAT()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p><strong>æ—¶é—´æˆ³è®°</strong>æˆ–ç§°ä¸º<strong>æ—¶é—´æ ‡è®°</strong>ï¼ˆè‹±è¯­ï¼štimestampï¼‰æ˜¯æŒ‡å­—ç¬¦ä¸²æˆ–ç¼–ç ä¿¡æ¯ç”¨äºè¾¨è¯†è®°å½•ä¸‹æ¥çš„æ—¶é—´æ—¥æœŸã€‚å›½é™…æ ‡å‡†ä¸º<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/ISO_8601" title="ISO 8601">ISO 8601</a>ã€‚</p>
<p>æ—¶é—´æˆ³è®°çš„èŒƒä¾‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>2016-12-25T00:15:22Z</li>
<li>2005-10-30 10:45&nbsp;<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/UTC" title="UTC">UTC</a></li>
<li>Sat Jul 23 02:16:57 2005</li>
<li>2016å¹´12æœˆ25æ—¥ (æ—¥) 00:14 (UTC)</li>
</ul>
</blockquote>
</li>
</ol>
<p>æ³¨é‡Š # æˆ–è€… /**/</p>
<ol>
<li>DDL (Data Definition Language æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ç”¨äºæ“ä½œå¯¹è±¡åŠå¯¹è±¡æœ¬èº«ï¼Œè¿™ç§å¯¹è±¡åŒ…æ‹¬æ•°æ®åº“,è¡¨å¯¹è±¡ï¼ŒåŠè§†å›¾å¯¹è±¡ï¼Œè¡¨å¤´ ^c501f6</li>
<li>DML ï¼ˆData Manipulation Language æ•°æ®æ“æ§è¯­è¨€) ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡å¯¹è±¡ä¸­åŒ…å«çš„æ•°æ®</li>
<li>DQL (Data Query Language æ•°æ®æŸ¥è¯¢è¯­è¨€ )ç”¨äºæŸ¥è¯¢æ•°æ®</li>
<li>DCL ï¼ˆData Control Language æ•°æ®æ§åˆ¶è¯­å¥ï¼‰ ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡çš„æƒé™</li>
</ol>
<h3 id="DDL-Data-Definition-Language-æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ç”¨äºæ“ä½œå¯¹è±¡åŠå¯¹è±¡æœ¬èº«ï¼Œè¿™ç§å¯¹è±¡åŒ…æ‹¬æ•°æ®åº“-è¡¨å¯¹è±¡ï¼ŒåŠè§†å›¾å¯¹è±¡ï¼Œè¡¨å¤´"><a href="#DDL-Data-Definition-Language-æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ç”¨äºæ“ä½œå¯¹è±¡åŠå¯¹è±¡æœ¬èº«ï¼Œè¿™ç§å¯¹è±¡åŒ…æ‹¬æ•°æ®åº“-è¡¨å¯¹è±¡ï¼ŒåŠè§†å›¾å¯¹è±¡ï¼Œè¡¨å¤´" class="headerlink" title="DDL (Data Definition Language æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ç”¨äºæ“ä½œå¯¹è±¡åŠå¯¹è±¡æœ¬èº«ï¼Œè¿™ç§å¯¹è±¡åŒ…æ‹¬æ•°æ®åº“,è¡¨å¯¹è±¡ï¼ŒåŠè§†å›¾å¯¹è±¡ï¼Œè¡¨å¤´"></a>DDL (Data Definition Language æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ç”¨äºæ“ä½œå¯¹è±¡åŠå¯¹è±¡æœ¬èº«ï¼Œè¿™ç§å¯¹è±¡åŒ…æ‹¬æ•°æ®åº“,è¡¨å¯¹è±¡ï¼ŒåŠè§†å›¾å¯¹è±¡ï¼Œè¡¨å¤´</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SHOW DATABASES æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®åº“
SELECT DATABASE(); æŸ¥è¯¢å½“å‰æ‰€å¤„æ•°æ®åº“
CREATE DATABASE  åˆ›å»º
DROP DATABASE XXX åˆ é™¤
USE xxx  ä½¿ç”¨æ•°æ®åº“
SHOW TABLES æŸ¥è¯¢å½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨
DESC è¡¨å   æŸ¥è¯¢è¡¨ç»“æ„
SHOW CREATE TABLE è¡¨æ˜ æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥
	å­—æ®µ1 å­—æ®µ1ç±»å‹ COMMENT 'XXX',/*æ³¨é‡Š*/
     ........
    
) COMMENTT 'XXX'/*æ³¨é‡Šå¯ä»¥çœç•¥*/
/*å­—ç¬¦ä¸²ç±»å‹æ˜¯varchar(æŒ‡å®šçš„å­—ç¬¦é•¿åº¦)*/
/*ä¿®æ”¹è¡¨*/
ALTER TABLE tablename 
1.ADDå­—æ®µå ç±»å‹ comment xxx æ·»åŠ è¡¨å¤´
2.CHANGE æ—§ æ–° ç±»å‹ comment xxx ä¿®æ”¹
3.DROP name
4.RENAME TO name ä¿®æ”¹è¡¨å

DROP TABLE name åˆ é™¤
TRUNCATE TABLE name åˆ é™¤å¹¶é‡æ–°åˆ›å»ºåŒåè¡¨ï¼Œæ•°æ®ä¾æ—§ä¼šåˆ é™¤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="DML-ï¼ˆData-Manipulation-Language-æ•°æ®æ“æ§è¯­è¨€-ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡å¯¹è±¡ä¸­åŒ…å«çš„æ•°æ®"><a href="#DML-ï¼ˆData-Manipulation-Language-æ•°æ®æ“æ§è¯­è¨€-ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡å¯¹è±¡ä¸­åŒ…å«çš„æ•°æ®" class="headerlink" title="DML ï¼ˆData Manipulation Language æ•°æ®æ“æ§è¯­è¨€) ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡å¯¹è±¡ä¸­åŒ…å«çš„æ•°æ®"></a>DML ï¼ˆData Manipulation Language æ•°æ®æ“æ§è¯­è¨€) ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡å¯¹è±¡ä¸­åŒ…å«çš„æ•°æ®</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">/*æ·»åŠ æ•°æ®*/
INSERT INTO è¡¨å(å­—æ®µå) VALUES (æ•°å€¼) ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®
INSERT INTO è¡¨å  VALUES (æ•°å€¼) ç»™æ‰€æœ‰å­—æ®µåŠ ä¸Šæ•°æ®
INSERT INTO è¡¨æ˜(å­—æ®µå) VALUES (æ•°æ®) ,(æ•°æ®)
INSERT INTO è¡¨æ˜ VALUE (æ•°æ®),(æ•°æ®)...
/*ä¿®æ”¹*/
UPDATE è¡¨å SET å­—æ®µå=å€¼, .... WHERE æ¡ä»¶
DELETE è¡¨å (WHERE æ¡ä»¶) /*åˆ é™¤*/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><p>è¯­å¥ï¼šINSERT</p>
<p>å‰æ:<em><strong><u>è·å¾—æƒé™</u></strong></em></p>
<p>ç”¨æ³•ï¼š</p>
<blockquote>
<p>ï± æ’å…¥å®Œæ•´çš„è¡Œï¼›</p>
<p>ï± æ’å…¥è¡Œçš„ä¸€éƒ¨åˆ†ï¼›</p>
<p>ï± æ’å…¥æŸäº›æŸ¥è¯¢çš„ç»“æœã€‚</p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
   <pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT INTO Customers 
VALUES('1000000006', 
 'Toy Land', 
 '123 Any Street', 
 'New York', 
 'NY', 
 '11111', 
 'USA', 
 NULL, 
 NULL);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>   æ›´åŠ å®‰å…¨çš„æ“ä½œ,å°†è¦æ’å…¥çš„åˆ—ä¹Ÿåˆ—å‡º</p>
   <pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT INTO Customers(cust_id, 
 cust_name, 
 cust_address, 
 cust_city, 
 cust_state, 
 cust_zip, 
 cust_country, 
 cust_contact, 
 cust_email) 
VALUES('1000000006', 
 'Toy Land', 
 '123 Any Street', 
 'New York', 
 'NY', 
 '11111', 
 'USA', 
 NULL, 
 NULL);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="2">
<li><p>æ’å…¥åˆ—çš„ä¸€éƒ¨åˆ†ï¼Œè¯­æ³•å’Œä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯ä¸éœ€è¦æ’å…¥çš„åˆ—å¯ä»¥çœç•¥ä¸å†™ï¼Œåˆ—åä¸å†™ï¼Œå¯¹åº”çš„æ•°æ®ä¹Ÿä¸å†™</p>
</li>
<li><p>æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®</p>
<p>è¯­æ³•ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT cust_id, 
 cust_contact, 
 cust_email, 
 cust_name, 
 cust_address, 
 cust_city, 
 cust_state, 
 cust_zip, 
 cust_country 
FROM CustNew;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><u>å®ƒä½¿ç”¨çš„æ˜¯åˆ—çš„ä½ç½®ï¼Œå› æ­¤ SELECT ä¸­çš„ç¬¬ä¸€åˆ—ï¼ˆä¸ç®¡</u></p>
<p><u>å…¶åˆ—åï¼‰å°†ç”¨æ¥å¡«å……è¡¨åˆ—ä¸­æŒ‡å®šçš„ç¬¬ä¸€åˆ—ï¼Œç¬¬äºŒåˆ—å°†ç”¨æ¥å¡«å……è¡¨åˆ—ä¸­</u></p>
<p><u>æŒ‡å®šçš„ç¬¬äºŒåˆ—ï¼Œå¦‚æ­¤ç­‰ç­‰</u></p>
<p>INSERT SELECT ä¸­ SELECT è¯­å¥å¯ä»¥åŒ…å« WHERE å­å¥ï¼Œä»¥è¿‡æ»¤æ’å…¥çš„æ•°æ®ã€‚</p>
<p>INSERT é€šå¸¸åªæ’å…¥ä¸€è¡Œã€‚è¦æ’å…¥å¤šè¡Œï¼Œå¿…é¡»æ‰§è¡Œå¤šä¸ª INSERT è¯­å¥ã€‚</p>
<p>INSERT SELECTæ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒå¯ä»¥ç”¨ä¸€æ¡INSERTæ’å…¥å¤šè¡Œï¼Œä¸ç®¡SELECT</p>
<p>è¯­å¥è¿”å›å¤šå°‘è¡Œï¼Œéƒ½</p>
</li>
<li><p>ä»ä¸€ä¸ªè¡¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªè¡¨</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE CustCopy AS 
SELECT * FROM Customers;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><u>SELECT INTO æ˜¯è¯•éªŒæ–° SQL è¯­å¥å‰è¿›è¡Œè¡¨å¤åˆ¶çš„å¾ˆå¥½å·¥å…·ã€‚å…ˆè¿›è¡Œå¤</u></p>
<p><u>åˆ¶ï¼Œå¯åœ¨å¤åˆ¶çš„æ•°æ®ä¸Šæµ‹è¯• SQL ä»£ç ï¼Œè€Œä¸ä¼šå½±å“å®é™…çš„æ•°æ®ã€‚</u></p>
<h2 id="æ›´æ–°ä¸åˆ é™¤"><a href="#æ›´æ–°ä¸åˆ é™¤" class="headerlink" title="æ›´æ–°ä¸åˆ é™¤"></a>æ›´æ–°ä¸åˆ é™¤</h2><h3 id="æ›´æ–°ï¼šUPDATE-æ³¨æ„è¦ç”¨WHERE-å¦åˆ™ä¼šå‡ºäº‹"><a href="#æ›´æ–°ï¼šUPDATE-æ³¨æ„è¦ç”¨WHERE-å¦åˆ™ä¼šå‡ºäº‹" class="headerlink" title="æ›´æ–°ï¼šUPDATE æ³¨æ„è¦ç”¨WHERE å¦åˆ™ä¼šå‡ºäº‹"></a>æ›´æ–°ï¼šUPDATE æ³¨æ„è¦ç”¨WHERE å¦åˆ™ä¼šå‡ºäº‹</h3><ol>
<li><p>æ›´æ–°ç‰¹å®šè¡Œ</p>
<p>è¯­æ³•ï¼š</p>
<p>ï± è¦æ›´æ–°çš„è¡¨ï¼›</p>
<p>ï± åˆ—åå’Œå®ƒä»¬çš„æ–°å€¼ï¼›</p>
<p>ï± ç¡®å®šè¦æ›´æ–°å“ªäº›è¡Œçš„è¿‡æ»¤æ¡ä»¶ã€‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">UPDATE Customers 
SET cust_email = 'kim@thetoystore.com' 
WHERE cust_id = '1000000005';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>UPDATE è¯­å¥ä»¥ WHERE å­å¥ç»“æŸï¼Œå®ƒå‘Šè¯‰ DBMS æ›´æ–°å“ªä¸€è¡Œã€‚æ²¡æœ‰ WHERE</p>
<p>å­å¥ï¼ŒDBMS å°†ä¼šç”¨è¿™ä¸ªç”µå­é‚®ä»¶åœ°å€æ›´æ–° Customers è¡¨ä¸­çš„æ‰€æœ‰è¡Œï¼Œ</p>
<p>è¿™ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ã€‚</p>
</blockquote>
</li>
<li><p>æ›´æ–°ç‰¹å®šåˆ—</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">UPDATE Customers 
SET cust_contact = 'Sam Roberts', 
 cust_email = 'sam@toyland.com' 
WHERE cust_id = '1000000006';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>åœ¨æ›´æ–°å¤šä¸ªåˆ—æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€æ¡ SET å‘½ä»¤ï¼Œæ¯ä¸ªâ€œåˆ—=å€¼â€å¯¹ä¹‹é—´ç”¨</p>
<p>UPDATE è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢ï¼Œä½¿å¾—èƒ½ç”¨ SELECT è¯­å¥æ£€ç´¢å‡ºçš„æ•°æ®</p>
<p>æ›´æ–°åˆ—æ•°æ®</p>
<p>è¦åˆ é™¤æŸä¸ªåˆ—çš„å€¼ï¼Œå¯è®¾ç½®å®ƒä¸º NULLï¼ˆå‡å¦‚è¡¨å®šä¹‰å…è®¸ NULL å€¼ï¼‰</p>
</blockquote>
</li>
</ol>
</li>
</ol>
<h4 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h4><p>DELETE  æ³¨æ„WHERE ç¼ºå°‘æ˜¯ä¼šå‡ºäº‹çš„</p>
<p>ï± ä»è¡¨ä¸­åˆ é™¤ç‰¹å®šçš„è¡Œ</p>
<p>ï± ä»è¡¨ä¸­åˆ é™¤æ‰€æœ‰è¡Œã€‚</p>
<ol>
<li><p>åˆ é™¤ç‰¹å®šè¡Œ</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DELETE FROM Customers 
WHERE cust_id = '1000000006';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<blockquote>
<p>DELETE è¯­å¥ä»è¡¨ä¸­åˆ é™¤è¡Œï¼Œç”šè‡³æ˜¯åˆ é™¤è¡¨ä¸­æ‰€æœ‰è¡Œã€‚ä½†æ˜¯ï¼ŒDELETE</p>
<p>ä¸åˆ é™¤è¡¨æœ¬èº«</p>
<p>æœæƒ³ä»è¡¨ä¸­åˆ é™¤æ‰€æœ‰è¡Œï¼Œä¸è¦ä½¿ç”¨ DELETEã€‚å¯ä½¿ç”¨ TRUNCATE +TABLE +è¡¨å</p>
<p>è¯­å¥ï¼Œå®ƒå®Œæˆç›¸åŒçš„å·¥ä½œï¼Œè€Œé€Ÿåº¦æ›´å¿«ï¼ˆå› ä¸ºä¸è®°å½•æ•°æ®çš„å˜åŠ¨ï¼‰ã€‚</p>
</blockquote>
</li>
<li><p>åˆ é™¤å…¨éƒ¨è¡Œ</p>
<blockquote>
<p>å¦‚æœæ‰§è¡Œ DELETE è¯­å¥è€Œä¸å¸¦ WHERE</p>
<p>å­å¥ï¼Œè¡¨çš„æ‰€æœ‰æ•°æ®éƒ½å°†è¢«åˆ é™¤</p>
</blockquote>
</li>
</ol>
<h3 id="DQL-Data-Query-Language-æ•°æ®æŸ¥è¯¢è¯­è¨€-ç”¨äºæŸ¥è¯¢æ•°æ®"><a href="#DQL-Data-Query-Language-æ•°æ®æŸ¥è¯¢è¯­è¨€-ç”¨äºæŸ¥è¯¢æ•°æ®" class="headerlink" title="DQL (Data Query Language æ•°æ®æŸ¥è¯¢è¯­è¨€ )ç”¨äºæŸ¥è¯¢æ•°æ®"></a>DQL (Data Query Language æ•°æ®æŸ¥è¯¢è¯­è¨€ )ç”¨äºæŸ¥è¯¢æ•°æ®</h3><blockquote>
<p>SELECT + å­—æ®µåˆ—è¡¨<br>FROM  è¡¨ååˆ—è¡¨<br>WHERE æ¡ä»¶åˆ—è¡¨<br>[[æ•°æ®åº“#^aa4a30|GROUP BY åˆ†ç»„å­—æ®µåˆ—è¡¨]]<br>HAVING åˆ†ç»„åæ¡ä»¶åˆ—è¡¨<br>ORDER BY æ’åº<br>LIMIT  åˆ†é¡µå‚æ•°<br>[[æ•°æ®åº“#^1cd456|AS è®¾ç½®åˆ«å]]<br>WHRER å’Œ HAVING çš„åŒºåˆ«ï¼ŒWHERE åœ¨åˆ†ç»„ä¹‹å‰èµ·ä½œç”¨ï¼ŒHAVINGåœ¨åˆ†ç»„ä¹‹åèµ·ä½œç”¨</p>
</blockquote>
<h4 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h4><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT å­—æ®µ1ï¼Œ... FROM è¡¨ æˆ–è€… SELECT * FROM
SELECT DISTINCT å»é‡
SELECT å­—æ®µ AS åˆ«å  ... FROM è®¾ç½®å­—æ®µçš„åˆ«å
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>æ¡ä»¶</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT XXX FROM XXX WHERE +
&gt; &gt;= &lt; &lt;= = &lt;&gt;(ä¸ç­‰äºï¼Œç›¸å½“äº!=) BETWEEN ... AND ... 
IN (...) æ»¡è¶³åˆ—è¡¨ä¸­çš„å…¶ä¸€
LIKE åŒ…å«è¿™ä¸ªå­—ç¬¦ æ¨¡ç³ŠåŒ¹é…
'%a'     //ä»¥aç»“å°¾çš„æ•°æ®
'a%'     //ä»¥aå¼€å¤´çš„æ•°æ®
'%a%'    //å«æœ‰açš„æ•°æ®
'_a_'    //ä¸‰ä½ä¸”ä¸­é—´å­—æ¯æ˜¯açš„
'_a'     //ä¸¤ä½ä¸”ç»“å°¾å­—æ¯æ˜¯açš„
'a_'     //ä¸¤ä½ä¸”å¼€å¤´å­—æ¯æ˜¯açš„
'___'    //å«æœ‰ä¸‰ä¸ªå­—ç¬¦çš„
'[]'     //ç±»ä¼¼æ­£åˆ™è¡¨è¾¾å¼
'[^]'    //ä¸åŒ…å«æ‹¬å·ä¹‹å†…çš„å•ä¸ªå­—ç¬¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>èšåˆå‡½æ•°:å°†ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT +
count 
max
min
avg å¹³å‡å€¼
sum
+ å­—æ®µåˆ—è¡¨
+  FROM è¡¨å<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åˆ†ç»„æŸ¥è¯¢ ^aa4a30</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT å­—æ®µå FROM è¡¨ WHERE GROUP BY åˆ†ç»„å­—æ®µå HAVING åˆ†ç»„ä¹‹åçš„è¿‡æ»¤æ¡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>æ’åºæŸ¥è¯¢</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT xx FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼(ASCå‡åºï¼ŒDESC é™åº)
ï¼Œå­—æ®µ2 XXX <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><u>åˆ†é¡µæŸ¥è¯¢</u></p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT xx FROM XXX LIMIT (èµ·å§‹ç´¢å¼•ï¼ŒæŸ¥è¯¢è®°å½•æ•°)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ç­‰äºOFFSET n ROWS<br>FETCH NEXY M ROWS ONLY è·³è¿‡nè¡Œï¼Œå¹¶è¿”å›æ¥ä¸‹æ¥çš„mè¡Œ</p>
<h3 id="DCL-ï¼ˆData-Control-Language-æ•°æ®æ§åˆ¶è¯­å¥ï¼‰-ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡çš„æƒé™"><a href="#DCL-ï¼ˆData-Control-Language-æ•°æ®æ§åˆ¶è¯­å¥ï¼‰-ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡çš„æƒé™" class="headerlink" title="DCL ï¼ˆData Control Language æ•°æ®æ§åˆ¶è¯­å¥ï¼‰ ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡çš„æƒé™"></a>DCL ï¼ˆData Control Language æ•°æ®æ§åˆ¶è¯­å¥ï¼‰ ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡çš„æƒé™</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * FORM user
CREATE USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED BY '/'/*ä½¿ç”¨%æ¥æŒ‡å®šä»»æ„ä¸»æœºéƒ½å¯ä»¥è®¿é—®*/
ALTER USER 'ç”¨æˆ·å' @ 'ä¸»æœºå' IDENTIFIED WITH  mysql_native_password BY 'æ–°å¯†ç '  ä¿®æ”¹å¯†ç 
DROP USER 'ç”¨æˆ·å' @ 'ä¸»æœºå' åˆ é™¤ç”¨æˆ·
/*æƒé™æ§åˆ¶*/
SHOW GRANT FOR 'ç”¨æˆ·å'@'ä¸»æœºå'
GRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å è¡¨å TO 'ç”¨æˆ·å'@'ä¸»æœºå'
å–æ¶ˆæƒé™
REVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å è¡¨å FROM 'ç”¨æˆ·å'@'ä¸»æœºå'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å‡½æ•°-é…åˆSELECT-ä½¿ç”¨"><a href="#å‡½æ•°-é…åˆSELECT-ä½¿ç”¨" class="headerlink" title="å‡½æ•° é…åˆSELECT ä½¿ç”¨"></a>å‡½æ•° é…åˆSELECT ä½¿ç”¨</h2><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CONCAT (s1,s2...) æ‹¼æ¥
LOWER(str)
UPPER(str)
LPAD(str,n,pad) å·¦å¡«å……ï¼Œç”¨padæ¥å¡«å……åŸå­—ç¬¦ä¸²ï¼Œå¡«å……næ¬¡
RPAD å³å¡«å……
TRIM(str) å»æ‰é¦–ä½çš„ç©ºæ ¼
SUBSTRING(str,start,len) <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="æ•°å€¼å‡½æ•°"><a href="#æ•°å€¼å‡½æ•°" class="headerlink" title="æ•°å€¼å‡½æ•°"></a>æ•°å€¼å‡½æ•°</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CEIL() å‘ä¸Šå–æ•´
FLOOR() å‘ä¸‹å–æ•´
MOD(x,y) x % y
RAND() 0-1å†…çš„éšæœºæ•°
ROUND(x,y) å››èˆäº”å…¥ä¿ç•™yä½å°æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a><em>æ—¥æœŸå‡½æ•°</em></h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CURDATE() è¿”å›å½“å‰æ—¥æœŸ
CURTIME()
NOW() å½“å‰æ—¥æœŸå’Œæ—¶é—´
YEAR(date) è·å–æŒ‡å®šæ—¥æœŸçš„å¹´ä»½
MONTH(date)
DAY(date)
DATE_ADD(date,interval expr type) è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´åŠ ä¸Šæ—¶é—´é—´éš”expråçš„æ—¶é—´
DATEDIFF(date1,date2) è¿”å›ä¸¤ä¸ªæ—¥æœŸç›¸å·®çš„å¤©æ•°
timestampdiff(é—´éš”ç±»å‹ï¼Œå‰ä¸€ä¸ªæ—¶é—´ï¼Œåä¸€ä¸ªæ—¶é—´) è®¡ç®—æ—¥æœŸæŸ¥
ä¾‹å¦‚: timestampdiff(YEAR,hiredate,now()))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="æµç¨‹å‡½æ•°"><a href="#æµç¨‹å‡½æ•°" class="headerlink" title="æµç¨‹å‡½æ•°"></a><em>æµç¨‹å‡½æ•°</em></h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">if (value,t,f) å¦‚æœvalue true è¿”å›t å¦åˆ™è¿”å›f
IFNULL(v1,v2) å¦‚æœv1ä¸ä¸ºç©ºè¿”å›v1,å¦åˆ™è¿”å›v2
CASE WHEN (v1) THEN (res1)
WHEN (v2) THEN (res2)
....
ELSE default END
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="çº¦æŸ-ä½œç”¨åŸŸè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®"><a href="#çº¦æŸ-ä½œç”¨åŸŸè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®" class="headerlink" title="çº¦æŸ ä½œç”¨åŸŸè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®"></a>çº¦æŸ ä½œç”¨åŸŸè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®</h2><p>ç›®çš„æ˜¯æœªæ¥ä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§æœ‰æ•ˆæ€§<br>åˆ†ç±»</p>
<blockquote>
<p>éç©ºçº¦æŸï¼Œå­—æ®µä¸èƒ½ä¸ºnull     å…³é”®å­—: NOT NULL<br>å”¯ä¸€çº¦æŸ å­—æ®µä¸èƒ½é‡å¤           UNIQUE<br>ä¸»é”®çº¦æŸ ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€è¡¨ç¤ºï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€ PRIMARY KEY<br>é»˜è®¤çº¦æŸ ä½¿ç”¨é»˜è®¤å€¼ DEFAULT<br>æ£€æŸ¥çº¦æŸ ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶ CHECK<br>å¤–é”®çº¦æŸ æ¥è®©ä¸¤æ•´è¡¨ä¹‹é—´å»ºç«‹ç»ƒä¹ ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ FOREIGN KEY</p>
</blockquote>
<p>ç¤ºä¾‹ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table user  
(  
    name   varchar(10) not null unique comment 'å§“åä¸ä¸ºç©ºä¸”ä¸èƒ½é‡å¤',  
    age    int check ( age &gt; 0 &amp;&amp; age &lt;= 120) comment 'å¹´é¾„æ£€æŸ¥ä¸º0-120',  
    status char(1) default '1' comment 'çŠ¶æ€é»˜è®¤ä¸º1',  
    gender char(1) comment 'æ€§åˆ«'  
) comment 'ç”¨æˆ·è¡¨';
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¤–é”®</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">1.å»ºè¡¨æ—¶
CREATE TABLE (
 ....
 ....
 CONSTRAINT å¤–é”®åç§° FOREGIN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨åˆ—å
)
2. ALTER TABLE è¡¨ ADD CONSTRAINT å¤–é”®å(è‡ªå®šä¹‰) FOREIGN KEY (æœ¬è¡¨)å­—æ®µå REFERENCES å¤–è¡¨+(å­—æ®µå)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åˆ é™¤/æ›´æ–°</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER TABLE è¡¨ ADD CONSTRAINT å¤–é”®å(è‡ªå®šä¹‰) FOREIGN KEY (æœ¬è¡¨)å­—æ®µå REFERENCES å¤–è¡¨+(å­—æ®µå) ON UPDATE æ›´æ–°æ—¶çš„æ“ä½œ  ON DELETE åˆ é™¤æ—¶è¦æ‰§è¡Œçš„æ“ä½œ
æ“ä½œæœ‰
NO ACTION åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥ï¼Œè¯¥è®°å½•æ˜¯å¦æœ‰å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸æ›´æ–°æˆ–è€…åˆ é™¤
RESTRICT  åŒ NO ACTION 
CASCADE å¯ä»¥åˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•
SET NULL è®¾ç½®å­è¡¨ä¸­çš„å¤–é”®è®°å½•ä¸ºNULL
SET DEFAULT è®¾ç½®ä¸ºä¸€ä¸ªé»˜è®¤å€¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h2><blockquote>
<p>å¤šè¡¨å…³ç³»ï¼š<br>ä¸€å¯¹å¤š å¤šçš„ä¸€æ–¹å»ºç«‹å¤–é”®æŒ‡å‘ä¸€<br>å¤šå¯¹å¤š å»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹<br>ä¸€å¯¹ä¸€ ä»»æ„ä¸€æ–¹åŠ ä¸Šå¤–é”®å¹¶è®¾ç½®ä¸ºUNIQUE</p>
</blockquote>
<h3 id="å­æŸ¥è¯¢ï¼š"><a href="#å­æŸ¥è¯¢ï¼š" class="headerlink" title="å­æŸ¥è¯¢ï¼š"></a>å­æŸ¥è¯¢ï¼š</h3><p>æŸ¥è¯¢åµŒå¥—ï¼Œæ‹¬å·å†…çš„æŸ¥è¯¢ç»“æœä½œä¸ºæ‹¬å·å¤–çš„æ¡ä»¶ ä¾‹å­ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT cust_id 
FROM Orders 
WHERE order_num IN (SELECT order_num 
 FROM OrderItems 
 WHERE prod_id = 'RGAN01');			<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ–è€…</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT cust_name, 
 cust_state, 
 (SELECT COUNT(*) 
 FROM Orders 
 WHERE Orders.cust_id = Customers.cust_id) AS orders 
FROM Customers 
ORDER BY cust_name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ ‡é‡å­æŸ¥è¯¢<br>å­æŸ¥è¯¢è¿”å›å•ä¸ªå€¼<br>åˆ—å­æŸ¥è¯¢ï¼Œè¿”å›ç»“æœæ˜¯ä¸€åˆ—æˆ–è€…å¤šè¡Œ<br>å¸¸ç”¨æ“ä½œç¬¦å·</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">IN
NOT IN
ANY
SOME  å’ŒANYç›¸åŒ
ALL <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è¡Œå­æŸ¥è¯¢ï¼Œè¿”å›ä¸€è¡Œæˆ–è€…æ˜¯å¤šåˆ—</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">= &lt; &gt; IN NOT IN <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>è¡¨å­æŸ¥è¯¢<br>è¿”å›å¤šè¡Œå¤šåˆ—<br>å¸¸ç”¨IN æ¥è¿›è¡ŒæŸ¥è¯¢</p>
<h2 id="è”ç»“è¡¨"><a href="#è”ç»“è¡¨" class="headerlink" title="è”ç»“è¡¨"></a>è”ç»“è¡¨</h2><ol>
<li>å†…è”ç»“</li>
</ol>
<p>æ¯”å¦‚</p>
<p>è¿›è¡Œæ•°æ®å­˜å‚¨çš„æ—¶å€™ï¼Œä¼šæŒ‡å®šä¸€ç§è”ç³»æ–¹å¼</p>
<p>å¯ä»¥ç±»æ¯”ä¸ºæ•£åˆ—è¡¨æˆ–è€…map</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT vend_name, prod_name, prod_price 
FROM Vendors, Products 
WHERE Vendors.vend_id = Products.vend_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>æ­£å¼ç”¨æ³•</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT vend_name, prod_name, prod_price 
FROM Vendors INNER JOIN Products 
 ON Vendors.vend_id = Products.vend_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>onä¹‹åçš„å¼åŒ¹é…è§„åˆ™ï¼ŒåŒæ—¶ä¸ºäº†é˜²æ­¢å†²çªï¼Œå°½é‡ç”¨ç‚¹æ¥è·å–æ¯ä¸ªä¸åŒçš„åº“çš„æ•°æ®</p>
<p>è”ç»“å¤šä¸ªè¡¨</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT prod_name, vend_name, prod_price, quantity 
FROM OrderItems, Products, Vendors 
WHERE Products.vend_id = Vendors.vend_id 
 AND OrderItems.prod_id = Products.prod_id 
 AND order_num = 20007;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>2.è‡ªè”ç»“</p>
<p><u>è”ç»“ä¸­ä»ç„¶å¯ä»¥ä½¿ç”¨å†…èšå‡½æ•°</u></p>
<p>ä¾‹å¦‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT Customers.cust_id, 
 COUNT(Orders.order_num) AS num_ord 
FROM Customers INNER JOIN Orders 
 ON Customers.cust_id = Orders.cust_id 
GROUP BY Customers.cust_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ç»Ÿä¸€è¡¨å†…è”ç»“è‡ªå·±</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT c1.cust_id, c1.cust_name, c1.cust_contact 
FROM Customers AS c1, Customers AS c2 
WHERE c1.cust_name = c2.cust_name 
 AND c2.cust_contact = 'Jim Jones';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>3.è‡ªç„¶è”ç»“</p>
<blockquote>
<p>è‡ªç„¶è”ç»“æ’é™¤å¤šæ¬¡å‡ºç°ï¼Œä½¿æ¯ä¸€åˆ—åªè¿”å›ä¸€æ¬¡ã€‚</p>
</blockquote>
<blockquote>
<p>è‡ªç„¶è”ç»“è¦æ±‚ä½ åªèƒ½é€‰æ‹©é‚£äº›å”¯ä¸€çš„åˆ—ï¼Œä¸€èˆ¬é€šè¿‡å¯¹ä¸€ä¸ªè¡¨ä½¿ç”¨é€šé…ç¬¦</p>
<p>ï¼ˆSELECT *ï¼‰ï¼Œè€Œå¯¹å…¶ä»–è¡¨çš„åˆ—ä½¿ç”¨æ˜ç¡®çš„å­é›†æ¥å®Œæˆã€‚</p>
</blockquote>
<p>è¦è‡ªå·±å®Œæˆï¼Œç³»ç»Ÿä¸æä¾›</p>
<p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬è¿„ä»Šä¸ºæ­¢å»ºç«‹çš„æ¯ä¸ªå†…è”ç»“éƒ½æ˜¯è‡ªç„¶è”ç»“ï¼Œå¾ˆå¯èƒ½æ°¸è¿œéƒ½</p>
<p>ä¸ä¼šç”¨åˆ°ä¸æ˜¯è‡ªç„¶è”ç»“çš„å†…è”ç»“ã€‚</p>
<p>4.å¤–è”ç»“</p>
<blockquote>
<p>è”ç»“åŒ…å«äº†é‚£äº›åœ¨ç›¸å…³è¡¨ä¸­æ²¡æœ‰å…³è”è¡Œçš„è¡Œã€‚è¿™ç§è”ç»“</p>
<p>ç§°ä¸ºå¤–è”ç»“ã€‚</p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<p>å…§è”ç»“ï¼š</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT Customers.cust_id, Orders.order_num 
FROM Customers INNER JOIN Orders 
 ON Customers.cust_id = Orders.cust_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>å¤–è”ç»“ï¼š<br>ä½¿ç”¨åœºæ™¯</p>
<ul>
<li><p><input disabled="" type="checkbox"> 
å¯¹æ¯ä¸ªé¡¾å®¢ä¸‹çš„è®¢å•è¿›è¡Œè®¡æ•°ï¼ŒåŒ…æ‹¬é‚£äº›è‡³ä»Šå°šæœªä¸‹è®¢å•çš„é¡¾å®¢ï¼›</p>
</li>
<li><p><input disabled="" type="checkbox"> 
åˆ—å‡ºæ‰€æœ‰äº§å“ä»¥åŠè®¢è´­æ•°é‡ï¼ŒåŒ…æ‹¬æ²¡æœ‰äººè®¢è´­çš„äº§å“ï¼›</p>
</li>
<li><p><input disabled="" type="checkbox"> 
è®¡ç®—å¹³å‡é”€å”®è§„æ¨¡ï¼ŒåŒ…æ‹¬é‚£äº›è‡³ä»Šå°šæœªä¸‹è®¢å•çš„é¡¾å®¢ã€‚</p>
</li>
</ul>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT Customers.cust_id, Orders.order_num 
FROM Customers LEFT OUTER JOIN Orders 
 ON Customers.cust_id = Orders.cust_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>åœ¨ä½¿ç”¨ OUTER </p>
<p>JOIN è¯­æ³•æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ RIGHT æˆ– LEFT å…³é”®å­—æŒ‡å®šåŒ…æ‹¬å…¶æ‰€æœ‰è¡Œçš„è¡¨</p>
<p>ï¼ˆRIGHT æŒ‡å‡ºçš„æ˜¯ OUTER JOIN å³è¾¹çš„è¡¨ï¼Œè€Œ LEFT æŒ‡å‡ºçš„æ˜¯ OUTER JOIN</p>
<p>å·¦è¾¹çš„è¡¨ï¼‰ã€‚</p>
<p>ä¹Ÿå°±æ˜¯left å°†è¦è”ç»“å·¦ä¾§çš„é‚£ä¸ªè¡¨å…¨éƒ¨é€‰å‡º</p>
<p>right å°†å³ä¾§çš„é‚£ä¸ªè¡¨å…¨é€‰å‡º</p>
</blockquote>
<p><strong>å…¨å¤–è”ç»“</strong></p>
<p><u><em>Accessã€MariaDBã€MySQLã€Open Office Base å’Œ SQLite ä¸æ”¯æŒ FULL</em></u></p>
<blockquote>
<p>è¿˜å­˜åœ¨å¦ä¸€ç§å¤–è”ç»“ï¼Œå°±æ˜¯å…¨å¤–è”ç»“ï¼ˆfull outer joinï¼‰ï¼Œå®ƒæ£€ç´¢ä¸¤ä¸ªè¡¨ä¸­</p>
<p>çš„æ‰€æœ‰è¡Œå¹¶å…³è”é‚£äº›å¯ä»¥å…³è”çš„è¡Œã€‚ä¸å·¦å¤–è”ç»“æˆ–å³å¤–è”ç»“åŒ…å«ä¸€ä¸ªè¡¨</p>
<p>çš„ä¸å…³è”çš„è¡Œä¸åŒï¼Œå…¨å¤–è”ç»“åŒ…å«ä¸¤ä¸ªè¡¨çš„ä¸å…³è”çš„è¡Œã€‚</p>
</blockquote>
<h2 id="è”ç»“ä½¿ç”¨æ¡ä»¶"><a href="#è”ç»“ä½¿ç”¨æ¡ä»¶" class="headerlink" title="è”ç»“ä½¿ç”¨æ¡ä»¶"></a>è”ç»“ä½¿ç”¨æ¡ä»¶</h2><blockquote>
<p><strong><u>ï± æ³¨æ„æ‰€ä½¿ç”¨çš„è”ç»“ç±»å‹ã€‚ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨å†…è”ç»“ï¼Œä½†ä½¿ç”¨å¤–è”ç»“ä¹Ÿæœ‰æ•ˆã€‚</u></strong></p>
<p><u><strong>ï± å…³äºç¡®åˆ‡çš„è”ç»“è¯­æ³•ï¼Œåº”è¯¥æŸ¥çœ‹å…·ä½“çš„æ–‡æ¡£ï¼Œçœ‹ç›¸åº”çš„ DBMS æ”¯æŒä½•</strong></u><u><strong>ç§è¯­æ³•ï¼ˆå¤§å¤šæ•° DBMS ä½¿ç”¨è¿™ä¸¤è¯¾ä¸­æè¿°çš„æŸç§è¯­æ³•ï¼‰ã€‚</strong></u></p>
<p><u><strong>ï± ä¿è¯ä½¿ç”¨æ­£ç¡®çš„è”ç»“æ¡ä»¶ï¼ˆä¸ç®¡é‡‡ç”¨å“ªç§è¯­æ³•ï¼‰ï¼Œå¦åˆ™ä¼šè¿”å›ä¸æ­£ç¡®</strong></u></p>
<p><u><strong>çš„æ•°æ®ã€‚</strong></u></p>
<p><u><strong>ï± åº”è¯¥æ€»æ˜¯æä¾›è”ç»“æ¡ä»¶ï¼Œå¦åˆ™ä¼šå¾—å‡ºç¬›å¡å„¿ç§¯ã€‚</strong></u></p>
<p><u><strong>ï± åœ¨ä¸€ä¸ªè”ç»“ä¸­å¯ä»¥åŒ…å«å¤šä¸ªè¡¨ï¼Œç”šè‡³å¯ä»¥å¯¹æ¯ä¸ªè”ç»“é‡‡ç”¨ä¸åŒçš„è”ç»“</strong></u></p>
<p><u><strong>ç±»å‹ã€‚è™½ç„¶è¿™æ ·åšæ˜¯åˆæ³•çš„ï¼Œä¸€èˆ¬ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œä½†åº”è¯¥åœ¨ä¸€èµ·æµ‹è¯•å®ƒä»¬</strong></u></p>
<p><strong><u><strong>å‰åˆ†åˆ«æµ‹è¯•æ¯ä¸ªè”ç»“ã€‚è¿™ä¼šä½¿æ•…éšœæ’é™¤æ›´ä¸ºç®€å•ã€‚</strong></u></strong> </p>
</blockquote>
<h3 id="joinåŒºåˆ«"><a href="#joinåŒºåˆ«" class="headerlink" title="joinåŒºåˆ«"></a>joinåŒºåˆ«</h3><p><strong>æ™®é€šçš„joinæ˜¯ç¬›å¡å°”ç§¯ï¼Œå³ä¸ºä¸¤å¼ è¡¨çš„æ’åˆ—ç»„åˆ</strong></p>
<p><img src="/2023/08/02/hou-duan/shu-ju-ku/join.jpg" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/join.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></p>
<h2 id="èµ·åˆ«å"><a href="#èµ·åˆ«å" class="headerlink" title="èµ·åˆ«å"></a>èµ·åˆ«å</h2><p>åœ¨ä½¿ç”¨æ—¶ç›´æ¥ç”¨AS +åˆ«åå°±å¯ä»¥ç”¨äº† ^1cd456</p>
<p><strong>åªèƒ½æ¯æ¬¡ç”¨çš„æ—¶å€™èµ·ä¸€æ¬¡åˆ«åå¹¶ä¸”å½“æ—¶ä½¿ç”¨</strong></p>
<p>ä¸‹ä¸€ä¸ªè¯­å¥åˆ«åå°±ä¸èƒ½ç”¨äº†ï¼Œè¦é‡æ–°èµ·åå­—</p>
<h2 id="UNION"><a href="#UNION" class="headerlink" title=" UNION "></a><u> UNION </u></h2><p>è¯­æ³•ï¼š</p>
<p>é€‚ç”¨äºä»å¤šä¸ªä¸åŒçš„è¡¨ä¸­æŒ‘é€‰ä¸åŒçš„åˆ—</p>
<blockquote>
<p>UNION ä¸­çš„æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ã€è¡¨è¾¾å¼æˆ–èšé›†å‡½æ•°ï¼ˆä¸è¿‡ï¼Œ</p>
<p>å„ä¸ªåˆ—ä¸éœ€è¦ä»¥ç›¸åŒçš„æ¬¡åºåˆ—å‡ºï¼‰</p>
</blockquote>
<blockquote>
<p>UNION ä»æŸ¥è¯¢ç»“æœé›†ä¸­è‡ªåŠ¨å»é™¤äº†é‡å¤çš„è¡Œï¼›æ¢å¥è¯è¯´ï¼Œå®ƒçš„è¡Œä¸ºä¸ä¸€</p>
<p>æ¡ SELECT è¯­å¥ä¸­ä½¿ç”¨å¤šä¸ª WHERE å­å¥æ¡ä»¶ä¸€æ ·ã€‚</p>
<p>è¿™æ˜¯ UNION çš„é»˜è®¤è¡Œä¸ºï¼Œå¦‚æœæ„¿æ„ä¹Ÿå¯ä»¥æ”¹å˜å®ƒã€‚äº‹å®ä¸Šï¼Œå¦‚æœæƒ³è¿”å›</p>
<p>æ‰€æœ‰çš„åŒ¹é…è¡Œï¼Œå¯ä½¿ç”¨ UNION ALL è€Œä¸æ˜¯ UNION</p>
</blockquote>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT cust_name, cust_contact, cust_email 
FROM Customers 
WHERE cust_state IN ('IL','IN','MI') 
UNION 
SELECT cust_name, cust_contact, cust_email 
FROM Customers 
WHERE cust_name = 'Fun4All';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><blockquote>
<p>SELECT è¯­å¥çš„è¾“å‡ºç”¨ ORDER BY å­å¥æ’åºã€‚åœ¨ç”¨ UNION ç»„åˆæŸ¥è¯¢æ—¶ï¼Œåª</p>
<p>èƒ½ä½¿ç”¨ä¸€æ¡ ORDER BY å­å¥ï¼Œå®ƒå¿…é¡»ä½äºæœ€åä¸€æ¡ SELECT è¯­å¥ä¹‹åã€‚å¯¹</p>
<p>äºç»“æœé›†ï¼Œä¸å­˜åœ¨ç”¨ä¸€ç§æ–¹å¼æ’åºä¸€éƒ¨åˆ†ï¼Œè€Œåˆç”¨å¦ä¸€ç§æ–¹å¼æ’åºå¦ä¸€éƒ¨åˆ†çš„æƒ…å†µï¼Œå› æ­¤ä¸å…è®¸ä½¿ç”¨å¤šæ¡ ORDER BY å­å¥</p>
<p>ç”¨å®ƒæ¥æ’åºæ‰€æœ‰ SELECT è¯­å¥è¿”å›çš„æ‰€æœ‰ç»“æœã€‚</p>
</blockquote>
<h2 id="å»ºè¡¨"><a href="#å»ºè¡¨" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE A
( 
 prod_id CHAR(10) NOT NULL, 
 vend_id CHAR(10) NOT NULL, 
 prod_name CHAR(254) NOT NULL, 
 prod_price DECIMAL(8,2) NOT NULL, 
 prod_desc VARCHAR(1000) NULL 
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¦æŒ‡å®šè¡Œåˆ—,å¹¶ä¸”åè·Ÿåˆ—çš„æ•°æ®</p>
<p>ç±»å‹</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE Orders 
( 
 order_num INTEGER NOT NULL, 
 order_date DATETIME NOT NULL, 
 cust_id CHAR(10) NOT NULL 
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>ä¸è¦æŠŠ NULL å€¼ä¸ç©ºå­—ç¬¦ä¸²ç›¸æ··æ·†ã€‚NULL å€¼æ˜¯æ²¡æœ‰å€¼ï¼Œä¸æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚</p>
<p>å¦‚æœæŒ‡å®šâ€™â€™ï¼ˆä¸¤ä¸ªå•å¼•å·ï¼Œå…¶é—´æ²¡æœ‰å­—ç¬¦ï¼‰ï¼Œè¿™åœ¨ NOT NULL åˆ—ä¸­æ˜¯å…</p>
<p>è®¸çš„ã€‚ç©ºå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å€¼ï¼Œå®ƒä¸æ˜¯æ— å€¼ã€‚NULL å€¼ç”¨å…³é”®å­— NULL</p>
<p>è€Œä¸æ˜¯ç©ºå­—ç¬¦ä¸²</p>
<p>é»˜è®¤å€¼åœ¨ CREATE TABLE è¯­å¥çš„åˆ—å®šä¹‰ä¸­ç”¨å…³é”®å­— DEFAULT æŒ‡å®š</p>
</blockquote>
<p>æ›´æ–°è¡¨å®šä¹‰ï¼Œå¯ä»¥ä½¿ç”¨ ALTER TABLE è¯­å¥ã€‚</p>
<blockquote>
<p>ä½¿ç”¨ ALTER TABLE æ›´æ”¹è¡¨ç»“æ„ï¼Œå¿…é¡»ç»™å‡ºä¸‹é¢çš„ä¿¡æ¯ï¼š</p>
<p>ï± åœ¨ ALTER TABLE ä¹‹åç»™å‡ºè¦æ›´æ”¹çš„è¡¨åï¼ˆè¯¥è¡¨å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™å°†</p>
<p>å‡ºé”™ï¼‰ï¼›</p>
<p>ï± åˆ—å‡ºè¦åšå“ªäº›æ›´æ”¹</p>
</blockquote>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER TABLE Vendors 
ADD vend_phone CHAR(20);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<blockquote>
<p>æ›´æ”¹æˆ–åˆ é™¤åˆ—ã€å¢åŠ çº¦æŸæˆ–å¢åŠ é”®ï¼Œè¿™äº›æ“ä½œä¹Ÿä½¿ç”¨ç±»ä¼¼çš„è¯­æ³•ï¼ˆæ³¨æ„ï¼Œ</p>
<p>ä¸‹é¢çš„ä¾‹å­å¹¶éå¯¹æ‰€æœ‰ DBMS éƒ½æœ‰æ•ˆï¼‰ï¼š</p>
<p>è¾“å…¥â–¼</p>
<p>ALTER TABLE Vendors </p>
<p>DROP COLUMN vend_phone; </p>
</blockquote>
<blockquote>
<p><u><em><strong>ä½¿ç”¨ ALTER TABLE è¦æä¸ºå°å¿ƒï¼Œåº”è¯¥åœ¨è¿›è¡Œæ”¹åŠ¨å‰åšå®Œæ•´çš„å¤‡ä»½ï¼ˆè¡¨</strong></em></u></p>
<p><u><em><strong>ç»“æ„å’Œæ•°æ®çš„å¤‡ä»½ï¼‰ã€‚æ•°æ®åº“è¡¨çš„æ›´æ”¹ä¸èƒ½æ’¤é”€ï¼Œå¦‚æœå¢åŠ äº†ä¸éœ€è¦çš„</strong></em></u></p>
<p><u><em><strong>åˆ—ï¼Œä¹Ÿè®¸æ— æ³•åˆ é™¤å®ƒä»¬ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœåˆ é™¤äº†ä¸åº”è¯¥åˆ é™¤çš„åˆ—ï¼Œå¯èƒ½</strong></em></u></p>
<p><u><em><strong>ä¼šä¸¢å¤±è¯¥åˆ—ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</strong></em></u></p>
</blockquote>
<p>åˆ é™¤è¡¨ï¼ˆåˆ é™¤æ•´ä¸ªè¡¨è€Œä¸æ˜¯å…¶å†…å®¹ï¼‰éå¸¸ç®€å•ï¼Œä½¿ç”¨ DROP TABLE è¯­å¥å³å¯ï¼š</p>
<p>DELETE  åªåˆ é™¤è¡¨çš„å†…å®¹ä¸åˆ é™¤è¡¨æœ¬èº«</p>
<h2 id="é‡æ–°å‘½å"><a href="#é‡æ–°å‘½å" class="headerlink" title="é‡æ–°å‘½å"></a>é‡æ–°å‘½å</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER TABLE oldname RENAME TO newname;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><blockquote>
<p><u><em><strong>è§†å›¾ä¸ºè™šæ‹Ÿçš„è¡¨ã€‚å®ƒä»¬åŒ…å«çš„ä¸æ˜¯æ•°æ®è€Œæ˜¯æ ¹æ®éœ€è¦æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢ã€‚</strong></em></u></p>
<p><u><em><strong>è§†å›¾æä¾›äº†ä¸€ç§å°è£… SELECT è¯­å¥çš„å±‚æ¬¡ï¼Œå¯ç”¨æ¥ç®€åŒ–æ•°æ®å¤„ç†ï¼Œé‡æ–°</strong></em></u></p>
<p><u><em><strong>æ ¼å¼åŒ–æˆ–ä¿æŠ¤åŸºç¡€æ•°æ®ã€‚</strong></em></u></p>
</blockquote>
<p>ç”¨è§†å›¾å°†è”ç»“é›†åˆèµ·æ¥ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­æŸ¥è¯¢ï¼Œç›¸å½“äºä¸€ä¸ªAPI</p>
<p>åˆ›å»º è§†å›¾ç”¨ CREATE VIEW è¯­å¥æ¥åˆ›å»ºã€‚ä¸ CREATE TABLE ä¸€æ ·ï¼ŒCREATE VIEW</p>
<p>åˆ é™¤ åˆ é™¤è§†å›¾ï¼Œå¯ä»¥ä½¿ç”¨ DROP è¯­å¥ï¼Œå…¶è¯­æ³•ä¸º DROP VIEW viewname;ã€‚</p>
<p>è¦†ç›–ï¼ˆæˆ–æ›´æ–°ï¼‰è§†å›¾ï¼Œå¿…é¡»å…ˆåˆ é™¤å®ƒï¼Œç„¶åå†é‡æ–°åˆ›å»ºã€‚</p>
<p>ç”¨æ³•ï¼š</p>
<p>å»ºç«‹è§†å›¾</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE VIEW ProductCustomers AS 
SELECT cust_name, cust_contact, prod_id 
FROM Customers, Orders, OrderItems 
WHERE Customers.cust_id = Orders.cust_id 
 AND OrderItems.order_num = Orders.order_num;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿™æ¡è¯­å¥åˆ›å»ºä¸€ä¸ªåä¸º ProductCustomers çš„è§†å›¾ï¼Œå®ƒè”ç»“ä¸‰ä¸ªè¡¨ï¼Œè¿”</p>
<p>å›å·²è®¢è´­äº†ä»»æ„äº§å“çš„æ‰€æœ‰é¡¾å®¢çš„åˆ—è¡¨ã€‚</p>
<p>ä½¿ç”¨è§†å›¾</p>
<p>ä½¿ç”¨æ—¶ï¼Œ</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT cust_name, cust_contact 
FROM ProductCustomers 
WHERE prod_id = 'RGAN01';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>ä¹Ÿå¯ä»¥ç”¨äºç»Ÿä¸€æ ¼å¼</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE VIEW VendorLocations AS 
SELECT RTRIM(vend_name) || ' (' || RTRIM(vend_country) || ')' 
 AS vend_title 
FROM Vendors;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¹‹åå¯ç”¨</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * 
FROM VendorLocations;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ç”¨äºè¿‡æ»¤ä¹Ÿä¸€æ ·</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE VIEW CustomerEMailList AS 
SELECT cust_id, cust_name, cust_email 
FROM Customers 
WHERE cust_email IS NOT NULL;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¹‹å</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * 
FROM CustomerEMailList;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>è®¡ç®—å­—æ®µ</p>
<pre class="line-numbers language-none"><code class="language-none">CREATE VIEW OrderItemsExpanded AS 
SELECT order_num, 
 prod_id, 
 quantity,
 item_price, 
 quantity*item_price AS expanded_price 
FROM OrderItems;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¹‹å</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * 
FROM OrderItemsExpanded 
WHERE order_num = 20008;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="å­˜å‚¨ï¼ˆä¸ä¼šï¼‰"><a href="#å­˜å‚¨ï¼ˆä¸ä¼šï¼‰" class="headerlink" title="å­˜å‚¨ï¼ˆä¸ä¼šï¼‰"></a>å­˜å‚¨ï¼ˆ<u><em><strong>ä¸ä¼š</strong></em></u>ï¼‰</h2><blockquote>
<p>å¯ä»¥åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€‚ç®€å•æ¥è¯´ï¼Œå­˜å‚¨è¿‡ç¨‹å°±æ˜¯ä¸ºä»¥åä½¿ç”¨è€Œä¿å­˜çš„ä¸€æ¡</p>
<p>æˆ–å¤šæ¡ SQL è¯­å¥ã€‚å¯å°†å…¶è§†ä¸ºæ‰¹æ–‡ä»¶ï¼Œè™½ç„¶å®ƒä»¬çš„ä½œç”¨ä¸ä»…é™äºæ‰¹å¤„ç†</p>
<p>ï± é€šè¿‡æŠŠå¤„ç†å°è£…åœ¨ä¸€ä¸ªæ˜“ç”¨çš„å•å…ƒä¸­ï¼Œå¯ä»¥ç®€åŒ–å¤æ‚çš„æ“ä½œï¼ˆå¦‚å‰é¢</p>
<p>ä¾‹å­æ‰€è¿°ï¼‰ã€‚</p>
<p>ï± ç”±äºä¸è¦æ±‚åå¤å»ºç«‹ä¸€ç³»åˆ—å¤„ç†æ­¥éª¤ï¼Œå› è€Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚å¦‚</p>
<p>æœæ‰€æœ‰å¼€å‘äººå‘˜å’Œåº”ç”¨ç¨‹åºéƒ½ä½¿ç”¨åŒä¸€å­˜å‚¨è¿‡ç¨‹ï¼Œåˆ™æ‰€ä½¿ç”¨çš„ä»£ç éƒ½</p>
<p>æ˜¯ç›¸åŒçš„ã€‚</p>
</blockquote>
<blockquote>
<p>EXECUTE AddNewProduct( â€˜JTS01â€™, </p>
<p>â€˜Stuffed Eiffel Towerâ€™, </p>
<p>6.49, </p>
<p>â€˜Plush stuffed toy with the text La </p>
<p>â¥Tour Eiffel in red white and blueâ€™ ); </p>
</blockquote>
<h2 id="ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆä¸ä¼šæ·±å…¥å­¦ä¹ çš„æ—¶å€™å†çœ‹ï¼‰"><a href="#ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆä¸ä¼šæ·±å…¥å­¦ä¹ çš„æ—¶å€™å†çœ‹ï¼‰" class="headerlink" title="ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆä¸ä¼šæ·±å…¥å­¦ä¹ çš„æ—¶å€™å†çœ‹ï¼‰"></a>ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆä¸ä¼šæ·±å…¥å­¦ä¹ çš„æ—¶å€™å†çœ‹ï¼‰</h2><blockquote>
<p>ä½¿ç”¨äº‹åŠ¡å¤„ç†ï¼ˆtransaction processingï¼‰ï¼Œé€šè¿‡ç¡®ä¿æˆæ‰¹çš„ SQL æ“ä½œè¦ä¹ˆ</p>
<p>å®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œï¼Œæ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§</p>
</blockquote>
<blockquote>
<p>ï± äº‹åŠ¡ï¼ˆtransactionï¼‰æŒ‡ä¸€ç»„ SQL è¯­å¥ï¼›</p>
<p>ï± å›é€€ï¼ˆrollbackï¼‰æŒ‡æ’¤é”€æŒ‡å®š SQL è¯­å¥çš„è¿‡ç¨‹ï¼›</p>
<p>ï± æäº¤ï¼ˆcommitï¼‰æŒ‡å°†æœªå­˜å‚¨çš„ SQL è¯­å¥ç»“æœå†™å…¥æ•°æ®åº“è¡¨ï¼›</p>
<p>ï± ä¿ç•™ç‚¹ï¼ˆsavepointï¼‰æŒ‡äº‹åŠ¡å¤„ç†ä¸­è®¾ç½®çš„ä¸´æ—¶å ä½ç¬¦ï¼ˆplaceholderï¼‰ï¼Œ</p>
<p>å¯ä»¥å¯¹å®ƒå‘å¸ƒå›é€€ï¼ˆä¸å›é€€æ•´ä¸ªäº‹åŠ¡å¤„ç†ä¸åŒï¼‰ã€‚</p>
</blockquote>
<p><strong>äº‹åŠ¡å¤„ç†ç”¨æ¥ç®¡ç† INSERTã€UPDATE å’Œ DELETE è¯­å¥ã€‚ä¸èƒ½å›é€€ SELECT</strong></p>
<p><strong>è¯­å¥ï¼ˆå›é€€ SELECT è¯­å¥ä¹Ÿæ²¡æœ‰å¿…è¦ï¼‰ï¼Œä¹Ÿä¸èƒ½å›é€€ CREATE æˆ– DROP æ“</strong></p>
<p><strong>ä½œã€‚äº‹åŠ¡å¤„ç†ä¸­å¯ä»¥ä½¿ç”¨è¿™äº›è¯­å¥ï¼Œä½†è¿›è¡Œå›é€€æ—¶ï¼Œè¿™äº›æ“ä½œä¹Ÿä¸æ’¤é”€ã€‚</strong></p>
<h2 id="æ¸¸æ ‡"><a href="#æ¸¸æ ‡" class="headerlink" title="æ¸¸æ ‡"></a>æ¸¸æ ‡</h2><blockquote>
<p>æœ‰æ—¶ï¼Œéœ€è¦åœ¨æ£€ç´¢å‡ºæ¥çš„è¡Œä¸­å‰è¿›æˆ–åé€€ä¸€è¡Œæˆ–å¤šè¡Œï¼Œè¿™å°±æ˜¯æ¸¸æ ‡çš„ç”¨</p>
<p>é€”æ‰€åœ¨ã€‚æ¸¸æ ‡ï¼ˆcursorï¼‰æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨ DBMS æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æŸ¥è¯¢ï¼Œ</p>
<p>å®ƒä¸æ˜¯ä¸€æ¡ SELECT è¯­å¥ï¼Œè€Œæ˜¯è¢«è¯¥è¯­å¥æ£€ç´¢å‡ºæ¥çš„ç»“æœé›†ã€‚åœ¨å­˜å‚¨äº†</p>
<p>æ¸¸æ ‡ä¹‹åï¼Œåº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®éœ€è¦æ»šåŠ¨æˆ–æµè§ˆå…¶ä¸­çš„æ•°æ®ã€‚</p>
</blockquote>
<p>æ¸¸æ ‡çš„é€‰é¡¹å’Œç‰¹æ€§</p>
<blockquote>
<p>ï± èƒ½å¤Ÿæ ‡è®°æ¸¸æ ‡ä¸ºåªè¯»ï¼Œä½¿æ•°æ®èƒ½è¯»å–ï¼Œä½†ä¸èƒ½æ›´æ–°å’Œåˆ é™¤ã€‚</p>
<p>ï± èƒ½æ§åˆ¶å¯ä»¥æ‰§è¡Œçš„å®šå‘æ“ä½œï¼ˆå‘å‰ã€å‘åã€ç¬¬ä¸€ã€æœ€åã€ç»å¯¹ä½ç½®ã€</p>
<p>ç›¸å¯¹ä½ç½®ç­‰ï¼‰ã€‚</p>
<p>ï± èƒ½æ ‡è®°æŸäº›åˆ—ä¸ºå¯ç¼–è¾‘çš„ï¼ŒæŸäº›åˆ—ä¸ºä¸å¯ç¼–è¾‘çš„ã€‚</p>
<p>ï± è§„å®šèŒƒå›´ï¼Œä½¿æ¸¸æ ‡å¯¹åˆ›å»ºå®ƒçš„ç‰¹å®šè¯·æ±‚ï¼ˆå¦‚å­˜å‚¨è¿‡ç¨‹ï¼‰æˆ–å¯¹æ‰€æœ‰è¯·æ±‚</p>
<p>å¯è®¿é—®ã€‚</p>
<p>ï± æŒ‡ç¤º DBMS å¯¹æ£€ç´¢å‡ºçš„æ•°æ®ï¼ˆè€Œä¸æ˜¯æŒ‡å‡ºè¡¨ä¸­æ´»åŠ¨æ•°æ®ï¼‰è¿›è¡Œå¤åˆ¶ï¼Œ</p>
<p>ä½¿æ•°æ®åœ¨æ¸¸æ ‡æ‰“å¼€å’Œè®¿é—®æœŸé—´ä¸å˜åŒ–ã€‚</p>
</blockquote>
<p>æ¸¸æ ‡ä½¿ç”¨</p>
<blockquote>
<p>ï± åœ¨ä½¿ç”¨æ¸¸æ ‡å‰ï¼Œå¿…é¡»å£°æ˜ï¼ˆå®šä¹‰ï¼‰å®ƒã€‚è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šæ²¡æœ‰æ£€ç´¢æ•°æ®ï¼Œ</p>
<p>å®ƒåªæ˜¯å®šä¹‰è¦ä½¿ç”¨çš„ SELECT è¯­å¥å’Œæ¸¸æ ‡é€‰é¡¹ã€‚</p>
<p>ï± ä¸€æ—¦å£°æ˜ï¼Œå°±å¿…é¡»æ‰“å¼€æ¸¸æ ‡ä»¥ä¾›ä½¿ç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹ç”¨å‰é¢å®šä¹‰çš„ SELECT</p>
<p>è¯­å¥æŠŠæ•°æ®å®é™…æ£€ç´¢å‡ºæ¥ã€‚</p>
<p>ï± å¯¹äºå¡«æœ‰æ•°æ®çš„æ¸¸æ ‡ï¼Œæ ¹æ®éœ€è¦å–å‡ºï¼ˆæ£€ç´¢ï¼‰å„è¡Œã€‚</p>
<p>ï± åœ¨ç»“æŸæ¸¸æ ‡ä½¿ç”¨æ—¶ï¼Œå¿…é¡»å…³é—­æ¸¸æ ‡ï¼Œå¯èƒ½çš„è¯ï¼Œé‡Šæ”¾æ¸¸æ ‡ï¼ˆæœ‰èµ–äºå…·</p>
<p>ä½“çš„ DBMSï¼‰ã€‚</p>
<p>å£°æ˜æ¸¸æ ‡åï¼Œå¯æ ¹æ®éœ€è¦é¢‘ç¹åœ°æ‰“å¼€å’Œå…³é—­æ¸¸æ ‡ã€‚åœ¨æ¸¸æ ‡æ‰“å¼€æ—¶ï¼Œå¯æ ¹</p>
<p>æ®éœ€è¦é¢‘ç¹åœ°æ‰§è¡Œå–æ“ä½œã€‚</p>
</blockquote>
<p>åˆ›å»ºæ¸¸æ ‡</p>
<blockquote>
<p>ä½¿ç”¨ DECLARE è¯­å¥åˆ›å»ºæ¸¸æ ‡ï¼Œè¿™æ¡è¯­å¥åœ¨ä¸åŒçš„ DBMS ä¸­æœ‰æ‰€ä¸åŒã€‚</p>
<p>DECLARE å‘½åæ¸¸æ ‡ï¼Œå¹¶å®šä¹‰ç›¸åº”çš„ SELECT è¯­å¥ï¼Œæ ¹æ®éœ€è¦å¸¦ WHERE å’Œ</p>
<p>å…¶ä»–å­å¥ã€‚ä¸ºäº†è¯´æ˜ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¸¸æ ‡æ¥æ£€ç´¢æ²¡æœ‰ç”µå­é‚®ä»¶åœ°å€çš„æ‰€</p>
<p>æœ‰é¡¾å®¢ï¼Œä½œä¸ºåº”ç”¨ç¨‹åºçš„ç»„æˆéƒ¨åˆ†ï¼Œå¸®åŠ©æ“ä½œäººå‘˜æ‰¾å‡ºç©ºç¼ºçš„ç”µå­é‚®ä»¶</p>
<p>åœ°å€</p>
</blockquote>
<p>è¯­æ³•</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DECLARE CustCursor CURSOR 
FOR 
SELECT * FROM Customers 
WHERE cust_email IS NULL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä½¿ç”¨æ¸¸æ ‡</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">OPEN CURSOR CustCursor<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å…³é—­æ¸¸æ ‡</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CLOSE CustCursor 
DEALLOCATE CURSOR CustCursor<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h2 id="çº¦æŸï¼ˆä¸ä¼šæï¼‰"><a href="#çº¦æŸï¼ˆä¸ä¼šæï¼‰" class="headerlink" title="çº¦æŸï¼ˆä¸ä¼šæï¼‰"></a>çº¦æŸï¼ˆä¸ä¼šæï¼‰</h2><blockquote>
<p>DBMS é€šè¿‡åœ¨æ•°æ®åº“è¡¨ä¸Šæ–½åŠ çº¦æŸæ¥å®æ–½å¼•ç”¨å®Œæ•´æ€§ã€‚å¤§å¤šæ•°çº¦æŸæ˜¯åœ¨</p>
<p>è¡¨å®šä¹‰ä¸­å®šä¹‰çš„ï¼Œå¦‚ç¬¬ 17 è¯¾æ‰€è¿°ï¼Œç”¨ CREATE TABLE æˆ– ALTER TABLE</p>
<p>è¯­å¥ã€‚</p>
</blockquote>
<p>ä¸»é”®</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨ç¬¬ 1 è¯¾ç®€å•æè¿‡ä¸»é”®ã€‚ä¸»é”®æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¦æŸï¼Œç”¨æ¥ä¿è¯ä¸€åˆ—ï¼ˆæˆ–</p>
<p>ä¸€ç»„åˆ—ï¼‰ä¸­çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸”æ°¸ä¸æ”¹åŠ¨ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨ä¸­çš„ä¸€åˆ—ï¼ˆæˆ–</p>
<p>å¤šä¸ªåˆ—ï¼‰çš„å€¼å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¿™æ–¹ä¾¿äº†ç›´æ¥æˆ–äº¤äº’åœ°å¤„ç†è¡¨ä¸­</p>
<p>çš„è¡Œã€‚æ²¡æœ‰ä¸»é”®ï¼Œè¦å®‰å…¨åœ° UPDATE æˆ– DELETE ç‰¹å®šè¡Œè€Œä¸å½±å“å…¶ä»–è¡Œä¼š</p>
<p>éå¸¸å›°éš¾ã€‚</p>
<p>è¡¨ä¸­ä»»æ„åˆ—åªè¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œéƒ½å¯ä»¥ç”¨äºä¸»é”®ã€‚</p>
<p>ï± ä»»æ„ä¸¤è¡Œçš„ä¸»é”®å€¼éƒ½ä¸ç›¸åŒã€‚</p>
<p>ï± æ¯è¡Œéƒ½å…·æœ‰ä¸€ä¸ªä¸»é”®å€¼ï¼ˆå³åˆ—ä¸­ä¸å…è®¸ NULL å€¼ï¼‰ã€‚</p>
<p>ï± åŒ…å«ä¸»é”®å€¼çš„åˆ—ä»ä¸ä¿®æ”¹æˆ–æ›´æ–°ã€‚ï¼ˆå¤§å¤šæ•° DBMS ä¸å…è®¸è¿™ä¹ˆåšï¼Œä½†</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„ DBMS å…è®¸è¿™æ ·åšï¼Œå¥½å§ï¼Œåƒä¸‡åˆ«ï¼ï¼‰</p>
<p>ï± ä¸»é”®å€¼ä¸èƒ½é‡ç”¨ã€‚å¦‚æœä»è¡¨ä¸­åˆ é™¤æŸä¸€è¡Œï¼Œå…¶ä¸»é”®å€¼ä¸åˆ†é…ç»™æ–°è¡Œã€‚</p>
<p>ä¸€ç§å®šä¹‰ä¸»é”®çš„æ–¹æ³•æ˜¯åˆ›å»ºå®ƒï¼Œå¦‚ä¸‹æ‰€ç¤º</p>
</blockquote>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE Vendors 
( 
 vend_id CHAR(10) NOT NULL PRIMARY KEY, 
 vend_name CHAR(50) NOT NULL, 
 vend_address CHAR(50) NULL, 
 vend_city CHAR(50) NULL, 
 vend_state CHAR(5) NULL, 
 vend_zip CHAR(10) NULL, 
 vend_country CHAR(50) NULL 
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨æ­¤ä¾‹å­ä¸­ï¼Œç»™è¡¨çš„ vend_id åˆ—å®šä¹‰æ·»åŠ å…³é”®å­— PRIMARY KEYï¼Œä½¿å…¶æˆ</p>
<p>ä¸ºä¸»é”®ã€‚</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ALTER TABLE Vendors 
ADD CONSTRAINT PRIMARY KEY (vend_id);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>è¿™é‡Œå®šä¹‰ç›¸åŒçš„åˆ—ä¸ºä¸»é”®ï¼Œä½†ä½¿ç”¨çš„æ˜¯ CONSTRAINT è¯­æ³•ã€‚æ­¤è¯­æ³•ä¹Ÿå¯</p>
<p>ä»¥ç”¨äº CREATE TABLE å’Œ ALTER TABLE è¯­å¥</p>
<h3 id="å¤–é”®"><a href="#å¤–é”®" class="headerlink" title="å¤–é”®"></a>å¤–é”®</h3><p>å¤–é”®æ˜¯è¡¨ä¸­çš„ä¸€åˆ—ï¼Œå…¶å€¼å¿…é¡»åˆ—åœ¨å¦ä¸€è¡¨çš„ä¸»é”®ä¸­ã€‚å¤–é”®æ˜¯ä¿è¯å¼•ç”¨å®Œ</p>
<p>æ•´æ€§çš„æå…¶é‡è¦éƒ¨åˆ†ã€‚æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­æ¥ç†è§£å¤–é”®</p>
<blockquote>
<p>å¦‚ç¬¬ 6 è¯¾æ‰€è¿°ï¼Œé™¤å¸®åŠ©ä¿è¯å¼•ç”¨å®Œæ•´æ€§å¤–ï¼Œå¤–é”®è¿˜æœ‰å¦ä¸€ä¸ªé‡è¦ä½œç”¨ã€‚</p>
<p>åœ¨å®šä¹‰å¤–é”®åï¼ŒDBMS ä¸å…è®¸åˆ é™¤åœ¨å¦ä¸€ä¸ªè¡¨ä¸­å…·æœ‰å…³è”è¡Œçš„è¡Œã€‚ä¾‹</p>
<p>å¦‚ï¼Œä¸èƒ½åˆ é™¤å…³è”è®¢å•çš„é¡¾å®¢ã€‚åˆ é™¤è¯¥é¡¾å®¢çš„å”¯ä¸€æ–¹æ³•æ˜¯é¦–å…ˆåˆ é™¤ç›¸</p>
<p>å…³çš„è®¢å•ï¼ˆè¿™è¡¨ç¤ºè¿˜è¦åˆ é™¤ç›¸å…³çš„è®¢å•é¡¹ï¼‰ã€‚ç”±äºéœ€è¦ä¸€ç³»åˆ—çš„åˆ é™¤ï¼Œ</p>
<p>å› è€Œåˆ©ç”¨å¤–é”®å¯ä»¥é˜²æ­¢æ„å¤–åˆ é™¤æ•°æ®ã€‚</p>
<p>æœ‰çš„ DBMS æ”¯æŒç§°ä¸ºçº§è”åˆ é™¤ï¼ˆcascading deleteï¼‰çš„ç‰¹æ€§ã€‚å¦‚æœå¯ç”¨ï¼Œ</p>
<p>è¯¥ç‰¹æ€§åœ¨ä»ä¸€ä¸ªè¡¨ä¸­åˆ é™¤è¡Œæ—¶åˆ é™¤æ‰€æœ‰ç›¸å…³çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¯ç”¨</p>
<p>çº§è”åˆ é™¤å¹¶ä¸”ä» Customers è¡¨ä¸­åˆ é™¤æŸä¸ªé¡¾å®¢ï¼Œåˆ™ä»»ä½•å…³è”çš„è®¢å•è¡Œ</p>
<p>ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</p>
</blockquote>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE Orders 
( 
 order_num INTEGER NOT NULL PRIMARY KEY, 
 order_date DATETIME NOT NULL, 
cust_id CHAR(10) NOT NULL REFERENCES 
â¥Customers(cust_id) 
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE [ UNIQUE | FULLTEXT ] INDEX index_name ON table_name (inex_col_name,... ) ; UNIQUE ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå”¯ä¸€çš„ç´¢å¼•ï¼Œä¸å¯é‡å¤
SHOW INDEX FROM table_name ;
iDROP INDEX index_name ON table_name ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">
è§¦å‘å™¨

&gt; è§¦å‘å™¨æ˜¯ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œå®ƒåœ¨ç‰¹å®šçš„æ•°æ®åº“æ´»åŠ¨å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œã€‚è§¦å‘
&gt;
&gt; å™¨å¯ä»¥ä¸ç‰¹å®šè¡¨ä¸Šçš„ INSERTã€UPDATE å’Œ DELETE æ“ä½œï¼ˆæˆ–ç»„åˆï¼‰ç›¸å…³è”ã€‚
&gt;
&gt; ä¸å­˜å‚¨è¿‡ç¨‹ä¸ä¸€æ ·ï¼ˆå­˜å‚¨è¿‡ç¨‹åªæ˜¯ç®€å•çš„å­˜å‚¨ SQL è¯­å¥ï¼‰ï¼Œè§¦å‘å™¨ä¸å•
&gt;
&gt; ä¸ªçš„è¡¨ç›¸å…³è”ã€‚ä¸ Orders è¡¨ä¸Šçš„ INSERT æ“ä½œç›¸å…³è”çš„è§¦å‘å™¨åªåœ¨
&gt;
&gt; Orders è¡¨ä¸­æ’å…¥è¡Œæ—¶æ‰§è¡Œã€‚ç±»ä¼¼åœ°ï¼ŒCustomers è¡¨ä¸Šçš„ INSERT å’Œ
&gt;
&gt; UPDATE æ“ä½œçš„è§¦å‘å™¨åªåœ¨è¡¨ä¸Šå‡ºç°è¿™äº›æ“ä½œæ—¶æ‰§è¡Œã€‚

&gt; è§¦å‘å™¨å†…çš„ä»£ç å…·æœ‰ä»¥ä¸‹æ•°æ®çš„è®¿é—®æƒï¼š
&gt;
&gt; ï± INSERT æ“ä½œä¸­çš„æ‰€æœ‰æ–°æ•°æ®ï¼›
&gt;
&gt; ï± UPDATE æ“ä½œä¸­çš„æ‰€æœ‰æ–°æ•°æ®å’Œæ—§æ•°æ®ï¼›
&gt;
&gt; ï± DELETE æ“ä½œä¸­åˆ é™¤çš„æ•°æ®ã€‚
&gt;
&gt; æ ¹æ®æ‰€ä½¿ç”¨çš„ DBMSçš„ä¸åŒï¼Œè§¦å‘å™¨å¯åœ¨ç‰¹å®šæ“ä½œæ‰§è¡Œä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œã€‚
&gt;
&gt; ä¸‹é¢æ˜¯è§¦å‘å™¨çš„ä¸€äº›å¸¸è§ç”¨é€”ã€‚
&gt;
&gt; ï± ä¿è¯æ•°æ®ä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œåœ¨ INSERT æˆ– UPDATE æ“ä½œä¸­å°†æ‰€æœ‰å·åè½¬æ¢
&gt;
&gt; ä¸ºå¤§å†™ã€‚
&gt;
&gt; ï± åŸºäºæŸä¸ªè¡¨çš„å˜åŠ¨åœ¨å…¶ä»–è¡¨ä¸Šæ‰§è¡Œæ´»åŠ¨ã€‚ä¾‹å¦‚ï¼Œæ¯å½“æ›´æ–°æˆ–åˆ é™¤ä¸€è¡Œ
&gt;
&gt; æ—¶å°†å®¡è®¡è·Ÿè¸ªè®°å½•å†™å…¥æŸä¸ªæ—¥å¿—è¡¨ã€‚

```mysql
CREATE TRIGGER customer_state 
ON Customers 
FOR INSERT, UPDATE 
AS 
UPDATE Customers 
SET cust_state = Upper(cust_state) 
WHERE Customers.cust_id = inserted.cust_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="case-æ¥è¿›è¡Œå¤šæ¡ä»¶åˆ¤æ–­-ä¸è¦å¿˜è®°END"><a href="#case-æ¥è¿›è¡Œå¤šæ¡ä»¶åˆ¤æ–­-ä¸è¦å¿˜è®°END" class="headerlink" title="case æ¥è¿›è¡Œå¤šæ¡ä»¶åˆ¤æ–­ ä¸è¦å¿˜è®°END"></a>case æ¥è¿›è¡Œå¤šæ¡ä»¶åˆ¤æ–­ ä¸è¦å¿˜è®°END</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CASE WHEN XXXæ¡ä»¶ THEN æ»¡è¶³çš„ç»“æœ ELSE ä¸æ»¡è¶³ç»“æœ END<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å¤šè¡Œè€¦åˆ</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CASE WHEN XXXæ¡ä»¶1 THEN Y1
	 WHEN XXX æ¡ä»¶2 THEN  Y2
	 WHEN XXX æ¡ä»¶3 THEN Y3 ELSE Y4 END 
	 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><blockquote>
<p>ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œä¸å¯åˆ†å‰²ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œmysqlé»˜è®¤æäº¤æ–¹å¼æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œæ‰€ä»¥è¦æ”¹ä¸ºæ‰‹åŠ¨æäº¤æ‰è¡Œ</p>
</blockquote>
<p>æ–¹å¼1</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select @@autocommit; æŸ¥çœ‹æäº¤æ–¹å¼ï¼Œè¿”å›ä¸º1åˆ™ä¸ºè‡ªåŠ¨æäº¤ï¼Œå¦åˆ™ä¸ºæ‰‹åŠ¨æäº¤
set @@autocommit = 0 ; è®¾ç½®ä¸ºæ‰‹åŠ¨æäº¤

commit æäº¤

rollback å›æ»š
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ–¹å¼äºŒ<br>äº‹åŠ¡æ“ä½œ</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">start transaction æˆ–è€… begin å¼€å¯äº‹åŠ¡
commit æäº¤
rollback å›æ»š <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>äº‹åŠ¡ç‰¹ç‚¹</p>
<ul>
<li><p><strong>åŸå­æ€§</strong> ä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p>
</li>
<li><p><strong>ä¸€è‡´æ€§</strong> åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</p>
</li>
<li><p><strong>éš”ç¦»æ€§</strong> æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</p>
</li>
<li><p><strong>æŒä¹…æ€§</strong> äº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p>
</li>
</ul>
<h3 id="å¹¶å‘äº‹åŠ¡é—®é¢˜"><a href="#å¹¶å‘äº‹åŠ¡é—®é¢˜" class="headerlink" title="å¹¶å‘äº‹åŠ¡é—®é¢˜"></a>å¹¶å‘äº‹åŠ¡é—®é¢˜</h3><ul>
<li>è„è¯» ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®</li>
<li>ä¸å¯é‡å¤è¯»ï¼Œä¸€ä¸ªäº‹åŠ¡å…ˆåè¯»å–ä¸€æ¡é‡å¤è®°å½•ï¼Œä½†ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒï¼Œæˆä¸ºä¸å¯é‡å¤è¯»</li>
<li>å¹»è¯» ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œæ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œä½†æ˜¯åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œè¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨äº†ï¼Œå‡ºç°äº†å¹»å½±<br>äº‹åŠ¡éš”ç¦»çº§åˆ«<br><img src="/2023/08/02/hou-duan/shu-ju-ku/1.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><br>å¯ä»¥æ‰‹åŠ¨è®¾ç½®ç³»ç»Ÿçš„éš”ç¦»çº§åˆ«</li>
</ul>
<h2 id="å¼•æ“"><a href="#å¼•æ“" class="headerlink" title="å¼•æ“"></a>å¼•æ“</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE TABLE è¡¨å(

å­—æ®µ1 å­—æ®µ1ç±»å‹ [ COMMENT å­—æ®µ1æ³¨é‡Š ] ,

......

å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š ]

) ENGINE = INNODB [ COMMENT è¡¨æ³¨é‡Š ] ;
show engines;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>InnoDBç‰¹ç‚¹<br>æ”¯æŒäº‹åŠ¡ï¼Œè¡Œçº§é”ï¼Œå¤–é”®çº¦æŸ</p>
<h3 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h3><blockquote>
<p>å…¨å±€é”ï¼šé”å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ã€‚<br>è¡¨çº§é”ï¼šæ¯æ¬¡æ“ä½œé”ä½æ•´å¼ è¡¨ã€‚<br>è¡Œçº§é”ï¼šæ¯æ¬¡æ“ä½œé”ä½å¯¹åº”çš„è¡Œæ•°æ®ã€‚</p>
</blockquote>
<h2 id="å¸¸ç”¨å‡½æ•°"><a href="#å¸¸ç”¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨å‡½æ•°"></a>å¸¸ç”¨å‡½æ•°</h2><blockquote>
<p>ã€€1ï¼‰ã€length()ï¼šmysqlé‡Œé¢çš„length()å‡½æ•°æ˜¯ä¸€ä¸ªç”¨æ¥è·å–å­—ç¬¦ä¸²é•¿åº¦çš„å†…ç½®å‡½æ•°ã€‚<br>ã€€ã€€2ï¼‰ã€char_length()ï¼šåœ¨mysqlå†…ç½®å‡½æ•°é‡Œé¢æŸ¥çœ‹å­—ç¬¦ä¸²é•¿åº¦çš„è¿˜æœ‰ä¸€ä¸ªå‡½æ•°æ˜¯char_length()ã€‚<br>ã€€ã€€3ï¼‰ã€è¿™ä¸¤ä¸ªå‡½æ•°çš„åŒºåˆ«æ˜¯ï¼š<br>ã€€ã€€ã€€ã€€aï¼‰ã€length()ï¼š å•ä½æ˜¯å­—èŠ‚ï¼Œutf8ç¼–ç ä¸‹,ä¸€ä¸ªæ±‰å­—ä¸‰ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªæ•°å­—æˆ–å­—æ¯ä¸€ä¸ªå­—èŠ‚ã€‚gbkç¼–ç ä¸‹,ä¸€ä¸ªæ±‰å­—ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªæ•°å­—æˆ–å­—æ¯ä¸€ä¸ªå­—èŠ‚ã€‚<br>ã€€ã€€ã€€ã€€bï¼‰ã€char_length()ï¼šå•ä½ä¸ºå­—ç¬¦ï¼Œä¸ç®¡æ±‰å­—è¿˜æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—æ¯éƒ½ç®—æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚</p>
</blockquote>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">^ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è¡Œçš„å¼€å¤´

[a-z]ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦èŒƒå›´ï¼ŒåŒ¹é…ä» a åˆ° z çš„ä»»ä½•å­—ç¬¦ã€‚

[0-9]ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦èŒƒå›´ï¼ŒåŒ¹é…ä» 0 åˆ° 9 çš„ä»»ä½•å­—ç¬¦ã€‚

[a-zA-Z]ï¼šè¿™ä¸ªå˜é‡åŒ¹é…ä» a åˆ° z æˆ– A åˆ° Z çš„ä»»ä½•å­—ç¬¦ã€‚è¯·æ³¨æ„ï¼Œä½ å¯ä»¥åœ¨æ–¹æ‹¬å·å†…æŒ‡å®šçš„å­—ç¬¦èŒƒå›´çš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œæ‚¨å¯ä»¥æ·»åŠ æƒ³è¦åŒ¹é…çš„å…¶ä»–å­—ç¬¦æˆ–èŒƒå›´ã€‚

[^a-z]ï¼šè¿™ä¸ªå˜é‡åŒ¹é…ä¸åœ¨ a åˆ° z èŒƒå›´å†…çš„ä»»ä½•å­—ç¬¦ã€‚è¯·æ³¨æ„ï¼Œå­—ç¬¦ ^ ç”¨æ¥å¦å®šå­—ç¬¦èŒƒå›´ï¼Œå®ƒåœ¨æ–¹æ‹¬å·å†…çš„å«ä¹‰ä¸å®ƒçš„æ–¹æ‹¬å·å¤–è¡¨ç¤ºå¼€å§‹çš„å«ä¹‰ä¸åŒã€‚

[a-z]*ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦èŒƒå›´ï¼ŒåŒ¹é…ä» a åˆ° z çš„ä»»ä½•å­—ç¬¦ 0 æ¬¡æˆ–å¤šæ¬¡ã€‚

[a-z]+ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦èŒƒå›´ï¼ŒåŒ¹é…ä» a åˆ° z çš„ä»»ä½•å­—ç¬¦ 1 æ¬¡æˆ–å¤šæ¬¡ã€‚

.ï¼šåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚

\.ï¼šè¡¨ç¤ºå¥ç‚¹å­—ç¬¦ã€‚è¯·æ³¨æ„ï¼Œåæ–œæ ç”¨äºè½¬ä¹‰å¥ç‚¹å­—ç¬¦ï¼Œå› ä¸ºå¥ç‚¹å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚è¿˜è¦æ³¨æ„ï¼Œåœ¨è®¸å¤šè¯­è¨€ä¸­ï¼Œä½ éœ€è¦è½¬ä¹‰åæ–œæ æœ¬èº«ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨\\.ã€‚

$ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è¡Œçš„ç»“å°¾ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">//å¯¼åŒ…
import com.mysql.jdbc.Driver;  
  
import javax.swing.plaf.nimbus.State;  
import java.sql.*;  
public class Name {  
public static void main(String[] args) throws Exception {  
//æ³¨å†Œé©±åŠ¨ç¨‹åº  
Class.forName("com.mysql.jdbc.Driver");  
//è·å–è¿æ¥  
String url = "jdbc:mysql://localhost:3306/t";  
String username = "root";  
String password = "hutao1224";  
Connection conn = DriverManager.getConnection(url,username,password);  
//è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡  
String sql = "insert into employees (name)value ('Amy');";  
Statement stmt = conn.createStatement();  
//æ‰§è¡Œsqlè¯­å¥  
int count = stmt.executeUpdate(sql);  
//å¤„ç†ç»“æœ  
System.out.println(count);  
//é‡Šæ”¾èµ„æº  
stmt.close();  
conn.close();
}  
  
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>é˜²æ­¢sqlæ³¨å…¥ä½¿ç”¨</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">
 <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPreparedStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span>  <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">//2. è·å–è¿æ¥ï¼šå¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlå¹¶ä¸”ç«¯å£æ˜¯é»˜è®¤çš„ 3306 å¯ä»¥ç®€åŒ–ä¹¦å†™</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql:///db1?useSSL=false"</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ¥æ”¶ç”¨æˆ·è¾“å…¥ ç”¨æˆ·åå’Œå¯†ç </span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"zhangsan"</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> pwd <span class="token operator">=</span> <span class="token string">"' or '1' = '1"</span><span class="token punctuation">;</span>

    <span class="token comment">// å®šä¹‰sql</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from tb_user where username = ? and password = ?"</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–pstmtå¯¹è±¡</span>
    <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®ï¼Ÿçš„å€¼</span>
    pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?çš„ä½ç½®å’Œå‚æ•°</span>
    pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‰§è¡Œsql</span>
    <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¸éœ€è¦ä¼ é€’sqlè¯­å¥äº†</span>
    <span class="token comment">// åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•å¤±è´¥~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//7. é‡Šæ”¾èµ„æº</span>
    rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pstmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="å˜é‡çš„ä½¿ç”¨"><a href="#å˜é‡çš„ä½¿ç”¨" class="headerlink" title="å˜é‡çš„ä½¿ç”¨"></a>å˜é‡çš„ä½¿ç”¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">å ä½ç¬¦ï¼Ÿåªèƒ½ç”¨æ¥å–ä»£sqlè¯­å¥ä¸­çš„å¸¸å˜é‡ï¼Œè€Œä¸èƒ½å–ä»£åˆ—åæˆ–è€…è¡¨å
select <span class="token operator">?</span> from <span class="token operator">?</span> where  <span class="token operator">?</span>   å‰ä¸¤ä¸ª<span class="token operator">?</span>ä¸æˆç«‹ï¼Œåªèƒ½ç”¨ <span class="token string">"+variable+"</span> çš„æ–¹å¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="é¢è¯•å¸¸é—®"><a href="#é¢è¯•å¸¸é—®" class="headerlink" title="é¢è¯•å¸¸é—®"></a>é¢è¯•å¸¸é—®</h3><ul>
<li>ä¸€è‡´æ€§å“ˆå¸Œï¼šæ•´ä¸ªå“ˆå¸Œå€¼çš„ç©ºé—´è¢«è§†ä¸ºä¸€ä¸ªç¯å½¢ï¼Œæ¯ä¸ªèŠ‚ç‚¹æˆ–æ•°æ®éƒ½è¢«æ˜ å°„åˆ°æ•´ä¸ªç¯ä¸Šï¼Œå½“éœ€è¦æŸ¥æ‰¾æŸä¸ªé”®æ—¶ï¼Œä¼šæ²¿ç€ç¯æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„èŠ‚ç‚¹ã€‚</li>
<li>æ•°æ®ç»“æ„ï¼š<ul>
<li>SkipListè·³è¡¨ï¼ŒZSetä¸­å¦‚æœä¿å­˜åˆ°é”®å€¼å¯¹æ•°é‡&lt;128 &amp;&amp; æ¯ä¸ªå…ƒç´ çš„é•¿åº¦å°äº64Bå°±ä½¿ç”¨ziplistï¼Œå¦åˆ™åˆ™ä½¿ç”¨skiplist<ul>
<li>æ•°æ®æŒ‰ç…§å‡åºæ’åºå­˜å‚¨</li>
<li>èŠ‚ç‚¹å¯èƒ½åŒ…å«å¤šä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆè·¨åº¦ä¸åŒ</li>
</ul>
</li>
<li>SortedSetæ˜¯æœ‰åºé›†åˆï¼Œåº•å±‚å­˜å‚¨çš„æ¯ä¸ªæ•°æ®éƒ½åŒ…å«elementå’Œscoreä¸¤ä¸ªå€¼ï¼Œscoreæ˜¯å¾—åˆ†ï¼Œelementæ˜¯å­—ç¬¦ä¸²å€¼ï¼Œä¼šæ ¹æ®elementå’Œscoreå€¼æ’åºï¼Œå½¢æˆæœ‰åºé›†åˆï¼ŒåŸºäºSkipListå®ç°çš„</li>
<li>Rediså¦‚ä½•åˆ¤æ–­KEYæ˜¯å¦è¿‡æœŸå‘¢ï¼Ÿ<ul>
<li><strong>ç­”</strong>ï¼šåœ¨Redisä¸­ä¼šæœ‰ä¸¤ä¸ªDictï¼Œä¹Ÿå°±æ˜¯HashTableï¼Œå…¶ä¸­ä¸€ä¸ªè®°å½•KEY-VALUEé”®å€¼å¯¹ï¼Œå¦ä¸€ä¸ªè®°å½•KEYå’Œè¿‡æœŸæ—¶é—´ã€‚è¦åˆ¤æ–­ä¸€ä¸ªKEYæ˜¯å¦è¿‡æœŸï¼Œåªéœ€è¦åˆ°è®°å½•è¿‡æœŸæ—¶é—´çš„Dictä¸­æ ¹æ®KEYæŸ¥è¯¢å³å¯ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>é›†ç¾¤é—®é¢˜ï¼š<ol>
<li>Sentinelæ˜¯å“¨å…µï¼šç›‘æ§èŠ‚ç‚¹çŠ¶æ€å¹¶è‡ªåŠ¨å®ç°æ•…éšœè½¬ç§» <img src="/2023/08/02/hou-duan/shu-ju-ku/%E5%93%A8%E5%85%B5%E5%8E%9F%E7%90%86.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E5%93%A8%E5%85%B5%E5%8E%9F%E7%90%86.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="|400"><ul>
<li>å“¨å…µçš„ä½œç”¨ï¼šçŠ¶æ€ç›‘æ§ï¼Œæ•…éšœè½¬ç§»ï¼ŒçŠ¶æ€é€šçŸ¥</li>
<li>ä¸»è§‚ä¸‹çº¿æ˜¯æŸä¸€ä¸ªsentinelèŠ‚ç‚¹å‘ç°æŸä¸ªèŠ‚ç‚¹æ²¡åœ¨è§„å®šæ—¶é—´å†…å“åº”ï¼Œå®¢è§‚ä¸‹çº¿æ˜¯æŒ‡çš„æ˜¯æœ‰ä¸€åŠä»¥ä¸Šçš„sentineléƒ½è®¤ä¸ºä¸‹çº¿äº†æ‰è¡Œ</li>
<li>é€‰ä¸¾æ–°çš„master: </li>
<li>é€‰ä¸¾è§„åˆ™ï¼šåˆ¤æ–­ä¼˜å…ˆçº§ï¼Œåˆ¤æ–­offsetå€¼ï¼Œè¶Šé«˜è¶Šä¼˜å…ˆï¼Œåˆ¤æ–­idï¼Œè¶Šå°è¶Šä¼˜å…ˆ<ol>
<li>æ•…éšœæ£€æµ‹ï¼šsentinelæ£€æµ‹ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹çš„åœ¨çº¿æƒ…å†µï¼Œå¦‚æœæœ‰åŠæ•°ä»¥ä¸Šçš„sentinelè®¤ä¸ºä¸»èŠ‚ç‚¹æ•…éšœï¼Œå°±ä¼šå¼€å§‹é€‰ä¸¾</li>
<li>sentinelé€‰ä¸¾å‡ºä¸€ä¸ªleaderèŠ‚ç‚¹ï¼Œæ¯ä¸ªsentineléƒ½æœ‰èµ„æ ¼ï¼Œsentinelç¡®å®šmasterä¸‹çº¿ä¹‹åå°±ä¼šè¯·æ±‚å…¶ä»–sentinelåŒæ„è‡ªå·±æˆä¸ºleaderï¼Œç¥¨æ•°å¤§äºä¸€åŠçš„sentinelå³å¯æˆä¸ºleader,å¦‚æœæ²¡æœ‰é€‰å‡ºï¼Œå°±é‡å¤ç›´åˆ°é€‰å‡º</li>
<li>é€‰ä¸¾æ ¹æ® æ•°æ®å¤åˆ¶çš„åç§»é‡æ›´å¤§(æ•°æ®æœ€æ–°)ï¼Œè¿è¡Œidæ›´å°(è¿è¡Œæ—¶é—´æ›´é•¿ )ï¼ŒèŠ‚ç‚¹çš„ä¼˜å…ˆçº§è¿›è¡Œé€‰ä¸¾</li>
<li>é€šçŸ¥æ‰€æœ‰çš„ä»èŠ‚ç‚¹è®¾ç½®æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿›è¡Œå¤åˆ¶</li>
<li>é€šçŸ¥å®¢æˆ·ç«¯é‡æ–°è¿æ¥ä¸»èŠ‚ç‚¹</li>
</ol>
</li>
<li>ä¸»ä»å¤åˆ¶ï¼š<ul>
<li>å…¨é‡åŒæ­¥ï¼Œå½“slaveç¬¬ä¸€æ¬¡è¿æ¥åˆ°masteræˆ–è€…slaveæ–­å¼€å¤ªä¹…äº†ï¼Œrepl_baklog(å¤åˆ¶ç§¯å‹ç¼“å†²åŒº)çš„offsetå·²ç»è¢«è¦†ç›–äº†ï¼ŒåŒæ­¥è¿‡ç¨‹ä¸­æ”¶åˆ°çš„è¯»å†™å‘½ä»¤éƒ½ä¼šå…ˆæ‰§è¡Œç„¶åè®°å½•åœ¨repl_baklogä¸­ï¼Œé€ä¸ªå‘é€ç»™slave <img src="/2023/08/02/hou-duan/shu-ju-ku/%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="|550"><ol>
<li>ä»èŠ‚ç‚¹ä¿å­˜ä¸»èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¸ä¸»èŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼Œä¸»èŠ‚ç‚¹åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œæ˜¯å°±ä¸ä»èŠ‚ç‚¹åŒæ­¥ç‰ˆæœ¬ä¿¡æ¯</li>
<li>ä¸»èŠ‚ç‚¹forkä¸€ä¸ªå­è¿›ç¨‹ä¿å­˜å½“å‰æ‰€æœ‰çš„æ•°æ®ï¼Œ2.å‘é€æ•°æ®å¿«ç…§3.ä¹‹åä¸»èŠ‚ç‚¹æ¯æ¬¡æ‰§è¡Œå…¶ä»–çš„æ“ä½œéƒ½ä¼šåŒæ­¥ç»™ä»èŠ‚ç‚¹<ul>
<li><p>**<code>Replication Id</code>**ï¼šç®€ç§°<code>replid</code>ï¼Œæ˜¯æ•°æ®é›†çš„æ ‡è®°ï¼Œreplidä¸€è‡´åˆ™æ˜¯åŒä¸€æ•°æ®é›†ã€‚æ¯ä¸ª<code>master</code>éƒ½æœ‰å”¯ä¸€çš„<code>replid</code>ï¼Œ<code>slave</code>åˆ™ä¼šç»§æ‰¿<code>master</code>èŠ‚ç‚¹çš„<code>replid</code></p>
</li>
<li><p>**<code>offset</code>**ï¼šåç§»é‡ï¼Œéšç€è®°å½•åœ¨<code>repl_baklog</code>ä¸­çš„æ•°æ®å¢å¤šè€Œé€æ¸å¢å¤§ã€‚<code>slave</code>å®ŒæˆåŒæ­¥æ—¶ä¹Ÿä¼šè®°å½•å½“å‰åŒæ­¥çš„<code>offset</code>ã€‚å¦‚æœ<code>slave</code>çš„<code>offset</code>å°äº<code>master</code>çš„<code>offset</code>ï¼Œè¯´æ˜<code>slave</code>æ•°æ®è½åäº<code>master</code>ï¼Œéœ€è¦æ›´æ–°ã€‚</p>
</li>
</ul>
</li>
</ol>
</li>
<li>å¢é‡åŒæ­¥ï¼š<img src="/2023/08/02/hou-duan/shu-ju-ku/%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="|750"><ul>
<li>æ ¹æ®offsetæ¥è¿›è¡ŒåŒæ­¥</li>
<li>å…·ä½“çš„æ¯”è¾ƒæ˜¯é€šè¿‡<code>repl_baklog</code>ï¼Œè®°å½•Rediså¤„ç†è¿‡çš„å‘½ä»¤åŠ<code>offset</code>ï¼ŒåŒ…æ‹¬masterå½“å‰çš„<code>offset</code>ï¼Œå’Œslaveå·²ç»æ‹·è´åˆ°çš„<code>offset</code>å‘é€çš„æ˜¯å‘½ä»¤ï¼š <img src="/2023/08/02/hou-duan/shu-ju-ku/%E7%8E%AF%E5%BD%A2%E6%95%B0%E7%BB%84.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E7%8E%AF%E5%BD%A2%E6%95%B0%E7%BB%84.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ul>
</li>
</ul>
</li>
<li>é˜²æ­¢è„‘è£‚é—®é¢˜ï¼šè®¾ç½®ä¸»èŠ‚ç‚¹æœ€å°‘éœ€è¦çš„ä»èŠ‚ç‚¹æ•°ï¼Œå°äºè¿™ä¸ªæ•°é‡ä¸»èŠ‚ç‚¹å°±ä¼šç¦æ­¢å†™æ•°æ®ï¼Œè®¾ç½®ä¸»ä»å¤åˆ¶å’ŒåŒæ­¥çš„æœ€å¤§å»¶è¿Ÿï¼Œå¦‚æœæ—¶é—´è¶…è¿‡è¿™ä¸ªå»¶è¿Ÿå°±ä¼šç¦æ­¢å†™æ•°æ®ã€‚åŒæ—¶å¯ä»¥ç”¨ä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿ï¼Œå½“å‡ºç°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œæœ‰éƒ¨åˆ†çš„èŠ‚ç‚¹ä»ç„¶èƒ½å¤Ÿè¿æ¥ä¸Šä¸»èŠ‚ç‚¹ï¼Œäºæ˜¯å°±ä¸ä¼šå‡ºç°é‡æ–°é€‰ä¸¾ä¸»èŠ‚ç‚¹ã€‚</li>
<li>offsetå¤åˆ¶åç§»é‡ï¼šä¸»ä»å„è‡ªç»´æŠ¤è‡ªå·±çš„offsetï¼Œå­èŠ‚ç‚¹æŠŠè‡ªå·±çš„offsetä¸ŠæŠ¥ï¼Œmasterä¿å­˜offset ï¼Œéƒ¨åˆ†å¤åˆ¶ä½¿ç”¨äºŒè€…çš„åç§»é‡æ¥åŒæ­¥ç¼ºå¤±çš„æ•°æ®</li>
</ul>
</li>
<li>åˆ†ç‰‡é›†ç¾¤ï¼š<img src="/2023/08/02/hou-duan/shu-ju-ku/%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><ul>
<li>æ¯ä¸ªmasterä¿å­˜ä¸åŒçš„æ•°æ®ï¼Œç„¶åæ¯ä¸ªmasteréƒ½å¯ä»¥æœ‰å¤šä¸ªslaveèŠ‚ç‚¹ï¼Œä¹‹åmasterä¹‹é—´é€šè¿‡pingæ¥æ£€æµ‹å½¼æ­¤ä¹‹é—´çš„å¥åº·çŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤ä»»æ„èŠ‚ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹</li>
<li>æ•…éšœè½¬ç§»ï¼šæ¯ä¸ªmasterè½¬ç§»åˆ°è‡ªå·±çš„slaveå³å¯</li>
<li>ä¸ºä»€ä¹ˆæ’æ§½çš„æ•°é‡æ˜¯16384,16384æ˜¯2çš„14æ¬¡æ–¹ï¼Œæ˜¯ä¸€ä¸ªå¹³è¡¡æ€§ã€è¡Œå‘¢ä¸ªå’Œå…¼å®¹æ€§ä¹‹é—´å–å¾—æŠ˜è¡·çš„ç»“æœ</li>
<li>å¦‚ä½•å°†åŒä¸€ç±»æ•°æ®å›ºå®šçš„ä¿å­˜åœ¨åŒä¸€ä¸ªRediså®ä¾‹ï¼Ÿ<ul>
<li>Redisè®¡ç®—keyçš„æ’æ§½å€¼æ—¶ä¼šåˆ¤æ–­keyä¸­æ˜¯å¦åŒ…å«<code>{}</code>ï¼Œå¦‚æœæœ‰åˆ™åŸºäº<code>{}</code>å†…çš„å­—ç¬¦è®¡ç®—æ’æ§½</li>
<li>æ‰€ä»¥åªè¦ç”¨{key} ä½œä¸ºå‰ç¼€å³å¯æŠŠç›¸åŒçš„ç±»å‹çš„æ•°æ®è®¡ç®—çš„æ’æ§½ä¸€å®šç›¸åŒ</li>
</ul>
</li>
</ul>
</li>
<li>å¸¸è§çš„ç¼“å­˜æœ‰å‡ ç§ï¼š<ul>
<li>æ—è·¯ç¼“å­˜ï¼šä½¿ç”¨åº”ç”¨ç¨‹åºæ¥ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§<ol>
<li>å…ˆå†™DBç„¶åç›´æ¥åˆ é™¤cache<ul>
<li>ä¸ºä½•åˆ é™¤ï¼Ÿ 1.å¦‚æœdbé¢‘ç¹æ›´æ”¹ï¼Œå¯¼è‡´cacheä¸­çš„æ•°æ®å¾ˆå°‘è¢«è®¿é—®ï¼Œåˆ é™¤å¯ä»¥èŠ‚çœæœåŠ¡ç«¯çš„èµ„æº 2. æ›´æ–°cacheæ›´å®¹æ˜“é€ æˆç¼“å­˜ä¸ä¸€è‡´çš„ç°è±¡</li>
<li>ä¸ºä½•ä¸èƒ½å…ˆåˆ é™¤cache? å› ä¸º å¦‚æœæœ‰ä¸¤ä¸ªè¯·æ±‚åŒæ—¶è®¿é—®ï¼Œè¯·æ±‚1å…ˆæŠŠcacheä¸­çš„æ•°æ®åˆ é™¤äº†ï¼Œè¯·æ±‚äºŒå°±ä¼šä»dbä¸­è¯»å–æ•°æ®ï¼Œç„¶åè¯·æ±‚ä¸€å†æ›´æ”¹dbï¼Œä¼šå¯¼è‡´è¯·æ±‚2è¯»åˆ°çš„æ˜¯æ—§å€¼</li>
<li>å†™cacheçš„é€Ÿåº¦è¦æ¯”å†™dbå¿«å¾ˆå¤šï¼Œæ‰€ä»¥å¾ˆå°‘ä¼šé€ æˆä¸ä¸€è‡´</li>
</ul>
</li>
<li>ä»cacheä¸­è¯»å–æ•°æ®ï¼Œè¯»ä¸åˆ°å†ä»dbä¸­è¯»å…¥å¹¶è¿”å›ï¼Œç„¶åæ”¾åˆ°cacheä¸­</li>
<li>ç¼ºç‚¹ï¼š<ul>
<li>é¦–æ¬¡è¯·æ±‚ä¸åœ¨cacheä¸­ï¼šå¯ä»¥å°†çƒ­ç‚¹æ•°æ®æå‰æ”¾å…¥</li>
</ul>
</li>
</ol>
</li>
<li>è¯»å†™ç©¿é€ï¼šä»¥cacheä¸ºä¸»ï¼Œè®©cacheæœåŠ¡æ“ä½œï¼Œä¸éœ€è¦<ul>
<li>å†™:å…ˆå†™cache,cacheæ²¡æœ‰æ—¶ç›´æ¥å†™db,æœ‰çš„è¯å…ˆæ›´æ–°cache,ä¹‹åæ›´æ–°db åŒæ­¥æ›´æ–°</li>
<li>è¯»ï¼šç›´æ¥è¯»cache,cacheæ²¡æœ‰ç›´æ¥è¯»dbï¼Œç„¶åæ”¾å…¥cache.</li>
</ul>
</li>
<li>å¼‚æ­¥ç¼“å­˜å†™å…¥ï¼šä¹Ÿæ˜¯ç”±cacheæœåŠ¡æ¥å¤„ç†,ä½†æ˜¯æ›´æ–°æ—¶ï¼Œåªæ›´æ–°cache,ç”±å¼‚æ­¥å¤„ç†æ¥æ›´æ–°db<ul>
<li>ç¼ºç‚¹ï¼šå®¹æ˜“é€ æˆæ•°æ®ä¸ä¸€è‡´</li>
<li>é€‚åˆå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æ²¡é‚£ä¹ˆ é«˜çš„</li>
</ul>
</li>
</ul>
</li>
<li>Rediså•çº¿ç¨‹æ¨¡å‹ï¼šRediså¯¹äºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è¿æ¥éƒ½å…³è”ä¸€ä¸ªæŒ‡ä»¤é˜Ÿåˆ—å’Œå“åº”é˜Ÿåˆ—<ul>
<li>ä¸ºä½•å•çº¿ç¨‹æ€§èƒ½è¿˜è¿™ä¹ˆé«˜ï¼Ÿ <ol>
<li>ä½¿ç”¨çº¯å†…å­˜è®¿é—®ï¼Œ</li>
<li>å•çº¿ç¨‹é¿å…ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰</li>
<li>IOå¤šè·¯å¤ç”¨ï¼Œå¯¹äºå¤šä¸ªIOï¼ŒRedisæ¯æ¬¡å¤„ç†å…¶ä¸­ä¸€ä¸ªIOç„¶åæš‚åœå¯¹å…¶ä»–çš„IOäº‹ä»¶ã€‚ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥ç›‘å¬å¤šä¸ªsocketæŸä¸ªsocketå¯è¯»æ—¶åŠé€†è¡Œè¯»å†™<ul>
<li>å®ç°ï¼šselect(æ–‡ä»¶æè¿°ç¬¦æœ‰ä¸Šé™)ï¼Œpollè¿™ä¿©åªä¼šé€šçŸ¥ç”¨æˆ·æœ‰æœ‰Socketå°±ç»ªï¼Œä¸ç¡®å®šå…·ä½“çš„æ˜¯å“ªä¸ªï¼Œéœ€è¦è½®è¯¢æ¥æ‰¾</li>
<li>epollä¼šé€šçŸ¥ç”¨æˆ·çš„æ—¶å€™æŠŠå“ªä¸ªsocketä¹Ÿç›´æ¥å†™å…¥ç”¨æˆ·ç©ºé—´ </li>
<li>è¯¦ç»†ä»‹ç»ä¸€ä¸‹ä¸ºä»€ä¹ˆI/Oå¤ç”¨</li>
</ul>
<ol start="2">
<li>Redisæ˜¯çº¯å†…å­˜çš„ï¼Œæ‰€ä»¥æ€§èƒ½å–å†³äºç½‘ç»œå»¶è¿Ÿï¼ŒI/Oå¤šè·¯å¤ç”¨å®ç°äº†é«˜æ•ˆçš„ç½‘ç»œè¯·æ±‚<ol>
<li>å¸¸è§çš„IOæœ‰ é˜»å¡ï¼Œéé˜»å¡ï¼Œå¤šè·¯å¤ç”¨</li>
<li>éé˜»å¡å¼IOï¼Œè¯»åˆ°å¤šå°‘å°±éƒ½å¤šå°‘ï¼Œå†™å¤šå°‘ï¼Œä¸ä¼šç­‰å¾…æ»¡è¶³å­—èŠ‚è¦æ±‚</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>ä¼˜ç‚¹ï¼šé¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„æ¶ˆè€—ã€‚</li>
</ul>
</li>
</ol>
<ul>
<li>ä¸»ä»å¤åˆ¶ï¼š ä¸»æœåŠ¡å™¨æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œä¼šå°†å†™æ“ä½œåŒæ­¥ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨åªè¯»ï¼Œå¹¶æ‰§è¡Œä¸»æœåŠ¡å™¨åŒæ­¥è¿‡æ¥çš„æŒ‡ä»¤ ç¼ºç‚¹ï¼šä¸»æœåŠ¡å™¨å®•æœºæ—¶å¿…é¡»æ‰‹åŠ¨æ¢å¤</li>
<li>å“¨å…µæ¨¡å¼ï¼š ç›‘æ§ä¸»ä»æœåŠ¡å™¨ï¼Œæä¾›ä¸»ä»èŠ‚ç‚¹æ•…éšœè½¬ç§»çš„åŠŸèƒ½</li>
<li>åˆ‡ç‰‡é›†ç¾¤ï¼šå°†æ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä»¥æ­¤æ¥é™ä½ç³»ç»Ÿå¯¹å•ä¸»èŠ‚ç‚¹çš„ä¾èµ–ï¼Œä»è€Œæé«˜ Redis æœåŠ¡çš„è¯»å†™æ€§èƒ½ã€‚</li>
<li>è„‘è£‚é—®é¢˜ï¼š ç”±äºç½‘ç»œé—®é¢˜ï¼Œé›†ç¾¤èŠ‚ç‚¹ä¹‹é—´å¤±å»è”ç³»ã€‚ä¸»ä»æ•°æ®ä¸åŒæ­¥ï¼›é‡æ–°å¹³è¡¡é€‰ä¸¾ï¼Œäº§ç”Ÿä¸¤ä¸ªä¸»æœåŠ¡ã€‚ç­‰ç½‘ç»œæ¢å¤ï¼Œæ—§ä¸»èŠ‚ç‚¹ä¼šé™çº§ä¸ºä»èŠ‚ç‚¹ï¼Œå†ä¸æ–°ä¸»èŠ‚ç‚¹è¿›è¡ŒåŒæ­¥å¤åˆ¶çš„æ—¶å€™ï¼Œç”±äºä¼šä»èŠ‚ç‚¹ä¼šæ¸…ç©ºè‡ªå·±çš„ç¼“å†²åŒºï¼Œæ‰€ä»¥å¯¼è‡´ä¹‹å‰å®¢æˆ·ç«¯å†™å…¥çš„æ•°æ®ä¸¢å¤±äº†ã€‚ è§£å†³ï¼š å½“ä¸»èŠ‚ç‚¹å‘ç°ä»èŠ‚ç‚¹ä¸‹çº¿æˆ–è€…é€šä¿¡è¶…æ—¶çš„æ€»æ•°é‡å¤§äºé˜ˆå€¼æ—¶ï¼Œé‚£ä¹ˆç¦æ­¢ä¸»èŠ‚ç‚¹è¿›è¡Œå†™æ•°æ®ï¼Œç›´æ¥æŠŠé”™è¯¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
</li>
<li>æ•°æ®ç›¸å…³ï¼š<ul>
<li>æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š<ul>
<li>å¦‚ä½•ä¿è¯Redisä¸­çš„æ•°æ®æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ ç­”æ¡ˆæ˜¯å¯ä»¥ä½¿ç”¨LRUåˆ é™¤ç­–ç•¥ï¼Œæ¯æ¬¡åˆ é™¤æ•°æ®æ—¶åˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¸»åŠ¨å»æ›´æ–°çƒ­ç‚¹æ•°æ®</li>
<li>å…¶ä½™çš„å„ç§å†…å­˜æ·˜æ±°æœºåˆ¶ï¼š1.å†…å­˜åˆ°è¾¾é™åˆ¶æ—¶è¿”å›é”™è¯¯ï¼Œä¸åˆ é™¤ï¼Œ2.åˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨é”®ï¼Œ3.lruä½†æ˜¯åªåˆ é™¤è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ï¼Œ4.éšæœºåˆ é™¤ä¸€äº› 5. éšæœºåˆ é™¤ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®6. å¯¹è®¿é—®é¢‘ç‡æ¥è¿›è¡Œåˆ é™¤<img src="/2023/08/02/hou-duan/shu-ju-ku/redis%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/redis%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ul>
</li>
<li>æŒä¹…åŒ–ï¼š<ul>
<li>RDBï¼šåˆ›å»ºæ•°æ®çš„å¿«ç…§ï¼Œå­˜çš„æ˜¯å®é™…çš„æ•°æ®<ul>
<li>rediså»ºç«‹æ–°çš„å­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ç»§ç»­å¤„ç†è¯·æ±‚ï¼Œå­è¿›ç¨‹è´Ÿè´£å°†å†…å­˜å†…å®¹å†™åˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œosçš„å®æ—¶å¤å†™copy-on-writeä¼šä½¿å¾—çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å…±äº«ä¸€ä¸ªç‰©ç†é¡µé¢ï¼Œæ‰€ä»¥ä¼šä¸ºçˆ¶è¿›ç¨‹è¦ä¿®æ”¹çš„é¡µé¢åˆ›å»ºå‰¯æœ¬ï¼Œæ‰€ä»¥å­è¿›ç¨‹å†…çš„æ•°æ®å°±æ˜¯forkæ—¶çš„å¿«ç…§ã€‚ å­è¿›ç¨‹å†™å®Œæ–‡ä»¶ä¹‹åï¼Œä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ä»£æ›¿åŸæ¥çš„å¿«ç…§æ–‡ä»¶ï¼Œä¹‹åå­è¿›ç¨‹quit, <strong>è¿›è¡Œçš„æ˜¯å…¨é‡å¿«ç…§ï¼Œä¼šæŠŠæ•´ä¸ªæ•°æ®å…¨éƒ¨ä¿å­˜</strong></li>
</ul>
</li>
<li>AOFï¼š<ul>
<li>é‡å†™ï¼šAOFé‡å†™ä¼šè°ƒç”¨ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç”±å­è¿›ç¨‹å»è¿›è¡Œé‡å†™ï¼Œä¼šè¯»å–æ•°æ®åº“ä¸­çš„é”®å€¼å¯¹ä¸ºæ¯ä¸€ä¸ªé”®å€¼å¯¹ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå†™å‘½ä»¤ï¼Œè¿™äº›å†™å‘½ä»¤è¶³ä»¥æ¢å¤è¿™ä¸ªé”®å€¼å¯¹çš„çŠ¶æ€ã€‚ç„¶åæŠŠä»–ä»¬å†™å…¥ä¸€ä¸ªæ–°çš„AOFæ–‡ä»¶ä¸­ï¼ŒåŒæ—¶Redisä¼šç»´æŠ¤ä¸€ä¸ªAOFç¼“å†²åŒºï¼ŒæŠŠé‡å†™æœŸé—´è¿›è¡Œçš„æ•°æ®åº“å†™æ“ä½œè®°å½•åˆ°ç¼“å†²åŒºä¸­ï¼Œé‡å†™å®Œæ¯•ä¹‹åä¼šæŠŠæ–°çš„AOFæ–‡ä»¶å‘ç»™ä¸»è¿›ç¨‹ï¼Œç„¶åé€€å‡ºï¼Œä¸»è¿›ç¨‹æŠŠç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤å†™å…¥å…¶ä¸­å¹¶ä½¿ç”¨æ–°çš„AOFæ–‡ä»¶æ›¿æ¢æ—§çš„AOFæ–‡ä»¶</li>
</ul>
</li>
</ul>
</li>
<li>æ³¨æ„ï¼šå®ç°åŸç†æ˜¯æ“ä½œç³»ç»Ÿä¼šä¸ºè¿›ç¨‹<ul>
<li>AOFï¼šè®°å½•æ“ä½œå‘½ä»¤è€Œä¸æ˜¯å‰¯æœ¬ã€‚<ol>
<li>fork,å­è¿›ç¨‹å‘ä¸´æ—¶æ–‡ä»¶ä¸­å†™å…¥é‡å»ºæ•°æ®åº“çŠ¶æ€çš„å‘½ä»¤</li>
<li>çˆ¶è¿›ç¨‹æ¥æ”¶åˆ°è¯·æ±‚åï¼ŒæŠŠå†™å‘½ä»¤å†™å…¥åˆ°åŸæ¥çš„aofæ–‡ä»¶ä¸­ï¼Œç„¶åç¼“å­˜èµ·æ¥è¿™äº›å‘½ä»¤</li>
<li>å­è¿›ç¨‹æå®Œä¹‹åï¼Œé€šçŸ¥çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹æŠŠç¼“å­˜èµ·æ¥çš„å‘½ä»¤å†™å…¥ä¸´æ—¶æ–‡ä»¶</li>
<li>ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æ›¿ä»£è€æ–‡ä»¶,æ³¨æ„ä¸ä¼šè¯»å–è€æ–‡ä»¶</li>
</ol>
</li>
<li>æ··åˆæŒä¹…åŒ–ï¼šä¸¤è€…ç»“åˆï¼Œæƒ°æ€§åˆ é™¤ï¼šåªæœ‰åœ¨è®¿é—®è¿™ä¸ªé”®çš„æ—¶å€™æ‰æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</li>
</ul>
<ol>
<li>è¯»å†™åˆ†ç¦»é—®é¢˜ï¼šè¯»å æ¯”è¾ƒå¤§æ—¶å¯ä»¥æŠŠä¸€éƒ¨åˆ†çš„æµé‡æ‘Šåˆ°ä»èŠ‚ç‚¹ï¼Œåªå¯¹ä¸»èŠ‚ç‚¹è¿›è¡Œå†™æœåŠ¡ã€‚</li>
</ol>
</li>
<li>è¿‡æœŸç­–ç•¥ï¼šæƒ°æ€§åˆ é™¤å’Œå®šæ—¶åˆ é™¤ï¼ŒRedisä½¿ç”¨äº†ä¸¤ç§ç»“åˆçš„æ–¹å¼ï¼šå½“æŸä¸ªkeyè¢«è®¿é—®æ—¶ï¼Œä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤ï¼ŒåŒæ—¶ä¼šå®šæœŸå¯¹ä¸€éƒ¨åˆ†keyè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤<ul>
<li>å‘¨æœŸåˆ é™¤çš„æ¨¡å¼ï¼š<ol>
<li>SLOWæ¨¡å¼ï¼šé€šè¿‡å®šæ—¶ä»»åŠ¡å®šæœŸæŠ½æ ·éƒ¨åˆ†å¸¦æœ‰TTLçš„keyï¼Œåˆ¤æ–­æ˜¯å¦è¿‡æœŸã€‚å¦‚æœè¿‡æœŸkeyæ¯”ä¾‹è¾ƒé«˜ä¼šå¤šæ¬¡æŠ½è±¡</li>
<li>FASTæ¨¡å¼ï¼šRedisæ¯æ¬¡å¤„ç†NIOäº‹ä»¶ä¹‹å‰ï¼Œéƒ½ä¼šæŠ½æ ·éƒ¨åˆ†å¸¦æœ‰TTLçš„keyï¼Œåˆ¤æ–­æ˜¯å¦è¿‡ç¨‹ï¼Œå› æ­¤é¢‘ç‡è¾ƒé«˜ã€‚å¦‚æœæ—¶é—´å……è¶³å¹¶ä¸”è¿‡æœŸkeyæ¯”ä¾‹è¿‡é«˜ï¼Œä¹Ÿä¼šå¤šæ¬¡æŠ½æ ·ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>ç¼“å­˜é—®é¢˜</strong><ul>
<li>ç¼“å­˜é›ªå´©ï¼šå¤§é‡ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤±æ•ˆæˆ–è€…Rediså®•æœºå¯¼è‡´åé¢çš„è¯·æ±‚éƒ½ç›´æ¥è½åˆ°äº†db<ul>
<li>ä¿®æ”¹keyçš„TTLï¼Œè®¾ç½®éšæœºTTL<ol>
<li>å°†ç¼“å­˜å¤±æ•ˆæ—¶é—´æ‰“æ•£ï¼Œåœ¨å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸ŠåŠ ä¸€ä¸ªéšæœºå€¼</li>
<li>è®¾ç½®ç¼“å­˜ä¸è¿‡æœŸ</li>
</ol>
</li>
<li>æ­å»ºRedisçš„é›†ç¾¤ï¼Œå“¨å…µæ¨¡å¼ï¼Œé›†ç¾¤æ¨¡å¼<ul>
<li>ç»™ä¸šåŠ¡é™æµï¼Œnginxå’Œspring cloud gateway</li>
</ul>
</li>
<li>ä½¿ç”¨å¤šçº§ç¼“å­˜ï¼ŒGuavaå’ŒCaffeine + Redisï¼Œ å‰é¢è¿™ä¿©æ˜¯ç¼“å­˜åœ¨æœåŠ¡ä¸­çš„JVMä¸­çš„ï¼Œåˆ†å¸ƒå¼é¡¹ç›®ä¸­ä¸èƒ½è·¨æœåŠ¡ï¼Œä½†æ˜¯è¯·æ±‚é€Ÿåº¦æ˜¯æœ€å¿«çš„ï¼Œå› ä¸ºæ˜¯æœ¬åœ°çš„ç¼“å­˜</li>
<li>ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥</li>
</ul>
</li>
<li><strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šçƒ­ç‚¹keyè¿‡æœŸï¼Œå¤§é‡çš„è¯·æ±‚ç›´æ¥ç»™æ•°æ®åº“å‹åŠ›<ul>
<li>äº’æ–¥é”æ–¹æ¡ˆï¼Œä¿è¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹è¯·æ±‚ä¸šåŠ¡ç¼“å­˜</li>
<li>ä¸ç»™çƒ­ç‚¹æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç”±å¼‚æ­¥æ›´æ–°ç¼“å­˜ï¼Œæˆ–è€…åœ¨çƒ­ç‚¹æ•°æ®è¦è¿‡æœŸçš„æ—¶å€™ï¼Œæå‰é€šçŸ¥å‰å°çº¿ç¨‹æ›´æ–°ç¼“å­˜æˆ–è€…é‡æ–°è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¿è¯é«˜å¯ç”¨ï¼Œæ•°æ®ä¸ä¼šæ˜¯ç»å¯¹ä¸€è‡´çš„</li>
</ul>
</li>
<li>ç¼“å­˜ç©¿é€ï¼šè®¿é—®çš„æ•°æ®ä¸åœ¨ç¼“å­˜ä¸­ï¼Œæ¯æ¬¡éƒ½ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œç»™æ•°æ®åº“å¾ˆå¤§å‹åŠ› ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨<ul>
<li>éæ³•è¯·æ±‚çš„é™åˆ¶ï¼Œå½“æœ‰å¤§é‡æ¶æ„è¯·æ±‚è®¿é—®ä¸å­˜åœ¨çš„æ•°æ®æ—¶ï¼Œåœ¨APIå…¥å£è¦åˆ¤æ–­è¯·æ±‚å‚æ•°æ˜¯å¦åˆç†</li>
<li>è®¾ç½®ç©ºå€¼æˆ–è€…é»˜è®¤å€¼</li>
<li>ä½¿ç”¨<strong>å¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œé¿å…é€šè¿‡æŸ¥è¯¢æ•°æ®åº“æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨</strong>ï¼š</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/94433082">å¸ƒéš†è¿‡æ»¤å™¨</a>å¯¹ä¸€ä¸ªæ•°æ®ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°æ¥æ˜ å°„ï¼Œå½“æŸ¥è¯¢æ—¶ï¼Œå¦‚æœå¤šä¸ªå“ˆå¸Œå‡½æ•°çš„æ˜ å°„åä»»ä½•ä¸€ä¸ªç´¢å¼•éƒ½ä¸º0ï¼Œåˆ™ä¸€å®šä¸å­˜åœ¨ï¼Œå¦‚æœæ‰€æœ‰çš„æ˜ å°„åçš„ä½ç½®éƒ½æ˜¯1æ—¶ï¼Œåˆ™å¯èƒ½å­˜åœ¨é›†åˆä¸­ã€‚ä½¿ç”¨çš„æ˜¯ä½å›¾<img src="/2023/08/02/hou-duan/shu-ju-ku/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ul>
</li>
<li>æ•°æ®ä¸€è‡´æ€§<ul>
<li><strong>åŒå†™ä¸€è‡´é—®é¢˜ï¼š</strong><ul>
<li>ä¿è¯ä¸€è‡´æ€§<br>  1. å†™ä½¿ç”¨çš„<strong>å»¶è¿ŸåŒåˆ </strong>ï¼Œåˆ ä¸¤æ¬¡ç¼“å­˜ï¼Œç­‰æ•°æ®åº“ä¿®æ”¹å®Œä¹‹åå†åˆ é™¤ä¸€æ¬¡ç¼“å­˜ï¼Œç”¨äºè§£å†³æ•°æ®åº“ä¸»ä»ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸ç¼“å­˜åŒæ­¥ä¸ºuç®¡ã€‚<br>  2. Cache Aside æ—è·¯ç¼“å­˜ç­–ç•¥<br>      - å†™ç­–ç•¥ï¼šå…ˆæ›´æ–°æ•°æ®åº“å†åˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®<br>      - è¯»ç­–ç•¥ï¼šå¦‚æœå‘½ä¸­äº†ç¼“å­˜ï¼Œç›´æ¥è¿”å›ï¼Œå¦åˆ™ä»æ•°æ®åº“ä¸­è¯»å…¥æ•°æ®å¹¶å†™å…¥ç¼“å­˜ï¼Œè¿”å›ç»™ç”¨æˆ·<br>  3. Read/Write Through è¯»ç©¿/å†™ç©¿ç­–ç•¥: åº”ç”¨ç¨‹åºåªä¸ç¼“å­˜äº¤äº’ï¼Œç”±ç¼“å­˜ç»„ä»¶å’Œæ•°æ®åº“äº¤äº’ï¼Œ<br>      - è¯»ä¸ºåå‘¨ç›´æ¥æŸ¥æ•°æ®åº“ç„¶åå†™å…¥ç¼“å­˜<br>      - å†™æœªå‘½ä¸­ï¼Œç¼“å­˜å­˜åœ¨ç›´æ¥å†™ç¼“å­˜ï¼Œç„¶åç”±ç¼“å­˜ç»„ä»¶å»æ›´æ–°æ•°æ®åº“ã€‚ç¼“å­˜ä¸å­˜åœ¨åˆ™ç›´æ¥æ›´æ–°æ•°æ®åº“<br>  4. Write Backï¼ˆå†™å›ï¼‰ç­–ç•¥<ul>
<li>ä½¿ç”¨è¯»é”(å…±äº«é”)å’Œå†™é”(æ’ä»–é”)</li>
</ul>
</li>
<li>å…è®¸çŸ­æš‚ä¸ä¸€è‡´ï¼š<ul>
<li>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…ˆä¿®æ”¹æ•°æ®åº“ï¼Œæ•°æ®åº“ä¿®æ”¹å®Œä¹‹åå‘MQå‘é€æ¶ˆæ¯ï¼Œç”±caheæœåŠ¡æ¥å—æ¶ˆæ¯æ¥å¯¹ç¼“å­˜è¿›è¡Œæ›´æ–°</li>
<li>å–å†³äºmqçš„å¯é æ€§</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>å»¶æ—¶é˜Ÿåˆ—ï¼š æŠŠå½“å‰è¦åšçš„äº‹æƒ…æ¨è¿Ÿä¸€æ®µæ—¶é—´å†åšï¼Œå¦‚ä¸‹å•æœªä»˜æ¬¾å–æ¶ˆ<ul>
<li>å¯ä»¥ä½¿ç”¨ Zsetæ¥çº¯ç†ï¼ŒScoreå±æ€§æ¥å­˜å‚¨å»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´</li>
<li>zadd score1 value1;</li>
<li>å¤§key  valueçš„å€¼å¾ˆå¤§</li>
</ul>
</li>
<li>åˆ†å¸ƒå¼é—®é¢˜ï¼š<ol>
<li>åˆ†å¸ƒå¼é”ï¼šsetnx å®é™…ä½¿ç”¨åº”è¯¥ä½¿ç”¨ set key value nx ex time å› ä¸ºè¿™ä¸ªå¯ä»¥ç›´æ¥åœ¨åŸå­æ€§æŒ‡å®šæ—¶é—´</li>
<li>Reddsionæ¥ç»­é”ï¼šä½¿ç”¨luaè„šæœ¬ï¼Œæ¥ä¿è¯åŸå­æ€§<ol>
<li>ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ï¼Œç„¶ååœ¨äº‹åŠ¡ä¸­è°ƒç”¨äº†å¦ä¸€ä¸ªäº‹åŠ¡ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹ŸåŒæ ·å¯¹ç›¸åŒçš„é”åŠ é”ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<ul>
<li>å¦‚æœæ˜¯ç›´æ¥ä½¿ç”¨Redisï¼Œä¼šé˜»å¡ï¼Œç„¶åç­‰é”è¿‡æœŸåï¼Œè¢«è°ƒç”¨çš„å‡½æ•°å¯ä»¥æ‰§è¡Œï¼Œè¢«è°ƒç”¨çš„å‡½æ•°æ‰§è¡Œä¹‹åä¼šé‡Šæ”¾é”ï¼Œè¿”å›åˆ°ç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œï¼Œç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¹‹åå°±ä¼šé‡å¤é‡Šæ”¾è¿™ä¸ªé”ï¼Œæ— æ³•ä¿è¯åŸå­æ€§äº†ã€‚</li>
<li>å¦‚æœä½¿ç”¨Redssionï¼ŒRedssionçš„RLockæ•°æ®ç»“æ„å®ç°äº†å¯é‡å…¥é”ï¼š<ul>
<li>keyï¼ŒstatusæŒæœ‰è¿˜æ˜¯é‡Šæ”¾ ï¼ŒUUIDæ ‡è¯†çº¿ç¨‹ ï¼Œ æŒæœ‰æ—¶é—´(æœ€é•¿çš„å­˜æ´»æ—¶é—´)</li>
<li>Redisä¸­å­˜çš„valueå­—æ®µä¸ºé”çš„æ¬¡æ•°</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ul>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"myLock"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"LOCKED"</span><span class="token punctuation">,</span>
    <span class="token property">"owner"</span><span class="token operator">:</span> <span class="token string">"some-unique-uuid"</span><span class="token punctuation">,</span>
    <span class="token property">"hold_count"</span><span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>			<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>        - è¿™ä¸ªé—®é¢˜ä¸­å°±ä¼šç›´æ¥åˆ¤æ–­å‡ºæ˜¯åŒä¸€ä¸ªçº¿ç¨‹çš„è°ƒç”¨ï¼Œæ‰€ä»¥åªä¼šç»™é”çš„æŒæœ‰æŠ€æœ¯+1ï¼Œä¸ä¼šé˜»å¡
</code></pre>
<ul>
<li><p>multiå¼€å§‹äº‹åŠ¡ï¼Œdiscardå–æ¶ˆäº‹åŠ¡redisçš„äº‹åŠ¡åœ¨å‡ºé”™æ—¶ï¼Œåªä¼šå›æ»šå‡ºé”™çš„å‘½ä»¤</p>
</li>
<li><p>ä½¿ç”¨watch key æ¥å¯¹æŸä¸€ä¸ªkeyåŠ ä¸Šä¹è§‚é”</p>
</li>
<li><p>Redis ä¸ Memcached&nbsp;<strong>åŒºåˆ«</strong>ï¼š</p>
<ol>
<li>Redisæ”¯æŒçš„æ•°æ®ç±»å‹æ›´ä¸°å¯Œï¼šSting Hash List Set Zsetï¼Œ Måªæ”¯æŒkey-valueæ•°æ®ç±»å‹</li>
<li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ã€‚</li>
<li>RedisåŸç”Ÿæ”¯æŒé›†ç¾¤æ¨¡å¼</li>
<li>Redisæ”¯æŒå‘å¸ƒè®¢é˜…æ¨¡å‹ï¼ŒLUaå‰å¥¥æœ¬ï¼Œäº‹åŠ¡ç­‰</li>
</ol>
</li>
<li><p>æ•°æ®ç±»å‹</p>
<ul>
<li>String ç±»å‹çš„åº”ç”¨åœºæ™¯ï¼šSDSï¼Œå¯ä»¥å­˜ä»»ä½•ç±»å‹ï¼Œç›´æ¥å­˜åœ¨äºŒè¿›åˆ¶bufæ•°ç»„é‡Œ</li>
<li>List å®ç°æ˜¯ï¼š</li>
<li>Hash ç±»å‹ï¼šç¼“å­˜å¯¹è±¡ã€è´­ç‰©è½¦ç­‰ã€‚</li>
<li>Set ç±»å‹ï¼šèšåˆè®¡ç®—ï¼ˆå¹¶é›†ã€äº¤é›†ã€å·®é›†ï¼‰åœºæ™¯ï¼Œæ¯”å¦‚ç‚¹èµã€å…±åŒå…³æ³¨ã€æŠ½å¥–æ´»åŠ¨ç­‰ã€‚</li>
<li>Zset ç±»å‹ï¼šæ’åºåœºæ™¯ï¼Œæ¯”å¦‚æ’è¡Œæ¦œã€ç”µè¯å’Œå§“åæ’åºç­‰ã€‚</li>
<li>BitMapï¼ˆ2.2 ç‰ˆæ–°å¢ï¼‰ï¼šäºŒå€¼çŠ¶æ€ç»Ÿè®¡çš„åœºæ™¯ï¼Œæ¯”å¦‚ç­¾åˆ°ã€åˆ¤æ–­ç”¨æˆ·ç™»é™†çŠ¶æ€ã€è¿ç»­ç­¾åˆ°ç”¨æˆ·æ€»æ•°ç­‰ï¼›</li>
<li>HyperLogLogï¼ˆ2.8 ç‰ˆæ–°å¢ï¼‰ï¼šæµ·é‡æ•°æ®åŸºæ•°ç»Ÿè®¡çš„åœºæ™¯ï¼Œæ¯”å¦‚ç™¾ä¸‡çº§ç½‘é¡µ UV è®¡æ•°ç­‰ï¼›</li>
<li>GEOï¼ˆ3.2 ç‰ˆæ–°å¢ï¼‰ï¼šå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯çš„åœºæ™¯ï¼Œæ¯”å¦‚æ»´æ»´å«è½¦ï¼›</li>
<li>Streamï¼ˆ5.0 ç‰ˆæ–°å¢ï¼‰ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç›¸æ¯”äºåŸºäº List ç±»å‹å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæœ‰è¿™ä¸¤ä¸ªç‰¹æœ‰çš„ç‰¹æ€§ï¼šè‡ªåŠ¨ç”Ÿæˆå…¨å±€å”¯ä¸€æ¶ˆæ¯IDï¼Œæ”¯æŒä»¥æ¶ˆè´¹ç»„å½¢å¼æ¶ˆè´¹æ•°æ®ã€‚</li>
</ul>
</li>
<li><h3 id="Redisåœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ˜¯å•çº¿ç¨‹ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†å¤šçº¿ç¨‹çš„æ¥å¤„ç†ç½‘ç»œIOæ“ä½œ"><a href="#Redisåœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ˜¯å•çº¿ç¨‹ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†å¤šçº¿ç¨‹çš„æ¥å¤„ç†ç½‘ç»œIOæ“ä½œ" class="headerlink" title="Redisåœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ˜¯å•çº¿ç¨‹ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†å¤šçº¿ç¨‹çš„æ¥å¤„ç†ç½‘ç»œIOæ“ä½œ"></a>Redisåœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ˜¯å•çº¿ç¨‹ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†å¤šçº¿ç¨‹çš„æ¥å¤„ç†ç½‘ç»œIOæ“ä½œ</h3><ul>
<li>ä¸æ˜¯ï¼ŒRedisä¼šå¯åŠ¨åå°ï¼š ä¸‰ä¸ªçº¿ç¨‹å„è‡ªæœ‰è‡ªå·±çš„ä»»åŠ¡é˜Ÿåˆ—,<ol>
<li>å¤„ç†å…³é—­æ–‡ä»¶</li>
<li>å¤„ç†AOFåˆ·ç›˜</li>
<li>å¼‚æ­¥é‡Šæ”¾Rediså†…å­˜ï¼Œä¹Ÿå°±æ˜¯lazyfreeçº¿ç¨‹</li>
<li>ä¸»çº¿ç¨‹ï¼Œè´Ÿè´£æ‰§è¡Œå‘½ä»¤</li>
<li>ä¸‰ä¸ªI/Oçº¿ç¨‹æ¥åˆ†æ‹…ç½‘ç»œI/Oå‹åŠ›</li>
</ol>
</li>
<li>è¿™äº›ä»»åŠ¡çš„æ“ä½œéƒ½æ˜¯å¾ˆè€—æ—¶çš„ï¼Œå¦‚æœæŠŠè¿™äº›ä»»åŠ¡éƒ½æ”¾åœ¨ä¸»çº¿ç¨‹æ¥å¤„ç†ï¼Œé‚£ä¹ˆ Redis ä¸»çº¿ç¨‹å°±å¾ˆå®¹æ˜“å‘ç”Ÿé˜»å¡ï¼Œè¿™æ ·å°±æ— æ³•å¤„ç†åç»­çš„è¯·æ±‚äº†ã€‚</li>
</ul>
</li>
<li><p>è¿‡æœŸåˆ é™¤å’Œå†…å­˜æ·˜æ±°ï¼š Redisä½¿ç”¨æ‡’æƒ°æ€§åˆ é™¤å’Œå®šæœŸåˆ é™¤ã€‚ æƒ°æ€§åˆ é™¤æ—¶æŒ‡ä¸ä¸»åŠ¨åˆ é™¤è¿‡æœŸé”®ï¼Œæ¯æ¬¡åé—®keyæ—¶æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸï¼Œåˆ™åˆ é™¤ã€‚ ä¼˜ç‚¹æ˜¯ï¼šå‡å°‘å¯¹ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ï¼Œç¼ºç‚¹æ˜¯ï¼šä¸èƒ½åŠæ—¶é‡Šæ”¾å†…å­˜</p>
<ul>
<li>å®šæœŸåˆ é™¤ï¼šæ¯è¿‡ä¸€æ®µæ—¶é—´ï¼Œä»æ•°æ®åº“ä¸­å–å‡ºä¸€å®šæ•°é‡çš„keyæ¥è¿›è¡Œæ£€æŸ¥ï¼Œåˆ é™¤å…¶ä¸­çš„è¿‡æœŸkeyï¼Œå¦‚æœè¿‡æœŸkeyè¶…è¿‡ä¸€å®šæ¯”ä¾‹ï¼Œé‡å¤æ‰§è¡Œå®šæœŸåˆ é™¤</li>
<li>å½“ Redis è¿è¡Œåœ¨ä¸»ä»æ¨¡å¼ä¸‹æ—¶ï¼Œ<strong>ä»åº“ä¸ä¼šè¿›è¡Œè¿‡æœŸæ‰«æï¼Œä»åº“å¯¹è¿‡æœŸçš„å¤„ç†æ˜¯è¢«åŠ¨çš„</strong>ã€‚ä¹Ÿå°±æ˜¯å³ä½¿ä»åº“ä¸­çš„ key è¿‡æœŸäº†ï¼Œå¦‚æœæœ‰å®¢æˆ·ç«¯è®¿é—®ä»åº“æ—¶ï¼Œä¾ç„¶å¯ä»¥å¾—åˆ° key å¯¹åº”çš„å€¼ï¼Œåƒæœªè¿‡æœŸçš„é”®å€¼å¯¹ä¸€æ ·è¿”å›ã€‚</li>
<li>ä»åº“çš„è¿‡æœŸé”®å¤„ç†ä¾é ä¸»æœåŠ¡å™¨æ§åˆ¶ï¼Œ<strong>ä¸»åº“åœ¨ key åˆ°æœŸæ—¶ï¼Œä¼šåœ¨ AOF æ–‡ä»¶é‡Œå¢åŠ ä¸€æ¡ del æŒ‡ä»¤ï¼ŒåŒæ­¥åˆ°æ‰€æœ‰çš„ä»åº“</strong>ï¼Œä»åº“é€šè¿‡æ‰§è¡Œè¿™æ¡ del æŒ‡ä»¤æ¥åˆ é™¤è¿‡æœŸçš„ keyã€‚REmote DIctionary Server(Redis) æ˜¯ä¸€ä¸ªç”± Salvatore Sanfilippo å†™çš„ key-value å­˜å‚¨ç³»ç»Ÿï¼Œæ˜¯è·¨å¹³å°çš„éå…³ç³»å‹æ•°æ®åº“ï¼Œéå…³ç³»å‹æ•°æ®åº“ï¼Œ</li>
</ul>
</li>
<li><p>å†…å­˜æ·˜æ±°ï¼š éšæœºæ·˜æ±°ï¼ŒLRUæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œæ ¹æ®æœ€åä¸€æ¬¡è®¿é—®çš„æ—¶é—´ , LFUæœ€è¿‘æœ€ä¸å¸¸ä½¿ç”¨ï¼Œæ ¹æ®è®¿é—®æ¬¡æ•°æ¥æ·˜æ±°</p>
</li>
<li><p>Lua :Redis åœ¨æ‰§è¡Œ Lua è„šæœ¬æ—¶ï¼Œå¯ä»¥ä»¥åŸå­æ€§çš„æ–¹å¼æ‰§è¡Œ</p>
</li>
<li><p>Luaè„šæœ¬ä½¿ç”¨</p>
<ol>
<li>EVALæ‰§è¡Œè„šæœ¬<code> EVAL script numkeys key [key â€¦] arg [arg â€¦]</code></li>
<li>SCRIPT LOAD script.lua æŠŠè„šæœ¬åŠ è½½åˆ°redis-serveä¸­ï¼Œè¿”ä¼šä¸€ä¸ª&nbsp;SHA1æ ¡éªŒå’Œï¼Œä¹‹åæ— è®ºæ˜¯å“ªä¸ªå®¢æˆ·ç«¯éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ ¡éªŒå’Œæ¥è¿è¡Œè„šæœ¬ã€‚</li>
<li>EVALSHA sha1æ ¡éªŒå’Œ  numkeys key [key â€¦] arg [arg â€¦]</li>
<li>SCRIPT EXISTS sha1æ¥æ£€éªŒè¿™ä¸ªè„šæœ¬æ˜¯å¦è¿˜åœ¨</li>
<li>SCRIPT FLUSHåˆ·æ–°æ‰€æœ‰å·²ç»ä¿å­˜çš„è„šæœ¬</li>
<li>redis-cli -a å¯†ç  â€“eval luaè„šæœ¬å†…å®¹</li>
</ol>
</li>
<li><p>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„æ“ä½œ</p>
<ol>
<li>string <ul>
<li>redisä¸­çš„stringå¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ï¼ŒåŒ…æ‹¬jpgå’Œåºåˆ—åŒ–çš„å¯¹è±¡ï¼Œå› ä¸ºstringæ˜¯byte [] æ•°ç»„</li>
<li>setrange key number string ä»numberå¼€å§‹çš„ä¸‹æ ‡å¤„æ›¿æ¢string,ä»0å¼€å§‹</li>
<li>mset è®¾ç½®å¤šä¸ª</li>
<li>xxnx not exit ä¸å­˜åœ¨çš„è¯åœ¨è®¾ç½®</li>
<li>getrange key begin end</li>
<li>incryby key å¢é‡ ä¿®æ”¹æ•°æ®</li>
<li>append key åŠ </li>
<li>strlen è·å–é•¿åº¦</li>
</ul>
</li>
<li>hash: stringç±»å‹çš„ field å’Œ valueçš„æ˜ å°„è¡¨,å ç”¨å†…å­˜æ›´å°‘ï¼Œæ–¹ä¾¿å–æ•´ä¸ªå¯¹è±¡<ul>
<li>hset/hsetnx key field1 value1</li>
<li>hmget è·å–å¤šä¸ªfields</li>
<li>hexists key field æµ‹è¯•fieldæ˜¯å¦å­˜åœ¨</li>
<li>hlen key æœ‰å¤šå°‘field</li>
<li>hkeys key è·å–æ‰€æœ‰çš„field</li>
<li>hvals è·å–æ‰€æœ‰çš„value</li>
<li>hgetall == hvals + hkeys</li>
</ul>
</li>
<li>list åº•å±‚æ˜¯é“¾è¡¨ï¼Œå¯å½“ä½œqueueä½¿ç”¨ï¼Œæœ‰åºï¼Œå¯é‡å¤ï¼Œkeyä¸ºé“¾è¡¨çš„åå­—<ul>
<li>lpush å¤´éƒ¨æ·»åŠ  rpushå°¾éƒ¨æ·»åŠ ,linsert key</li>
<li>lset é‡æ–°è®¾å®šæŒ‡å®šä½ç½®çš„æ•°æ® </li>
<li>lrem key count value ä»å¤´å¼€å§‹åˆ é™¤countä¸ªå’Œvalueä¸€æ ·å€¼çš„æ•°æ®ï¼Œ count &gt; 0 ä»å¤´å¼€å§‹,count &lt; 0ä»å°¾éƒ¨å¼€å§‹ï¼Œcount == 0 åˆ é™¤æ‰€æœ‰çš„</li>
<li>ltrim åªä¿ç•™ç»™å®šèŒƒå›´çš„æ•°æ®</li>
<li>lpop/rpop</li>
<li>rpoplpush key1 key2 å°†key1çš„å°¾éƒ¨ç§»é™¤å¹¶åŠ å…¥key2çš„å¤´éƒ¨ï¼ŒåŸå­æ“ä½œ</li>
<li>lindexä¸‹æ ‡è®¿é—®</li>
<li>llenè·å–é•¿åº¦</li>
</ul>
</li>
<li>set<ul>
<li>ä¾¿äºæ±‚é›†åˆçš„äº¤å¹¶å·®,æ— åºé›†åˆï¼Œä¸å¯é‡å¤</li>
<li>sadd key value</li>
<li>srem key value</li>
<li>spop key éšæœºåˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´ </li>
<li>sdiff æ±‚äº¤é›† ä¸€ä¸ªkey1 å¤šä¸ªkey2 , key3ï¼Œä¹Ÿå°±æ˜¯åœ¨å…¶ä»–keyä¸­ä¸å…¶ä»–keyä¸åŒå…ƒç´ </li>
<li>sdiffstore å°†diffçš„ç»“æœä¿å­˜åˆ°å¦ä¸€ä¸ªkeyä¸­</li>
<li>sinter(store) äº¤é›†(å­˜å‚¨)</li>
<li>sunion(store) å¹¶é›†</li>
<li>smove å°†key1 ä¸­çš„åˆ é™¤æ·»åŠ ç»™ç¬¬äºŒä¸ª</li>
<li>scard ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li>
<li>sismemberæµ‹è¯•æ˜¯å¦ä¸ºkeyçš„å…ƒç´ </li>
<li>srandmemberéšæœºè¿”å›ä¸åˆ é™¤</li>
</ul>
</li>
<li>sorted sets<ul>
<li>æœ‰åºï¼Œä¸å¯é‡å¤ï¼Œä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹scoreæ¥è¿›è¡Œæ’åº,æ˜¯skip list å’Œ hash tableçš„æ··åˆï¼Œscoreè¶Šå°çš„è¶Šåœ¨å‰é¢</li>
<li>zadd key score value</li>
<li>zrem</li>
<li>zincrby key score value ç»™è¿™ä¸ªå…ƒç´ çš„scoreæ·»åŠ </li>
<li>zrank æŒ‰ç…§ä»å°åˆ°å¤§æ’åºè¿”å›æŸä¸ªmemberçš„æ’å</li>
<li>zrerankåå‘æ’åº</li>
<li>zcount è¿”å›ç»™å®šåŒºé—´scoreå†…çš„æ•°é‡</li>
<li>zcarf è¿”å›å…ƒç´ æ•°é‡</li>
<li>zscore è¿”å›score</li>
</ul>
</li>
</ol>
<ul>
<li>å¸¸ç”¨æŒ‡ä»¤ï¼škeys ï¼Œ del , expire,moveè½¬ç§»æŠŠå½“å‰æ•°æ®åº“ä¸­çš„æ•°æ®è½¬ç§»åˆ°å…¶ä»–æ•°æ®ä¸­,persistç§»é™¤ç»™å®škeyçš„è¿‡æœŸæ—¶é—´ï¼Œrandomkeyéšæœºè¿”å›ä¸€ä¸ªkey,rename,type</li>
<li>ping,echo,select(0~15),dbsizeè¿”å›å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„keyæ•°é‡,infoè·å–æœåŠ¡å™¨ç»Ÿè®¡ä¿¡æ¯</li>
<li>monitorå®æ—¶è½¬å­˜æ”¶åˆ°çš„è¯·æ±‚</li>
<li>flushdbåˆ é™¤æ‰€é€‰æ‹©çš„æ•°æ®åº“çš„æ‰€æœ‰key</li>
<li>fushall åˆ é™¤æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰key</li>
</ul>
</li>
</ul>
<h3 id="Redis-è„šæœ¬å‘½ä»¤"><a href="#Redis-è„šæœ¬å‘½ä»¤" class="headerlink" title="Redis è„šæœ¬å‘½ä»¤"></a>Redis è„šæœ¬å‘½ä»¤</h3><h3 id="dockercomposeå¿«é€Ÿæ­å»ºä¸€ä¸»äºŒä»ä¸€å“¨å…µçš„redisé›†ç¾¤"><a href="#dockercomposeå¿«é€Ÿæ­å»ºä¸€ä¸»äºŒä»ä¸€å“¨å…µçš„redisé›†ç¾¤" class="headerlink" title="dockercomposeå¿«é€Ÿæ­å»ºä¸€ä¸»äºŒä»ä¸€å“¨å…µçš„redisé›†ç¾¤"></a>dockercomposeå¿«é€Ÿæ­å»ºä¸€ä¸»äºŒä»ä¸€å“¨å…µçš„redisé›†ç¾¤</h3><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token property">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>
<span class="token property">services</span><span class="token punctuation">:</span>
  <span class="token property">redis-master</span><span class="token punctuation">:</span> # ä¸»èŠ‚ç‚¹
    <span class="token property">image</span><span class="token punctuation">:</span> <span class="token property">redis</span><span class="token punctuation">:</span>latest
    <span class="token property">command</span><span class="token punctuation">:</span> redis-server --appendonly yes --requirepass bronya # è®¾ç½®å¯†ç 
    <span class="token property">volumes</span><span class="token punctuation">:</span>
      - ./data/<span class="token property">master</span><span class="token punctuation">:</span>/data
    <span class="token property">ports</span><span class="token punctuation">:</span>
      - <span class="token string">"6379:6379"</span>
    <span class="token property">networks</span><span class="token punctuation">:</span>
      - redis-network

  <span class="token property">redis-slave1</span><span class="token punctuation">:</span>
    <span class="token property">image</span><span class="token punctuation">:</span> <span class="token property">redis</span><span class="token punctuation">:</span>latest
    <span class="token property">command</span><span class="token punctuation">:</span> redis-server --slaveof redis-master 6379 --appendonly yes --masterauth bronya
    <span class="token property">depends_on</span><span class="token punctuation">:</span>
      - redis-master
    <span class="token property">volumes</span><span class="token punctuation">:</span>
      - ./data/<span class="token property">slave1</span><span class="token punctuation">:</span>/data
    <span class="token property">networks</span><span class="token punctuation">:</span>
      - redis-network

  <span class="token property">redis-slave2</span><span class="token punctuation">:</span>
    <span class="token property">image</span><span class="token punctuation">:</span> <span class="token property">redis</span><span class="token punctuation">:</span>latest
    <span class="token property">command</span><span class="token punctuation">:</span> redis-server --slaveof redis-master 6379 --appendonly yes --masterauth bronya
    <span class="token property">depends_on</span><span class="token punctuation">:</span>
      - redis-master
    <span class="token property">volumes</span><span class="token punctuation">:</span>
      - ./data/<span class="token property">slave2</span><span class="token punctuation">:</span>/data
    <span class="token property">networks</span><span class="token punctuation">:</span>
      - redis-network

  <span class="token property">redis-sentinel</span><span class="token punctuation">:</span>
    <span class="token property">image</span><span class="token punctuation">:</span> <span class="token property">redis</span><span class="token punctuation">:</span>latest
    <span class="token property">command</span><span class="token punctuation">:</span> redis-sentinel /etc/redis/sentinel.conf
    <span class="token property">depends_on</span><span class="token punctuation">:</span>
      - redis-master
    <span class="token property">volumes</span><span class="token punctuation">:</span>
      - ./sentinel.<span class="token property">conf</span><span class="token punctuation">:</span>/etc/redis/sentinel.conf
    <span class="token property">networks</span><span class="token punctuation">:</span>
      - redis-network

<span class="token property">networks</span><span class="token punctuation">:</span>
  <span class="token property">redis-network</span><span class="token punctuation">:</span>
    <span class="token property">driver</span><span class="token punctuation">:</span> bridge<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸‹è¡¨åˆ—å‡ºäº† redis è„šæœ¬å¸¸ç”¨å‘½ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>å‘½ä»¤åŠæè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/scripting-eval.html">EVAL script numkeys key [key â€¦] arg [arg â€¦]</a>  <br>æ‰§è¡Œ Lua è„šæœ¬ã€‚</td>
</tr>
<tr>
<td>2</td>
<td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/scripting-evalsha.html">EVALSHA sha1 numkeys key [key â€¦] arg [arg â€¦]</a>  <br>æ‰§è¡Œ Lua è„šæœ¬ã€‚</td>
</tr>
<tr>
<td>3</td>
<td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/scripting-script-exists.html">SCRIPT EXISTS script [script â€¦]</a>  <br>æŸ¥çœ‹æŒ‡å®šçš„è„šæœ¬æ˜¯å¦å·²ç»è¢«ä¿å­˜åœ¨ç¼“å­˜å½“ä¸­ã€‚</td>
</tr>
<tr>
<td>4</td>
<td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/scripting-script-flush.html">SCRIPT FLUSH</a>  <br>ä»è„šæœ¬ç¼“å­˜ä¸­ç§»é™¤æ‰€æœ‰è„šæœ¬ã€‚</td>
</tr>
<tr>
<td>5</td>
<td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/scripting-script-kill.html">SCRIPT KILL</a>  <br>æ€æ­»å½“å‰æ­£åœ¨è¿è¡Œçš„ Lua è„šæœ¬ã€‚</td>
</tr>
<tr>
<td>6</td>
<td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/scripting-script-load.html">SCRIPT LOAD script</a>  <br>å°†è„šæœ¬ script æ·»åŠ åˆ°è„šæœ¬ç¼“å­˜ä¸­ï¼Œä½†å¹¶ä¸ç«‹å³æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚</td>
</tr>
</tbody></table>
<ul>
<li>é€‰æ‹©æ•°æ®åº“å’Œç™»å½•<br>å¦‚æœä½ æƒ³åœ¨RedisæœåŠ¡å™¨å¯åŠ¨æ—¶æŒ‡å®šè¦ä½¿ç”¨çš„æ•°æ®åº“å’Œå¯†ç ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œè®¾ç½®ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<p><code>redis-server --port 6379 --requirepass your_password --db 3</code><br>redisé»˜è®¤æœ‰0-15ä¸ªæ•°æ®åº“ï¼Œç›´æ¥é€‰æ‹©å³å¯</p>
<p>info æ¥è·å¾—æœåŠ¡å™¨å’Œæ•°æ®åº“ä¿¡æ¯</p>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p>æ˜¯ä¸€ç§æºä»£ç å¯ç”¨çš„æ–‡æ¡£æ•°æ®åº“ï¼Œä»¥åºåˆ—åŒ–çš„ JSON æ ¼å¼å­˜å‚¨æ•°æ®ã€‚MongoDB å°†æ•°æ®å­˜å‚¨åœ¨å¤–éƒ¨å­˜å‚¨å™¨ä¸­ï¼Œä½†åœ¨ä¼ä¸šç‰ˆä¸­åŒ…å«å†…å­˜å­˜å‚¨å¼•æ“ã€‚<br>å¸¸ç”¨äºåº”å¯¹é«˜å¹¶å‘ã€æµ·é‡æ•°æ®å­˜å‚¨ã€æ•°æ®åº“çš„é«˜å¯æ‰©å±•æ€§<br>ä¾‹å¦‚ï¼šç¤¾äº¤åœºæ™¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œé€šè¿‡åœ°ç†ä½ç½®ç´¢å¼•æ¥å®ç°é™„è¿‘çš„äºº<br>æ¸¸æˆåœºæ™¯å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œæ–¹ä¾¿é«˜æ•ˆ<br>æ—¥å¿—</p>
<h4 id="åŸºæœ¬æ¦‚å¿µï¼š"><a href="#åŸºæœ¬æ¦‚å¿µï¼š" class="headerlink" title="åŸºæœ¬æ¦‚å¿µï¼š"></a>åŸºæœ¬æ¦‚å¿µï¼š</h4><ol>
<li>æ–‡æ¡£ï¼šæ•°æ®å­˜å‚¨çš„åŸºæœ¬å•ä½</li>
<li>ç´¢å¼•ï¼š<ul>
<li>å•å­—æ®µç´¢å¼•ï¼šç´¢å¼•å»ºç«‹çš„é¡ºåºæ— æ‰€è°“ï¼ŒMongoDBä¼šå¯ä»¥ä»å¤´/å°¾å¼€å§‹éå†</li>
<li>å¤åˆç´¢å¼•ï¼šå»ºç«‹åœ¨å¤šä¸ªå­—æ®µä¹‹ä¸Šçš„ç´¢å¼•,é¡ºåºå¾ˆé‡è¦</li>
<li>å¤šé”®ç´¢å¼•ï¼šå¦‚æœä¸€ä¸ªå­—æ®µæ˜¯æ•°ç»„ï¼Œå¯¹æ•°ç»„å»ºç«‹çš„ç´¢å¼•å°±æ˜¯å¤šé”®ç´¢å¼•ï¼Œç›¸å½“äºä¼šå¯¹æ•°ç»„çš„æ¯ä¸ªå€¼éƒ½å»ºç«‹å•å­—æ®µç´¢å¼•ï¼Œä¸¾ä¾‹ï¼šç»™Tagså»ºç«‹ç´¢å¼•ï¼Œæœç´¢æ—¶åªéœ€è¦tagsæ•°ç»„å³å¯ç­›é€‰å‡ºå¸¦æœ‰tagsçš„æ‰€æœ‰æ–‡æ¡£</li>
<li>å“ˆå¸Œç´¢å¼•ï¼šæŒ‰ç…§æ•°æ®çš„å“ˆå¸Œå€¼è¿›è¡Œç´¢å¼•ï¼Œç”¨åœ¨å“ˆå¸Œåˆ†ç‰‡é›†ç¾¤ä¸Š</li>
<li>æ–‡æœ¬ç´¢å¼•ï¼šä¸å»ºè®®ä½¿ç”¨ï¼Œæ€§èƒ½ä½ä¸‹</li>
<li>åœ°ç†ä½ç½®ç´¢å¼•ï¼š</li>
<li>å”¯ä¸€ç´¢å¼•ï¼šç¡®ä¿ç´¢å¼•å­—æ®µä¸ä¼šå­˜å‚¨é‡å¤å€¼</li>
<li>TTLç´¢å¼•ï¼šæä¾›ä¸€ä¸ªè¿‡æœŸæœºåˆ¶ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªæ–‡æ¡£è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå½“æ–‡æ¡£è¾¾åˆ°è¿‡æœŸæ—¶é—´å°±ä¼šè¢«åˆ é™¤ï¼Œç¤ºä¾‹ä»£ç ï¼š`    @Indexed(expireAfterSeconds = 60 * 60 * 24 * 30)private Date createdAt;<ul>
<li>TTLç´¢å¼•åªèƒ½ç”¨äºå•å­—æ®µ</li>
<li><code>_id</code> ä¸æ”¯æŒTTLç´¢å¼•</li>
<li>ä¸èƒ½åœ¨ä¸Šé™é›†åˆ(ä¸Šé™é›†åˆï¼ˆCapped Collectionsï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„é›†åˆï¼Œå®ƒæœ‰å›ºå®šçš„å¤§å°ã€‚å½“é›†åˆè¾¾åˆ°å…¶æœ€å¤§å¤§å°æ—¶ï¼ŒMongoDBä¼šè‡ªåŠ¨è¦†ç›–æœ€æ—§çš„æ–‡æ¡£ã€‚)ä¸­åˆ é™¤æ–‡æ¡£</li>
</ul>
</li>
<li>è¦†ç›–ç´¢å¼•æŸ¥è¯¢ï¼š<ol>
<li>æ‰€æœ‰æŸ¥è¯¢å­—æ®µéƒ½è¦æ±‚æ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†</li>
<li>ç»“æœä¸­è¿”å›çš„æ‰€æœ‰å­—æ®µéƒ½åœ¨åŒä¸€ä¸ªç´¢å¼•ä¸­</li>
<li>æŸ¥è¯¢ä¸­æ²¡æœ‰å­—æ®µä¸ºnull</li>
</ol>
</li>
</ul>
</li>
<li>é›†åˆï¼šé›†åˆæ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥æŠŠä¸åŒç±»å‹çš„æ–‡æ¡£å½’ä¸ºä¸€ä¸ªé›†åˆ<ul>
<li>ç›–å­é›†åˆ: æœ‰ä¸Šé™çš„é›†åˆï¼Œç”¨äºæ—¥å¿—ï¼Œä¸æ”¯æŒcrud,å½“è¶…è¿‡ä¸Šé™æ—¶ï¼Œä¼šä»æœ€è€çš„æ–‡æ¡£å¼€å§‹åˆ é™¤<ul>
<li><code>db.createCollection("users.actions",{capped:true,size:16384,max:100})</code></li>
</ul>
</li>
<li>TTLé›†åˆ: MongoDBä¹Ÿå…è®¸åœ¨ç‰¹å®šçš„æ—¶é—´ååºŸå¼ƒæ–‡æ¡£æ•°æ®ï¼Œæœ‰æ—¶å€™å«åšç”Ÿå­˜æ—¶é—´time-to-live (TTLï¼‰é›†åˆè¿™ä¸ªåŠŸèƒ½å®é™…ä¸Šæ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ç´¢å¼•å®ç°çš„ åˆ›å»ºTTLç´¢å¼•çš„æ–¹å¼å¦‚ä¸‹ï¼š<ul>
<li><code>db.reviews.createIndex({time_field:1},{expireAfterSeconds:3600})</code></li>
<li>time_fieldå­—æ®µä¼šå®šæœŸæ£€æŸ¥æ—¶é—´æˆ³ï¼Œä¸å½“å‰æ—¶é—´æ¯”è¾ƒï¼Œå¦‚æœæ—¶é—´å·®å¤§äºè®¾ç½®çš„æ—¶é—´ï¼Œæ–‡æ¡£ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œå•ä½æ˜¯s</li>
</ul>
</li>
</ul>
</li>
<li>æ–‡æ¡£-&gt;é›†åˆ-&gt;æ•°æ®åº“-&gt;MongoDB</li>
<li>mongoshæ˜¯ä¸€ä¸ªjsè§£é‡Šå™¨ï¼Œå¯ä»¥ä½¿ç”¨jsæ ‡å‡†åº“æˆ–è€…è¿è¡Œå‡½æ•°</li>
<li>ä½¿ç”¨jsè¯­æ³•ï¼Œdbå˜é‡ä»£è¡¨å½“å‰é€‰ç”¨çš„æ•°æ®åº“</li>
</ol>
<ul>
<li>CRUD:<ul>
<li>æŸ¥è¯¢å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</li>
<li>å»ºç«‹æ•°æ®åº“ç›´æ¥useä¸€ä¸ªæ–°çš„æ•°æ®åº“å³å¯</li>
<li>å˜é‡ = {â€¦},ä¹‹ådb.é›†åˆ.insertOne(å˜é‡)æˆ–è€…insertMany()</li>
<li>db.é›†åˆ.find()æˆ–è€…findOne()</li>
<li>updateOne()</li>
<li>db.é›†åˆ.deleteOne/Many()</li>
<li>db.dropDatabase()åˆ é™¤å½“å‰æ•°æ®åº“</li>
<li>db.collection.drop() åˆ é™¤æŒ‡å®šé›†åˆ</li>
<li>db.col.update({â€˜titleâ€™:â€™MongoDB æ•™ç¨‹â€™},{$set:{â€˜titleâ€™:â€™MongoDBâ€™}}) å¯¹åº”çš„å˜é‡å({ â€œnMatchedâ€ : 1, â€œnUpsertedâ€ : 0, â€œnModifiedâ€ : 1 },{multi:true}) è®¾ç½®multi : trueå¯ä»¥ä¿®æ”¹é€‰å®šçš„æ‰€æœ‰æ–‡æ¡£</li>
<li>æƒ³æ˜¾å¼åˆ›å»ºé›†åˆï¼šdb.createCollection(xxx),é€šè¿‡sizeå­—æ®µå¯ä»¥é¢„åˆ†é…ç©ºé—´çš„å­—èŠ‚å¤§å°</li>
</ul>
</li>
<li>åˆ›å»ºç´¢å¼•:db.products.createIndex({slug: 1}, {unique: true})<ul>
<li>1ä»£è¡¨æ˜¯å‡åºï¼Œuniqueæ˜¯æŒ‡å®šç´¢å¼•çš„é€‰é¡¹ï¼ŒæŒ‡å®šäº†ç´¢å¼•æ˜¯å”¯ä¸€çš„ï¼Œslugä¸€èˆ¬ç”¨äºå­˜å‚¨URL</li>
</ul>
</li>
<li>èšåˆç®¡é“ï¼š ç±»ä¼¼streamæµå’Œchannelç®¡é“ï¼Œå¯ä»¥æ‰§è¡Œä¸€ç³»åˆ—çš„handler,æœ€åè¿”å›ç»“æœ <img src="/2023/08/02/hou-duan/shu-ju-ku/%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><ol>
<li><img src="/2023/08/02/hou-duan/shu-ju-ku/SQL%E5%AF%B9%E6%AF%94%E8%81%9A%E5%90%88.png" class="lazyload" data-srcset="/2023/08/02/hou-duan/shu-ju-ku/SQL%E5%AF%B9%E6%AF%94%E8%81%9A%E5%90%88.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li>
</ol>
</li>
</ul>
<h2 id="Mybatisé¢è¯•"><a href="#Mybatisé¢è¯•" class="headerlink" title="Mybatisé¢è¯•"></a>Mybatisé¢è¯•</h2><ul>
<li>mybatisæ‰§è¡Œæµç¨‹ï¼š<ul>
<li>è¯»å–é…ç½®æ–‡ä»¶</li>
<li>æ„å»ºä¼šè¯å·¥å‚ï¼šä¼šè¯å·¥å‚å…¨å±€ä¸€ä¸ªï¼Œç”Ÿäº§sqlSession</li>
<li>åˆ›å»ºä¼šè¯ï¼šé¡¹ç›®ä¸æ•°æ®åº“çš„ä¼šè¯ï¼ŒåŒ…å«äº†æ‰§è¡Œsqlè¯­å¥çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ¯æ¬¡æ“ä½œä¸€ä¸ªä¼šè¯ï¼Œæœ‰å¤šä¸ª</li>
<li>Executoræ‰§è¡Œå™¨</li>
<li>è¿”å›ç»“æœ</li>
</ul>
</li>
<li>å»¶è¿ŸåŠ è½½ï¼šæ‡’åŠ è½½ï¼Œæ—¨åœ¨éœ€è¦ä½¿ç”¨æ•°æ®çš„æ—¶å€™æ‰è¿›è¡Œå®é™…çš„SQLæŸ¥è¯¢<ul>
<li>æ¯”å¦‚æˆ‘ä»¬åœ¨å…³è”æŸ¥è¯¢ä¸­ï¼Œæˆ‘ä»¬ä¼šè‡ªåŠ¨çš„æŠŠå…³è”çš„ç”¨æˆ·æ•°æ®ä¹ŸæŸ¥è¯¢å‡ºæ¥äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦ç”¨æˆ·çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œåªæœ‰åœ¨æˆ‘ä»¬ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯çš„æ—¶å€™æ‰ä¼šæŠŠç»“æœæŸ¥è¯¢å‡ºæ¥</li>
</ul>
</li>
<li>ç¼“å­˜ï¼šæœ¬åœ°ç¼“å­˜<ul>
<li>ä¸€çº§ç¼“å­˜ï¼šsqlsession ï¼Œå®ç°æ–¹å¼æ˜¯PerpertualCache,å½“Sessionè¿›è¡Œflushæˆ–è€…closeæ—¶ä¼šåˆ·æ–°ç¼“å­˜</li>
<li>äºŒçº§ç¼“å­˜ï¼šmapperçº§åˆ«çš„</li>
</ul>
</li>
</ul>

  </div>
  
  
    
    <div class='footer'>
       <!-- å‚è€ƒèµ„æ–™ã€ç›¸å…³èµ„æ–™ç­‰ -->
      
       <!-- ç›¸å…³æ–‡ç«  -->
      
      <!-- ç‰ˆæƒå£°æ˜ç»„ä»¶ -->
      
      <!-- æ‰“èµç»„ä»¶ -->
      
    </div>
  
  
    


  <div class='article-meta' id="bottom">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateModified" datetime="2024-07-19T16:43:15+08:00">
  <a class='notlink'>
    <i class="fa-solid fa-edit fa-fw" aria-hidden="true"></i>
    <p>æ›´æ–°äºï¼š2024å¹´7æœˆ19æ—¥</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/database/" rel="nofollow"><i class="fa-solid fa-hashtag fa-fw" aria-hidden="true"></i><p>database</p></a></div>
  <span hidden itemprop="keywords">database</span>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/&title=æ•°æ®åº“ - QingQiu'Blog&summary="
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qq.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qq.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/&title=æ•°æ®åº“ - QingQiu'Blog&summary="
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qzone.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qzone.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://service.weibo.com/share/share.php?url=https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/&title=æ•°æ®åº“ - QingQiu'Blog&summary="
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/weibo.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/weibo.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
    
      
    
  </div>
</div>



        
      
    </div>
    <!-- Custom Files bottomMeta begin -->
    
    <!-- Custom Files bottomMeta end -->
  </div>


  
  

  
    <div class="prev-next">
      
        <a class='prev' href='/2023/08/27/yu-yan-ji-gong-ju/java/'>
          <p class='title'><i class="fa-solid fa-chevron-left" aria-hidden="true"></i>javaå­¦ä¹ </p>
          <p class='content'>é¢è¯•å¸¸é—®ï¼šåŸºç¡€
æ¦‚å¿µè¾¨åˆ«ï¼š
JDK Java Development Kit æ˜¯Javaçš„å¼€å‘å·¥å…·åŒ…ï¼Œæ˜¯Javaçš„ä¸€ä¸ªSDK
JRE Java Runtime Environment Javaè¿...</p>
        </a>
      
      
        <a class='next' href='/2023/07/04/yu-yan-ji-gong-ju/tools/'>
          <p class='title'>Tools<i class="fa-solid fa-chevron-right" aria-hidden="true"></i></p>
          <p class='content'>è™šæ‹Ÿæœºè®¾ç½®é™æ€iphttps://wangyi.one/vmware%E4%B8%AD%E9%85%8D%E7%BD%AEubuntu%E9%9D%99%E6%80%81ip/Emacsåç»­å­¦ä¹ ...</p>
        </a>
      
    </div>
  
  <!-- Custom Files postEnd begin-->
  
  <!-- Custom Files postEnd end-->
</article>


  


  <article class="post white-box shadow floatable blur" id="comments">
    <span hidden>
      <meta itemprop="discussionUrl" content="/2023/08/02/hou-duan/shu-ju-ku/index.html#comments">
    </span>
    <p ct><i class='fa-solid fa-comments'></i> è¯„è®º</p>
    

    <div id="layoutHelper-comments"></div>

  </article>






</div>
<aside id='l_side' itemscope itemtype="http://schema.org/WPSideBar">
  

  
    
    
      
    
  


<div class="widget-sticky pjax">

  
  


  <section class="widget toc-wrapper desktop mobile " id="toc-div" >
    
  <header>
    
      <i class="fa-solid fa-list fa-fw" aria-hidden="true"></i><span class='name'>æœ¬æ–‡ç›®å½•</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97"><span class="toc-text">Mysqlé¢è¯•æŒ‡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8BMySQL%E7%9A%84%E7%B4%A2%E5%BC%95"><span class="toc-text">ä»‹ç»ä¸€ä¸‹MySQLçš„ç´¢å¼•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-%E6%A0%91%E7%9A%84%E7%89%B9%E5%BE%81%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88-MySQL-%E8%A6%81%E4%BD%BF%E7%94%A8-B-%E6%A0%91"><span class="toc-text">B+æ ‘çš„ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆ MySQL è¦ä½¿ç”¨ B+æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InooDB%E8%AF%A6%E8%A7%A3"><span class="toc-text">InooDBè¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%EF%BC%9A"><span class="toc-text">ç´¢å¼•ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E8%A1%A8%E9%97%AE%E9%A2%98"><span class="toc-text">å›è¡¨é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySql%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96"><span class="toc-text">MySqlæŸ¥è¯¢ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Buffer-Pool-%E7%BC%93%E5%86%B2%E6%B1%A0"><span class="toc-text">Buffer Pool ç¼“å†²æ± </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">åŸºæœ¬æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F"><span class="toc-text">æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#schema-%E5%92%8C-database-%E5%8C%BA%E5%88%AB"><span class="toc-text">schema å’Œ database åŒºåˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8C%83%E5%BC%8F"><span class="toc-text">èŒƒå¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACID"><span class="toc-text">ACID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#E-R%E6%A8%A1%E5%9E%8B"><span class="toc-text">E-Ræ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E8%81%94%E7%BB%93%EF%BC%8C%E5%8F%98%E9%87%8F%E4%B8%8D%E4%BC%9A%EF%BC%8C%E8%A1%A5%E4%B8%80%E8%A1%A5%E5%8E%BB"><span class="toc-text">è‡ªè”ç»“ï¼Œå˜é‡ä¸ä¼šï¼Œè¡¥ä¸€è¡¥å»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5"><span class="toc-text">SQLè¯­å¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DDL-Data-Definition-Language-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%EF%BC%89%E7%94%A8%E4%BA%8E%E6%93%8D%E4%BD%9C%E5%AF%B9%E8%B1%A1%E5%8F%8A%E5%AF%B9%E8%B1%A1%E6%9C%AC%E8%BA%AB%EF%BC%8C%E8%BF%99%E7%A7%8D%E5%AF%B9%E8%B1%A1%E5%8C%85%E6%8B%AC%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%A1%A8%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%8A%E8%A7%86%E5%9B%BE%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%A1%A8%E5%A4%B4"><span class="toc-text">DDL (Data Definition Language æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ç”¨äºæ“ä½œå¯¹è±¡åŠå¯¹è±¡æœ¬èº«ï¼Œè¿™ç§å¯¹è±¡åŒ…æ‹¬æ•°æ®åº“,è¡¨å¯¹è±¡ï¼ŒåŠè§†å›¾å¯¹è±¡ï¼Œè¡¨å¤´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DML-%EF%BC%88Data-Manipulation-Language-%E6%95%B0%E6%8D%AE%E6%93%8D%E6%8E%A7%E8%AF%AD%E8%A8%80-%E7%94%A8%E4%BA%8E%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1%E5%AF%B9%E8%B1%A1%E4%B8%AD%E5%8C%85%E5%90%AB%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">DML ï¼ˆData Manipulation Language æ•°æ®æ“æ§è¯­è¨€) ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡å¯¹è±¡ä¸­åŒ…å«çš„æ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5"><span class="toc-text">æ’å…¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%88%A0%E9%99%A4"><span class="toc-text">æ›´æ–°ä¸åˆ é™¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%EF%BC%9AUPDATE-%E6%B3%A8%E6%84%8F%E8%A6%81%E7%94%A8WHERE-%E5%90%A6%E5%88%99%E4%BC%9A%E5%87%BA%E4%BA%8B"><span class="toc-text">æ›´æ–°ï¼šUPDATE æ³¨æ„è¦ç”¨WHERE å¦åˆ™ä¼šå‡ºäº‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">åˆ é™¤æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL-Data-Query-Language-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80-%E7%94%A8%E4%BA%8E%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">DQL (Data Query Language æ•°æ®æŸ¥è¯¢è¯­è¨€ )ç”¨äºæŸ¥è¯¢æ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SELECT"><span class="toc-text">SELECT</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DCL-%EF%BC%88Data-Control-Language-%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5%EF%BC%89-%E7%94%A8%E4%BA%8E%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-text">DCL ï¼ˆData Control Language æ•°æ®æ§åˆ¶è¯­å¥ï¼‰ ç”¨äºæ“ä½œæ•°æ®åº“å¯¹è±¡çš„æƒé™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0-%E9%85%8D%E5%90%88SELECT-%E4%BD%BF%E7%94%A8"><span class="toc-text">å‡½æ•° é…åˆSELECT ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">å­—ç¬¦ä¸²å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-text">æ•°å€¼å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">æ—¥æœŸå‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-text">æµç¨‹å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F-%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A1%A8%E4%B8%AD%E5%AD%97%E6%AE%B5%E4%B8%8A%E7%9A%84%E8%A7%84%E5%88%99%EF%BC%8C%E7%94%A8%E4%BA%8E%E9%99%90%E5%88%B6%E5%AD%98%E5%82%A8%E5%9C%A8%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">çº¦æŸ ä½œç”¨åŸŸè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">å¤šè¡¨æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-text">å­æŸ¥è¯¢ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E7%BB%93%E8%A1%A8"><span class="toc-text">è”ç»“è¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E7%BB%93%E4%BD%BF%E7%94%A8%E6%9D%A1%E4%BB%B6"><span class="toc-text">è”ç»“ä½¿ç”¨æ¡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#join%E5%8C%BA%E5%88%AB"><span class="toc-text">joinåŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-text">èµ·åˆ«å</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UNION"><span class="toc-text"> UNION </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-text">æ’åº</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8"><span class="toc-text">å»ºè¡¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%91%BD%E5%90%8D"><span class="toc-text">é‡æ–°å‘½å</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-text">è§†å›¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%EF%BC%88%E4%B8%8D%E4%BC%9A%EF%BC%89"><span class="toc-text">å­˜å‚¨ï¼ˆä¸ä¼šï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%EF%BC%88%E4%B8%8D%E4%BC%9A%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%97%B6%E5%80%99%E5%86%8D%E7%9C%8B%EF%BC%89"><span class="toc-text">ç®¡ç†äº‹åŠ¡å¤„ç†ï¼ˆä¸ä¼šæ·±å…¥å­¦ä¹ çš„æ—¶å€™å†çœ‹ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B8%E6%A0%87"><span class="toc-text">æ¸¸æ ‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%EF%BC%88%E4%B8%8D%E4%BC%9A%E6%8D%8F%EF%BC%89"><span class="toc-text">çº¦æŸï¼ˆä¸ä¼šæï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE"><span class="toc-text">å¤–é”®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-text">ç´¢å¼•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case-%E6%9D%A5%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD-%E4%B8%8D%E8%A6%81%E5%BF%98%E8%AE%B0END"><span class="toc-text">case æ¥è¿›è¡Œå¤šæ¡ä»¶åˆ¤æ–­ ä¸è¦å¿˜è®°END</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-text">äº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-text">å¹¶å‘äº‹åŠ¡é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E6%93%8E"><span class="toc-text">å¼•æ“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%81"><span class="toc-text">é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">å¸¸ç”¨å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">æ­£åˆ™è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDBC"><span class="toc-text">JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">å˜é‡çš„ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis"><span class="toc-text">Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E5%B8%B8%E9%97%AE"><span class="toc-text">é¢è¯•å¸¸é—®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E5%9C%A8%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%9A%84%E6%97%B6%E5%80%99%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B9%9F%E4%BD%BF%E7%94%A8%E4%BA%86%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%9D%A5%E5%A4%84%E7%90%86%E7%BD%91%E7%BB%9CIO%E6%93%8D%E4%BD%9C"><span class="toc-text">Redisåœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ˜¯å•çº¿ç¨‹ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†å¤šçº¿ç¨‹çš„æ¥å¤„ç†ç½‘ç»œIOæ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis-%E8%84%9A%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">Redis è„šæœ¬å‘½ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dockercompose%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%BB%E4%BA%8C%E4%BB%8E%E4%B8%80%E5%93%A8%E5%85%B5%E7%9A%84redis%E9%9B%86%E7%BE%A4"><span class="toc-text">dockercomposeå¿«é€Ÿæ­å»ºä¸€ä¸»äºŒä»ä¸€å“¨å…µçš„redisé›†ç¾¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB"><span class="toc-text">MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-text">åŸºæœ¬æ¦‚å¿µï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E9%9D%A2%E8%AF%95"><span class="toc-text">Mybatisé¢è¯•</span></a></li></ol>
    </div>
  </section>

  

</div>


<!-- æ²¡æœ‰ pjax å ä½ä¼šæŠ¥é”™ ä¸‡æ¶çš„ pjax -->

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <div class="pjax">
    <!-- pjaxå ä½ -->
  </div>

  <!-- Custom Files side begin -->
  
  <!-- Custom Files side end -->
</aside>



          <!--æ­¤æ–‡ä»¶ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸æ–¹ä¾¿å–å€¼çš„å˜é‡-->
<!--æ€è·¯å¤§æ¦‚æ˜¯å°†å€¼è—åˆ°é‡åŠ è½½çš„åŒºåŸŸå†…-->

<pjax>
<script>
  window.pdata={}
  pdata.ispage=true;
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  pdata.commentConfig={};
  //  see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs
  
    // header
    var l_header=document.getElementById("l_header");
    
    l_header.classList.add("show");
    
    
      // cover
      var cover_wrapper=document.querySelector('#l_cover .cover-wrapper');
      var scroll_down=document.getElementById('scroll-down');
      cover_wrapper.id="none";
      cover_wrapper.style.display="none";
      scroll_down.style.display="none";
    
  
</script>
</pjax>
        </div>
        
  
  <footer class="footer clearfix"  itemscope itemtype="http://schema.org/WPFooter">
    <br><br>
    
      
        <div class="aplayer-container">
          


        </div>
      
    
      
        <br>
        <div class="social-wrapper" itemprop="about" itemscope itemtype="http://schema.org/Thing">
          
            
          
            
          
            
          
        </div>
      
    
      
        <div><p>åšå®¢å†…å®¹éµå¾ª <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0) åè®®</a></p>
</div>
      
    
      
        
          <div><p><span id="lc-sv">æœ¬ç«™æ€»è®¿é—®é‡ä¸º <span id='number'><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span> æ¬¡</span> <span id="lc-uv">è®¿å®¢æ•°ä¸º <span id='number'><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span> äºº</span></p>
</div>
        
      
    
      
        æœ¬ç«™ä½¿ç”¨
        <a href="https://github.com/volantis-x/hexo-theme-volantis/#5.8.0" target="_blank" class="codename">Volantis</a>
        ä½œä¸ºä¸»é¢˜
      
    
      
        <div class='copyright'>
        <p><a href="/">Copyright Â© since 2017 XXX</a></p>

        </div>
      
    
    <!-- Custom Files footer begin-->
    
    <!-- Custom Files footer end-->
  </footer>


        <a id="s-top" class="fa-solid fa-arrow-up fa-fw" href="/" onclick="return false;" title="top"></a>
      </div>
    </div>
    <div>
      <script>
  /******************** volantis.dom ********************************/
  // é¡µé¢é€‰æ‹©å™¨ å°†domå¯¹è±¡ç¼“å­˜èµ·æ¥ see: /source/js/app.js etc.
  volantis.dom.bodyAnchor = volantis.dom.$(document.getElementById("safearea")); // é¡µé¢ä¸»ä½“
  volantis.dom.topBtn = volantis.dom.$(document.getElementById('s-top')); // å‘ä¸Š
  volantis.dom.wrapper = volantis.dom.$(document.getElementById('wrapper')); // æ•´ä¸ªå¯¼èˆªæ 
  volantis.dom.coverAnchor = volantis.dom.$(document.querySelector('#l_cover .cover-wrapper')); // 1ä¸ª
  volantis.dom.switcher = volantis.dom.$(document.querySelector('#l_header .switcher .s-search')); // æœç´¢æŒ‰é’®   ç§»åŠ¨ç«¯ 1ä¸ª
  volantis.dom.header = volantis.dom.$(document.getElementById('l_header')); // ç§»åŠ¨ç«¯å¯¼èˆªæ 
  volantis.dom.search = volantis.dom.$(document.querySelector('#l_header .m_search')); // æœç´¢æ¡† æ¡Œé¢ç«¯ ç§»åŠ¨ç«¯ 1ä¸ª
  volantis.dom.mPhoneList = volantis.dom.$(document.querySelectorAll('#l_header .m-phone .list-v')); //  æ‰‹æœºç«¯ å­èœå• å¤šä¸ª
</script>

<script>
  
  volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fortawesome/fontawesome-free/css/all.min.css");
  
  
  
</script>

<!-- required -->


<!-- internal -->

<script src="/js/app.js"></script>






<!-- rightmenuè¦åœ¨darkmodeä¹‹å‰ï¼ˆToggleButtonï¼‰ darkmodeè¦åœ¨commentsä¹‹å‰ï¼ˆvolantis.dark.pushï¼‰-->



<script>
  function loadIssuesJS() {
    
      const sites_api = document.getElementById('sites-api');
      if (sites_api != undefined && typeof SitesJS === 'undefined') {
        volantis.js("/js/plugins/tags/sites.js")
      }
    
    
      const friends_api = document.getElementById('friends-api');
      if (friends_api != undefined && typeof FriendsJS === 'undefined') {
        volantis.js("/js/plugins/tags/friends.js")
      }
    
    
      const contributors_api = document.getElementById('contributors-api');
      if (contributors_api != undefined && typeof ContributorsJS === 'undefined') {
        volantis.js("/js/plugins/tags/contributors.js")
      }
    
  };
  loadIssuesJS()
  volantis.pjax.push(()=>{
    loadIssuesJS();
  })

</script>




  <script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/vanilla-lazyload/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  

<script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: ["#"],
	maxRPS: 6,
	hoverDelay: 0
  };
</script>
<script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/flying-pages/flying-pages.min.js"></script>









      <script>
  volantis.layoutHelper("comments",`<div id="giscus_container"></div>`)

  volantis.giscus = {};

  function check_giscus() {
    if (volantis.dark.mode === "dark") {
      volantis.giscus.Theme = 'dark';
    } else {
      volantis.giscus.Theme = 'light';
    }

    return document.getElementById("giscus_container");
  }

  function pjax_giscus() {
    const HEAD = check_giscus();
    if (!HEAD) return;
    let cfg = Object.assign({"theme":{"light":"light","dark":"dark"}},pdata.commentConfig)
    const script = document.createElement('script');
    script.setAttribute('src', 'https://giscus.app/client.js');
    Object.keys(cfg).forEach(k=>{
      if (k != "theme") {
        script.setAttribute('data-'+k, cfg[k]);
      }
    })
    script.setAttribute('data-theme', volantis.giscus.Theme);
    script.setAttribute('crossorigin', "anonymous");
    HEAD.appendChild(script);
  }

  function dark_giscus() {
    const HEAD = check_giscus();
    if (!HEAD) return;

    const message = {
      setConfig: {
        theme: volantis.giscus.Theme
      }
    };
    const giscusIframe = document.querySelector('iframe.giscus-frame');
    giscusIframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }
  pjax_giscus();
  volantis.pjax.push(pjax_giscus);
  volantis.dark.push(dark_giscus);
</script>

    





<!-- optional -->

  <script>
  const SearchServiceDataPathRoot = ("/" || "/").endsWith("/") ?
    "/" || "/" :
    "//" || "/";
  const SearchServiceDataPath = SearchServiceDataPathRoot + "content.json";

  function loadSearchScript() {
    // see: layout/_partial/scripts/_ctrl/cdnCtrl.ejs
    return volantis.js("/js/search/hexo.js");
  }

  function loadSearchService() {
    loadSearchScript();
    document.querySelectorAll(".input.u-search-input").forEach((e) => {
      e.removeEventListener("focus", loadSearchService, false);
    });

    document.querySelectorAll(".u-search-form").forEach((e) => {
      e.addEventListener("submit", (event) => {
        event.preventDefault();
      }, false);
    });
  }

  // æ‰“å¼€å¹¶æœç´¢ å­—ç¬¦ä¸² s
  function OpenSearch(s) {
    if (typeof SearchService === 'undefined')
      loadSearchScript().then(() => {
        SearchService.setQueryText(s);
        SearchService.search();
      });
    else {
      SearchService.setQueryText(s);
      SearchService.search();
    }
  }

  // è®¿é—®å«æœ‰ ?s=xxx  çš„é“¾æ¥æ—¶æ‰“å¼€æœç´¢ // ä¸æœç´¢å¼•æ“ structured data ç›¸å…³: /scripts/helpers/structured-data/lib/config.js
  if (window.location.search && /^\?s=/g.test(window.location.search)) {
    let queryText = decodeURI(window.location.search)
      .replace(/\ /g, "-")
      .replace(/^\?s=/g, "");
    OpenSearch(queryText);
  }

  // æœç´¢è¾“å…¥æ¡†è·å–ç„¦ç‚¹æ—¶åŠ è½½æœç´¢
  document.querySelectorAll(".input.u-search-input").forEach((e) => {
    e.addEventListener("focus", loadSearchService, false);
  });
</script>







  <script>



  function pjax_highlightjs_copyCode(){
    if (!(document.querySelector(".highlight .code pre") ||
      document.querySelector(".article pre code"))) {
      return;
    }
    VolantisApp.utilCopyCode(".highlight .code pre, .article pre code")
  }
  volantis.requestAnimationFrame(pjax_highlightjs_copyCode)
  volantis.pjax.push(pjax_highlightjs_copyCode)

</script>












  <script>
  function load_swiper() {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.css");
    volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.js").then(() => {
      pjax_swiper();
    });
  }

  load_swiper();

  function pjax_swiper() {
    volantis.swiper = new Swiper('.swiper-container', {
      slidesPerView: 'auto',
      spaceBetween: 8,
      centeredSlides: true,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  }

  volantis.pjax.push(() => {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    if (typeof volantis.swiper === "undefined") {
      load_swiper();
    } else {
      pjax_swiper();
    }
  });
</script>


<!-- pjax æ ‡ç­¾å¿…é¡»å­˜åœ¨äºæ‰€æœ‰é¡µé¢ å¦åˆ™ pjax error -->
<pjax>

</pjax>

<script>
  function listennSidebarTOC() {
    const navItems = document.querySelectorAll(".toc li");
    if (!navItems.length) return;
    let targets = []
    const sections = [...navItems].map((element) => {
      const link = element.querySelector(".toc-link");
      const target = document.getElementById(
        decodeURI(link.getAttribute("href")).replace("#", "")
      );
      targets.push(target)
      // è§£é™¤ a æ ‡ç­¾ href çš„ é”šç‚¹å®šä½, a æ ‡ç­¾ href çš„ é”šç‚¹å®šä½ ä¼šéšæœºå¯ç”¨?? äº§ç”Ÿé”™ä½???
      link.setAttribute("onclick","return false;")
      link.setAttribute("toc-action","toc-"+decodeURI(link.getAttribute("href")).replace("#", ""))
      link.setAttribute("href","/")
      // é…ç½® ç‚¹å‡» è§¦å‘æ–°çš„é”šç‚¹å®šä½
      link.addEventListener("click", (event) => {
        event.preventDefault();
        // è¿™é‡Œçš„ addTop æ˜¯é€šè¿‡é”™ä½ä½¿å¾— toc è‡ªåŠ¨å±•å¼€.
        volantis.scroll.to(target,{addTop: 5, observer:true})
        // Anchor id
        history.pushState(null, document.title, "#" + target.id);
      });
      return target;
    });

    function activateNavByIndex(target) {
      if (target.classList.contains("active-current")) return;

      document.querySelectorAll(".toc .active").forEach((element) => {
        element.classList.remove("active", "active-current");
      });
      target.classList.add("active", "active-current");
      let parent = target.parentNode;
      while (!parent.matches(".toc")) {
        if (parent.matches("li")) parent.classList.add("active");
        parent = parent.parentNode;
      }
    }

    // æ–¹æ¡ˆä¸€ï¼š
    volantis.activateNavIndex=0
    activateNavByIndex(navItems[volantis.activateNavIndex])
    volantis.scroll.push(()=>{
      if (targets[0].getBoundingClientRect().top >= 0) {
        volantis.activateNavIndex = 0
      }else if (targets[targets.length-1].getBoundingClientRect().top < 0) {
        volantis.activateNavIndex = targets.length-1
      } else {
        for (let index = 0; index < targets.length; index++) {
          const target0 = targets[index];
          const target1 = targets[(index+1)%targets.length];
          if (target0.getBoundingClientRect().top < 0&&target1.getBoundingClientRect().top >= 0) {
            volantis.activateNavIndex=index
            break;
          }
        }
      }
      activateNavByIndex(navItems[volantis.activateNavIndex])
    })

    // æ–¹æ¡ˆäºŒï¼š
    // IntersectionObserver ä¸æ˜¯å®Œç¾ç²¾ç¡®åˆ°åƒç´ çº§åˆ« ä¹Ÿä¸æ˜¯ä½å»¶æ—¶æ€§çš„
    // function findIndex(entries) {
    //   let index = 0;
    //   let entry = entries[index];
    //   if (entry.boundingClientRect.top > 0) {
    //     index = sections.indexOf(entry.target);
    //     return index === 0 ? 0 : index - 1;
    //   }
    //   for (; index < entries.length; index++) {
    //     if (entries[index].boundingClientRect.top <= 0) {
    //       entry = entries[index];
    //     } else {
    //       return sections.indexOf(entry.target);
    //     }
    //   }
    //   return sections.indexOf(entry.target);
    // }
    // function createIntersectionObserver(marginTop) {
    //   marginTop = Math.floor(marginTop + 10000);
    //   let intersectionObserver = new IntersectionObserver(
    //     (entries, observe) => {
    //       let scrollHeight = document.documentElement.scrollHeight;
    //       if (scrollHeight > marginTop) {
    //         observe.disconnect();
    //         createIntersectionObserver(scrollHeight);
    //         return;
    //       }
    //       let index = findIndex(entries);
    //       activateNavByIndex(navItems[index]);
    //     }, {
    //       rootMargin: marginTop + "px 0px -100% 0px",
    //       threshold: 0,
    //     }
    //   );
    //   sections.forEach((element) => {
    //     element && intersectionObserver.observe(element);
    //   });
    // }
    // createIntersectionObserver(document.documentElement.scrollHeight);
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
  document.addEventListener("pjax:success", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
</script>



<script>
  document.onreadystatechange = function () {
    if (document.readyState == 'complete') {
      // é¡µé¢åŠ è½½å®Œæ¯• æ ·å¼åŠ è½½å¤±è´¥ï¼Œæˆ–æ˜¯å½“å‰ç½‘é€Ÿæ…¢ï¼Œæˆ–æ˜¯å¼€å¯äº†çœæµæ¨¡å¼
      const { saveData, effectiveType } = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {}
      if (getComputedStyle(document.querySelector("#safearea"), null)["display"] == "none" || saveData || /2g/.test(effectiveType)) {
        document.querySelectorAll(".reveal").forEach(function (e) {
          e.style["opacity"] = "1";
        });
        document.querySelector("#safearea").style["display"] = "block";
      }
    }
  }
</script>


  <script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"QingQiu'Blog","url":"https://zuofw.github.io/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"QingQiu","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://zuofw.github.io/","sameAs":["https://github.com/volantis-x"],"description":"ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://zuofw.github.io/","name":"QingQiu'Blog"}},{"@type":"ListItem","position":2,"item":{"@id":"https://zuofw.github.io/categories/æ•°æ®åº“/","name":"æ•°æ®åº“"}},{"@type":"ListItem","position":3,"item":{"@id":"https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/","name":"æ•°æ®åº“"}}]},{"@context":"http://schema.org","@type":"WebSite","name":"QingQiu'Blog","url":"https://zuofw.github.io/","keywords":"åšå®¢ï¼Œå­¦ä¹ ï¼Œæˆé•¿","description":"ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª","author":{"@type":"Person","name":"QingQiu","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://zuofw.github.io/","description":"ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª"},"publisher":{"@type":"Organization","name":"QingQiu'Blog","url":"https://zuofw.github.io/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"potentialAction":{"@type":"SearchAction","name":"Site Search","target":{"@type":"EntryPoint","urlTemplate":"https://zuofw.github.io?s={search_term_string}"},"query-input":"required name=search_term_string"}},{"@context":"http://schema.org","@type":"BlogPosting","headline":"æ•°æ®åº“","description":"ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/"},"author":{"@type":"Person","name":"QingQiu","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://zuofw.github.io/"},"publisher":{"@type":"Organization","name":"QingQiu'Blog","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"https://zuofw.github.io/2023/08/02/hou-duan/shu-ju-ku/","wordCount":0,"datePublished":"2023-08-02T07:36:58.000Z","dateModified":"2024-07-19T08:43:15.512Z","articleSection":"æ•°æ®åº“","keywords":"database","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}]</script>



      
        <!--
  pjaxé‡è½½åŒºåŸŸæ¥å£ï¼š
  1.  <pjax></pjax> æ ‡ç­¾ pjax æ ‡ç­¾å¿…é¡»å­˜åœ¨äºæ‰€æœ‰é¡µé¢ å¦åˆ™ pjax error
  2.  script[data-pjax]
  3.  .pjax-reload script
  4.  .pjax
-->



<script src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/pjax/pjax.min.js"></script>


<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([onclick="return false;"]):not([onclick="return!1"]):not([target="_blank"]):not([target="view_window"]):not([href$=".xml"])',
        selectors: [
          "head title",
          "head meta[name=keywords]",
          "head meta[name=description]",
          
          "#l_main",
          "#pjax-header-nav-list",
          ".pjax",
          "pjax", // <pjax></pjax> æ ‡ç­¾
          "script[data-pjax], .pjax-reload script" // scriptæ ‡ç­¾æ·»åŠ data-pjax æˆ– scriptæ ‡ç­¾å¤–å±‚æ·»åŠ .pjax-reload çš„scriptä»£ç æ®µé‡è½½
        ],
        cacheBust: false,   // url åœ°å€è¿½åŠ æ—¶é—´æˆ³ï¼Œç”¨ä»¥é¿å…æµè§ˆå™¨ç¼“å­˜
        timeout: 5000,
        
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // ç›¸å½“äºç‚¹å‡»äº†æµè§ˆå™¨çš„åœæ­¢æŒ‰é’®

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      // ä½¿ç”¨ volantis.pjax.send æ–¹æ³•ä¼ å…¥pjax:sendå›è°ƒå‡½æ•° å‚è§layout/_partial/scripts/global.ejs
      volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      // ä½¿ç”¨ volantis.pjax.push æ–¹æ³•ä¼ å…¥é‡è½½å‡½æ•° å‚è§layout/_partial/scripts/global.ejs
      volantis.pjax.method.complete.start();
    });

    document.addEventListener('pjax:error', function (e) {
      if(volantis.debug) {
        console.error(e);
        console.log('pjax error: \n' + JSON.stringify(e));
      }else{
        // ä½¿ç”¨ volantis.pjax.error æ–¹æ³•ä¼ å…¥pjax:errorå›è°ƒå‡½æ•° å‚è§layout/_partial/scripts/global.ejs
        volantis.pjax.method.error.start();
        window.location.href = e.triggerElement.href;
      }
    });
</script>

      
    </div>
    <!-- import body_end begin-->
    <!-- import body_end end-->
    <!-- Custom Files bodyEnd begin-->
    
    <!-- Custom Files bodyEnd end-->
    <!-- front-matter body_end begin -->
    <!-- front-matter body_end end -->
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>
</html>
