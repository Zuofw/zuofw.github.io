<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zuofw.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
<meta property="og:type" content="website">
<meta property="og:title" content="QingQiu&#39;Blog">
<meta property="og:url" content="https://zuofw.github.io/page/2/index.html">
<meta property="og:site_name" content="QingQiu&#39;Blog">
<meta property="og:description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="QingQiu">
<meta property="article:tag" content="åšå®¢ï¼Œå­¦ä¹ ï¼Œæˆé•¿">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://zuofw.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>QingQiu'Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">QingQiu'Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ¸…ç§‹çš„åšå®¢</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-fa fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-fa fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-github">

    <a href="https://github.com/Zuofw" rel="noopener" target="_blank"><i class="fa fa-fw fa-fab fa-github"></i>Github</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/09/09/30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/09/09/30/" class="post-title-link" itemprop="url">ç¾å›¢æµ‹å¼€ä¸€é¢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-09-09 21:33:30" itemprop="dateCreated datePublished" datetime="2024-09-09T21:33:30+08:00">2024-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-09-29 15:36:39" itemprop="dateModified" datetime="2024-09-29T15:36:39+08:00">2024-09-29</time>
              </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.7k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç¾å›¢ä¸€è¿›å®«"><a href="#ç¾å›¢ä¸€è¿›å®«" class="headerlink" title="ç¾å›¢ä¸€è¿›å®«"></a>ç¾å›¢ä¸€è¿›å®«</h1><p>ğŸ¤¡</p>
<h2 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h2><ol>
<li>è‡ªæˆ‘ä»‹ç»</li>
<li>ä»‹ç»å®ä¹ é¡¹ç›®</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#ç¾å›¢ä¸€è¿›å®«#å¤šæ€æœ‰å“ªäº›|å¦‚ä½•ç†è§£å°è£…ç»§æ‰¿å’Œå¤šæ€(å¤šæ€è®°å¾—ä¸ç‰¢)]]</li>
<li>å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•å—ï¼Ÿ(çœ‹å…³é”®å­—ï¼Œå¯ä»¥ç»§æ‰¿publicå’Œprotectedæ–¹æ³•ï¼Œé»˜è®¤è®¿é—®æƒé™çš„è¯å¦‚æœåœ¨ä¸€ä¸ªåŒ…å†…å¯ä»¥ç»§æ‰¿ï¼Œprivateä¸å¯ç»§æ‰¿)</li>
<li>å¸¸è§çš„é›†åˆ(Listï¼ŒSetï¼ŒMapï¼ŒQueueï¼ŒStack)</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#ç¾å›¢ä¸€è¿›å®«#ArrayListå’ŒLinkedListçš„åŒºåˆ« |ArrayListå’ŒLinkedListçš„åŒºåˆ«]]</li>
<li>ä»€ä¹ˆåœºæ™¯ä¸‹LinkedListæ¯”ArrayListå¥½ç”¨</li>
<li>HashMapå¸¸è§å…«è‚¡ï¼š<ul>
<li>çº¿ç¨‹æ˜¯å¦å®‰å…¨</li>
<li>HashTable</li>
<li>ConcurrentHashMap</li>
<li>jdk1.7å’Œ1.8çš„åŒºåˆ«</li>
</ul>
</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#æŠ½è±¡ç±»ï¼Œæ¥å£ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„å¦‚ä½•é€‰|æŠ½è±¡ç±»ï¼Œæ¥å£ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„å¦‚ä½•é€‰æ‹©]]</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#@SpringBootApplicationåŒ…å«å“ªäº›|SpringBootå¸¸è§æ³¨è§£ï¼Œ@SpringBootApplicationåŒ…å«ä»€ä¹ˆ]]</li>
<li>å¸¸è§çš„å¼‚å¸¸<ul>
<li>IOå¼‚å¸¸</li>
<li>SQLå¼‚å¸¸</li>
<li>å †å†…å­˜æº¢å‡º</li>
<li>ç©ºæŒ‡é’ˆ</li>
<li>ç´¢å¼•è¶Šç•Œ</li>
</ul>
</li>
<li>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å †å†…å­˜æº¢å‡ºï¼š<ul>
<li>å†…å­˜æ³„æ¼ï¼šå­˜åœ¨æŸäº›æœªé‡Šæ”¾çš„å¯¹è±¡å¼•ç”¨</li>
<li>å¤§å¯¹è±¡åˆ†é…</li>
<li>æ•°æ®ç»“æ„è¿‡å¤§</li>
<li>æ— é™é€’å½’</li>
<li><strong>çº¿ç¨‹åˆ›å»ºè¿‡å¤šä¼šå¯¼è‡´å †å¤–å†…å­˜æº¢å‡º</strong></li>
</ul>
</li>
<li>å¸¸è§çš„ç©ºæŒ‡é’ˆå¼‚å¸¸çš„æƒ…å†µï¼š<ul>
<li>è®¿é—®æœªåˆå§‹åŒ–çš„å¯¹è±¡</li>
<li>è®¿é—®æ•°ç»„ä¸­çš„ç©ºå…ƒç´ </li>
<li>è®¿é—®é›†åˆä¸­çš„ç©ºå…ƒç´ ï¼šmap.put(key, null)</li>
<li>è‡ªåŠ¨æ‹†ç®± Integer num = null; int value = num;</li>
<li>å¤šçº¿ç¨‹ä¸‹ä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šåœ¨å¦ä¸€ä¸ªçº¿ç¨‹åˆå§‹åŒ–å¯¹è±¡ä¹‹å‰å°±è®¿é—®è¯¥å¯¹è±¡ã€‚</li>
</ul>
</li>
<li>å¦‚ä½•è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼š<ul>
<li>ä½¿ç”¨ä¹‹å‰å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºnull</li>
<li>ä½¿ç”¨Optionalç±»</li>
<li>try-catch</li>
<li>å¤šçº¿ç¨‹ä¸‹ä½¿ç”¨åŒæ­¥æœºåˆ¶æ¥ä¿è¯</li>
</ul>
</li>
<li>debugçš„æŠ€å·§ï¼Œè¿œç¨‹debugå¦‚ä½•ä¿è¯ä¸ä¼šè¢«å…¶ä»–è¯·æ±‚å¹²æ‰°</li>
<li>ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œæœ‰ä½•ä¼˜ç‚¹<ul>
<li>å¯¹è±¡åˆ›å»ºé€»è¾‘è¾ƒä¸ºå¤æ‚ï¼Œå¯ä»¥å°è£…åˆ›å»ºé€»è¾‘</li>
<li>éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ›å»ºä¸åŒçš„å¯¹è±¡æ—¶</li>
<li>è§£è€¦å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨</li>
<li>æé«˜å¯ç»´æŠ¤æ€§</li>
<li>ä¼˜ç‚¹ï¼šå°è£…å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæ”¯æŒæ‰©å±•æ€§</li>
</ul>
</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è®¾ç½®|çº¿ç¨‹æ± çš„å‚æ•°å¦‚ä½•è®¾ç½®]]</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#æ—è·¯ç¼“å­˜æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰é‡åˆ°æŸ¥è¯¢æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ|æ—è·¯ç¼“å­˜æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰é‡åˆ°æŸ¥è¯¢æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ]]</li>
<li>ä¸ºä»€ä¹ˆä½¿ç”¨Token + Redisä¿è¯å¹‚ç­‰æ€§ï¼Œæœ‰ä»€ä¹ˆä¼˜ç‚¹</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#AOPç›¸å…³| AOPç›¸å…³]]ï¼Œå¦‚ä½•åšçš„å…¨å±€å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—å¤„ç†</li>
<li>å®ä¹ é¡¹ç›®ä¸­ä¸ºä½•ä½¿ç”¨Kafka</li>
<li>[[ç¾å›¢æµ‹å¼€ä¸€é¢#æ•°æ®åº“ä¸‰å¤§èŒƒå¼|æ•°æ®åº“ä¸‰å¤§èŒƒå¼]]</li>
<li>ç´¢å¼•ç±»å‹</li>
<li>æ‰‹å†™sqlä¸‰ä¸ªå¤§é¢˜ï¼Œä¸éš¾<code>ALTER TABLE table_name ADD column_name data_type [constraint];</code></li>
<li>å‰ç«¯çš„ä¸€äº›åŸºç¡€çŸ¥è¯†æé—®(ä¸è®°å½•äº†)</li>
<li>æ‰‹æ’• <a target="_blank" rel="noopener" href="https://leetcode.cn/problems/wtcaE1/">æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a>(æ€è·¯å¯¹äº†ï¼Œæ¡ä»¶åˆ¤æ–­å†™çš„æœ‰ç‚¹é—®é¢˜ï¼Œç»™è¿‡äº†)</li>
<li>åé—®ç¯èŠ‚ï¼š<ul>
<li>æµ‹å¼€æ¯”ä¾‹-&gt;å¼€å‘å 60%</li>
<li>é¢è¯•è¡¨ç°ï¼šæœ‰ç‚¹ç´§å¼ ï¼Œå¹³å¸¸å¿ƒå¯¹å¾…å°±è¡Œï¼Œæ²¡æœ‰ç»™å‡ºå®é™…å›ç­”(å¤šåŠæ˜¯æ¯é¢è¯„äº†)</li>
<li>å¤šä¹…èƒ½æœ‰åç»­-&gt;ä¸€ä¸ªæ˜ŸæœŸä¹‹å†…</li>
</ul>
</li>
</ol>
<h2 id="ç­”å¾—ä¸å¥½ä»¥åŠåç»­ç­”æ¡ˆ"><a href="#ç­”å¾—ä¸å¥½ä»¥åŠåç»­ç­”æ¡ˆ" class="headerlink" title="ç­”å¾—ä¸å¥½ä»¥åŠåç»­ç­”æ¡ˆ"></a>ç­”å¾—ä¸å¥½ä»¥åŠåç»­ç­”æ¡ˆ</h2><h3 id="å¤šæ€æœ‰å“ªäº›"><a href="#å¤šæ€æœ‰å“ªäº›" class="headerlink" title="å¤šæ€æœ‰å“ªäº›"></a>å¤šæ€æœ‰å“ªäº›</h3><blockquote>
<p>å·²ç»ç­”å‡ºæ–¹æ³•é‡è½½å’Œæ–¹æ³•é‡å†™ï¼Œé¢è¯•å®˜é—®æ˜¯å¦æœ‰å…¶ä»–</p>
</blockquote>
<p>è¿˜æœ‰æ¥å£å®ç°å’ŒæŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•ï¼Œè¿è¡Œæ—¶å¤šæ€</p>
<ol>
<li>æ¥å£å®ç°ï¼šä¸€ä¸ªç±»å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å¯ä»¥æœ‰ä¸åŒçš„å®ç°ã€‚</li>
<li>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå¿…é¡»ç”±å­ç±»å»å®ç°å…¶æŠ½è±¡æ–¹æ³•</li>
<li>è¿è¡Œæ—¶å¤šæ€ï¼šé€šè¿‡çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡å—ï¼Œåœ¨è¿è¡Œæ—¶å†³å®šè°ƒç”¨å“ªä¸ªç±»çš„æ–¹æ³•</li>
</ol>
<h3 id="ArrayListå’ŒLinkedListçš„åŒºåˆ«"><a href="#ArrayListå’ŒLinkedListçš„åŒºåˆ«" class="headerlink" title="ArrayListå’ŒLinkedListçš„åŒºåˆ«"></a>ArrayListå’ŒLinkedListçš„åŒºåˆ«</h3><ol>
<li>æ•°æ®ç»“æ„ä¸åŒ<ul>
<li>åŠ¨æ€æ•°ç»„ï¼Œéšæœºè®¿é—®ï¼Œç´¢å¼•è®¿é—®</li>
<li>åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªå…ƒç´ éƒ½åŒ…å«å‰ä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨</li>
</ul>
</li>
<li>æ€§èƒ½ä¸Šï¼š<ul>
<li>é€Ÿåº¦å¿«å¤æ‚åº¦O(1)</li>
<li>é€Ÿåº¦æ…¢ï¼šO(n)</li>
</ul>
</li>
<li>æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼š<ul>
<li>ä¸­é—´æ’å…¥è¾ƒæ…¢</li>
<li>å¤æ‚åº¦O(1)</li>
</ul>
</li>
<li>å†…å­˜ä½¿ç”¨<ul>
<li>ç´§å‡‘ï¼Œæ‰©å®¹æ—¶éœ€è¦é‡æ–°åˆ†é…å’Œå¤åˆ¶æ•°ç»„</li>
<li>æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´æ¥ä¿å­˜å‰åå¼•ç”¨ï¼Œå†…å­˜å¼€é”€è¾ƒå¤§</li>
</ul>
</li>
</ol>
<ul>
<li><code>ArrayList</code>&nbsp;é€‚ç”¨äºé¢‘ç¹è¯»å–å’Œéšæœºè®¿é—®çš„åœºæ™¯ã€‚</li>
<li><code>LinkedList</code>&nbsp;é€‚ç”¨äºé¢‘ç¹æ’å…¥å’Œåˆ é™¤çš„åœºæ™¯ï¼Œå°¤å…¶æ˜¯åœ¨åˆ—è¡¨ä¸­é—´è¿›è¡Œæ“ä½œæ—¶ã€‚</li>
</ul>
<h3 id="æŠ½è±¡ç±»ï¼Œæ¥å£ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„å¦‚ä½•é€‰æ‹©"><a href="#æŠ½è±¡ç±»ï¼Œæ¥å£ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„å¦‚ä½•é€‰æ‹©" class="headerlink" title="æŠ½è±¡ç±»ï¼Œæ¥å£ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„å¦‚ä½•é€‰æ‹©"></a>æŠ½è±¡ç±»ï¼Œæ¥å£ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„å¦‚ä½•é€‰æ‹©</h3><h4 id="ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨æŠ½è±¡ç±»"><a href="#ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨æŠ½è±¡ç±»" class="headerlink" title="ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨æŠ½è±¡ç±»"></a>ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨æŠ½è±¡ç±»</h4><ol>
<li>å®šä¹‰é€šç”¨æ¥å£ï¼Œå…·ä½“å®ç°ç”±å­ç±»æä¾›</li>
<li>ä»£ç å¤ç”¨ï¼šä¸€äº›é€šç”¨çš„ä»£ç éœ€è¦åœ¨å­ç±»ä¹‹é—´è¿›è¡Œå¤ç”¨ï¼Œå¯ä»¥æ”¾åœ¨æŠ½è±¡ç±»ä¸­ï¼Œç”±å­ç±»ç»§æ‰¿å‡å°‘ä»£ç é‡å¤</li>
<li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šæŠ½è±¡ç±»é¡¶ä¸€ä¸ªä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼ŒåŒ…å«ä¸€äº›åˆ—çš„æ­¥éª¤ï¼Œå…·ä½“çš„å®ç°ç”±å­ç±»å®ç°ã€‚<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Game</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">endPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ¨¡æ¿æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">endPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Football</span> <span class="token keyword">extends</span> <span class="token class-name">Game</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Football Game Initialized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Football Game Started"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">endPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Football Game Ended"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Basketball</span> <span class="token keyword">extends</span> <span class="token class-name">Game</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Basketball Game Initialized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Basketball Game Started"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">void</span> <span class="token function">endPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Basketball Game Ended"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>æä¾›é»˜è®¤è¡Œä¸º</li>
<li>å¼ºåˆ¶å­ç±»å®ç°æŸäº›æ–¹æ³•</li>
</ol>
<h4 id="äºŒè€…åŒºåˆ«"><a href="#äºŒè€…åŒºåˆ«" class="headerlink" title="äºŒè€…åŒºåˆ«"></a>äºŒè€…åŒºåˆ«</h4><ul>
<li>æŠ½è±¡ç±»ç”¨æ¥æè¿°å…±åŒè¡Œä¸ºå’Œç‰¹æ€§ï¼Œå¯ä»¥æœ‰è‡ªå·±çš„æˆå‘˜å˜é‡å’Œå…·ä½“æ–¹æ³•ï¼Œæœ‰æ˜æ˜¾çš„ç»§æ‰¿å…³ç³»</li>
<li>æ¥å£ç”¨äºå®šä¹‰è¡Œä¸ºè§„èŒƒï¼Œå¯ä»¥å¤šå®ç°ï¼Œåªèƒ½æœ‰å¸¸é‡å’ŒæŠ½è±¡æ–¹æ³•(jdk1.8ä¹‹åå¯ä»¥æœ‰é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•)</li>
</ul>
<h4 id="å¦‚ä½•é€‰æ‹©äºŒè€…"><a href="#å¦‚ä½•é€‰æ‹©äºŒè€…" class="headerlink" title="å¦‚ä½•é€‰æ‹©äºŒè€…"></a>å¦‚ä½•é€‰æ‹©äºŒè€…</h4><ol>
<li>æ˜¯å¦éœ€è¦ç»§æ‰¿å¤šä¸ªçˆ¶ç±»çš„è¡Œä¸º-&gt;æ¥å£</li>
<li>æ˜¯å¦éœ€è¦å…±äº«ä»£ç -&gt;æŠ½è±¡ç±»</li>
<li>æ˜¯å¦éœ€è¦æ„é€ æ–¹æ³•-&gt;æŠ½è±¡ç±»</li>
<li>æ˜¯å¦éœ€è¦é»˜è®¤æ–¹æ³•-&gt;æ¥å£</li>
</ol>
<h3 id="SpringBootApplicationåŒ…å«å“ªäº›"><a href="#SpringBootApplicationåŒ…å«å“ªäº›" class="headerlink" title="@SpringBootApplicationåŒ…å«å“ªäº›"></a>@SpringBootApplicationåŒ…å«å“ªäº›</h3><ol>
<li><strong><code>@SpringBootConfiguration</code></strong> é…ç½®ç±»ï¼Œå…è®¸åœ¨ç±»ä¸­å®šä¹‰@Beanæ–¹æ³•ï¼Œä»¥ä¾¿åœ¨Springå®¹å™¨ä¸­æ³¨å†ŒBean</li>
<li><strong><code>@EnableAutoConfiguration</code></strong> æ ¹æ®é¡¹ç›®ä¸­çš„ä¾èµ–è‡ªåŠ¨é…ç½®Springåº”ç”¨ç¨‹åºï¼Œæ‰«æç±»è·¯å¾„ä¸­çš„ä¾èµ–ï¼Œæ ¹æ®è¿™äº›ä¾èµ–è‡ªåŠ¨é…ç½®Spring Bean</li>
<li><strong><code>@ComponentScan</code></strong> å¯ç”¨ç»„ä»¶æ‰«æ</li>
</ol>
<h3 id="debugçš„æŠ€å·§ï¼Œè¿œç¨‹debugå¦‚ä½•ä¿è¯ä¸ä¼šè¢«å…¶ä»–è¯·æ±‚å¹²æ‰°"><a href="#debugçš„æŠ€å·§ï¼Œè¿œç¨‹debugå¦‚ä½•ä¿è¯ä¸ä¼šè¢«å…¶ä»–è¯·æ±‚å¹²æ‰°" class="headerlink" title="debugçš„æŠ€å·§ï¼Œè¿œç¨‹debugå¦‚ä½•ä¿è¯ä¸ä¼šè¢«å…¶ä»–è¯·æ±‚å¹²æ‰°"></a>debugçš„æŠ€å·§ï¼Œè¿œç¨‹debugå¦‚ä½•ä¿è¯ä¸ä¼šè¢«å…¶ä»–è¯·æ±‚å¹²æ‰°</h3><p>è¿œç¨‹debugçš„åŸç†æ˜¯é€šè¿‡ç½‘ç»œå°†æœ¬åœ°è°ƒè¯•å™¨å’Œè¿œç¨‹JVMé“¾æ¥èµ·æ¥ï¼Œä»è€Œå…è®¸å¼€å‘è€…åœ¨æœ¬åœ°æµ‹è¯•è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»£ç ã€‚<br>é€šè¿‡çš„æ˜¯JDWP Java Debug Wire Protocolåè®®è¿›è¡Œé€šä¿¡<br>ç¬¬äºŒä¸ªé—®é¢˜å¯ä»¥æä¸€ä¸ªæµ‹è¯•ç¯å¢ƒï¼Œå°†ç”Ÿäº§ç¯å¢ƒä¸­çš„æ•°æ®å¤åˆ¶è¿‡æ¥è¿›è¡Œdebug</p>
<h3 id="çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è®¾ç½®"><a href="#çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è®¾ç½®" class="headerlink" title="çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è®¾ç½®"></a>çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è®¾ç½®</h3><p>#todo </p>
<ul>
<li><input disabled="" type="checkbox"> çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è®¾ç½®</li>
</ul>
<ol>
<li>CPUå¯†é›†å‹è®¾ç½®ä¸ºCPUæ ¸å¿ƒæ•°+1ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—ä¸ºä¸»ï¼Œæ•°æ®æ’åº</li>
<li>I/Oå¯†é›†å‹è®¾ç½®ä¸º<code>n*2</code>ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œè¯»å–ï¼Œæ–‡ä»¶è¯»å–ã€‚</li>
</ol>
<h3 id="æ—è·¯ç¼“å­˜æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰é‡åˆ°æŸ¥è¯¢æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ"><a href="#æ—è·¯ç¼“å­˜æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰é‡åˆ°æŸ¥è¯¢æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ" class="headerlink" title="æ—è·¯ç¼“å­˜æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰é‡åˆ°æŸ¥è¯¢æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ"></a>æ—è·¯ç¼“å­˜æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰é‡åˆ°æŸ¥è¯¢æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ</h3><h3 id="AOPç›¸å…³"><a href="#AOPç›¸å…³" class="headerlink" title="AOPç›¸å…³"></a>AOPç›¸å…³</h3><h4 id="AOPåŸºç¡€"><a href="#AOPåŸºç¡€" class="headerlink" title="AOPåŸºç¡€"></a>AOPåŸºç¡€</h4><h4 id="æœ‰å“ªäº›é€šçŸ¥ç±»å‹"><a href="#æœ‰å“ªäº›é€šçŸ¥ç±»å‹" class="headerlink" title="æœ‰å“ªäº›é€šçŸ¥ç±»å‹"></a>æœ‰å“ªäº›é€šçŸ¥ç±»å‹</h4><ol>
<li>å‰ç½®é€šçŸ¥ è·å–æ–¹æ³•ç­¾åå’Œå‚æ•°ï¼Œä¸èƒ½è·å–è¿”å›å€¼</li>
<li>åç½®é€šçŸ¥ æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œä¸èƒ½è·å¾—è¿”å›å€¼ï¼Œä½†å¯ä»¥è·å–å¼‚å¸¸ä¿¡æ¯</li>
<li>è¿”å›é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå¹¶è¿”å›ç»“æœåæ‰§è¡Œå—ï¼Œå¯ä»¥è·å¾—è¿”å›å€¼ï¼Œä½†æ˜¯è·å¾—ä¸äº†å¼‚å¸¸ä¿¡æ¯</li>
<li>å¼‚å¸¸é€šçŸ¥ï¼šå¼‚å¸¸åæ‰§è¡Œï¼Œè·å–å¼‚å¸¸ä¿¡æ¯ï¼Œä¸èƒ½è·å¾—è¿”å›å€¼</li>
<li>ç¯ç»•é€šçŸ¥ï¼šå¯ä»¥åœ¨æ–¹æ³•ä¹‹å‰å’Œå®šä¹‰é€»è¾‘ï¼Œå¯ä»¥è·å–æ–¹æ³•ç­¾åã€å‚æ•°ã€è¿”å›å€¼ã€å¼‚å¸¸ä¿¡æ¯ã€‚</li>
</ol>
<h4 id="é¢è¯•è®°å½•-ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†-x2F-é™æ€ä»£ç†-åŠ¨æ€ä»£ç†çš„åŸç†"><a href="#é¢è¯•è®°å½•-ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†-x2F-é™æ€ä»£ç†-åŠ¨æ€ä»£ç†çš„åŸç†" class="headerlink" title="[[é¢è¯•è®°å½•#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†/é™æ€ä»£ç†|åŠ¨æ€ä»£ç†çš„åŸç†]"></a>[[é¢è¯•è®°å½•#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†/é™æ€ä»£ç†|åŠ¨æ€ä»£ç†çš„åŸç†]</h4><h4 id="ä½¿ç”¨AOPè¿›è¡Œæ“ä½œæ—¥å¿—å¤„ç†"><a href="#ä½¿ç”¨AOPè¿›è¡Œæ“ä½œæ—¥å¿—å¤„ç†" class="headerlink" title="ä½¿ç”¨AOPè¿›è¡Œæ“ä½œæ—¥å¿—å¤„ç†"></a>ä½¿ç”¨AOPè¿›è¡Œæ“ä½œæ—¥å¿—å¤„ç†</h4><p>ä¸»è¦æ˜¯ä½¿ç”¨ç¯ç»•é€šçŸ¥</p>
<h4 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="å…¨å±€å¼‚å¸¸å¤„ç†"></a>å…¨å±€å¼‚å¸¸å¤„ç†</h4><p>@ControllerAdviceåº•å±‚åŸç†æ˜¯AOP</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">BusinessException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">businessExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">BusinessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">runtimeExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token class-name">ErrorCodeEnum</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">"æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯, è¯·åŠæ—¶å‘ŠçŸ¥å¼€å‘äººå‘˜"</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            <span class="token class-name">HttpMessageNotReadableException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            <span class="token class-name">ConstraintViolationException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
            <span class="token class-name">HandlerMethodValidationException</span><span class="token punctuation">.</span><span class="token keyword">class</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ArgumentValidExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token class-name">ErrorCodeEnum</span><span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">,</span>
                <span class="token string">"è¯·æ£€æŸ¥å‚æ•°æ˜¯å¦æ­£ç¡®"</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">MissingServletRequestParameterException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">MissingServletParameterExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token class-name">ErrorCodeEnum</span><span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">,</span>
                <span class="token string">"è¯·æ ¸å¯¹å‚æ•°ï¼Œä»¥å…é‡æ–°ç™»å½•"</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">NoResourceFoundException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">illegalStateExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">NoResourceFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResultUtils</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token class-name">ErrorCodeEnum</span><span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">,</span>
                <span class="token string">"è¯·æ±‚è·¯å¾„æˆ–èµ„æºä¸æ­£ç¡®ï¼"</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="æ•°æ®åº“ä¸‰å¤§èŒƒå¼"><a href="#æ•°æ®åº“ä¸‰å¤§èŒƒå¼" class="headerlink" title="æ•°æ®åº“ä¸‰å¤§èŒƒå¼"></a>æ•°æ®åº“ä¸‰å¤§èŒƒå¼</h3><ol>
<li>ç¬¬ä¸€èŒƒå¼ï¼šæ¯ä¸€åˆ—éƒ½æ˜¯åŸå­ï¼Œä¸å¯åˆ†å‰²</li>
<li>ç¬¬äºŒèŒƒå¼ï¼šè¦æ±‚æ¯ä¸ªéä¸»é”®åˆ—éƒ½å®Œå…¨ä¾èµ–äºä¸»é”®</li>
<li>ç¬¬ä¸‰èŒƒå¼è¦æ±‚åœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œéä¸»é”®åˆ—ç›´æ¥ä¾èµ–äºä¸»é”®è€Œä¸æ˜¯ä¼ é€’ä¾èµ–</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/09/03/19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/09/03/19/" class="post-title-link" itemprop="url">æ·±å…¥æµ…å‡ºKafka</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-09-03 14:58:19" itemprop="dateCreated datePublished" datetime="2024-09-03T14:58:19+08:00">2024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-09-08 17:43:22" itemprop="dateModified" datetime="2024-09-08T17:43:22+08:00">2024-09-08</time>
              </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.6k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><h2 id="å¸¸è§é—®é¢˜-Java-API-ä¸€ä¸ªç‹¬ç«‹çš„KafkaæœåŠ¡å™¨è¢«ç§°ä½œbroker-brokeræ˜¯é›†ç¾¤çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½æœ‰ä¸€ä¸ªbrokeråŒæ—¶å……å½“äº†é›†ç¾¤æ§åˆ¶å™¨çš„è§’è‰²-kafkaçš„ä¸»é¢˜è¢«åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œåˆ†åŒºå­˜å‚¨åœ¨ç£ç›˜ä¸­-kafkaçš„æ¶ˆæ¯ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œå³ä½¿åº”ç”¨ç¨‹åºä¸‹çº¿ï¼Œæ¶ˆæ¯ä»ç„¶ä¼šä¿å­˜åœ¨kafkaé‡Œï¼Œæ˜¯åŸºäºç£ç›˜çš„æ•°æ®å­˜å‚¨ã€‚-APIä½¿ç”¨ï¼š-producer-recordçš„å‚æ•°ï¼Œtopic-key-value-keyå¯ä»¥çœç•¥ï¼Œå½“çœç•¥æ—¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰keyçš„valueï¼Œkeyä¸€èˆ¬ç”¨äºæŠŠç›¸åŒkeyçš„æ•°æ®å†™å…¥åŒä¸€ä¸ªåˆ†åŒºé‡Œ-sendé»˜è®¤æ˜¯å‘é€å¹¶å¿˜è®°ï¼Œsendä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ä½¿ç”¨-getæ–¹æ³•å¾—åˆ°RecordMetadataå¯¹è±¡ï¼Œå¯ä»¥è·å–æ¶ˆæ¯çš„åç§»é‡-å¼‚æ­¥å‘é€-send-record-å›è°ƒå‡½æ•°ç±»-ï¼Œå›è°ƒå‡½æ•°éœ€è¦å®ç°Callbackç±»ï¼Œå¹¶ä¸”é‡å†™å…¶ä¸­çš„æ–¹æ³•-é…ç½®è®¾ç½®ï¼š-1-acks-x3D-0-ç”Ÿäº§è€…æ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œä½†æ¶ˆæ¯ä¸¢å¤±æ—¶ä¸ä¼šçŸ¥æ™“ï¼Œ-x3D-1ï¼Œåªè¦é›†ç¾¤çš„é¦–é¢†èŠ‚ç‚¹æ”¶åˆ°å³å¯ï¼Œ-x3D-alléœ€è¦æ‰€æœ‰å‚ä¸å¤åˆ¶çš„èŠ‚ç‚¹éƒ½å—åˆ°æ¶ˆæ¯æ‰ä¼šå—åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œä¸å»ºè®®-2-buffer-memoryè®¾ç½®producerå†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œ-3-compression-typeè®¾ç½®æ¶ˆæ¯çš„å‹ç¼©æ ¼å¼ï¼Œé»˜è®¤ä¸ä¼šå‹ç¼©-4-retriesé‡è¯•æ¬¡æ•°-5-batch-size-å½“å¤šä¸ªæ¶ˆæ¯è¢«å‘é€åˆ°åŒä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œproducerä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ï¼Œå½“ä½œä¸€ä¸ªæ‰¹æ¬¡ï¼Œè¿™ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªæ‰¹æ¬¡å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜-6-max-in-flight-requests-per-connection-ç”Ÿäº§è€…åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰å¯ä»¥å‘é€å¤šå°‘ä¸ªæ¶ˆæ¯ï¼Œè®¾ç½®ä¸º-1-æ—¶å¯ä»¥ä¿è¯æ¶ˆæ¯æ˜¯æŒ‰ç…§é¡ºåºå†™å…¥çš„ï¼Œé€‚åˆåœ¨é“¶è¡Œç­‰ä¸¥æ ¼è¦æ±‚é¡ºåºçš„æ—¶å€™ä½¿ç”¨-è‡ªå®šä¹‰åˆ†åŒºï¼š-consumer-API-1-consumerç±»çš„åˆ›å»ºæ–¹å¼å’Œproducerä¸€è‡´ï¼Œä½†æ˜¯æ¨èæŒ‡å®š-group-idæ¥æŒ‡å®šå±äºå“ªä¸ªç¾¤ç»„ï¼Œ-2-consumer-subscirbe-è®¢é˜…ç›¸å…³çš„topicï¼ŒåŒæ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼-consumer-subscribe-Arrays-asList-quot-topic1-quot-quot-topic2-quot-3-consumer-poll-xxx-å‚æ•°æ˜¯è½®è¯¢çš„é˜»å¡æ—¶é—´ï¼Œä¼šç­‰å¾…brokerè¿”å›æ•°æ®-4-è®°å¾—-close-5-å»ºè®®ä¸€ä¸ªçº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…-é…ç½®ï¼š-å¤§éƒ¨åˆ†å’Œproducerç±»ä¼¼-fetch-min-bytesæ¶ˆè´¹è€…ä»æœåŠ¡å™¨è·å–è®°å½•çš„æœ€å°å­—èŠ‚æ•°ï¼Œå½“æ•°æ®é‡å¤§äºç­‰äºè¿™ä¸ªå€¼æ‰ä¼šè¢«è¿”å›ç»™æ¶ˆè´¹è€…-æäº¤å’Œåç§»é‡ï¼šæ¶ˆè´¹è€…å¾€-consumer-offsetç‰¹æ®Šä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯åŒ…å«æ¯ä¸ªåˆ†åŒºçš„åç§»é‡ï¼Œå½“è§¦å‘å†å‡è¡¡æ—¶ï¼Œæ¶ˆè´¹è€…ä¼šè¯»å–æ¯ä¸ªåˆ†åŒºç»„åä¸€æ¬¡æäº¤çš„åç§»é‡ï¼Œç„¶åä»åç§»é‡æŒ‡å®šçš„åœ°æ–¹å¼€å§‹å¤„ç†-æäº¤æ–¹å¼ï¼š-1-è‡ªåŠ¨æäº¤-æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨æäº¤ä¸€æ¬¡-2-æäº¤å½“å‰åç§»é‡-è®¾ç½®auto-commit-offsetä¸ºfalse-ç„¶åä½¿ç”¨commitSync-æäº¤åç§»é‡ï¼Œä¼šæäº¤æœ€æ–°çš„ä¸€æ¬¡ç”±pollè·å¾—çš„åç§»é‡-3-å¼‚æ­¥æäº¤ï¼šcommitAsync-ï¼Œä¹Ÿå¯ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†-4-å¯ä»¥æäº¤ç‰¹å®šåç§»é‡ï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¬¡pollå¾—åˆ°çš„åç§»é‡-é€šè¿‡å®ç°-ConsumerRebalanceListeneræ¥å£æ¥å®šä¹‰åœ¨consumerå¤±å»å¯¹åˆ†åŒºçš„æ‰€æœ‰æƒæ—¶éœ€è¦å¤„ç†çš„äº‹ä»¶ï¼Œå¯åœ¨è¿™é‡Œä½¿ç”¨-seek-æ–¹æ³•åŠ ä¸Šè‡ªå®šä¹‰çš„å‡½æ•°æ¥å®ç°ä»æ•°æ®åº“ä¸­è·å¾—åç§»é‡-Kafkaæœ¬ä½“-ä¼˜åŠ¿é«˜ååï¼Œé«˜æ€§èƒ½ï¼ŒæŒä¹…åŒ–-å°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé€šè¿‡å°†æ•°æ®æŒä¹…åŒ–ç¡¬ç›˜ï¼Œä»¥åŠfollowerèŠ‚ç‚¹æ¥é˜²æ­¢æ•°æ®ä¸¢å¤±-ç¼ºç‚¹æ˜¯å¼‚æ­¥çš„ä¸é€‚åˆç”µå•†åœºæ™¯-æ¶æ„è®¾è®¡-Producer-Consumer-Topic-ä¸»é¢˜ï¼Œç”±ç”¨æˆ·å®šä¹‰å¹¶é…ç½®åœ¨KafkaæœåŠ¡å™¨ï¼Œå»ºç«‹Producerå’ŒConsumerä¹‹é—´çš„è®¢é˜…å…³ç³»ï¼Œèº«ç¼ è¿™å‘é€æ¶ˆæ¯åˆ°ç‰¹å®šçš„Topicä¸‹ï¼Œæ¶ˆè´¹è€…ä»è¿™ä¸ªTopicä¸‹æ¶ˆè´¹æ¶ˆæ¯ã€‚é€»è¾‘æ¦‚å¿µï¼Œç›¸å½“äºæ•°æ®åº“ä¸­çš„è¡¨-Partition-æ¶ˆæ¯åˆ†åŒºï¼Œä¸€ä¸ªTopicå¯ä»¥åˆ†ä¸ºå¤šä¸ªpartitionï¼Œpartitionæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼Œpartitionçš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæœ‰åºçš„id-offset-ç‰©ç†å®é™…æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªpartitionå¯¹åº”ä¸€ä¸ªlogï¼Œproducerç”Ÿäº§çš„æ•°æ®ä¼šä¸æ–­åœ°è¿½åŠ åˆ°è¯¥logæ–‡ä»¶æœ«ç«¯ï¼Œä¸”æ¯æ¡æ•°æ®éƒ½æœ‰è‡ªå·±çš„offsetã€‚ç³»å“¦å•Šé£ç€ç»„ä¸­çš„æ¯ä¸ªæ¶ˆè´¹è€…éƒ½ä¼šå®æ—¶è®°å½•è‡ªå·±æ¶ˆè´¹åˆ°å“ªä¸ªoffset-Broker-ä¸€å°Kafkaå°±æ˜¯ä¸€ä¸ªbrokerï¼Œä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ªbrokerç»„æˆï¼Œä¸€ä¸ªbrokerå¯ä»¥å®¹çº³å¤šä¸ªtopic-ConsumerGroup-æ¶ˆè´¹è€…ç»„ï¼Œç”¨äºå½’ç»„åŒç±»æ¶ˆè´¹è€…ã€‚æ¯ä¸ªconsumerå±äºä¸€ä¸ªç‰¹å®šçš„consumer-groupï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥å…±åŒæ¶ˆè´¹ä¸€ä¸ªTopicä¸‹çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…è·å–éƒ¨åˆ†æ¶ˆæ¯ã€‚-ä¸€ä¸ªPartitionå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨çš„æ˜¯Segment-Fileçš„å­˜å‚¨æ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚å°†å¤§æ–‡ä»¶æ‹†æˆå°æ–‡ä»¶ï¼Œåˆ†ä¸ºç´¢å¼•æœªè§å’Œæ•°æ®æ–‡ä»¶-åŸºæœ¬æµç¨‹-producerå…ˆä»zookeeperçš„broker-x2F-x2F-stateèŠ‚ç‚¹æ‰¾åˆ°è¯¥partitonçš„leader-producerå°†æ¶ˆæ¯å‘é€ç»™è¯¥leader-leaderå°†æ¶ˆæ¯å†™å‡ºæœ¬åœ°log-followerä»leader-pull-æ¶ˆæ¯-å†™å…¥æœ¬åœ°logï¼Œåå‘leaderå‘é€ACK-leaderæ”¶åˆ°æ‰€æœ‰ISRä¸­çš„replicationçš„ACKï¼Œå¢åŠ HT-high-watermark-ï¼Œæœ€åcommit-çš„offset-å¹¶å‘producerå‘é€ACK-ç”Ÿäº§è¿‡ç¨‹1-Produceråˆ›å»ºæ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªSenderçº¿ç¨‹å¹¶ä¸”è®¾ç½®å®ˆæŠ¤çº¿ç¨‹2-ç”Ÿäº§çš„æ¶ˆæ¯ç»è¿‡æ‹¦æˆªå™¨-gt-åºåˆ—åŒ–å™¨-gt-åˆ†åŒºå™¨ï¼Œå°†æ¶ˆæ¯å­˜åœ¨ç¼“å†²åŒº3-æ‰¹é‡å‘é€çš„æ¡ä»¶ï¼šç¼“å†²åŒºæ•°æ®å¤§å°è¾¾åˆ°batch-sizeæˆ–è€…linger-msè¾¾åˆ°ä¸Šé™4-å‘å¾€æŒ‡å®šåˆ†åŒºï¼Œæœ€ååˆ°è¾¾broker-acks-x3D-0ï¼Œæ¶ˆæ¯æ”¾åˆ°ç¼“å†²åŒºå°±è®¤ä¸ºå‘é€å®Œæˆ-acks-x3D-1æ¶ˆæ¯å†™åˆ°ä¸»åˆ†åŒºå³å¯å®Œæˆï¼Œå¦‚æœä¸»åˆ†åŒºæ”¶åˆ°æ¶ˆæ¯ä¹‹åå®•æœºï¼Œå‰¯æœ¬åˆ†åŒºæ¥ä¸åŠåŒæ­¥æ¶ˆæ¯ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤±-acks-x3D-all-ç­‰å¾…æ‰€æœ‰çš„ISRå‰¯æœ¬çš„ç¼ºäººè®°å½•5-å¦‚æœè®¾ç½®äº†é‡è¯•æ¬¡æ•°å¹¶ä¸”å¤§äº0ï¼Œå°±ä¼šè¿›è¡Œé‡è¯•6-æˆåŠŸï¼Œè¿”å›å…ƒæ•°æ®ç»™ç”Ÿäº§è€…ISRï¼ˆIn-Sync-Replicasï¼‰æ˜¯æŒ‡ä¸é¢†å¯¼è€…å‰¯æœ¬ä¿æŒåŒæ­¥çš„å‰¯æœ¬é›†åˆ-ç”Ÿäº§è€…Offsetæ¶ˆæ¯å†™å…¥çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªoffsetï¼Œå³æ¯ä¸ªåˆ†åŒºçš„æœ€æ–°æœ€å¤§çš„offsetã€‚-æ¶ˆè´¹è€…Offsetä¸åŒæ¶ˆè´¹ç»„ä¸­çš„æ¶ˆè´¹è€…å¯ä»¥é’ˆå¯¹ä¸€ä¸ªåˆ†åŒºå­˜å‚¨ä¸åŒçš„Offsetï¼Œäº’ä¸å½±å“ã€‚-LogSegmentæ—¥å¿—æ–‡ä»¶çš„ç»„æˆéƒ¨åˆ†-Leaderé€‰ä¸¾-Kafkaä¼šåœ¨Zookeeperä¸Šé’ˆå¯¹æ¯ä¸ªTopicç»´æŠ¤ä¸€ä¸ªæˆä¸ºISRçš„é›†åˆ-å½“é›†åˆä¸­å‰¯æœ¬éƒ½è·ŸLeaderåŒçš„å‰¯æœ¬åŒæ­¥ä¹‹åï¼Œkafkaæ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å·²æäº¤-åªæœ‰è¿™äº›è·ŸLeaderä¿æŒåŒæ­¥çš„Followeræ‰åº”è¯¥è¢«é€‰ä½œæ–°çš„Leader"><a href="#å¸¸è§é—®é¢˜-Java-API-ä¸€ä¸ªç‹¬ç«‹çš„KafkaæœåŠ¡å™¨è¢«ç§°ä½œbroker-brokeræ˜¯é›†ç¾¤çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½æœ‰ä¸€ä¸ªbrokeråŒæ—¶å……å½“äº†é›†ç¾¤æ§åˆ¶å™¨çš„è§’è‰²-kafkaçš„ä¸»é¢˜è¢«åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œåˆ†åŒºå­˜å‚¨åœ¨ç£ç›˜ä¸­-kafkaçš„æ¶ˆæ¯ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œå³ä½¿åº”ç”¨ç¨‹åºä¸‹çº¿ï¼Œæ¶ˆæ¯ä»ç„¶ä¼šä¿å­˜åœ¨kafkaé‡Œï¼Œæ˜¯åŸºäºç£ç›˜çš„æ•°æ®å­˜å‚¨ã€‚-APIä½¿ç”¨ï¼š-producer-recordçš„å‚æ•°ï¼Œtopic-key-value-keyå¯ä»¥çœç•¥ï¼Œå½“çœç•¥æ—¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰keyçš„valueï¼Œkeyä¸€èˆ¬ç”¨äºæŠŠç›¸åŒkeyçš„æ•°æ®å†™å…¥åŒä¸€ä¸ªåˆ†åŒºé‡Œ-sendé»˜è®¤æ˜¯å‘é€å¹¶å¿˜è®°ï¼Œsendä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ä½¿ç”¨-getæ–¹æ³•å¾—åˆ°RecordMetadataå¯¹è±¡ï¼Œå¯ä»¥è·å–æ¶ˆæ¯çš„åç§»é‡-å¼‚æ­¥å‘é€-send-record-å›è°ƒå‡½æ•°ç±»-ï¼Œå›è°ƒå‡½æ•°éœ€è¦å®ç°Callbackç±»ï¼Œå¹¶ä¸”é‡å†™å…¶ä¸­çš„æ–¹æ³•-é…ç½®è®¾ç½®ï¼š-1-acks-x3D-0-ç”Ÿäº§è€…æ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œä½†æ¶ˆæ¯ä¸¢å¤±æ—¶ä¸ä¼šçŸ¥æ™“ï¼Œ-x3D-1ï¼Œåªè¦é›†ç¾¤çš„é¦–é¢†èŠ‚ç‚¹æ”¶åˆ°å³å¯ï¼Œ-x3D-alléœ€è¦æ‰€æœ‰å‚ä¸å¤åˆ¶çš„èŠ‚ç‚¹éƒ½å—åˆ°æ¶ˆæ¯æ‰ä¼šå—åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œä¸å»ºè®®-2-buffer-memoryè®¾ç½®producerå†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œ-3-compression-typeè®¾ç½®æ¶ˆæ¯çš„å‹ç¼©æ ¼å¼ï¼Œé»˜è®¤ä¸ä¼šå‹ç¼©-4-retriesé‡è¯•æ¬¡æ•°-5-batch-size-å½“å¤šä¸ªæ¶ˆæ¯è¢«å‘é€åˆ°åŒä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œproducerä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ï¼Œå½“ä½œä¸€ä¸ªæ‰¹æ¬¡ï¼Œè¿™ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªæ‰¹æ¬¡å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜-6-max-in-flight-requests-per-connection-ç”Ÿäº§è€…åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰å¯ä»¥å‘é€å¤šå°‘ä¸ªæ¶ˆæ¯ï¼Œè®¾ç½®ä¸º-1-æ—¶å¯ä»¥ä¿è¯æ¶ˆæ¯æ˜¯æŒ‰ç…§é¡ºåºå†™å…¥çš„ï¼Œé€‚åˆåœ¨é“¶è¡Œç­‰ä¸¥æ ¼è¦æ±‚é¡ºåºçš„æ—¶å€™ä½¿ç”¨-è‡ªå®šä¹‰åˆ†åŒºï¼š-consumer-API-1-consumerç±»çš„åˆ›å»ºæ–¹å¼å’Œproducerä¸€è‡´ï¼Œä½†æ˜¯æ¨èæŒ‡å®š-group-idæ¥æŒ‡å®šå±äºå“ªä¸ªç¾¤ç»„ï¼Œ-2-consumer-subscirbe-è®¢é˜…ç›¸å…³çš„topicï¼ŒåŒæ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼-consumer-subscribe-Arrays-asList-quot-topic1-quot-quot-topic2-quot-3-consumer-poll-xxx-å‚æ•°æ˜¯è½®è¯¢çš„é˜»å¡æ—¶é—´ï¼Œä¼šç­‰å¾…brokerè¿”å›æ•°æ®-4-è®°å¾—-close-5-å»ºè®®ä¸€ä¸ªçº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…-é…ç½®ï¼š-å¤§éƒ¨åˆ†å’Œproducerç±»ä¼¼-fetch-min-bytesæ¶ˆè´¹è€…ä»æœåŠ¡å™¨è·å–è®°å½•çš„æœ€å°å­—èŠ‚æ•°ï¼Œå½“æ•°æ®é‡å¤§äºç­‰äºè¿™ä¸ªå€¼æ‰ä¼šè¢«è¿”å›ç»™æ¶ˆè´¹è€…-æäº¤å’Œåç§»é‡ï¼šæ¶ˆè´¹è€…å¾€-consumer-offsetç‰¹æ®Šä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯åŒ…å«æ¯ä¸ªåˆ†åŒºçš„åç§»é‡ï¼Œå½“è§¦å‘å†å‡è¡¡æ—¶ï¼Œæ¶ˆè´¹è€…ä¼šè¯»å–æ¯ä¸ªåˆ†åŒºç»„åä¸€æ¬¡æäº¤çš„åç§»é‡ï¼Œç„¶åä»åç§»é‡æŒ‡å®šçš„åœ°æ–¹å¼€å§‹å¤„ç†-æäº¤æ–¹å¼ï¼š-1-è‡ªåŠ¨æäº¤-æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨æäº¤ä¸€æ¬¡-2-æäº¤å½“å‰åç§»é‡-è®¾ç½®auto-commit-offsetä¸ºfalse-ç„¶åä½¿ç”¨commitSync-æäº¤åç§»é‡ï¼Œä¼šæäº¤æœ€æ–°çš„ä¸€æ¬¡ç”±pollè·å¾—çš„åç§»é‡-3-å¼‚æ­¥æäº¤ï¼šcommitAsync-ï¼Œä¹Ÿå¯ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†-4-å¯ä»¥æäº¤ç‰¹å®šåç§»é‡ï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¬¡pollå¾—åˆ°çš„åç§»é‡-é€šè¿‡å®ç°-ConsumerRebalanceListeneræ¥å£æ¥å®šä¹‰åœ¨consumerå¤±å»å¯¹åˆ†åŒºçš„æ‰€æœ‰æƒæ—¶éœ€è¦å¤„ç†çš„äº‹ä»¶ï¼Œå¯åœ¨è¿™é‡Œä½¿ç”¨-seek-æ–¹æ³•åŠ ä¸Šè‡ªå®šä¹‰çš„å‡½æ•°æ¥å®ç°ä»æ•°æ®åº“ä¸­è·å¾—åç§»é‡-Kafkaæœ¬ä½“-ä¼˜åŠ¿é«˜ååï¼Œé«˜æ€§èƒ½ï¼ŒæŒä¹…åŒ–-å°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé€šè¿‡å°†æ•°æ®æŒä¹…åŒ–ç¡¬ç›˜ï¼Œä»¥åŠfollowerèŠ‚ç‚¹æ¥é˜²æ­¢æ•°æ®ä¸¢å¤±-ç¼ºç‚¹æ˜¯å¼‚æ­¥çš„ä¸é€‚åˆç”µå•†åœºæ™¯-æ¶æ„è®¾è®¡-Producer-Consumer-Topic-ä¸»é¢˜ï¼Œç”±ç”¨æˆ·å®šä¹‰å¹¶é…ç½®åœ¨KafkaæœåŠ¡å™¨ï¼Œå»ºç«‹Producerå’ŒConsumerä¹‹é—´çš„è®¢é˜…å…³ç³»ï¼Œèº«ç¼ è¿™å‘é€æ¶ˆæ¯åˆ°ç‰¹å®šçš„Topicä¸‹ï¼Œæ¶ˆè´¹è€…ä»è¿™ä¸ªTopicä¸‹æ¶ˆè´¹æ¶ˆæ¯ã€‚é€»è¾‘æ¦‚å¿µï¼Œç›¸å½“äºæ•°æ®åº“ä¸­çš„è¡¨-Partition-æ¶ˆæ¯åˆ†åŒºï¼Œä¸€ä¸ªTopicå¯ä»¥åˆ†ä¸ºå¤šä¸ªpartitionï¼Œpartitionæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼Œpartitionçš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæœ‰åºçš„id-offset-ç‰©ç†å®é™…æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªpartitionå¯¹åº”ä¸€ä¸ªlogï¼Œproducerç”Ÿäº§çš„æ•°æ®ä¼šä¸æ–­åœ°è¿½åŠ åˆ°è¯¥logæ–‡ä»¶æœ«ç«¯ï¼Œä¸”æ¯æ¡æ•°æ®éƒ½æœ‰è‡ªå·±çš„offsetã€‚ç³»å“¦å•Šé£ç€ç»„ä¸­çš„æ¯ä¸ªæ¶ˆè´¹è€…éƒ½ä¼šå®æ—¶è®°å½•è‡ªå·±æ¶ˆè´¹åˆ°å“ªä¸ªoffset-Broker-ä¸€å°Kafkaå°±æ˜¯ä¸€ä¸ªbrokerï¼Œä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ªbrokerç»„æˆï¼Œä¸€ä¸ªbrokerå¯ä»¥å®¹çº³å¤šä¸ªtopic-ConsumerGroup-æ¶ˆè´¹è€…ç»„ï¼Œç”¨äºå½’ç»„åŒç±»æ¶ˆè´¹è€…ã€‚æ¯ä¸ªconsumerå±äºä¸€ä¸ªç‰¹å®šçš„consumer-groupï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥å…±åŒæ¶ˆè´¹ä¸€ä¸ªTopicä¸‹çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…è·å–éƒ¨åˆ†æ¶ˆæ¯ã€‚-ä¸€ä¸ªPartitionå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨çš„æ˜¯Segment-Fileçš„å­˜å‚¨æ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚å°†å¤§æ–‡ä»¶æ‹†æˆå°æ–‡ä»¶ï¼Œåˆ†ä¸ºç´¢å¼•æœªè§å’Œæ•°æ®æ–‡ä»¶-åŸºæœ¬æµç¨‹-producerå…ˆä»zookeeperçš„broker-x2F-x2F-stateèŠ‚ç‚¹æ‰¾åˆ°è¯¥partitonçš„leader-producerå°†æ¶ˆæ¯å‘é€ç»™è¯¥leader-leaderå°†æ¶ˆæ¯å†™å‡ºæœ¬åœ°log-followerä»leader-pull-æ¶ˆæ¯-å†™å…¥æœ¬åœ°logï¼Œåå‘leaderå‘é€ACK-leaderæ”¶åˆ°æ‰€æœ‰ISRä¸­çš„replicationçš„ACKï¼Œå¢åŠ HT-high-watermark-ï¼Œæœ€åcommit-çš„offset-å¹¶å‘producerå‘é€ACK-ç”Ÿäº§è¿‡ç¨‹1-Produceråˆ›å»ºæ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªSenderçº¿ç¨‹å¹¶ä¸”è®¾ç½®å®ˆæŠ¤çº¿ç¨‹2-ç”Ÿäº§çš„æ¶ˆæ¯ç»è¿‡æ‹¦æˆªå™¨-gt-åºåˆ—åŒ–å™¨-gt-åˆ†åŒºå™¨ï¼Œå°†æ¶ˆæ¯å­˜åœ¨ç¼“å†²åŒº3-æ‰¹é‡å‘é€çš„æ¡ä»¶ï¼šç¼“å†²åŒºæ•°æ®å¤§å°è¾¾åˆ°batch-sizeæˆ–è€…linger-msè¾¾åˆ°ä¸Šé™4-å‘å¾€æŒ‡å®šåˆ†åŒºï¼Œæœ€ååˆ°è¾¾broker-acks-x3D-0ï¼Œæ¶ˆæ¯æ”¾åˆ°ç¼“å†²åŒºå°±è®¤ä¸ºå‘é€å®Œæˆ-acks-x3D-1æ¶ˆæ¯å†™åˆ°ä¸»åˆ†åŒºå³å¯å®Œæˆï¼Œå¦‚æœä¸»åˆ†åŒºæ”¶åˆ°æ¶ˆæ¯ä¹‹åå®•æœºï¼Œå‰¯æœ¬åˆ†åŒºæ¥ä¸åŠåŒæ­¥æ¶ˆæ¯ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤±-acks-x3D-all-ç­‰å¾…æ‰€æœ‰çš„ISRå‰¯æœ¬çš„ç¼ºäººè®°å½•5-å¦‚æœè®¾ç½®äº†é‡è¯•æ¬¡æ•°å¹¶ä¸”å¤§äº0ï¼Œå°±ä¼šè¿›è¡Œé‡è¯•6-æˆåŠŸï¼Œè¿”å›å…ƒæ•°æ®ç»™ç”Ÿäº§è€…ISRï¼ˆIn-Sync-Replicasï¼‰æ˜¯æŒ‡ä¸é¢†å¯¼è€…å‰¯æœ¬ä¿æŒåŒæ­¥çš„å‰¯æœ¬é›†åˆ-ç”Ÿäº§è€…Offsetæ¶ˆæ¯å†™å…¥çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªoffsetï¼Œå³æ¯ä¸ªåˆ†åŒºçš„æœ€æ–°æœ€å¤§çš„offsetã€‚-æ¶ˆè´¹è€…Offsetä¸åŒæ¶ˆè´¹ç»„ä¸­çš„æ¶ˆè´¹è€…å¯ä»¥é’ˆå¯¹ä¸€ä¸ªåˆ†åŒºå­˜å‚¨ä¸åŒçš„Offsetï¼Œäº’ä¸å½±å“ã€‚-LogSegmentæ—¥å¿—æ–‡ä»¶çš„ç»„æˆéƒ¨åˆ†-Leaderé€‰ä¸¾-Kafkaä¼šåœ¨Zookeeperä¸Šé’ˆå¯¹æ¯ä¸ªTopicç»´æŠ¤ä¸€ä¸ªæˆä¸ºISRçš„é›†åˆ-å½“é›†åˆä¸­å‰¯æœ¬éƒ½è·ŸLeaderåŒçš„å‰¯æœ¬åŒæ­¥ä¹‹åï¼Œkafkaæ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å·²æäº¤-åªæœ‰è¿™äº›è·ŸLeaderä¿æŒåŒæ­¥çš„Followeræ‰åº”è¯¥è¢«é€‰ä½œæ–°çš„Leader" class="headerlink" title="å¸¸è§é—®é¢˜## Java API- ä¸€ä¸ªç‹¬ç«‹çš„KafkaæœåŠ¡å™¨è¢«ç§°ä½œbroker,brokeræ˜¯é›†ç¾¤çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½æœ‰ä¸€ä¸ªbrokeråŒæ—¶å……å½“äº†é›†ç¾¤æ§åˆ¶å™¨çš„è§’è‰²- kafkaçš„ä¸»é¢˜è¢«åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œåˆ†åŒºå­˜å‚¨åœ¨ç£ç›˜ä¸­- kafkaçš„æ¶ˆæ¯ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œå³ä½¿åº”ç”¨ç¨‹åºä¸‹çº¿ï¼Œæ¶ˆæ¯ä»ç„¶ä¼šä¿å­˜åœ¨kafkaé‡Œï¼Œæ˜¯åŸºäºç£ç›˜çš„æ•°æ®å­˜å‚¨ã€‚- APIä½¿ç”¨ï¼š    - producer        - recordçš„å‚æ•°ï¼Œtopic , key ,value keyå¯ä»¥çœç•¥ï¼Œå½“çœç•¥æ—¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰keyçš„valueï¼Œkeyä¸€èˆ¬ç”¨äºæŠŠç›¸åŒkeyçš„æ•°æ®å†™å…¥åŒä¸€ä¸ªåˆ†åŒºé‡Œ        - sendé»˜è®¤æ˜¯å‘é€å¹¶å¿˜è®°ï¼Œsendä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ä½¿ç”¨.getæ–¹æ³•å¾—åˆ°RecordMetadataå¯¹è±¡ï¼Œå¯ä»¥è·å–æ¶ˆæ¯çš„åç§»é‡        - å¼‚æ­¥å‘é€.send(record,å›è°ƒå‡½æ•°ç±»)ï¼Œå›è°ƒå‡½æ•°éœ€è¦å®ç°Callbackç±»ï¼Œå¹¶ä¸”é‡å†™å…¶ä¸­çš„æ–¹æ³•        - é…ç½®è®¾ç½®ï¼š            1. acks = 0 ç”Ÿäº§è€…æ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œä½†æ¶ˆæ¯ä¸¢å¤±æ—¶ä¸ä¼šçŸ¥æ™“ï¼Œ = 1ï¼Œåªè¦é›†ç¾¤çš„é¦–é¢†èŠ‚ç‚¹æ”¶åˆ°å³å¯ï¼Œ= alléœ€è¦æ‰€æœ‰å‚ä¸å¤åˆ¶çš„èŠ‚ç‚¹éƒ½å—åˆ°æ¶ˆæ¯æ‰ä¼šå—åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œä¸å»ºè®®            2. buffer.memoryè®¾ç½®producerå†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œ            3. compression.typeè®¾ç½®æ¶ˆæ¯çš„å‹ç¼©æ ¼å¼ï¼Œé»˜è®¤ä¸ä¼šå‹ç¼©            4. retriesé‡è¯•æ¬¡æ•°            5. batch.size å½“å¤šä¸ªæ¶ˆæ¯è¢«å‘é€åˆ°åŒä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œproducerä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ï¼Œå½“ä½œä¸€ä¸ªæ‰¹æ¬¡ï¼Œè¿™ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªæ‰¹æ¬¡å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜            6. max.in.flight.requests.per.connection ç”Ÿäº§è€…åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰å¯ä»¥å‘é€å¤šå°‘ä¸ªæ¶ˆæ¯ï¼Œè®¾ç½®ä¸º 1 æ—¶å¯ä»¥ä¿è¯æ¶ˆæ¯æ˜¯æŒ‰ç…§é¡ºåºå†™å…¥çš„ï¼Œé€‚åˆåœ¨é“¶è¡Œç­‰ä¸¥æ ¼è¦æ±‚é¡ºåºçš„æ—¶å€™ä½¿ç”¨        - è‡ªå®šä¹‰åˆ†åŒºï¼š        -  consumer:        - API:            1. consumerç±»çš„åˆ›å»ºæ–¹å¼å’Œproducerä¸€è‡´ï¼Œä½†æ˜¯æ¨èæŒ‡å®š group.idæ¥æŒ‡å®šå±äºå“ªä¸ªç¾¤ç»„ï¼Œ            2. consumer.subscirbe()è®¢é˜…ç›¸å…³çš„topicï¼ŒåŒæ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ consumer.subscribe(Arrays.asList(&quot;topic1&quot;, &quot;topic2&quot;));            3. consumer.poll(xxx) å‚æ•°æ˜¯è½®è¯¢çš„é˜»å¡æ—¶é—´ï¼Œä¼šç­‰å¾…brokerè¿”å›æ•°æ®            4. è®°å¾—.close()            5. å»ºè®®ä¸€ä¸ªçº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…        - é…ç½®ï¼š            - å¤§éƒ¨åˆ†å’Œproducerç±»ä¼¼            - fetch.min.bytesæ¶ˆè´¹è€…ä»æœåŠ¡å™¨è·å–è®°å½•çš„æœ€å°å­—èŠ‚æ•°ï¼Œå½“æ•°æ®é‡å¤§äºç­‰äºè¿™ä¸ªå€¼æ‰ä¼šè¢«è¿”å›ç»™æ¶ˆè´¹è€…        - æäº¤å’Œåç§»é‡ï¼šæ¶ˆè´¹è€…å¾€_consumer_offsetç‰¹æ®Šä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯åŒ…å«æ¯ä¸ªåˆ†åŒºçš„åç§»é‡ï¼Œå½“è§¦å‘å†å‡è¡¡æ—¶ï¼Œæ¶ˆè´¹è€…ä¼šè¯»å–æ¯ä¸ªåˆ†åŒºç»„åä¸€æ¬¡æäº¤çš„åç§»é‡ï¼Œç„¶åä»åç§»é‡æŒ‡å®šçš„åœ°æ–¹å¼€å§‹å¤„ç†            - æäº¤æ–¹å¼ï¼š                1. è‡ªåŠ¨æäº¤:æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨æäº¤ä¸€æ¬¡                2. æäº¤å½“å‰åç§»é‡:è®¾ç½®auto.commit.offsetä¸ºfalse.ç„¶åä½¿ç”¨commitSync()æäº¤åç§»é‡ï¼Œä¼šæäº¤æœ€æ–°çš„ä¸€æ¬¡ç”±pollè·å¾—çš„åç§»é‡                3. å¼‚æ­¥æäº¤ï¼šcommitAsync()ï¼Œä¹Ÿå¯ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†                4. å¯ä»¥æäº¤ç‰¹å®šåç§»é‡ï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¬¡pollå¾—åˆ°çš„åç§»é‡        - é€šè¿‡å®ç° ConsumerRebalanceListeneræ¥å£æ¥å®šä¹‰åœ¨consumerå¤±å»å¯¹åˆ†åŒºçš„æ‰€æœ‰æƒæ—¶éœ€è¦å¤„ç†çš„äº‹ä»¶ï¼Œå¯åœ¨è¿™é‡Œä½¿ç”¨.seek()æ–¹æ³•åŠ ä¸Šè‡ªå®šä¹‰çš„å‡½æ•°æ¥å®ç°ä»æ•°æ®åº“ä¸­è·å¾—åç§»é‡## Kafkaæœ¬ä½“### ä¼˜åŠ¿é«˜ååï¼Œé«˜æ€§èƒ½ï¼ŒæŒä¹…åŒ–(å°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé€šè¿‡å°†æ•°æ®æŒä¹…åŒ–ç¡¬ç›˜ï¼Œä»¥åŠfollowerèŠ‚ç‚¹æ¥é˜²æ­¢æ•°æ®ä¸¢å¤±)ç¼ºç‚¹æ˜¯å¼‚æ­¥çš„ä¸é€‚åˆç”µå•†åœºæ™¯### æ¶æ„è®¾è®¡- Producer- Consumer- Topic ä¸»é¢˜ï¼Œç”±ç”¨æˆ·å®šä¹‰å¹¶é…ç½®åœ¨KafkaæœåŠ¡å™¨ï¼Œå»ºç«‹Producerå’ŒConsumerä¹‹é—´çš„è®¢é˜…å…³ç³»ï¼Œèº«ç¼ è¿™å‘é€æ¶ˆæ¯åˆ°ç‰¹å®šçš„Topicä¸‹ï¼Œæ¶ˆè´¹è€…ä»è¿™ä¸ªTopicä¸‹æ¶ˆè´¹æ¶ˆæ¯ã€‚é€»è¾‘æ¦‚å¿µï¼Œç›¸å½“äºæ•°æ®åº“ä¸­çš„è¡¨- Partition æ¶ˆæ¯åˆ†åŒºï¼Œä¸€ä¸ªTopicå¯ä»¥åˆ†ä¸ºå¤šä¸ªpartitionï¼Œpartitionæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼Œpartitionçš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæœ‰åºçš„id(offset) ç‰©ç†å®é™…æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªpartitionå¯¹åº”ä¸€ä¸ªlogï¼Œproducerç”Ÿäº§çš„æ•°æ®ä¼šä¸æ–­åœ°è¿½åŠ åˆ°è¯¥logæ–‡ä»¶æœ«ç«¯ï¼Œä¸”æ¯æ¡æ•°æ®éƒ½æœ‰è‡ªå·±çš„offsetã€‚ç³»å“¦å•Šé£ç€ç»„ä¸­çš„æ¯ä¸ªæ¶ˆè´¹è€…éƒ½ä¼šå®æ—¶è®°å½•è‡ªå·±æ¶ˆè´¹åˆ°å“ªä¸ªoffset- Broker ä¸€å°Kafkaå°±æ˜¯ä¸€ä¸ªbrokerï¼Œä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ªbrokerç»„æˆï¼Œä¸€ä¸ªbrokerå¯ä»¥å®¹çº³å¤šä¸ªtopic- ConsumerGroup æ¶ˆè´¹è€…ç»„ï¼Œç”¨äºå½’ç»„åŒç±»æ¶ˆè´¹è€…ã€‚æ¯ä¸ªconsumerå±äºä¸€ä¸ªç‰¹å®šçš„consumer groupï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥å…±åŒæ¶ˆè´¹ä¸€ä¸ªTopicä¸‹çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…è·å–éƒ¨åˆ†æ¶ˆæ¯ã€‚- ä¸€ä¸ªPartitionå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨çš„æ˜¯Segment Fileçš„å­˜å‚¨æ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚å°†å¤§æ–‡ä»¶æ‹†æˆå°æ–‡ä»¶ï¼Œåˆ†ä¸ºç´¢å¼•æœªè§å’Œæ•°æ®æ–‡ä»¶### åŸºæœ¬æµç¨‹- producerå…ˆä»zookeeperçš„broker/**/stateèŠ‚ç‚¹æ‰¾åˆ°è¯¥partitonçš„leader- producerå°†æ¶ˆæ¯å‘é€ç»™è¯¥leader- leaderå°†æ¶ˆæ¯å†™å‡ºæœ¬åœ°log- followerä»leader pull æ¶ˆæ¯- å†™å…¥æœ¬åœ°logï¼Œåå‘leaderå‘é€ACK- leaderæ”¶åˆ°æ‰€æœ‰ISRä¸­çš„replicationçš„ACKï¼Œå¢åŠ HT(high watermark ï¼Œæœ€åcommit çš„offset)å¹¶å‘producerå‘é€ACK#### ç”Ÿäº§è¿‡ç¨‹1. Produceråˆ›å»ºæ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªSenderçº¿ç¨‹å¹¶ä¸”è®¾ç½®å®ˆæŠ¤çº¿ç¨‹2. ç”Ÿäº§çš„æ¶ˆæ¯ç»è¿‡æ‹¦æˆªå™¨->åºåˆ—åŒ–å™¨->åˆ†åŒºå™¨ï¼Œå°†æ¶ˆæ¯å­˜åœ¨ç¼“å†²åŒº3. æ‰¹é‡å‘é€çš„æ¡ä»¶ï¼šç¼“å†²åŒºæ•°æ®å¤§å°è¾¾åˆ°batch.sizeæˆ–è€…linger.msè¾¾åˆ°ä¸Šé™4. å‘å¾€æŒ‡å®šåˆ†åŒºï¼Œæœ€ååˆ°è¾¾broker    - acks = 0ï¼Œæ¶ˆæ¯æ”¾åˆ°ç¼“å†²åŒºå°±è®¤ä¸ºå‘é€å®Œæˆ    - acks = 1æ¶ˆæ¯å†™åˆ°ä¸»åˆ†åŒºå³å¯å®Œæˆï¼Œå¦‚æœä¸»åˆ†åŒºæ”¶åˆ°æ¶ˆæ¯ä¹‹åå®•æœºï¼Œå‰¯æœ¬åˆ†åŒºæ¥ä¸åŠåŒæ­¥æ¶ˆæ¯ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤±    - acks = all ç­‰å¾…æ‰€æœ‰çš„ISRå‰¯æœ¬çš„ç¼ºäººè®°å½•5. å¦‚æœè®¾ç½®äº†é‡è¯•æ¬¡æ•°å¹¶ä¸”å¤§äº0ï¼Œå°±ä¼šè¿›è¡Œé‡è¯•6. æˆåŠŸï¼Œè¿”å›å…ƒæ•°æ®ç»™ç”Ÿäº§è€…ISRï¼ˆIn-Sync Replicasï¼‰æ˜¯æŒ‡ä¸é¢†å¯¼è€…å‰¯æœ¬ä¿æŒåŒæ­¥çš„å‰¯æœ¬é›†åˆ#### ç”Ÿäº§è€…Offsetæ¶ˆæ¯å†™å…¥çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªoffsetï¼Œå³æ¯ä¸ªåˆ†åŒºçš„æœ€æ–°æœ€å¤§çš„offsetã€‚#### æ¶ˆè´¹è€…Offsetä¸åŒæ¶ˆè´¹ç»„ä¸­çš„æ¶ˆè´¹è€…å¯ä»¥é’ˆå¯¹ä¸€ä¸ªåˆ†åŒºå­˜å‚¨ä¸åŒçš„Offsetï¼Œäº’ä¸å½±å“ã€‚#### LogSegmentæ—¥å¿—æ–‡ä»¶çš„ç»„æˆéƒ¨åˆ†#### Leaderé€‰ä¸¾- Kafkaä¼šåœ¨Zookeeperä¸Šé’ˆå¯¹æ¯ä¸ªTopicç»´æŠ¤ä¸€ä¸ªæˆä¸ºISRçš„é›†åˆ- å½“é›†åˆä¸­å‰¯æœ¬éƒ½è·ŸLeaderåŒçš„å‰¯æœ¬åŒæ­¥ä¹‹åï¼Œkafkaæ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å·²æäº¤- åªæœ‰è¿™äº›è·ŸLeaderä¿æŒåŒæ­¥çš„Followeræ‰åº”è¯¥è¢«é€‰ä½œæ–°çš„Leader"></a><a target="_blank" rel="noopener" href="https://javaguide.cn/high-performance/message-queue/kafka-questions-01.html">å¸¸è§é—®é¢˜</a><br>## Java API<br>- ä¸€ä¸ªç‹¬ç«‹çš„KafkaæœåŠ¡å™¨è¢«ç§°ä½œbroker,brokeræ˜¯é›†ç¾¤çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½æœ‰ä¸€ä¸ªbrokeråŒæ—¶å……å½“äº†é›†ç¾¤æ§åˆ¶å™¨çš„è§’è‰²<br>- kafkaçš„ä¸»é¢˜è¢«åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œåˆ†åŒºå­˜å‚¨åœ¨ç£ç›˜ä¸­<br>- kafkaçš„æ¶ˆæ¯ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œå³ä½¿åº”ç”¨ç¨‹åºä¸‹çº¿ï¼Œæ¶ˆæ¯ä»ç„¶ä¼šä¿å­˜åœ¨kafkaé‡Œï¼Œæ˜¯åŸºäºç£ç›˜çš„æ•°æ®å­˜å‚¨ã€‚<br>- APIä½¿ç”¨ï¼š<br>    - producer<br>        - recordçš„å‚æ•°ï¼Œtopic , key ,value keyå¯ä»¥çœç•¥ï¼Œå½“çœç•¥æ—¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰keyçš„valueï¼Œkeyä¸€èˆ¬ç”¨äºæŠŠç›¸åŒkeyçš„æ•°æ®å†™å…¥åŒä¸€ä¸ªåˆ†åŒºé‡Œ<br>        - sendé»˜è®¤æ˜¯å‘é€å¹¶å¿˜è®°ï¼Œsendä¼šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ä½¿ç”¨.getæ–¹æ³•å¾—åˆ°RecordMetadataå¯¹è±¡ï¼Œå¯ä»¥è·å–æ¶ˆæ¯çš„åç§»é‡<br>        - å¼‚æ­¥å‘é€.send(record,å›è°ƒå‡½æ•°ç±»)ï¼Œå›è°ƒå‡½æ•°éœ€è¦å®ç°Callbackç±»ï¼Œå¹¶ä¸”é‡å†™å…¶ä¸­çš„æ–¹æ³•<br>        - é…ç½®è®¾ç½®ï¼š<br>            1. acks = 0 ç”Ÿäº§è€…æ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œä½†æ¶ˆæ¯ä¸¢å¤±æ—¶ä¸ä¼šçŸ¥æ™“ï¼Œ = 1ï¼Œåªè¦é›†ç¾¤çš„é¦–é¢†èŠ‚ç‚¹æ”¶åˆ°å³å¯ï¼Œ= alléœ€è¦æ‰€æœ‰å‚ä¸å¤åˆ¶çš„èŠ‚ç‚¹éƒ½å—åˆ°æ¶ˆæ¯æ‰ä¼šå—åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œä¸å»ºè®®<br>            2. buffer.memoryè®¾ç½®producerå†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œ<br>            3. compression.typeè®¾ç½®æ¶ˆæ¯çš„å‹ç¼©æ ¼å¼ï¼Œé»˜è®¤ä¸ä¼šå‹ç¼©<br>            4. retriesé‡è¯•æ¬¡æ•°<br>            5. batch.size å½“å¤šä¸ªæ¶ˆæ¯è¢«å‘é€åˆ°åŒä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œproducerä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ï¼Œå½“ä½œä¸€ä¸ªæ‰¹æ¬¡ï¼Œè¿™ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªæ‰¹æ¬¡å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜<br>            6. max.in.flight.requests.per.connection ç”Ÿäº§è€…åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰å¯ä»¥å‘é€å¤šå°‘ä¸ªæ¶ˆæ¯ï¼Œè®¾ç½®ä¸º 1 æ—¶å¯ä»¥ä¿è¯æ¶ˆæ¯æ˜¯æŒ‰ç…§é¡ºåºå†™å…¥çš„ï¼Œé€‚åˆåœ¨é“¶è¡Œç­‰ä¸¥æ ¼è¦æ±‚é¡ºåºçš„æ—¶å€™ä½¿ç”¨<br>        - è‡ªå®šä¹‰åˆ†åŒºï¼š<br>    <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoPartitionser</span> <span class="token keyword">implements</span> <span class="token class-name">Partitioner</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> myKey<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token class-name">String</span> topic<span class="token punctuation">,</span> <span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keyBytes<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> valueBytes<span class="token punctuation">,</span> <span class="token class-name">Cluster</span> cluster<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è·å–åˆ†åŒºåˆ—è¡¨</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PartitionInfo</span><span class="token punctuation">&gt;</span></span> partitionInfos <span class="token operator">=</span> cluster<span class="token punctuation">.</span><span class="token function">partitionsForTopic</span><span class="token punctuation">(</span>topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–åˆ†åŒºæ•°</span>
        <span class="token keyword">int</span> partitionNum <span class="token operator">=</span> partitionInfos<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>keyBytes <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null or not a string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å¦‚æœkeyä¸ºkeyï¼Œåˆ™åˆ†é…åˆ°æœ€åä¸€ä¸ªåˆ†åŒº</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> partitionNum<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//å…¶ä½™çš„æ¶ˆæ¯éƒ½åˆ†é…åˆ°æœ€åä¸€ä¸ªåˆ†åŒº</span>
        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span>partitionNum <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/*
     * @description:
     * @author bronya
     * @date: 2024/4/20 14:50
     * @param map
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        myKey <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>    -  consumer:<br>        - API:<br>            1. consumerç±»çš„åˆ›å»ºæ–¹å¼å’Œproducerä¸€è‡´ï¼Œä½†æ˜¯æ¨èæŒ‡å®š group.idæ¥æŒ‡å®šå±äºå“ªä¸ªç¾¤ç»„ï¼Œ<br>            2. consumer.subscirbe()è®¢é˜…ç›¸å…³çš„topicï¼ŒåŒæ—¶æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ <code>consumer.subscribe(Arrays.asList("topic1", "topic2"));</code><br>            3. consumer.poll(xxx) å‚æ•°æ˜¯è½®è¯¢çš„é˜»å¡æ—¶é—´ï¼Œä¼šç­‰å¾…brokerè¿”å›æ•°æ®<br>            4. è®°å¾—.close()<br>            5. å»ºè®®ä¸€ä¸ªçº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…<br>        - é…ç½®ï¼š<br>            - å¤§éƒ¨åˆ†å’Œproducerç±»ä¼¼<br>            - fetch.min.bytesæ¶ˆè´¹è€…ä»æœåŠ¡å™¨è·å–è®°å½•çš„æœ€å°å­—èŠ‚æ•°ï¼Œå½“æ•°æ®é‡å¤§äºç­‰äºè¿™ä¸ªå€¼æ‰ä¼šè¢«è¿”å›ç»™æ¶ˆè´¹è€…<br>        - æäº¤å’Œåç§»é‡ï¼šæ¶ˆè´¹è€…å¾€_consumer_offsetç‰¹æ®Šä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯åŒ…å«æ¯ä¸ªåˆ†åŒºçš„åç§»é‡ï¼Œå½“è§¦å‘å†å‡è¡¡æ—¶ï¼Œæ¶ˆè´¹è€…ä¼šè¯»å–æ¯ä¸ªåˆ†åŒºç»„åä¸€æ¬¡æäº¤çš„åç§»é‡ï¼Œç„¶åä»åç§»é‡æŒ‡å®šçš„åœ°æ–¹å¼€å§‹å¤„ç†<br>            - æäº¤æ–¹å¼ï¼š<br>                1. è‡ªåŠ¨æäº¤:æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨æäº¤ä¸€æ¬¡<br>                2. æäº¤å½“å‰åç§»é‡:è®¾ç½®auto.commit.offsetä¸ºfalse.ç„¶åä½¿ç”¨commitSync()æäº¤åç§»é‡ï¼Œä¼šæäº¤æœ€æ–°çš„ä¸€æ¬¡ç”±pollè·å¾—çš„åç§»é‡<br>                3. å¼‚æ­¥æäº¤ï¼šcommitAsync()ï¼Œä¹Ÿå¯ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†<br>                4. å¯ä»¥æäº¤ç‰¹å®šåç§»é‡ï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¬¡pollå¾—åˆ°çš„åç§»é‡<br>        - é€šè¿‡å®ç° ConsumerRebalanceListeneræ¥å£æ¥å®šä¹‰åœ¨consumerå¤±å»å¯¹åˆ†åŒºçš„æ‰€æœ‰æƒæ—¶éœ€è¦å¤„ç†çš„äº‹ä»¶ï¼Œå¯åœ¨è¿™é‡Œä½¿ç”¨.seek()æ–¹æ³•åŠ ä¸Šè‡ªå®šä¹‰çš„å‡½æ•°æ¥å®ç°ä»æ•°æ®åº“ä¸­è·å¾—åç§»é‡<br>## Kafkaæœ¬ä½“<br>### ä¼˜åŠ¿<br>é«˜ååï¼Œé«˜æ€§èƒ½ï¼ŒæŒä¹…åŒ–(å°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé€šè¿‡å°†æ•°æ®æŒä¹…åŒ–ç¡¬ç›˜ï¼Œä»¥åŠfollowerèŠ‚ç‚¹æ¥é˜²æ­¢æ•°æ®ä¸¢å¤±)<br>ç¼ºç‚¹æ˜¯å¼‚æ­¥çš„ä¸é€‚åˆç”µå•†åœºæ™¯<br>### æ¶æ„è®¾è®¡<br>- Producer<br>- Consumer<br>- Topic ä¸»é¢˜ï¼Œç”±ç”¨æˆ·å®šä¹‰å¹¶é…ç½®åœ¨KafkaæœåŠ¡å™¨ï¼Œå»ºç«‹Producerå’ŒConsumerä¹‹é—´çš„è®¢é˜…å…³ç³»ï¼Œèº«ç¼ è¿™å‘é€æ¶ˆæ¯åˆ°ç‰¹å®šçš„Topicä¸‹ï¼Œæ¶ˆè´¹è€…ä»è¿™ä¸ªTopicä¸‹æ¶ˆè´¹æ¶ˆæ¯ã€‚é€»è¾‘æ¦‚å¿µï¼Œç›¸å½“äºæ•°æ®åº“ä¸­çš„è¡¨<br>- Partition æ¶ˆæ¯åˆ†åŒºï¼Œä¸€ä¸ªTopicå¯ä»¥åˆ†ä¸ºå¤šä¸ªpartitionï¼Œpartitionæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼Œpartitionçš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæœ‰åºçš„id(offset) ç‰©ç†å®é™…æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªpartitionå¯¹åº”ä¸€ä¸ªlogï¼Œproducerç”Ÿäº§çš„æ•°æ®ä¼šä¸æ–­åœ°è¿½åŠ åˆ°è¯¥logæ–‡ä»¶æœ«ç«¯ï¼Œä¸”æ¯æ¡æ•°æ®éƒ½æœ‰è‡ªå·±çš„offsetã€‚ç³»å“¦å•Šé£ç€ç»„ä¸­çš„æ¯ä¸ªæ¶ˆè´¹è€…éƒ½ä¼šå®æ—¶è®°å½•è‡ªå·±æ¶ˆè´¹åˆ°å“ªä¸ªoffset<br>- Broker ä¸€å°Kafkaå°±æ˜¯ä¸€ä¸ªbrokerï¼Œä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ªbrokerç»„æˆï¼Œä¸€ä¸ªbrokerå¯ä»¥å®¹çº³å¤šä¸ªtopic<br>- ConsumerGroup æ¶ˆè´¹è€…ç»„ï¼Œç”¨äºå½’ç»„åŒç±»æ¶ˆè´¹è€…ã€‚æ¯ä¸ªconsumerå±äºä¸€ä¸ªç‰¹å®šçš„consumer groupï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥å…±åŒæ¶ˆè´¹ä¸€ä¸ªTopicä¸‹çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…è·å–éƒ¨åˆ†æ¶ˆæ¯ã€‚<br>- ä¸€ä¸ªPartitionå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨çš„æ˜¯Segment Fileçš„å­˜å‚¨æ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚å°†å¤§æ–‡ä»¶æ‹†æˆå°æ–‡ä»¶ï¼Œåˆ†ä¸ºç´¢å¼•æœªè§å’Œæ•°æ®æ–‡ä»¶<br>### åŸºæœ¬æµç¨‹<br>- producerå…ˆä»zookeeperçš„broker/**/stateèŠ‚ç‚¹æ‰¾åˆ°è¯¥partitonçš„leader<br>- producerå°†æ¶ˆæ¯å‘é€ç»™è¯¥leader<br>- leaderå°†æ¶ˆæ¯å†™å‡ºæœ¬åœ°log<br>- followerä»leader pull æ¶ˆæ¯<br>- å†™å…¥æœ¬åœ°logï¼Œåå‘leaderå‘é€ACK<br>- leaderæ”¶åˆ°æ‰€æœ‰ISRä¸­çš„replicationçš„ACKï¼Œå¢åŠ HT(high watermark ï¼Œæœ€åcommit çš„offset)å¹¶å‘producerå‘é€ACK<br>#### ç”Ÿäº§è¿‡ç¨‹<br>1. Produceråˆ›å»ºæ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªSenderçº¿ç¨‹å¹¶ä¸”è®¾ç½®å®ˆæŠ¤çº¿ç¨‹<br>2. ç”Ÿäº§çš„æ¶ˆæ¯ç»è¿‡æ‹¦æˆªå™¨-&gt;åºåˆ—åŒ–å™¨-&gt;åˆ†åŒºå™¨ï¼Œå°†æ¶ˆæ¯å­˜åœ¨ç¼“å†²åŒº<br>3. æ‰¹é‡å‘é€çš„æ¡ä»¶ï¼šç¼“å†²åŒºæ•°æ®å¤§å°è¾¾åˆ°batch.sizeæˆ–è€…linger.msè¾¾åˆ°ä¸Šé™<br>4. å‘å¾€æŒ‡å®šåˆ†åŒºï¼Œæœ€ååˆ°è¾¾broker<br>    - acks = 0ï¼Œæ¶ˆæ¯æ”¾åˆ°ç¼“å†²åŒºå°±è®¤ä¸ºå‘é€å®Œæˆ<br>    - acks = 1æ¶ˆæ¯å†™åˆ°ä¸»åˆ†åŒºå³å¯å®Œæˆï¼Œå¦‚æœä¸»åˆ†åŒºæ”¶åˆ°æ¶ˆæ¯ä¹‹åå®•æœºï¼Œå‰¯æœ¬åˆ†åŒºæ¥ä¸åŠåŒæ­¥æ¶ˆæ¯ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤±<br>    - acks = all ç­‰å¾…æ‰€æœ‰çš„ISRå‰¯æœ¬çš„ç¼ºäººè®°å½•<br>5. å¦‚æœè®¾ç½®äº†é‡è¯•æ¬¡æ•°å¹¶ä¸”å¤§äº0ï¼Œå°±ä¼šè¿›è¡Œé‡è¯•<br>6. æˆåŠŸï¼Œè¿”å›å…ƒæ•°æ®ç»™ç”Ÿäº§è€…<br>ISRï¼ˆIn-Sync Replicasï¼‰æ˜¯æŒ‡ä¸é¢†å¯¼è€…å‰¯æœ¬ä¿æŒåŒæ­¥çš„å‰¯æœ¬é›†åˆ<br>#### ç”Ÿäº§è€…Offset<br>æ¶ˆæ¯å†™å…¥çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªoffsetï¼Œå³æ¯ä¸ªåˆ†åŒºçš„æœ€æ–°æœ€å¤§çš„offsetã€‚<br>#### æ¶ˆè´¹è€…Offset<br>ä¸åŒæ¶ˆè´¹ç»„ä¸­çš„æ¶ˆè´¹è€…å¯ä»¥é’ˆå¯¹ä¸€ä¸ªåˆ†åŒºå­˜å‚¨ä¸åŒçš„Offsetï¼Œäº’ä¸å½±å“ã€‚<br>#### LogSegment<br>æ—¥å¿—æ–‡ä»¶çš„ç»„æˆéƒ¨åˆ†<br>#### Leaderé€‰ä¸¾<br>- Kafkaä¼šåœ¨Zookeeperä¸Šé’ˆå¯¹æ¯ä¸ªTopicç»´æŠ¤ä¸€ä¸ªæˆä¸ºISRçš„é›†åˆ<br>- å½“é›†åˆä¸­å‰¯æœ¬éƒ½è·ŸLeaderåŒçš„å‰¯æœ¬åŒæ­¥ä¹‹åï¼Œkafkaæ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å·²æäº¤<br>- åªæœ‰è¿™äº›è·ŸLeaderä¿æŒåŒæ­¥çš„Followeræ‰åº”è¯¥è¢«é€‰ä½œæ–°çš„Leader</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/08/01/12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/01/12/" class="post-title-link" itemprop="url">è„šæœ¬è¯­è¨€å­¦ä¹ </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-08-01 14:30:12 / ä¿®æ”¹æ—¶é—´ï¼š14:32:03" itemprop="dateCreated datePublished" datetime="2024-08-01T14:30:12+08:00">2024-08-01</time>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>9</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h1><p>åŸºæœ¬è¯­æ³•</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/07/22/14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/22/14/" class="post-title-link" itemprop="url">gitå¿«é€Ÿä½¿ç”¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-07-22 10:27:14 / ä¿®æ”¹æ—¶é—´ï¼š17:17:57" itemprop="dateCreated datePublished" datetime="2024-07-22T10:27:14+08:00">2024-07-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index"><span itemprop="name">tools</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.1k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>æœ¬æ–‡ä¸æ˜¯gitå…¥é—¨ï¼Œä½†åç»­ä¼šè¡¥ä¸€äº›å…¥é—¨çŸ¥è¯†ï¼Œä¸»è¦æ˜¯å†™ç»™å·¥ä½œå®¤çš„å­¦å¼Ÿå­¦å¦¹å¿«é€Ÿæ’éšœä½¿ç”¨ã€‚<del>ä¸»è¦æ˜¯è¢«æŸäº›åŒå­¦æ•´æ— è¯­äº†æ‰æƒ³ç€è®°å½•ä¸€ä¸‹</del><br>è§‚çœ‹å‰æï¼šä¼šä¸Šgithub</p>
<h1 id="gitåæ‚”è¯"><a href="#gitåæ‚”è¯" class="headerlink" title="gitåæ‚”è¯"></a>gitåæ‚”è¯</h1><blockquote>
<p>ä¸–ä¸Šæ²¡æœ‰åæ‚”è¯</p>
</blockquote>
<p>ä½†æ˜¯gitæœ‰(ï¿£ï¸¶ï¿£*))<br>è¿˜åœ¨æ‹…å¿ƒä¸Šç­æ—¶è„‘å­ä¸€çƒ­å†™ä¸‹è‡­éª‚è€æ¿çš„è¯å¯¼è‡´ç»©æ•ˆå¥–æ²¡æœ‰å—ï¼Œè¿˜åœ¨æ‹…å¿ƒæäº¤è®°å½•å†™çš„ä¸‘å—ï¼Œè¿˜åœ¨æ‹…å¿ƒè¿œç¨‹pushçš„æ—¶å€™ä¸ä¼šæå—ï¼Œè¿™ç¯‡æ–‡ç« ç”¨æ¥è®°å½•å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p>å…ˆä»‹ç»ä¸€äº›æ¦‚å¿µï¼š</p>
<ol>
<li>å·¥ä½œåŒºï¼šå·¥ä½œåŒºå°±æ˜¯æˆ‘ä»¬ä¿®æ”¹çš„æ–‡ä»¶ä½†æ˜¯è¿˜æ²¡æœ‰è¿›è¡Œgit add</li>
<li>æš‚å­˜åŒºï¼šæˆ‘ä»¬ä½¿ç”¨git add ä¹‹åä½†æ˜¯è¿˜ä¹ˆæœ‰è¿›è¡Œgit commit</li>
<li>å·²æäº¤ï¼šè¿›è¡Œgit commit ä¹‹å</li>
<li>å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼šgit pushä¹‹å</li>
<li>HEADï¼šGitä¸­çš„ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡é’ˆï¼ŒæŒ‡å‘äº†å½“å‰<strong>æ‰€åœ¨åˆ†æ”¯çš„æœ€æ–°æäº¤</strong>ã€‚å¯ä»¥ä½¿ç”¨ ^ æ¥å½“ä½œæŒ‡é’ˆä¿®é¥°ç¬¦ï¼ŒHEAD^ä»£è¡¨å‰ä¸€ä¸ªæäº¤ï¼Œ HEAD^^æˆ–è€…HEAD<del>2ä»£è¡¨ä¸Šä¸¤å±‚æäº¤ï¼ŒåŒç†HEAD</del>n å½“å‰æäº¤çš„ç¬¬nçº§çˆ¶æäº¤</li>
</ol>
<h2 id="å·¥ä½œåŒº"><a href="#å·¥ä½œåŒº" class="headerlink" title="å·¥ä½œåŒº"></a>å·¥ä½œåŒº</h2><p>åœ¨å·¥ä½œåŒºè¿›è¡Œä¿®æ”¹ä¹‹åï¼Œå‘ç°ä¸æƒ³è¦äº†å¯ä»¥ä½¿ç”¨<br><code>git checkout -- &lt;æ–‡ä»¶å&gt;</code>æ¥æ’¤å›ä¿®æ”¹<br>ä¸è¿‡ç°åœ¨gitæ–°ç‰ˆæœ¬æ¨èä½¿ç”¨<br><code>git restore &lt;æ–‡ä»¶å&gt;</code> æ¥æ’¤å›ä¿®æ”¹</p>
<h2 id="æš‚å­˜åŒº"><a href="#æš‚å­˜åŒº" class="headerlink" title="æš‚å­˜åŒº"></a>æš‚å­˜åŒº</h2><p><code>git reset HEAD &lt;æ–‡ä»¶å&gt;</code> ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶æ”¾å›å·¥ä½œåŒºï¼Œä¹‹åå¦‚æœä¸æƒ³è¦äº†å¯ä»¥ç»“åˆå·¥ä½œåŒºçš„å‘½ä»¤æ¥æ’¤å›ä¿®æ”¹</p>
<h2 id="å·²æäº¤"><a href="#å·²æäº¤" class="headerlink" title="å·²æäº¤"></a>å·²æäº¤</h2><ol>
<li>æ’¤å›æäº¤ä½†æ˜¯ä¿ç•™ä¿®æ”¹ï¼šä¹Ÿå°±æ˜¯å›åˆ°å·¥ä½œåŒº : <code>git reset --soft HEAD^</code></li>
<li>æ’¤å›æäº¤å¹¶ä¸”æ’¤å›ä¿®æ”¹ï¼šä¹Ÿå°±æ˜¯å›åˆ°æš‚å­˜åŒºï¼Œ<code>git rest --mixed HEAD^</code>å¯ä»¥ç®€å†™ä¸º <code>git rest HEAD^</code></li>
<li>æ’¤å›ä¿®æ”¹å¹¶ä¸”ä¸¢å¤±æ‰€æœ‰çš„ä¿®æ”¹ï¼šä¹Ÿå°±æ˜¯å°†å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹éƒ½ç»™æ’¤å›ï¼š<code>git reset --hard HEAD^</code></li>
</ol>
<h2 id="å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“</h2><p>å½“ä½ åˆ°è¾¾è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œä½ è‚¯å®šå·²ç»æ…Œäº†ï¼Œç»©æ•ˆå¥–å¤šåŠæ˜¯æ²¡äº†ï¼ˆï¼›Â´Ğ´ï½€ï¼‰ã‚<br><code>git revert HEAD</code><br>ä½¿ç”¨è¿™ä¸ªå¯ä»¥å°†ä½ ä¿®æ”¹çš„ä¸œè¥¿æ’¤å›ï¼Œç„¶åä½ å°†è¿™ä¸ªæ–°çš„æäº¤ä¸Šå»å°±èƒ½å¤Ÿè¦†ç›–æ‰ä½ åŸæ¥çš„æäº¤äº†ï¼Œä½†æ˜¯ä½ åŸæ¥çš„é‚£ä¸ªæäº¤è¿˜æ˜¯åœ¨è®°å½•ä¸­çš„ï¼Œä»ç„¶å¯ä»¥è®¿é—®çš„ã€‚</p>
<h1 id="gitå¼€å‘æ³¨æ„"><a href="#gitå¼€å‘æ³¨æ„" class="headerlink" title="gitå¼€å‘æ³¨æ„"></a>gitå¼€å‘æ³¨æ„</h1><h2 id="å¦‚ä½•è¿›å»github"><a href="#å¦‚ä½•è¿›å»github" class="headerlink" title="å¦‚ä½•è¿›å»github"></a>å¦‚ä½•è¿›å»github</h2><p>ç”±äºä¸å¯æŠ—åŠ›ï¼Œgithubéœ€è¦ä¸€äº›é­”æ³•æ‰èƒ½è¿›å»ã€‚ä¸è¿‡å·¥ä½œå®¤ç›®å‰ä½¿ç”¨çš„æ˜¯å·¥ä½œå®¤æœåŠ¡å™¨ä¸Šæ­å»ºçš„giteaè¿›è¡Œä»£ç çš„ç®¡ç†ï¼Œæ“ä½œå’Œgithubä¸ŠåŸºæœ¬ä¸€è‡´ã€‚ä½†æ˜¯ä»“åº“ç›®å‰ç”±äºå­¦æ ¡é”ipï¼Œå¿…é¡»ä½¿ç”¨æ ¡å›­ç½‘æ‰èƒ½è¿›å»ï¼Œæ‰€ä»¥å½“æˆå‘˜ä¸åœ¨æ ¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨githubæ¥è¿›è¡Œå¼€å‘ã€‚</p>
<h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="å¦‚ä½•æäº¤ä»£ç "><a href="#å¦‚ä½•æäº¤ä»£ç " class="headerlink" title="å¦‚ä½•æäº¤ä»£ç "></a>å¦‚ä½•æäº¤ä»£ç </h3><ol>
<li>åœ¨ä»“åº“ä¸Šä¸­å»ºç«‹ä¸€ä¸ªä½ è‹±æ–‡åå­—çš„åˆ†æ”¯æˆ–è€…forkedä¸€ä¸ªåˆ°è‡ªå·±ä»“åº“ä¸­(å·¥ä½œå®¤ä¸€èˆ¬é‡‡ç”¨ç¬¬ä¸€ç§)</li>
<li>æœ¬åœ°æ‰“å¼€terminalï¼Œè¾“å…¥<code>git push origin ä½ è¦æäº¤çš„æœ¬åœ°åˆ†æ”¯:ä½ è¦æäº¤åˆ°çš„è¿œç¨‹åˆ†æ”¯åå­—</code>ï¼Œç¤ºä¾‹ï¼š<code>git push origin main:huangzhenwei</code> </li>
<li>ç‚¹å¼€ä»“åº“ï¼Œæ‰¾åˆ°Pull Request (pr)</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/06/24/02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/24/02/" class="post-title-link" itemprop="url">JVMå­¦ä¹ </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-24 21:41:02" itemprop="dateCreated datePublished" datetime="2024-06-24T21:41:02+08:00">2024-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-09-30 14:49:44" itemprop="dateModified" datetime="2024-09-30T14:49:44+08:00">2024-09-30</time>
              </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>16k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="é¢è¯•å¸¸é—®"><a href="#é¢è¯•å¸¸é—®" class="headerlink" title="é¢è¯•å¸¸é—®"></a>é¢è¯•å¸¸é—®</h1><p>[é»‘é©¬JVMé¢è¯•](<a target="_blank" rel="noopener" href="https://lisxpq12rl7.feishu.cn/wiki/QkOzwr3gIiv8eTkKngTc6Lv6nlf">â€Œâ â€‹â€‹â€â€‹â€ï»¿â€‹ï»¿â€Œâ€‹â€‹â€‹â€‹â€‹â â€‹â€Œï»¿â€‹â€Œâ€Œâ€‹â€â€‹â€‹â€‹ï»¿â€‹â€‹â â€‹â€¬â€â€‹ï»¿â€‹ï»¿â€‹â€‹â€â€‹â€â€‹â€‹â€Œâ€Œâ€‹â€¬é¢è¯•ç¯‡ - é£ä¹¦äº‘æ–‡æ¡£ (feishu.cn)</a>)<br><a target="_blank" rel="noopener" href="https://www.yuque.com/tulingzhouyu/db22bv/td5a84ty4vel22ge#f8eDZ">ğŸ‘Javaè™šæ‹Ÿæœº8-11åŒç‰ˆæœ¬ -JVMé«˜é¢‘é¢è¯•é¢˜ğŸ‘ (yuque.com)</a></p>
<h2 id="newçš„è¿‡ç¨‹-x2F-åˆ›å»ºå¯¹è±¡çš„æ­¥éª¤"><a href="#newçš„è¿‡ç¨‹-x2F-åˆ›å»ºå¯¹è±¡çš„æ­¥éª¤" class="headerlink" title="newçš„è¿‡ç¨‹/åˆ›å»ºå¯¹è±¡çš„æ­¥éª¤"></a>newçš„è¿‡ç¨‹/åˆ›å»ºå¯¹è±¡çš„æ­¥éª¤</h2><ol>
<li>ç±»åŠ è½½æ£€æŸ¥ï¼Œå…ˆå»æ£€æŸ¥æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°è¿™ä¸ªç±»çš„ç¬¦å·å¼•ç”¨æ¥åˆ¤æ–­æ˜¯å¦å·²ç»åˆ›å»ºäº†</li>
<li>åˆ†é…å†…å­˜(æŒ‡é’ˆç¢°æ’ï¼Œç©ºé—²åˆ—è¡¨)</li>
<li>åˆå§‹åŒ–é›¶å€¼</li>
<li>è®¾ç½®å¯¹è±¡å¤´ï¼š</li>
<li>æ‰§è¡Œinitæ–¹æ³•</li>
</ol>
<h2 id="é™æ€å˜é‡å­˜å‚¨åœ¨å“ªé‡Œå‘¢ï¼Ÿ"><a href="#é™æ€å˜é‡å­˜å‚¨åœ¨å“ªé‡Œå‘¢ï¼Ÿ" class="headerlink" title="é™æ€å˜é‡å­˜å‚¨åœ¨å“ªé‡Œå‘¢ï¼Ÿ"></a>é™æ€å˜é‡å­˜å‚¨åœ¨å“ªé‡Œå‘¢ï¼Ÿ</h2><ul>
<li>JDK6åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œé™æ€å˜é‡æ˜¯å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­çš„ï¼Œä¹Ÿå°±æ˜¯æ°¸ä¹…ä»£ã€‚</li>
<li>JDK7åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œé™æ€å˜é‡æ˜¯å­˜æ”¾åœ¨å †ä¸­çš„Classå¯¹è±¡ä¸­ï¼Œè„±ç¦»äº†æ°¸ä¹…ä»£ã€‚</li>
</ul>
<h2 id="ç»„æˆ"><a href="#ç»„æˆ" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h2><p><img src="/2024/06/24/02/JVM%E7%BB%84%E6%88%90.png" alt="|525"></p>
<ul>
<li><del>ç¼–è¯‘å™¨</del>ï¼šä¸å±äºJavaè™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£å°†æºä»£ç æ–‡ä»¶ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ã€‚</li>
<li>ç±»åŠ è½½å­ç³»ç»Ÿï¼Œè´Ÿè´£å°†å­—èŠ‚ç æ–‡ä»¶è¯»å–ã€è§£æå¹¶ä¿å­˜åˆ°å†…å­˜ä¸­ã€‚å…¶æ ¸å¿ƒå°±æ˜¯ç±»åŠ è½½å™¨ã€‚</li>
<li>è¿è¡Œæ—¶æ•°æ®åŒºï¼Œç®¡ç†JVMä½¿ç”¨åˆ°çš„å†…å­˜ã€‚</li>
<li>æ‰§è¡Œå¼•ç”¨ï¼Œåˆ†ä¸ºè§£é‡Šå™¨ è§£é‡Šæ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤ï¼›å³æ—¶ç¼–è¯‘å™¨ ä¼˜åŒ–ä»£ç æ‰§è¡Œæ€§èƒ½ï¼› åƒåœ¾å›æ”¶å™¨ å°†ä¸å†ä½¿ç”¨çš„å¯¹è±¡è¿›è¡Œå›æ”¶ã€‚</li>
<li>æœ¬åœ°æ¥å£ï¼Œä¿å­˜äº†æœ¬åœ°å·²ç»ç¼–è¯‘å¥½çš„æ–¹æ³•ï¼Œä½¿ç”¨C/C++è¯­è¨€å®ç°ã€‚</li>
</ul>
<h2 id="è¿è¡Œæ—¶æ•°æ®åŒºçš„ç»„æˆ"><a href="#è¿è¡Œæ—¶æ•°æ®åŒºçš„ç»„æˆ" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®åŒºçš„ç»„æˆ"></a>è¿è¡Œæ—¶æ•°æ®åŒºçš„ç»„æˆ</h2><p><img src="/2024/06/24/02/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E7%9A%84%E7%BB%84%E6%88%90.png" alt="|900"></p>
<ul>
<li>å †ï¼Œå¯åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£å¯åˆ†ä¸ºEdenï¼ŒSurviver1ï¼ŒSurviver2</li>
<li>æ–¹æ³•åŒºï¼šæ°¸ä¹…åŒºï¼Œå­˜å‚¨å·²ç»è¢«Javaè™šæ‹Ÿæœºæ¶å­å•Šçš„ç±»ä¿¡æ¯ç­‰ï¼Œjdk1.8ä¹‹åç§°ä¸ºå…ƒç©ºé—´ã€‚</li>
<li>è™šæ‹Ÿæœºæ ˆï¼šçº¿ç¨‹ç§æœ‰ï¼Œå†…æœ‰å¤šä¸ªæ ˆå¸§ï¼Œæ–¹æ³•åœ¨æ‰§è¡Œæ—¶ä¼šåˆ›å»ºæ ˆå¸§ï¼ŒåŒ…å«(å±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥ï¼Œè¿”å›åœ°å€ç­‰)<ul>
<li>å±€éƒ¨å˜é‡è¡¨ï¼šå­˜æ”¾æ–¹æ³•å‚æ•°ï¼Œå±€éƒ¨å˜é‡</li>
<li>æ“ä½œæ•°æ ˆï¼šè®°å½•ä¸€ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå­—èŠ‚ç æŒ‡ä»¤å‘æ“ä½œæ•°æ ˆè¿›è¡Œå…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚</li>
<li>åŠ¨æ€é“¾æ¥ï¼šå­—èŠ‚ç ä¸­çš„ç¬¦å·é“¾æ¥ï¼Œä¸€éƒ¨åˆ†åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨(é™æ€è§£æ)ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†åœ¨è¿è¡Œæ—¶è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€é“¾æ¥ã€‚</li>
<li>è¿”å›åœ°å€ï¼šå½“å‰æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“å‰æ–¹æ³•éœ€è¦è¿”å›çš„ä½ç½®ã€‚</li>
</ul>
</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆï¼šæœåŠ¡çš„æ˜¯Nativeæ–¹æ³•</li>
<li>PCç¨‹åºè®¡æ•°å™¨ï¼šçº¿ç¨‹ç§æœ‰</li>
</ul>
<h2 id="Javaè™šæ‹Ÿæœºæ ˆ"><a href="#Javaè™šæ‹Ÿæœºæ ˆ" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆ"></a>Javaè™šæ‹Ÿæœºæ ˆ</h2><p>æ¯ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ä½¿ç”¨ä¸€ä¸ªæ ˆå¸§æ¥ä¿å­˜ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„è™šæ‹Ÿæœºæ ˆï¼Œç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ç›¸åŒ<br>ä¸»è¦åŒ…æ‹¬</p>
<ol>
<li>å±€éƒ¨å˜é‡è¡¨ï¼šæ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å­˜æ”¾æ‰€æœ‰çš„å±€éƒ¨å˜é‡</li>
<li>æ“ä½œæ•°æ ˆï¼šè™šæ‹Ÿæœºåœ¨æ‰§è¡ŒæŒ‡ä»¤è¿‡ç¨‹ä¸­ç”¨æ¥å­˜æ”¾ä¸´æ—¶æ•°æ®çš„ä¸€å—åŒºåŸŸ</li>
<li>å¸§æ•°æ®ï¼šä¸»è¦åŒ…æ‹¬åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ã€å¼‚å¸¸è¡¨ç­‰å†…å®¹ã€‚</li>
</ol>
<h2 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>å­˜å‚¨çš„æ˜¯nativeæœ¬åœ°æ–¹æ³•çš„æ ˆ<br>æœ¬åœ°æ–¹æ³•ï¼ˆNative Methodï¼‰æ˜¯ä½¿ç”¨é Java è¯­è¨€ï¼ˆé€šå¸¸æ˜¯ C æˆ– C++ï¼‰ç¼–å†™çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ Java æœ¬åœ°æ¥å£ï¼ˆJava Native Interfaceï¼ŒJNIï¼‰ä¸ Java ä»£ç è¿›è¡Œäº¤äº’ã€‚ä½¿ç”¨æœ¬åœ°æ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®ç°ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>ä¸æ“ä½œç³»ç»Ÿäº¤äº’</strong>ï¼šç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿçš„åº•å±‚åŠŸèƒ½ã€‚</li>
<li><strong>æé«˜æ€§èƒ½</strong>ï¼šåœ¨æ€§èƒ½å…³é”®çš„éƒ¨åˆ†ä½¿ç”¨æ›´é«˜æ•ˆçš„æœ¬åœ°ä»£ç ã€‚</li>
<li><strong>è®¿é—®ç¡¬ä»¶</strong>ï¼šä¸ç‰¹å®šç¡¬ä»¶è®¾å¤‡è¿›è¡Œäº¤äº’ã€‚</li>
<li><strong>å¤ç”¨ç°æœ‰åº“</strong>ï¼šè°ƒç”¨å·²æœ‰çš„ç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„åº“ã€‚</li>
</ol>
<h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>ç”¨æ¥å­˜æ”¾åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œæ ˆä¸Šçš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œå¯ä»¥å­˜æ”¾å¯¹ä¸Šçš„å¼•ç”¨ï¼Œé™æ€å˜é‡ä¹Ÿå¯ä»¥å­˜æ”¾å †å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ç°å¯¹è±¡åœ¨çº¿ç¨‹ä¹‹é—´çš„å…±äº«<br>å †æ˜¯åƒåœ¾å›æ”¶çš„æœ€ä¸»è¦éƒ¨åˆ†</p>
<h3 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h3><p>ClassLoaderæ˜¯Javaè™šæ‹Ÿæœºæä¾›ç»™åº”ç”¨ç¨‹åºå»å®ç°è·å–ç±»å’Œæ¥å£å­—èŠ‚ç æ•°æ®çš„æŠ€æœ¯ã€‚å»è·å¾—äºŒè¿›åˆ¶å­—èŠ‚ç ä¿¡æ¯ã€‚ç„¶åé€šè¿‡JVMè°ƒç”¨JNIä¹Ÿå°±æ˜¯æœ¬åœ°æ¥å£æ–¹æ³•åŒºåˆ›å»ºå¯¹è±¡<br><img src="/2024/06/24/02/%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.png"></p>
<h4 id="ç±»åŠ è½½å™¨çš„åˆ†ç±»"><a href="#ç±»åŠ è½½å™¨çš„åˆ†ç±»" class="headerlink" title="ç±»åŠ è½½å™¨çš„åˆ†ç±»"></a>ç±»åŠ è½½å™¨çš„åˆ†ç±»</h4><h5 id="jdk8ä»¥åŠä¹‹å‰"><a href="#jdk8ä»¥åŠä¹‹å‰" class="headerlink" title="jdk8ä»¥åŠä¹‹å‰"></a>jdk8ä»¥åŠä¹‹å‰</h5><ol>
<li>Javaä»£ç å®ç°çš„(æ‰©å±•ç±»åŠ è½½å™¨ï¼Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨)</li>
<li>Javaè™šæ‹Ÿæœºåº•å±‚ä»£ç å®ç°çš„(å¯åŠ¨ç±»åŠ è½½å™¨)<br>ä½¿ç”¨å¯åŠ¨åŠ è½½ç±»å™¨åŠ è½½å™¨å»åŠ è½½ç”¨æˆ·çš„jaråŒ…ï¼Œå¯ä»¥åœ¨è™šæ‹Ÿæœºå‚æ•°é‚£é‡Œæ·»åŠ ï¼š<br><code>-Xbootclasspath /a: jaråŒ…å</code><br>Javaä¸­çš„åŠ è½½å™¨ï¼š æ˜¯ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œç»§æ‰¿è‡ªURLClassLoaderï¼Œé€šè¿‡ç›®å½•æˆ–è€…æŒ‡å®šjaråŒ…å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­<br><img src="/2024/06/24/02/Java%E4%B8%AD%E7%9A%84%E9%BB%98%E8%AE%A4%E5%8A%A0%E8%BD%BD%E5%99%A8.png"></li>
</ol>
<h5 id="åŒäº²å§”æ´¾æœºåˆ¶-jdk8ä»¥åŠä¹‹å‰é‡ç‚¹"><a href="#åŒäº²å§”æ´¾æœºåˆ¶-jdk8ä»¥åŠä¹‹å‰é‡ç‚¹" class="headerlink" title="åŒäº²å§”æ´¾æœºåˆ¶(jdk8ä»¥åŠä¹‹å‰é‡ç‚¹)"></a>åŒäº²å§”æ´¾æœºåˆ¶(jdk8ä»¥åŠä¹‹å‰é‡ç‚¹)</h5><p>å¯ä»¥è§£å†³çš„é—®é¢˜:<br>é‡å¤çš„ç±»ï¼šå¯åŠ¨ç±»ï¼Œæ ¹æ®åŒäº²å§”æ´¾æœºåˆ¶ï¼Œå¦‚æœåŒä¸€ä¸ªç±»å‡ºç°åœ¨ä¸‰ä¸ªç±»åŠ è½½å™¨ä¸­ï¼Œä¼šç”±å¯åŠ¨ç±»åŠ è½½å™¨æ¥åŠ è½½ã€‚<br>Stringç±»èƒ½è¦†ç›–å—ï¼Ÿ ä¸èƒ½ï¼Œä¼šç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½åœ¨rt.jaråŒ…ä¸­çš„Stringç±»<br>ç±»åŠ è½½å™¨çš„å…³ç³»ï¼šåº”ç”¨ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨è¯†æ‰©å±•ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œä½†æ˜¯ä¼šå§”æ´¾ç»™å¯åŠ¨ç±»åŠ è½½å™¨ã€‚<br>åŒäº²å§”æ´¾æœºåˆ¶çš„ä½œç”¨ï¼š<br>ä¿è¯ç±»åŠ è½½å™¨çš„å®‰å…¨æ€§ï¼Œé¿å…é‡å¤åŠ è½½ã€‚</p>
<ol>
<li>æ¯ä¸€ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨ï¼Œåœ¨ç±»åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªåŠ è½½å™¨ä¼šå…ˆæ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½äº†è¯¥ç±»ï¼Œå¦‚æœå·²ç»åŠ è½½åˆ™ç›´æ¥è¿”å›å¦åˆ™å¥–å°†è½½è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨</li>
<li>å¦‚æœæ‰€æœ‰çš„çˆ¶ç±»åŠ è½½å™¨éƒ½æ— æ³•åŠ è½½ï¼Œå°±ç”±å½“å‰åŠ è½½å™¨å°è¯•åŠ è½½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨çš„åŠ è½½è·¯å¾„ä¸­æ²¡æœ‰è¿™ä¸ªç±»ï¼Œå°±ä¼šç”±ä»–è‡ªå·±åŠ è½½ <img src="/2024/06/24/02/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE.png"><img src="/2024/06/24/02/%E4%B8%8A%E4%B8%8B%E5%A7%94%E6%B4%BE.png"></li>
</ol>
<h5 id="å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶"><a href="#å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶"></a>å¦‚ä½•æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶</h5><ol>
<li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¹¶ä¸”é‡å†™loadClassæ–¹æ³•å°±å¯ä»¥å°†åŒäº²å§”æ´¾æœºåˆ¶çš„ä»£ç å»é™¤ã€‚Tomcaté€šè¿‡è¿™ç§æ–¹å¼å®ç°åº”ç”¨ä¹‹é—´ç±»éš”ç¦»ï¼Œæ¯ä¸€ä¸ªåº”ç”¨ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç±»åŠ è½½å™¨åŠ è½½å¯¹åº”çš„ç±»</li>
<li>çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨åŠ è½½ç±»ï¼Œæ¯”å¦‚JDBCå’ŒJNDIç­‰,JDBCä½¿ç”¨DriverManageræ¥ç®¡ç†é¡¹ç›®ä¸­å¼•å…¥çš„ä¸åŒçš„æ•°æ®åº“é©±åŠ¨ï¼ŒDriverManagerç±»ä½äºrt.jaråŒ…ä¸­ï¼Œç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ã€‚ä¾èµ–ä¸­çš„mysqlé©±åŠ¨å¯¹åº”çš„ç±»ï¼Œç”±åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨æ¥åŠ è½½ï¼ŒDriverManagerå±äºrt.jaræ˜¯å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚è€Œç”¨æˆ·jaråŒ…ä¸­çš„é©±åŠ¨éœ€è¦ç”±åº”ç”¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œè¿™å°±è¿åäº†åŒäº²å§”æ´¾æœºåˆ¶ã€‚<img src="/2024/06/24/02/JDBC.png">å®šä¹‰æœåŠ¡æ¥å£ï¼šJDBCå®šä¹‰äº†java.sql.Driveræ¥å£ã€‚<br>æœåŠ¡æä¾›è€…ï¼šå„ä¸ªæ•°æ®åº“å‚å•†å®ç°java.sql.Driveræ¥å£ï¼Œå¹¶åœ¨META-INF/servicesç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶java.sql.Driverï¼Œæ–‡ä»¶å†…å®¹ä¸ºå®ç°ç±»çš„å…¨é™å®šåã€‚<br>åŠ è½½é©±åŠ¨ï¼šDriverManagerç±»åœ¨é™æ€ä»£ç å—ä¸­é€šè¿‡ServiceLoaderåŠ è½½æ‰€æœ‰å®ç°java.sql.Driveræ¥å£çš„ç±»ï¼Œå¹¶è°ƒç”¨Class.forNameæ–¹æ³•åŠ è½½é©±åŠ¨ç±»ã€‚<blockquote>
<p>å®šä¹‰æœåŠ¡æ¥å£ï¼šJDBCå®šä¹‰äº†java.sql.Driveræ¥å£ã€‚<br>æœåŠ¡æä¾›è€…ï¼šå„ä¸ªæ•°æ®åº“å‚å•†å®ç°java.sql.Driveræ¥å£ï¼Œå¹¶åœ¨META-INF/servicesç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶java.sql.Driverï¼Œæ–‡ä»¶å†…å®¹ä¸ºå®ç°ç±»çš„å…¨é™å®šåã€‚<br>åŠ è½½é©±åŠ¨ï¼šDriverManagerç±»åœ¨é™æ€ä»£ç å—ä¸­é€šè¿‡ServiceLoaderåŠ è½½æ‰€æœ‰å®ç°java.sql.Driveræ¥å£çš„ç±»ï¼Œå¹¶è°ƒç”¨Class.forNameæ–¹æ³•åŠ è½½é©±åŠ¨ç±»</p>
</blockquote>
</li>
<li>Osgiæ¡†æ¶çš„ç±»åŠ è½½å™¨ï¼Œå…è®¸åŒçº§ä¹‹é—´å§”æ‰˜è¿›è¡Œç±»çš„åŠ è½½<br>è‡ªå®šä¹‰ç±»åŠ è½½å™¨çˆ¶ç±»æ€ä¹ˆæ˜¯AppClassLoaderå‘¢ï¼Ÿ<br><img src="/2024/06/24/02/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E7%88%B6%E7%B1%BB.png"></li>
</ol>
<h5 id="JDK9ä¹‹åçš„ç±»åŠ è½½å™¨"><a href="#JDK9ä¹‹åçš„ç±»åŠ è½½å™¨" class="headerlink" title="JDK9ä¹‹åçš„ç±»åŠ è½½å™¨"></a>JDK9ä¹‹åçš„ç±»åŠ è½½å™¨</h5><p><strong>ä¸ºä»€ä¹ˆæŠ›å¼ƒäº†æ‹“å±•ç±»åŠ è½½å™¨</strong> ï¼Ÿ<br>å› ä¸ºæ‰©å±•ç±»åŠ è½½å™¨ä¸»è¦æ˜¯å’ŒåŠ è½½jreç¯å¢ƒä¸‹libä¸‹çš„jaråŒ…ï¼Œéœ€è¦æ‹“å±•Javaçš„åŠŸèƒ½æ—¶ï¼Œéœ€è¦æŠŠjaråŒ…èƒ½å¤Ÿåœ¨extæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸å®‰å…¨<br>JDK9å¼•å…¥çš„æ¨¡å—åŒ–å¼€å‘å–ä»£äº†ä»–</p>
<ol>
<li>å¯åŠ¨ç±»åŠ è½½å™¨ä½¿ç”¨Javaç¼–å†™ï¼Œä½äºjdk.internal.loader.ClassLoadersç±»ä¸­ã€‚Javaä¸­çš„BootClassLoaderç»§æ‰¿è‡ªBuiltinClassLoaderå®ç°ä»æ¨¡å—ä¸­æ‰¾åˆ°è¦åŠ è½½çš„å­—èŠ‚ç èµ„æºæ–‡ä»¶ã€‚ä½†æ˜¯è¿˜æ˜¯æ— æ³•è·å–åˆ°</li>
<li>æ‰©å±•ç±»åŠ è½½å™¨è¢«æ›¿æ¢æˆäº†å¹³å°ç±»åŠ è½½å™¨ï¼Œæ‰€ä»¥ç»§æ‰¿å…³ç³»ä»URLClassLoaderå˜æˆäº†BuiltinClassLoaderï¼ŒBuiltinClassLoaderå®ç°äº†ä»æ¨¡å—ä¸­åŠ è½½å­—èŠ‚ç æ–‡ä»¶ã€‚å¹³å°ç±»åŠ è½½å™¨çš„å­˜åœ¨æ›´å¤šçš„æ˜¯ä¸ºäº†ä¸è€ç‰ˆæœ¬çš„è®¾è®¡æ–¹æ¡ˆå…¼å®¹ï¼Œè‡ªèº«æ²¡æœ‰ç‰¹æ®Šçš„é€»è¾‘</li>
</ol>
<h5 id="åŒäº²å§”æ´¾æœºåˆ¶æ€»ç»“"><a href="#åŒäº²å§”æ´¾æœºåˆ¶æ€»ç»“" class="headerlink" title="åŒäº²å§”æ´¾æœºåˆ¶æ€»ç»“"></a>åŒäº²å§”æ´¾æœºåˆ¶æ€»ç»“</h5><p><img src="/2024/06/24/02/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E6%80%BB%E7%BB%93.png" alt="|500"></p>
<h4 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç±»çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç±»çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h4><p>åŠ è½½ã€è¿æ¥ã€åˆå§‹åŒ–ã€ä½¿ç”¨ã€å¸è½½</p>
<h5 id="åŠ è½½"><a href="#åŠ è½½" class="headerlink" title="åŠ è½½"></a>åŠ è½½</h5><p>ç®€å•æ¦‚æ‹¬ï¼šæ‰¾åˆ°éœ€è¦åŠ è½½çš„ç±»ï¼Œå¹¶æŠŠç±»çš„ä¿¡æ¯åŠ è½½åˆ°JVMä¸­ï¼Œç„¶ååœ¨å †ä¸­å®ä¾‹åŒ–ä¸€ä¸ªjava.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºä¸­çš„è¿™ä¸ªç±»çš„ä¿¡æ¯çš„å…¥å£</p>
<ol>
<li>åŠ è½½è¿‡ç¨‹ä¸­æ˜¯ç±»åŠ è½½å™¨æ ¹æ®ç±»çš„å…¨é™å®šåé€šè¿‡ä¸åŒçš„æ¸ é“ä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼è·å–å­—èŠ‚ç ä¿¡æ¯</li>
<li>åŠ è½½å™¨åŠ è½½å®Œç±»ä¹‹åï¼ŒJavaè™šæ‹Ÿæœºå°†å­—èŠ‚ç ä¸­çš„ä¿¡æ¯ä¿å­˜åˆ°æ–¹æ³•åŒºä¸­ï¼Œç”Ÿæˆä¸€ä¸ªInstanceKlasså¯¹è±¡ï¼Œä¿å­˜ç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼Œé‡Œé¢è¿˜åŒ…å«å®ç°ç‰¹å®šåŠŸèƒ½æ¯”å¦‚å¤šæ€çš„ä¿¡æ¯</li>
<li>Javaè™šæ‹Ÿæœºåœ¨å †ä¸­ç”Ÿæˆä¸€ä»½ä¸æ–¹æ³•å»ä¸­æ•°æ®ç±»ä¼¼çš„java.lang.Classå¯¹è±¡ï¼Œä½œç”¨æ˜¯åœ¨Javaä»£ç ä¸­è·å–ç±»çš„ä¿¡æ¯å’Œå­˜å‚¨é™æ€å­—æ®µçš„æ•°æ®ï¼Œjkd8ä»¥åå°†é™æ€å­—æ®µæ”¾åœ¨å †åŒºä¸­ã€‚ ä¼˜ç‚¹æ˜¯ï¼šå¯¹äºå¼€å‘è€…æ¥è¯´åªéœ€è¦è®¿é—®å †ä¸­çš„Classå¯¹è±¡è€Œä¸éœ€è¦è®¿é—®æ–¹æ³•åŒºä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„æ§åˆ¶å¼€å‘è€…è®¿é—®æ•°æ®çš„èŒƒå›´</li>
</ol>
<h5 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h5><ol>
<li>éªŒè¯ï¼Œæ ¡éªŒJavaå­—èŠ‚ç æ–‡ä»¶æ˜¯éƒ½éµå¾ªäº†çº¦æŸï¼Œä¸€èˆ¬ä¸éœ€è¦ç¨‹åºå‘˜å‚ä¸</li>
<li>ä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼ï¼Œå¦‚æœä½¿ç”¨äº†finalæ¥ä¿®é¥°ï¼Œå°±ä¼šç›´æ¥å°†ä»£ç ä¸­çš„å€¼èµ‹ç»™é™æ€å˜é‡</li>
<li>è§£æï¼Œå°†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œç¬¦å·å¼•ç”¨æ˜¯åœ¨å­—èŠ‚ç ä¸­ä½¿ç”¨åºå·æ¥è¿›è¡Œå¼•ç”¨ï¼Œè€Œç›´æ¥å¼•ç”¨å°±æ˜¯ä½¿ç”¨å†…å­˜ä¸­çš„åœ°å€ç›´æ¥è¿›è¡Œè®¿é—®</li>
</ol>
<h5 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h5><p>å½“ç±»è¢«ç›´æ¥å¼•ç”¨çš„æ—¶å€™æ‰ä¼šå‡ºå‘ç±»çš„åˆå§‹åŒ–ã€‚ç±»è¢«ç›´æ¥å¼•ç”¨çš„æƒ…å†µæœ‰-&gt;<br>new,è¯»å–æˆ–è®¾ç½®ç±»çš„é™æ€å˜é‡ï¼Œè°ƒç”¨ç±»çš„é™æ€æ–¹æ³•ï¼Œé€šè¿‡åå°„æ¥æ‰§è¡Œå‰ä¸‰ç§ï¼Œåˆå§‹åŒ–å­ç±»æ—¶ä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ï¼Œæ¥å£å®ç°ç±»åˆå§‹åŒ–æ—¶ï¼Œä¼šå‡ºå‘ç›´æ¥æˆ–é—´æ¥å®ç°çš„æ‰€æœ‰æ¥å£çš„åˆå§‹åŒ–<br>ç±»çš„åˆå§‹åŒ–åªä¼šè¿è¡Œé™æ€éƒ¨åˆ†ï¼Œè€Œä¸”ä¼˜å…ˆçˆ¶ç±»</p>
<ol>
<li>æ‰§è¡Œé™æ€ä»£ç å—ä¸­çš„ä»£ç ï¼Œä¸ºé™æ€å˜é‡èµ‹å€¼</li>
<li>åˆå§‹åŒ–é˜¶æ®µä¼šæ‰§è¡Œå­—èŠ‚ç ä¸­clinitéƒ¨åˆ†çš„å­—èŠ‚ç æŒ‡ä»¤</li>
</ol>
<h5 id="ç¨‹åºä¸­å¯ä»¥ç›´æ¥å¯¼è‡´åˆå§‹åŒ–çš„æ“ä½œï¼š"><a href="#ç¨‹åºä¸­å¯ä»¥ç›´æ¥å¯¼è‡´åˆå§‹åŒ–çš„æ“ä½œï¼š" class="headerlink" title="ç¨‹åºä¸­å¯ä»¥ç›´æ¥å¯¼è‡´åˆå§‹åŒ–çš„æ“ä½œï¼š"></a>ç¨‹åºä¸­å¯ä»¥ç›´æ¥å¯¼è‡´åˆå§‹åŒ–çš„æ“ä½œï¼š</h5><ol>
<li>è®¿é—®ä¸€ä¸ªç±»çš„é™æ€å˜é‡æˆ–è€…é™æ€æ–¹æ³•ï¼Œfinalä¿®é¥°çš„å¹¶ä¸”ç­‰å·åœ¨å³ä¾§æ˜¯å¸¸é‡çš„è¯ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œå› ä¸ºåœ¨è¿æ¥é˜¶æ®µå°±å·²ç»è¿›è¡Œèµ‹å€¼äº†</li>
<li>è°ƒç”¨Class.forName(String className)æ—¶ä¼šè¿›è¡Œåˆå§‹åŒ–</li>
<li>new </li>
<li>æ‰§è¡ŒMainæ–¹æ³•çš„å½“å‰ç±»<br><code>&lt;clinit&gt;</code>æ˜¯Javaä¸­çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œä»£è¡¨åˆå§‹åŒ–å™¨ï¼ˆclass initializerï¼‰ã€‚è¿™ä¸ªæ–¹æ³•ä¸æ˜¯ç”±ç¨‹åºå‘˜æ˜¾å¼ç¼–å†™çš„ï¼Œè€Œæ˜¯ç”±Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰è‡ªåŠ¨ç”Ÿæˆçš„ã€‚å½“ç±»è¢«é¦–æ¬¡åŠ è½½åˆ°JVMæ—¶ï¼Œ<code>&lt;clinit&gt;</code>æ–¹æ³•è´Ÿè´£æ‰§è¡Œç±»å˜é‡çš„é™æ€åˆå§‹åŒ–å’Œé™æ€åˆå§‹åŒ–å—çš„ä»£ç <br><code>clinit</code> åœ¨ä»¥ä¸‹æƒ…å†µä¸ä¼šå‡ºç°ï¼š</li>
<li>æ— é™æ€ä»£ç å—</li>
<li>æœ‰é™æ€å˜é‡å£°æ˜ä½†æ˜¯æ²¡æœ‰èµ‹å€¼è¯­å¥</li>
<li>é™æ€å˜é‡çš„å®šä¹‰ä½¿ç”¨finalå­—æ®µï¼Œä¼šåœ¨å‡†å¤‡é˜¶æ®µç›´æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚<br>è®¿é—®çˆ¶ç±»é™æ€å˜é‡ï¼Œåªä¼šåˆå§‹åŒ–çˆ¶ç±»<br>new å­ç±»æ—¶ä¼šå…ˆæ‰§è¡Œçˆ¶ç±»çš„clinitæ–¹æ³•<br>æ•°ç»„çš„åˆ›å»ºä¸ä¼šå¯¼è‡´æ•°ç»„ä¸­å…ƒç´ çš„ç±»çš„åˆå§‹åŒ–ã€‚<br>finalä¿®é¥°çš„å˜é‡å¦‚æœä¸æ˜¯å¸¸é‡éœ€è¦æ‰§è¡ŒæŒ‡ä»¤æ‰èƒ½å¾—å‡ºç»“æœä¼šæ‰§è¡Œclinitæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–</li>
</ol>
<h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h5><h5 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h5><h4 id="å­—èŠ‚ç æ–‡ä»¶"><a href="#å­—èŠ‚ç æ–‡ä»¶" class="headerlink" title="å­—èŠ‚ç æ–‡ä»¶"></a>å­—èŠ‚ç æ–‡ä»¶</h4><ol>
<li>å¸¸é‡æ± ï¼šé¿å…ä¿å­˜é‡å¤çš„å†…å®¹ï¼ŒèŠ‚çœç©ºé—´</li>
<li>å…·ä½“çš„å­—èŠ‚ç æ–‡ä»¶åˆ†æ <img src="/2024/06/24/02/%E5%AD%97%E8%8A%82%E7%A0%81.png"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//æºç </span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
i <span class="token operator">=</span> i <span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token comment">//å­—èŠ‚ç </span>
<span class="token number">0</span> iconst_0  å°†<span class="token number">0</span>æ”¾åœ¨æ“ä½œæ•°æ ˆä¸­
<span class="token number">1</span> istore_1 å¼¹å‡ºæ“ä½œæ•°æ ˆæœ€é¡¶å±‚æ•°æ®åˆ°å±€éƒ¨å˜é‡<span class="token number">1</span>å·ä½
<span class="token number">2</span> iload_1  å¤åˆ¶åˆ°æ“ä½œæ•°æ ˆé¡¶
<span class="token number">3</span> iinc <span class="token number">1</span> by <span class="token number">1</span> å°†å±€éƒ¨å˜é‡<span class="token number">1</span>å·ä½çš„æ•°æ® <span class="token operator">+</span> <span class="token number">1</span>
<span class="token number">6</span> istore_1 å¼¹å‡ºï¼Œä¿å­˜åœ¨ä¸€å·ä½ï¼Œæ‰€ä»¥è¢«è¦†ç›–äº†
<span class="token number">7</span> <span class="token keyword">return</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h5 id="ç»„æˆ-1"><a href="#ç»„æˆ-1" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h5><p>åŸºç¡€ä¿¡æ¯ï¼Œå¸¸é‡æ± (ä¿å­˜å­—ç¬¦ä¸²å¸¸é‡ã€ç±»æˆ–è€…æ¥å£åï¼Œä¸»è¦åœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­ä½¿ç”¨)ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼Œå±æ€§</p>
<h3 id="è¿è¡Œæ—¶æ•°æ®åŒº"><a href="#è¿è¡Œæ—¶æ•°æ®åŒº" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®åŒº"></a>è¿è¡Œæ—¶æ•°æ®åŒº</h3><h4 id="æŒ‰ç…§çº¿ç¨‹å…±äº«ä¸å…±äº«åŒºåˆ†ï¼š"><a href="#æŒ‰ç…§çº¿ç¨‹å…±äº«ä¸å…±äº«åŒºåˆ†ï¼š" class="headerlink" title="æŒ‰ç…§çº¿ç¨‹å…±äº«ä¸å…±äº«åŒºåˆ†ï¼š"></a>æŒ‰ç…§çº¿ç¨‹å…±äº«ä¸å…±äº«åŒºåˆ†ï¼š</h4><ul>
<li>çº¿ç¨‹ä¸å…±äº«<ol>
<li>ç¨‹åºè®¡æ•°å™¨</li>
<li>Javaè™šæ‹Ÿæœºæ ˆ</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆ</li>
</ol>
</li>
<li>çº¿ç¨‹å…±äº«<ol>
<li>æ–¹æ³•åŒº</li>
<li>å †</li>
</ol>
</li>
</ul>
<h5 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h5><p>å†…å­˜æº¢å‡ºï¼šç¨‹åºåœ¨ä½¿ç”¨æŸä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œå­˜æ”¾çš„æ•°æ®éœ€è¦å ç”¨çš„å†…å­˜å¤§å°è¶…è¿‡äº†è™šæ‹Ÿæœºèƒ½æä¾›çš„å†…å­˜ä¸Šé™<br>æ¯ä¸ªçº¿ç¨‹åªéœ€è¦å­˜å‚¨ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸ä¼šå‘ç”Ÿå†…å­˜æº¢å‡ºçš„<br>ç¨‹åºå‘˜æ— éœ€å¯¹ç¨‹åºè®¡æ•°å™¨è¿›è¡Œä»»ä½•å¤„ç†</p>
<h5 id="è™šæ‹Ÿæœºæ ˆ"><a href="#è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ"></a>è™šæ‹Ÿæœºæ ˆ</h5><p>Javaè™šæ‹Ÿæœºä½¿ç”¨æ ˆæ¥ç®¡ç†æ–¹æ³•è°ƒç”¨ä¸­çš„åŸºæœ¬æ•°æ®ã€‚æ¯ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ä½¿ç”¨ä¸€ä¸ªæ ˆå¸§æ¥ä¿å­˜ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½åŒ…å«ä¸€ä¸ªè‡ªå·±çš„è™šæ‹Ÿæœºæ ˆ<br><img src="/2024/06/24/02/%E6%A0%88%E5%86%85%E5%AD%98.png"></p>
<h6 id="æ ˆå¸§çš„ç»„æˆ"><a href="#æ ˆå¸§çš„ç»„æˆ" class="headerlink" title="æ ˆå¸§çš„ç»„æˆ"></a>æ ˆå¸§çš„ç»„æˆ</h6><ul>
<li>å±€éƒ¨å˜é‡è¡¨ï¼šå­˜æ”¾è¿è¡Œä¸­çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡è¡¨ä¿å­˜çš„å†…å®¹æœ‰ï¼šå®ä¾‹æ–¹æ³•çš„thiså¯¹è±¡ï¼Œæ–¹æ³•çš„å‚æ•°ï¼Œæ–¹æ³•ä½“ä¸­å£°æ˜çš„å±€éƒ¨å˜é‡ã€‚<img src="/2024/06/24/02/%E5%8F%98%E9%87%8F%E8%A1%A8.png"></li>
<li>æ“ä½œæ•°æ ˆï¼šå­˜æ”¾ä¸´æ—¶æ•°æ®<ul>
<li>æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸€ä¸ªä½ç½®ç§°ä¹‹ä¸ºæ§½(slot) ï¼Œlongå’Œdoubleç±»å‹å ç”¨ä¸¤ä¸ªæ§½ï¼Œå…¶ä»–ç±»å‹å ç”¨ä¸€ä¸ªæ§½ã€‚</li>
<li>å®ä¾‹æ–¹æ³•ä¸­çš„åºå·ä¸º0çš„ä½ç½®å­˜æ”¾çš„æ˜¯thisï¼ŒæŒ‡çš„æ˜¯å½“å‰è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ï¼Œè¿è¡Œæ—¶ä¼šåœ¨å†…å­˜ä¸­å­˜æ”¾å®ä¾‹å¯¹è±¡çš„åœ°å€ã€‚</li>
<li>ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œå±€éƒ¨å˜é‡è¡¨ä¸­çš„æ§½æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œä¸€æ—¦æŸä¸ªå±€éƒ¨å˜é‡ä¸å†ç”Ÿæ•ˆï¼Œå½“å‰æ§½å°±å¯ä»¥å†æ¬¡è¢«ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>å¸§æ•°æ®ï¼šåŒ…å«åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ã€å¼‚å¸¸è¡¨çš„å¼•ç”¨<img src="/2024/06/24/02/%E6%96%B9%E6%B3%95%E5%87%BA%E5%8F%A3.png"></li>
</ul>
<h5 id="æœ¬åœ°æ–¹æ³•æ ˆï¼š"><a href="#æœ¬åœ°æ–¹æ³•æ ˆï¼š" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆï¼š"></a>æœ¬åœ°æ–¹æ³•æ ˆï¼š</h5><p>å­˜å‚¨naticeæœ¬åœ°æ–¹æ³•çš„æ ˆå¸§ï¼Œåœ¨Hotspotè™šæ‹Ÿæœºä¸­ï¼ŒJavaè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆå®ç°ä¸Šä½¿ç”¨äº†åŒä¸€ä¸ªæ ˆç©ºé—´ã€‚</p>
<h5 id="å †å†…å­˜"><a href="#å †å†…å­˜" class="headerlink" title="å †å†…å­˜"></a>å †å†…å­˜</h5><p><img src="/2024/06/24/02/%E6%A0%B9%E6%8D%AE%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%90%86%E8%AE%BA%E5%88%92%E5%88%86%E7%9A%84%E5%A0%86.png"><br>ä¸€èˆ¬Javaç¨‹åºä¸­å †å†…å­˜æ˜¯ç©ºé—´æœ€å¤§çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡éƒ½å­˜åœ¨äºå †ä¸Šã€‚æ ˆä¸Šçš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œå¯ä»¥å­˜æ”¾å †ä¸Šå¯¹è±¡çš„å¼•ç”¨ã€‚é™æ€å˜é‡ä¹Ÿå¯ä»¥å­˜æ”¾å †å¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡é™æ€å˜é‡å°±å¯ä»¥å®ç°å¯¹è±¡åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ã€‚<br>å †ç©ºé—´æœ‰ä¸‰ä¸ªéœ€è¦å…³æ³¨çš„å€¼ï¼Œusedã€totalã€maxã€‚usedæŒ‡çš„æ˜¯å½“å‰å·²ä½¿ç”¨çš„å †å†…å­˜ï¼Œtotalæ˜¯javaè™šæ‹Ÿæœºå·²ç»åˆ†é…çš„å¯ç”¨å †å†…å­˜ï¼Œmaxæ˜¯javaè™šæ‹Ÿæœºå¯ä»¥åˆ†é…çš„æœ€å¤§å †å†…å­˜ã€‚<br><strong>ä¸æ˜¯å½“used = max = totalçš„æ—¶å€™ï¼Œå †å†…å­˜å°±æº¢å‡º</strong></p>
<hr>
<h5 id="æ–¹æ³•åŒºï¼š"><a href="#æ–¹æ³•åŒºï¼š" class="headerlink" title="æ–¹æ³•åŒºï¼š"></a>æ–¹æ³•åŒºï¼š</h5><p>æ–¹æ³•åŒºå­˜æ”¾åŸºç¡€ä¿¡æ¯çš„ä½ç½®ï¼Œçº¿ç¨‹å…±äº«çš„ï¼Œä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>ç±»çš„å…ƒä¿¡æ¯ï¼Œä¿å­˜æ‰€æœ‰ç±»çš„åŸºæœ¬ä¿¡æ¯</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œä¿å­˜äº†å­—èŠ‚ç æ–‡ä»¶ä¸­å¸¸é‡æ± å†…å®¹</li>
<li>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œä¿å­˜äº†å­—ç¬¦ä¸²å¸¸é‡</li>
</ul>
<h6 id="å…ƒä¿¡æ¯"><a href="#å…ƒä¿¡æ¯" class="headerlink" title="å…ƒä¿¡æ¯"></a>å…ƒä¿¡æ¯</h6><p>ä¸€èˆ¬ç§°ä¹‹ä¸ºInstanceKlasså¯¹è±¡ã€‚åœ¨ç±»çš„åŠ è½½é˜¶æ®µå®Œæˆã€‚å…¶ä¸­å°±åŒ…å«äº†ç±»çš„å­—æ®µã€æ–¹æ³•ç­‰å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å†…å®¹ï¼ŒåŒæ—¶è¿˜ä¿å­˜äº†è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„è™šæ–¹æ³•è¡¨ï¼ˆå®ç°å¤šæ€çš„åŸºç¡€ï¼‰ç­‰ä¿¡æ¯ã€‚</p>
<h6 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h6><p>å­—èŠ‚ç æ–‡ä»¶ä¸­é€šè¿‡ç¼–å·æŸ¥è¡¨çš„æ–¹å¼æ‰¾åˆ°å¸¸é‡ï¼Œè¿™ç§å¸¸é‡æ± ç§°ä¸ºé™æ€å¸¸é‡æ± ã€‚å½“å¸¸é‡æ± åŠ è½½åˆ°å†…å­˜ä¸­ä¹‹åï¼Œå¯ä»¥é€šè¿‡å†…å­˜åœ°å€å¿«é€Ÿçš„å®šä½åˆ°å¸¸é‡æ± ä¸­çš„å†…å®¹ï¼Œè¿™ç§å¸¸é‡æ± ç§°ä¸ºè¿è¡Œæ—¶å¸¸é‡æ± ã€‚<img src="/2024/06/24/02/%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%AE%9E%E7%8E%B0.png"></p>
<h6 id="å­—ç¬¦ä¸²å¸¸é‡æ± "><a href="#å­—ç¬¦ä¸²å¸¸é‡æ± " class="headerlink" title="å­—ç¬¦ä¸²å¸¸é‡æ± "></a>å­—ç¬¦ä¸²å¸¸é‡æ± </h6><p>å­—ç¬¦ä¸²çš„æ‹¼æ¥æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„ç°æœ‰å¯¹è±¡ã€‚<br>è€Œç›´æ¥ç”¨ä¸¤ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æ˜¯æ”¾åœ¨å¸¸é‡æ± çš„ï¼Œä¸æ˜¯æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
ç­”æ¡ˆæ˜¯<span class="token boolean">false</span><span class="token punctuation">,</span>å› ä¸º<span class="token string">"abc"</span>æ˜¯ç›´æ¥æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± çš„ï¼Œè€Œ<span class="token keyword">new</span> å‡ºæ¥çš„æ˜¯æ”¾åœ¨å †å†…å­˜ä¸­ï¼Œä¸¤è€…æ‰€åœ¨çš„ä½ç½®ä¸åŒã€‚
<span class="token number">1.</span>

<span class="token comment">/**
 * å­—ç¬¦ä¸²å¸¸é‡æ± æ¡ˆä¾‹
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">"2"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> c <span class="token operator">=</span> <span class="token string">"12"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> d <span class="token operator">=</span> <span class="token string">"1"</span> <span class="token operator">+</span> <span class="token string">"2"</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ç­”æ¡ˆæ˜¯<span class="token boolean">true</span><span class="token punctuation">,</span>åœ¨ç¼–è¯‘é˜¶æ®µå°±æŠŠ <span class="token string">"1"</span> <span class="token operator">+</span> <span class="token string">"2"</span>è¿æ¥åœ¨ä¸€èµ·äº†
<span class="token number">2.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">"2"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> c <span class="token operator">=</span> <span class="token string">"12"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> d <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ç­”æ¡ˆæ˜¯<span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>jdk8ä¹‹åè¿è¡Œæ—¶å¸¸é‡æ± æ”¾åœ¨å…ƒç©ºé—´ï¼Œè€Œå­—ç¬¦ä¸²å¸¸é‡æ± è¿˜åœ¨å †ä¸­ã€‚<br><strong>String.intern()æ–¹æ³•æ˜¯å¯ä»¥æ‰‹åŠ¨å°†å­—ç¬¦ä¸²æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­</strong></p>
<h5 id="ç›´æ¥å†…å­˜"><a href="#ç›´æ¥å†…å­˜" class="headerlink" title="ç›´æ¥å†…å­˜"></a>ç›´æ¥å†…å­˜</h5><p>ç›´æ¥å†…å­˜ä¸å±äºJavaè¿è¡Œæ—¶çš„å†…å­˜åŒºåŸŸï¼ŒNIOæœºåˆ¶ä¸­ä½¿ç”¨ç›´æ¥å†…å­˜æ¥è§£å†³</p>
<ol>
<li>Javaå †ä¸­çš„å¯¹è±¡å¦‚æœä¸å†ä½¿ç”¨è¦å›æ”¶ï¼Œå›æ”¶æ—¶ä¼šå½±å“å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ã€‚</li>
<li>IOæ“ä½œæ¯”å¦‚è¯»æ–‡ä»¶ï¼Œéœ€è¦å…ˆæŠŠæ–‡ä»¶è¯»å…¥ç›´æ¥å†…å­˜ï¼ˆç¼“å†²åŒºï¼‰å†æŠŠæ•°æ®å¤åˆ¶åˆ°Javaå †ä¸­ã€‚<br>ç°åœ¨ç›´æ¥æ”¾å…¥ç›´æ¥å†…å­˜å³å¯ï¼ŒåŒæ—¶Javaå †ä¸Šç»´æŠ¤ç›´æ¥å†…å­˜çš„å¼•ç”¨ï¼Œå‡å°‘äº†æ•°æ®å¤åˆ¶çš„å¼€é”€ã€‚å†™æ–‡ä»¶ä¹Ÿæ˜¯ç±»ä¼¼çš„æ€è·¯ã€‚<img src="/2024/06/24/02/%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6.png"></li>
</ol>
<h3 id="æ‰§è¡Œå¼•æ“"><a href="#æ‰§è¡Œå¼•æ“" class="headerlink" title="æ‰§è¡Œå¼•æ“"></a>æ‰§è¡Œå¼•æ“</h3><h3 id="æœ¬åœ°æ¥å£"><a href="#æœ¬åœ°æ¥å£" class="headerlink" title="æœ¬åœ°æ¥å£"></a>æœ¬åœ°æ¥å£</h3><h3 id="åƒåœ¾æ”¶é›†å™¨GC"><a href="#åƒåœ¾æ”¶é›†å™¨GC" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨GC"></a>åƒåœ¾æ”¶é›†å™¨GC</h3><p>GC (Garbage Collection)ï¼Œå †æ˜¯åƒåœ¾å›æ”¶æœ€ä¸»è¦çš„åŒºåŸŸï¼Œæ‰€ä»¥ä¹Ÿè¢«ä¹˜åGCå †ã€‚<br>å¦‚ä½•æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶ï¼šä½¿ç”¨<code>System.gc()</code>ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸ä¼šç«‹å³è¿›è¡Œå›æ”¶ï¼Œåªæ˜¯å‘è™šæ‹Ÿæœºå‘é€ä¸€ä¸ªåƒåœ¾å›æ”¶çš„è¯·æ±‚ã€‚</p>
<h4 id="ä¸ç”±GCè¿›è¡Œå›æ”¶çš„éƒ¨åˆ†"><a href="#ä¸ç”±GCè¿›è¡Œå›æ”¶çš„éƒ¨åˆ†" class="headerlink" title="ä¸ç”±GCè¿›è¡Œå›æ”¶çš„éƒ¨åˆ†"></a>ä¸ç”±GCè¿›è¡Œå›æ”¶çš„éƒ¨åˆ†</h4><p>çº¿ç¨‹ä¸å…±äº«çš„éƒ¨åˆ†ä¸éœ€è¦GCè¿›è¡Œå›æ”¶ï¼Œå› ä¸ºéšç€çº¿ç¨‹çš„é”€æ¯ï¼Œå¯¹åº”çš„æ–¹æ³•çš„æ ˆå¸§å°±ä¼šè‡ªåŠ¨å¼¹å‡ºæ ˆå¹¶ä¸”é‡Šæ”¾æ‰å¯¹åº”çš„å†…å­˜ã€‚</p>
<h4 id="è¿›è¡Œå›æ”¶çš„éƒ¨åˆ†"><a href="#è¿›è¡Œå›æ”¶çš„éƒ¨åˆ†" class="headerlink" title="è¿›è¡Œå›æ”¶çš„éƒ¨åˆ†"></a>è¿›è¡Œå›æ”¶çš„éƒ¨åˆ†</h4><h5 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h5><p>ä¸»è¦å›æ”¶ä¸å†ä½¿ç”¨çš„ç±»ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶</p>
<ol>
<li>è¿™ä¸ªç±»æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½è¢«å›æ”¶ï¼Œåœ¨é˜Ÿä¸­ä¸å­˜åœ¨è¯¥ç±»çš„å®ä¾‹å¯¹è±¡ä»¥åŠå­ç±»å¯¹è±¡</li>
<li>åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œç±»åŠ è½½å™¨çš„ä»»åŠ¡å®Œæˆä¹‹åå¼•ç”¨è¢«å»é™¤åå°±ä¼šè¢«å›æ”¶</li>
<li>java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨<img src="/2024/06/24/02/Class.png"></li>
</ol>
<h5 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h5><p>Javaä¸­çš„å¯¹è±¡èƒ½å¦è¢«å›æ”¶æ˜¯æ ¹æ®å¯¹è±¡æ˜¯å¦è¢«å¼•ç”¨æ¥å†³å®šçš„ã€‚å¦‚æœå¯¹è±¡è¢«å¼•ç”¨å°±ä¸å…è®¸è¢«å›æ”¶<br>ä¸»è¦çš„ç®—æ³•ï¼š</p>
<h6 id="å¼•ç”¨è®¡æ•°æ³•"><a href="#å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°æ³•"></a>å¼•ç”¨è®¡æ•°æ³•</h6><p>ä¸ºæ¯ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆï¼Œå¯¹è±¡è¢«å¼•ç”¨æ—¶+1ï¼Œå–æ¶ˆå¼•ç”¨æ—¶-dã€‚<br>ç¼ºç‚¹æ˜¯ï¼š</p>
<ol>
<li>æ¯æ¬¡å¼•ç”¨éƒ½è¦ç»´æŠ¤è®¡æ•°å™¨ï¼Œä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½</li>
<li>å­˜åœ¨å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ŒAå¼•ç”¨Bï¼ŒBå¼•ç”¨Aå°±æ— æ³•å›æ”¶äº†</li>
</ol>
<h6 id="å¯è¾¾æ€§åˆ†ææ³•"><a href="#å¯è¾¾æ€§åˆ†ææ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†ææ³•"></a>å¯è¾¾æ€§åˆ†ææ³•</h6><p>å¯è¾¾æ€§åˆ†ææ³•å°†å¯¹è±¡åˆ†ä¸ºï¼šåƒåœ¾å›æ”¶çš„æ ¹å¯¹è±¡ (GC Root)å’Œæ™®é€šå¯¹è±¡ï¼Œå¯¹è±¡ä¹‹é—´å­˜åœ¨å¼•ç”¨å…³ç³»ã€‚<br>å¯è¾¾æ€§åˆ†æå°±æ˜¯å¦‚æœæŸä¸ªå¯¹è±¡åˆ°GC Rootæ˜¯å¯è¾¾çš„ï¼Œå°±ä¸èƒ½è¢«å›æ”¶ã€‚<br>å“ªäº›å¯¹è±¡è¢«ç§°ä¹‹ä¸ºGC Rootå¯¹è±¡å‘¢ï¼Ÿ</p>
<ul>
<li>çº¿ç¨‹Threadå¯¹è±¡ï¼Œå¼•ç”¨çº¿ç¨‹æ ˆå¸§ä¸­çš„æ–¹æ³•å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰ã€‚</li>
<li>ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½çš„java.lang.Classå¯¹è±¡ï¼Œå¼•ç”¨ç±»ä¸­çš„é™æ€å˜é‡ã€‚<img src="/2024/06/24/02/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%AF%B9%E8%B1%A1.png"></li>
<li>ç›‘è§†å™¨å¯¹è±¡ï¼Œç”¨æ¥ä¿å­˜åŒæ­¥é”synchronizedå…³é”®å­—æŒæœ‰çš„å¯¹è±¡ã€‚<img src="/2024/06/24/02/%E7%9B%91%E8%A7%86%E5%99%A8%E5%AF%B9%E8%B1%A1.png"></li>
<li>æœ¬åœ°æ–¹æ³•è°ƒç”¨æ—¶ä½¿ç”¨çš„å…¨å±€å¯¹è±¡ã€‚</li>
</ul>
<h4 id="å¸¸è§çš„å¼•ç”¨å¯¹è±¡"><a href="#å¸¸è§çš„å¼•ç”¨å¯¹è±¡" class="headerlink" title="å¸¸è§çš„å¼•ç”¨å¯¹è±¡"></a>å¸¸è§çš„å¼•ç”¨å¯¹è±¡</h4><p>å¯è¾¾æ€§ç®—æ³•ä¸­æè¿°çš„å¯¹è±¡å¼•ç”¨ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å¼ºå¼•ç”¨ï¼ŒJavaä¸­è¿˜è®¾è®¡äº†å‡ ç§å…¶ä»–å¼•ç”¨æ–¹å¼ï¼š</p>
<ul>
<li>è½¯å¼•ç”¨</li>
<li>å¼±å¼•ç”¨</li>
<li>è™šå¼•ç”¨</li>
<li>ç»ˆç»“å™¨å¼•ç”¨</li>
</ul>
<h5 id="è½¯å¼•ç”¨"><a href="#è½¯å¼•ç”¨" class="headerlink" title="è½¯å¼•ç”¨"></a>è½¯å¼•ç”¨</h5><p>å¦‚æœä¸€ä¸ªå¯¹è±¡åªæœ‰è½¯å¼•ç”¨å…³è”åˆ°ä»–æ—¶ï¼Œç¨‹åºå†…å­˜ä¸è¶³æ—¶å›å°†å…¶ä¸­çš„æ•°æ®åŠé€†è¡Œå›æ”¶ï¼Œè½¯å¼•ç”¨å¸¸ç”¨äºç¼“å­˜ä¸­<br>å¥½å¤„å°±æ˜¯ç”¨ä½œç¼“å­˜å¿«é€Ÿä»å†…å­˜ä¸­è¯»å–ï¼Œå³ä½¿è¢«é‡Šæ”¾äº†ä¹Ÿå¯ä»¥é‡æ–°è·å–ï¼Œå‡å°‘å†…å­˜æº¢å‡ºçš„å¯èƒ½æ€§<br>è½¯å¼•ç”¨å¯¹è±¡æœ¬èº«ï¼Œä¹Ÿéœ€è¦è¢«å¼ºå¼•ç”¨ï¼Œå¦åˆ™è½¯å¼•ç”¨å¯¹è±¡ä¹Ÿä¼šè¢«å›æ”¶æ‰ã€‚<br>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">/**
 * è½¯å¼•ç”¨æ¡ˆä¾‹2 - åŸºæœ¬ä½¿ç”¨
 */
public class SoftReferenceDemo2 {
    public static void main(String[] args) throws IOException {

        byte[] bytes = new byte[1024 * 1024 * 100];
        SoftReference&lt;byte[]&gt; softReference = new SoftReference&lt;byte[]&gt;(bytes);
        bytes = null;
        System.out.println(softReference.get());

        byte[] bytes2 = new byte[1024 * 1024 * 100];
        System.out.println(softReference.get());
//
//        byte[] bytes3 = new byte[1024 * 1024 * 100];
//        softReference = null;
//        System.gc();
//
//        System.in.read();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¦‚æœè½¯å¼•ç”¨å¯¹è±¡ä¸­çš„æ•°æ®å·²ç»è¢«å›æ”¶äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡æœ¬èº«ä¹Ÿå¯ä»¥è¢«å›æ”¶äº†<br>SoftReferenceæä¾›äº†ä¸€å¥—é˜Ÿåˆ—æœºåˆ¶ï¼š</p>
<ol>
<li>è½¯å¼•ç”¨åˆ›å»ºæ—¶ï¼Œé€šè¿‡æ„é€ å™¨ä¼ å…¥å¼•ç”¨é˜Ÿåˆ—</li>
<li>åœ¨è½¯å¼•ç”¨ä¸­åŒ…å«çš„å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œè¯¥è½¯å¼•ç”¨å¯¹è±¡ä¼šè¢«æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—</li>
<li>é€šè¿‡ä»£ç éå†å¼•ç”¨é˜Ÿåˆ—ï¼Œå°†SoftReferenceçš„å¼ºå¼•ç”¨åˆ é™¤<pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">/**
 * è½¯å¼•ç”¨æ¡ˆä¾‹3 - å¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨
 */
public class SoftReferenceDemo3 {

    public static void main(String[] args) throws IOException {

        ArrayList&lt;SoftReference&gt; softReferences = new ArrayList&lt;&gt;();
        ReferenceQueue&lt;byte[]&gt; queues = new ReferenceQueue&lt;byte[]&gt;();
        for (int i = 0; i &lt; 10; i++) {
            byte[] bytes = new byte[1024 * 1024 * 100];
            SoftReference studentRef = new SoftReference&lt;byte[]&gt;(bytes,queues);
            softReferences.add(studentRef);
        }

        SoftReference&lt;byte[]&gt; ref = null;
        int count = 0;
        while ((ref = (SoftReference&lt;byte[]&gt;) queues.poll()) != null) {
            count++;
        }
        System.out.println(count);

    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h5 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h5><p>å¼±å¼•ç”¨æ•´ä½“ä¸è½¯å¼•ç”¨åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯å¼±å¼•ç”¨ä¸ç®¡å†…å­˜å¤Ÿä¸å¤Ÿéƒ½ä¼šç›´æ¥è¢«å›æ”¶</p>
<pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">package chapter04.weak;

import java.io.IOException;
import java.lang.ref.WeakReference;

/**
 * å¼±å¼•ç”¨æ¡ˆä¾‹ - åŸºæœ¬ä½¿ç”¨
 */
public class WeakReferenceDemo2 {
    public static void main(String[] args) throws IOException {

        byte[] bytes = new byte[1024 * 1024 * 100];
        WeakReference&lt;byte[]&gt; weakReference = new WeakReference&lt;byte[]&gt;(bytes);
        bytes = null;
        System.out.println(weakReference.get());

        System.gc();

        System.out.println(weakReference.get());
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="è™šå¼•ç”¨å’Œç»ˆç»“å™¨å¼•ç”¨"><a href="#è™šå¼•ç”¨å’Œç»ˆç»“å™¨å¼•ç”¨" class="headerlink" title="è™šå¼•ç”¨å’Œç»ˆç»“å™¨å¼•ç”¨"></a>è™šå¼•ç”¨å’Œç»ˆç»“å™¨å¼•ç”¨</h5><p>è¿™ä¸¤ç§å¼•ç”¨åœ¨å¸¸è§„å¼€å‘ä¸­æ˜¯ä¸ä¼šä½¿ç”¨çš„ã€‚</p>
<ul>
<li>è™šå¼•ç”¨ä¹Ÿå«å¹½çµå¼•ç”¨/å¹»å½±å¼•ç”¨ï¼Œä¸èƒ½é€šè¿‡è™šå¼•ç”¨å¯¹è±¡è·å–åˆ°åŒ…å«çš„å¯¹è±¡ã€‚è™šå¼•ç”¨å”¯ä¸€çš„ç”¨é€”æ˜¯å½“å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶æ—¶å¯ä»¥æ¥æ”¶åˆ°å¯¹åº”çš„é€šçŸ¥ã€‚Javaä¸­ä½¿ç”¨PhantomReferenceå®ç°äº†è™šå¼•ç”¨ï¼Œç›´æ¥å†…å­˜ä¸­ä¸ºäº†åŠæ—¶çŸ¥é“ç›´æ¥å†…å­˜å¯¹è±¡ä¸å†ä½¿ç”¨ï¼Œä»è€Œå›æ”¶å†…å­˜ï¼Œä½¿ç”¨äº†è™šå¼•ç”¨æ¥å®ç°ã€‚</li>
<li>ç»ˆç»“å™¨å¼•ç”¨æŒ‡çš„æ˜¯åœ¨å¯¹è±¡éœ€è¦è¢«å›æ”¶æ—¶ï¼Œç»ˆç»“å™¨å¼•ç”¨ä¼šå…³è”å¯¹è±¡å¹¶æ”¾ç½®åœ¨Finalizerç±»ä¸­çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œåœ¨ç¨åç”±ä¸€æ¡ç”±FinalizerThreadçº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è·å–å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œå¯¹è±¡çš„finalizeæ–¹æ³•ï¼Œåœ¨å¯¹è±¡ç¬¬äºŒæ¬¡è¢«å›æ”¶æ—¶ï¼Œè¯¥å¯¹è±¡æ‰çœŸæ­£çš„è¢«å›æ”¶ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥åœ¨finalizeæ–¹æ³•ä¸­å†å°†è‡ªèº«å¯¹è±¡ä½¿ç”¨å¼ºå¼•ç”¨å…³è”ä¸Šï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·åšã€‚<pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">package chapter04.finalreference;

/**
 * ç»ˆç»“å™¨å¼•ç”¨æ¡ˆä¾‹
 */
public class FinalizeReferenceDemo {
    public static FinalizeReferenceDemo reference = null;

    public void alive() {
        System.out.println("å½“å‰å¯¹è±¡è¿˜å­˜æ´»");
    }

    @Override
    protected void finalize() throws Throwable {
        try{
            System.out.println("finalize()æ‰§è¡Œäº†...");
            //è®¾ç½®å¼ºå¼•ç”¨è‡ªæ•‘
            reference = this;
        }finally {
            super.finalize();
        }
    }

    public static void main(String[] args) throws Throwable {
        reference = new FinalizeReferenceDemo();
       test();
       test();
    }

    private static void test() throws InterruptedException {
        reference = null;
        //å›æ”¶å¯¹è±¡
        System.gc();
        //æ‰§è¡Œfinalizeæ–¹æ³•çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œä¼‘çœ 500msç­‰å¾…ä¸€ä¸‹
        Thread.sleep(500);
        if (reference != null) {
            reference.alive();
        } else {
            System.out.println("å¯¹è±¡å·²è¢«å›æ”¶");
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h4 id="åƒåœ¾å›æ”¶ç®—æ³•"><a href="#åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="åƒåœ¾å›æ”¶ç®—æ³•"></a>åƒåœ¾å›æ”¶ç®—æ³•</h4><ol>
<li>æ‰¾åˆ°å†…å­˜ä¸­å­˜æ´»çš„å¯¹è±¡</li>
<li>é‡Šæ”¾ä¸å†å­˜æ´»å¯¹è±¡çš„å†…å­˜ï¼Œä½¿å¾—ç¨‹åºèƒ½å†æ¬¡åˆ©ç”¨è¿™éƒ¨åˆ†ç©ºé—´</li>
</ol>
<h4 id="åƒåœ¾å›æ”¶ç®—æ³•çš„å†å²å’Œåˆ†ç±»"><a href="#åƒåœ¾å›æ”¶ç®—æ³•çš„å†å²å’Œåˆ†ç±»" class="headerlink" title="åƒåœ¾å›æ”¶ç®—æ³•çš„å†å²å’Œåˆ†ç±»"></a>åƒåœ¾å›æ”¶ç®—æ³•çš„å†å²å’Œåˆ†ç±»</h4><p>1960å¹´John McCarthyå‘å¸ƒäº†ç¬¬ä¸€ä¸ªGCç®—æ³•ï¼šæ ‡è®°-æ¸…é™¤ç®—æ³•ã€‚<br>1963å¹´Marvin L. Minsky å‘å¸ƒäº†å¤åˆ¶ç®—æ³•ã€‚</p>
<p>æœ¬è´¨ä¸Šåç»­æ‰€æœ‰çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œéƒ½æ˜¯åœ¨ä¸Šè¿°ä¸¤ç§ç®—æ³•çš„åŸºç¡€ä¸Šä¼˜åŒ–è€Œæ¥ã€‚</p>
<h5 id="æ ‡è®°æ¸…é™¤ç®—æ³•"><a href="#æ ‡è®°æ¸…é™¤ç®—æ³•" class="headerlink" title="æ ‡è®°æ¸…é™¤ç®—æ³•"></a>æ ‡è®°æ¸…é™¤ç®—æ³•</h5><p>GCRootåŒ…å«çš„å¯¹è±¡ï¼š</p>
<blockquote>
<p>â€¢ è™šæ‹Ÿæœºæ ˆ(æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨)ä¸­å¼•â½¤çš„å¯¹è±¡<br>â€¢ æœ¬åœ°â½…æ³•æ ˆ(Native â½…æ³•)ä¸­å¼•â½¤çš„å¯¹è±¡<br>â€¢ â½…æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•â½¤çš„å¯¹è±¡<br>â€¢ â½…æ³•åŒºä¸­å¸¸é‡å¼•â½¤çš„å¯¹è±¡<br>â€¢ æ‰€æœ‰è¢«åŒæ­¥é”æŒæœ‰çš„å¯¹è±¡<br>â€¢ JNIï¼ˆJava Native Interfaceï¼‰å¼•â½¤çš„å¯¹è±¡</p>
</blockquote>
<p>æ ‡è®°æ¸…é™¤ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>æ ‡è®°é˜¶æ®µï¼Œå°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ã€‚Javaä¸­ä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Œä»GC Rootå¼€å§‹é€šè¿‡å¼•ç”¨é“¾éå†å‡ºæ‰€æœ‰å­˜æ´»å¯¹è±¡ã€‚ä»GC Rootå¯¹è±¡å¼€å§‹æ‰«æï¼Œå°†å¯¹è±¡Aã€Bã€Cåœ¨å¼•ç”¨é“¾ä¸Šçš„å¯¹è±¡æ ‡è®°å‡ºæ¥</li>
<li>æ¸…é™¤é˜¶æ®µï¼Œä»å†…å­˜ä¸­åˆ é™¤æ²¡æœ‰è¢«æ ‡è®°ä¹Ÿå°±æ˜¯éå­˜æ´»å¯¹è±¡ã€‚å°†æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡æ¸…ç†æ‰ï¼Œæ‰€ä»¥å¯¹è±¡Då°±è¢«æ¸…ç†æ‰äº†ã€‚<br>ç¼ºç‚¹ï¼š</li>
<li>ç¢ç‰‡åŒ–é—®é¢˜ç”±äºå†…å­˜æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥åœ¨å¯¹è±¡è¢«åˆ é™¤ä¹‹åï¼Œå†…å­˜ä¸­ä¼šå‡ºç°å¾ˆå¤šç»†å°çš„å¯ç”¨å†…å­˜å•å…ƒã€‚å¦‚æœæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç©ºé—´ï¼Œå¾ˆæœ‰å¯èƒ½è¿™äº›å†…å­˜å•å…ƒçš„å¤§å°è¿‡å°æ— æ³•è¿›è¡Œåˆ†é…</li>
<li>åˆ†é…é€Ÿåº¦æ…¢ã€‚ç”±äºå†…å­˜ç¢ç‰‡çš„å­˜åœ¨ï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªç©ºé—²é“¾è¡¨ï¼Œææœ‰å¯èƒ½å‘ç”Ÿæ¯æ¬¡éœ€è¦éå†åˆ°é“¾è¡¨çš„æœ€åæ‰èƒ½è·å¾—åˆé€‚çš„å†…å­˜ç©ºé—´ã€‚ æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªé“¾è¡¨æ¥ç»´æŠ¤ï¼Œå“ªäº›ç©ºé—´å¯ä»¥åˆ†é…å¯¹è±¡ï¼Œå¾ˆæœ‰å¯èƒ½éœ€è¦éå†è¿™ä¸ªé“¾è¡¨åˆ°æœ€åï¼Œæ‰èƒ½å‘ç°è¿™å—ç©ºé—´è¶³å¤Ÿæˆ‘ä»¬å»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å¦‚ä¸‹å›¾ï¼Œéå†åˆ°æœ€åæ‰å‘ç°æœ‰è¶³å¤Ÿçš„ç©ºé—´åˆ†é…3ä¸ªå­—èŠ‚çš„å¯¹è±¡äº†ã€‚å¦‚æœé“¾è¡¨å¾ˆé•¿ï¼Œéå†ä¹Ÿä¼šèŠ±è´¹è¾ƒé•¿çš„æ—¶é—´ã€‚</li>
</ol>
<h5 id="å¤åˆ¶ç®—æ³•"><a href="#å¤åˆ¶ç®—æ³•" class="headerlink" title="å¤åˆ¶ç®—æ³•"></a>å¤åˆ¶ç®—æ³•</h5><ol>
<li>å‡†å¤‡ä¸¤å—ç©ºé—´Fromç©ºé—´å’ŒToç©ºé—´ï¼Œæ¯æ¬¡åœ¨å¯¹è±¡åˆ†é…é˜¶æ®µï¼Œåªèƒ½ä½¿ç”¨å…¶ä¸­ä¸€å—ç©ºé—´ï¼ˆFromç©ºé—´ï¼‰ã€‚</li>
<li>åœ¨åƒåœ¾å›æ”¶GCé˜¶æ®µï¼Œå°†Fromä¸­å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°Toç©ºé—´ã€‚</li>
<li>å°†ä¸¤å—ç©ºé—´çš„Fromå’ŒToåå­—äº’æ¢ã€‚ä¸‹æ¬¡ä¾ç„¶åœ¨Fromç©ºé—´ä¸Šåˆ›å»ºå¯¹è±¡ã€‚<br>ä¼˜ç‚¹ï¼š</li>
</ol>
<ul>
<li>ååé‡é«˜ï¼Œå¤åˆ¶ç®—æ³•åªéœ€è¦éå†ä¸€æ¬¡å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°Toç©ºé—´å³å¯ï¼Œæ¯”æ ‡è®°-æ•´ç†ç®—æ³•å°‘äº†ä¸€æ¬¡éå†çš„è¿‡ç¨‹ï¼Œå› è€Œæ€§èƒ½è¾ƒå¥½ï¼Œä½†æ˜¯ä¸å¦‚æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼Œå› ä¸ºæ ‡è®°æ¸…é™¤ç®—æ³•ä¸éœ€è¦è¿›è¡Œå¯¹è±¡çš„ç§»åŠ¨</li>
<li>ä¸ä¼šå‘ç”Ÿç¢ç‰‡åŒ–ï¼Œå¤åˆ¶ç®—æ³•åœ¨å¤åˆ¶ä¹‹åå°±ä¼šå°†å¯¹è±¡æŒ‰é¡ºåºæ”¾å…¥Toç©ºé—´ä¸­ï¼Œæ‰€ä»¥å¯¹è±¡ä»¥å¤–çš„åŒºåŸŸéƒ½æ˜¯å¯ç”¨ç©ºé—´ï¼Œä¸å­˜åœ¨ç¢ç‰‡åŒ–å†…å­˜ç©ºé—´ã€‚<br>ç¼ºç‚¹ï¼š<br>å†…å­˜ä½¿ç”¨æ•ˆç‡ä½ï¼Œæ¯æ¬¡åªèƒ½è®©ä¸€åŠçš„å†…å­˜ç©ºé—´æ¥ä¸ºåˆ›å»ºå¯¹è±¡ä½¿ç”¨ã€‚</li>
</ul>
<h5 id="æ ‡è®°æ•´ç†ç®—æ³•"><a href="#æ ‡è®°æ•´ç†ç®—æ³•" class="headerlink" title="æ ‡è®°æ•´ç†ç®—æ³•"></a>æ ‡è®°æ•´ç†ç®—æ³•</h5><p>æ ‡è®°æ•´ç†ç®—æ³•ä¹Ÿå«æ ‡è®°å‹ç¼©ç®—æ³•ï¼Œæ˜¯å¯¹æ ‡è®°æ¸…ç†ç®—æ³•ä¸­å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡é—®é¢˜çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>æ ‡è®°é˜¶æ®µï¼Œå°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ã€‚Javaä¸­ä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Œä»GC Rootå¼€å§‹é€šè¿‡å¼•ç”¨é“¾éå†å‡ºæ‰€æœ‰å­˜æ´»å¯¹è±¡ã€‚</li>
<li>æ•´ç†é˜¶æ®µï¼Œå°†å­˜æ´»å¯¹è±¡ç§»åŠ¨åˆ°å †çš„ä¸€ç«¯ã€‚æ¸…ç†æ‰å­˜æ´»å¯¹è±¡çš„å†…å­˜ç©ºé—´ã€‚<br>ä¼˜ç‚¹ï¼š</li>
</ol>
<ul>
<li>å†…å­˜ä½¿ç”¨æ•ˆç‡é«˜ï¼Œæ•´ä¸ªå †å†…å­˜éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä¸ä¼šåƒå¤åˆ¶ç®—æ³•åªèƒ½ä½¿ç”¨åŠä¸ªå †å†…å­˜</li>
<li>ä¸ä¼šå‘ç”Ÿç¢ç‰‡åŒ–ï¼Œåœ¨æ•´ç†é˜¶æ®µå¯ä»¥å°†å¯¹è±¡å¾€å†…å­˜çš„ä¸€ä¾§è¿›è¡Œç§»åŠ¨ï¼Œå‰©ä¸‹çš„ç©ºé—´éƒ½æ˜¯å¯ä»¥åˆ†é…å¯¹è±¡çš„æœ‰æ•ˆç©ºé—´<br>ç¼ºç‚¹ï¼š<br>æ•´ç†é˜¶æ®µçš„æ•ˆç‡ä¸é«˜ï¼Œæ•´ç†ç®—æ³•æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚Lisp2æ•´ç†ç®—æ³•éœ€è¦å¯¹æ•´ä¸ªå †ä¸­çš„å¯¹è±¡æœç´¢3æ¬¡ï¼Œæ•´ä½“æ€§èƒ½ä¸ä½³ã€‚å¯ä»¥é€šè¿‡Two-Fingerã€è¡¨æ ¼ç®—æ³•ã€ImmixGCç­‰é«˜æ•ˆçš„æ•´ç†ç®—æ³•ä¼˜åŒ–æ­¤é˜¶æ®µçš„æ€§èƒ½</li>
</ul>
<h5 id="åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•"><a href="#åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•"></a>åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•</h5><p>ç°ä»£ä¼˜ç§€çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œä¼šå°†ä¸Šè¿°æè¿°çš„åƒåœ¾å›æ”¶ç®—æ³•ç»„åˆè¿›è¡Œä½¿ç”¨ï¼Œå…¶ä¸­åº”ç”¨æœ€å¹¿çš„å°±æ˜¯åˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•(Generational GC)ã€‚<br>åˆ†ä»£åƒåœ¾å›æ”¶å°†æ•´ä¸ªå†…å­˜åŒºåŸŸåˆ’åˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼š<img src="/2024/06/24/02/%E5%88%92%E5%88%86.png"></p>
<ol>
<li>åˆ†ä»£å›æ”¶æ—¶ï¼Œåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œé¦–å…ˆä¼šè¢«æ”¾å…¥Edenä¼Šç”¸å›­åŒºã€‚<img src="/2024/06/24/02/Eden.png"></li>
<li>éšç€å¯¹è±¡åœ¨EdenåŒºè¶Šæ¥è¶Šå¤šï¼Œå¦‚æœEdenåŒºæ»¡ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡å·²ç»æ— æ³•æ”¾å…¥ï¼Œå°±ä¼šè§¦å‘å¹´è½»ä»£çš„GCï¼Œç§°ä¸ºMinor GCæˆ–è€…Young GCã€‚Minor GCä¼šæŠŠéœ€è¦edenä¸­å’ŒFroméœ€è¦å›æ”¶çš„å¯¹è±¡å›æ”¶ï¼ŒæŠŠæ²¡æœ‰å›æ”¶çš„å¯¹è±¡æ”¾å…¥ToåŒºã€‚<img src="/2024/06/24/02/MinorGC.png"></li>
<li>æ¥ä¸‹æ¥ï¼ŒS0ä¼šå˜æˆToåŒºï¼ŒS1å˜æˆFromåŒºã€‚å½“edenåŒºæ»¡æ—¶å†å¾€é‡Œæ”¾å…¥å¯¹è±¡ï¼Œä¾ç„¶ä¼šå‘ç”ŸMinor GCã€‚<img src="/2024/06/24/02/%E5%8F%98%E6%8D%A2.png"></li>
<li>å¦‚æœMinor GCåå¯¹è±¡çš„å¹´é¾„è¾¾åˆ°é˜ˆå€¼ï¼ˆæœ€å¤§15ï¼Œé»˜è®¤å€¼å’Œåƒåœ¾å›æ”¶å™¨æœ‰å…³ï¼‰ï¼Œå¯¹è±¡å°±ä¼šè¢«æ™‹å‡è‡³è€å¹´ä»£ã€‚<img src="/2024/06/24/02/%E8%BF%AD%E4%BB%A3.png"></li>
<li>å½“è€å¹´ä»£ä¸­ç©ºé—´ä¸è¶³ï¼Œæ— æ³•æ”¾å…¥æ–°çš„å¯¹è±¡æ—¶ï¼Œå…ˆå°è¯•minor gcå¦‚æœè¿˜æ˜¯ä¸è¶³ï¼Œå°±ä¼šè§¦å‘Full GCï¼ŒFull GCä¼šå¯¹æ•´ä¸ªå †è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å¦‚æœFull GCä¾ç„¶æ— æ³•å›æ”¶æ‰è€å¹´ä»£çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå½“å¯¹è±¡ç»§ç»­æ”¾å…¥è€å¹´ä»£æ—¶ï¼Œå°±ä¼šæŠ›å‡ºOut Of Memoryå¼‚å¸¸ã€‚</li>
</ol>
<p>ä¸ºä»€ä¹ˆåˆ†ä»£GCç®—æ³•è¦æŠŠå †åˆ†æˆå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å †å†…å­˜ä¸­å¯¹è±¡çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>ç³»ç»Ÿä¸­çš„å¤§éƒ¨åˆ†å¯¹è±¡ï¼Œéƒ½æ˜¯åˆ›å»ºå‡ºæ¥ä¹‹åå¾ˆå¿«å°±ä¸å†ä½¿ç”¨å¯ä»¥è¢«å›æ”¶ï¼Œæ¯”å¦‚ç”¨æˆ·è·å–è®¢å•æ•°æ®ï¼Œè®¢å•æ•°æ®è¿”å›ç»™ç”¨æˆ·ä¹‹åå°±å¯ä»¥é‡Šæ”¾äº†ã€‚</li>
<li>è€å¹´ä»£ä¸­ä¼šå­˜æ”¾é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼Œæ¯”å¦‚Springçš„å¤§éƒ¨åˆ†beanå¯¹è±¡ï¼Œåœ¨ç¨‹åºå¯åŠ¨ä¹‹åå°±ä¸ä¼šè¢«å›æ”¶äº†ã€‚</li>
<li>åœ¨è™šæ‹Ÿæœºçš„é»˜è®¤è®¾ç½®ä¸­ï¼Œæ–°ç”Ÿä»£å¤§å°è¦è¿œå°äºè€å¹´ä»£çš„å¤§å°ã€‚</li>
</ul>
<p>åˆ†ä»£GCç®—æ³•å°†å †åˆ†æˆå¹´è½»ä»£å’Œè€å¹´ä»£ä¸»è¦åŸå› æœ‰ï¼š</p>
<ol>
<li>å¯ä»¥é€šè¿‡è°ƒæ•´å¹´è½»ä»£å’Œè€å¹´ä»£çš„æ¯”ä¾‹æ¥é€‚åº”ä¸åŒç±»å‹çš„åº”ç”¨ç¨‹åºï¼Œæé«˜å†…å­˜çš„åˆ©ç”¨ç‡å’Œæ€§èƒ½ã€‚</li>
<li>æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä½¿ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œæ–°ç”Ÿä»£ä¸€èˆ¬é€‰æ‹©å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£å¯ä»¥é€‰æ‹©æ ‡è®°-æ¸…é™¤å’Œæ ‡è®°-æ•´ç†ç®—æ³•ï¼Œç”±ç¨‹åºå‘˜æ¥é€‰æ‹©çµæ´»åº¦è¾ƒé«˜ã€‚</li>
<li>åˆ†ä»£çš„è®¾è®¡ä¸­å…è®¸åªå›æ”¶æ–°ç”Ÿä»£ï¼ˆminor gcï¼‰ï¼Œå¦‚æœèƒ½æ»¡è¶³å¯¹è±¡åˆ†é…çš„è¦æ±‚å°±ä¸éœ€è¦å¯¹æ•´ä¸ªå †è¿›è¡Œå›æ”¶(full gc),STWæ—¶é—´å°±ä¼šå‡å°‘ã€‚</li>
</ol>
<h4 id="åƒåœ¾å›æ”¶å™¨-é‡ç‚¹"><a href="#åƒåœ¾å›æ”¶å™¨-é‡ç‚¹" class="headerlink" title="åƒåœ¾å›æ”¶å™¨ é‡ç‚¹"></a>åƒåœ¾å›æ”¶å™¨ é‡ç‚¹</h4><h2 id="ä¸€äº›å¥½ç”¨JVMåˆ†æå·¥å…·"><a href="#ä¸€äº›å¥½ç”¨JVMåˆ†æå·¥å…·" class="headerlink" title="ä¸€äº›å¥½ç”¨JVMåˆ†æå·¥å…·"></a>ä¸€äº›å¥½ç”¨JVMåˆ†æå·¥å…·</h2><h3 id="Arthas-Arthas-Install-arthas-aliyun-com"><a href="#Arthas-Arthas-Install-arthas-aliyun-com" class="headerlink" title="[Arthas](Arthas Install | arthas (aliyun.com))"></a>[Arthas](<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/install-detail.html">Arthas Install | arthas (aliyun.com)</a>)</h3><p><img src="/2024/06/24/02/Arthas.png"><br>é˜¿é‡Œå¼€å‘çš„å·¥å…·</p>
<h1 id="å†…å­˜åˆ†é…"><a href="#å†…å­˜åˆ†é…" class="headerlink" title="å†…å­˜åˆ†é…"></a>å†…å­˜åˆ†é…</h1><p><img src="/2024/06/24/02/%E5%A0%86%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D.png"></p>
<ol>
<li>ä¼˜å…ˆåˆ†é…åœ¨EdenåŒºï¼Œå¦‚æœEdenåŒºæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºä¼šè¿›è¡Œä¸€æ¬¡MinorGCï¼Œè€Œé‚£äº›æ— éœ€å›æ”¶çš„å­˜è´§å¯¹è±¡ä¼šè¿›å…¥Survivorçš„FromåŒºï¼Œå†ä¸æ»¡è¶³å°±è¿›å…¥OldåŒº</li>
<li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œé¿å…åœ¨EdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜æ‹·è´</li>
<li>é•¿æœŸå­˜è´§çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£ï¼Œè™šæ‹Ÿæœºä¸ºæ¯ä¸€ä¸ªå¯¹è±¡å®šä¹‰ä¸€ä¸ªå¹´é¾„è®¡æ•°å™¨ï¼Œç»è¿‡ä¸€æ¬¡MinorCGå°±ä¼šè¿›å…¥SurvivoråŒºï¼Œæ­¤åæ¯ç»å†ä¸€æ¬¡éƒ½ä¼šå¹´é¾„+1ï¼Œåˆ°è¾¾é˜ˆå€¼ï¼Œå¯¹è±¡è¿›å…¥è€å¹´åŒºã€‚</li>
<li></li>
</ol>
<h2 id="Full-GCå’ŒMinor-GCå’Œå†…å­˜å›æ”¶ç®—æ³•"><a href="#Full-GCå’ŒMinor-GCå’Œå†…å­˜å›æ”¶ç®—æ³•" class="headerlink" title="Full GCå’ŒMinor GCå’Œå†…å­˜å›æ”¶ç®—æ³•"></a>Full GCå’ŒMinor GCå’Œå†…å­˜å›æ”¶ç®—æ³•</h2><blockquote>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­EdenåŒºåˆ†é…ï¼Œå½“EdenåŒºæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜è¿›è¡Œåˆ†é…æ—¶ï¼Œå›å‘èµ·ä¸€æ¬¡Minor GCã€‚ç»è¿‡ç¬¬ä¸€æ¬¡Minor GCä»èƒ½å¤Ÿå­˜è´§ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«Surviorå®¹å™¨å®¹çº³çš„è¯ï¼Œä¼šè¢«ç§»åŠ¨åˆ°Survivorç©ºé—´ã€‚å¹¶ä¸”å°†å¯¹è±¡å¹´é¾„è®¾ç½®ä¸º1ï¼Œä¹‹åå¯¹è±¡æ¯ç†¬è¿‡ä¸€æ¬¡MinorGCï¼Œå¹´é¾„å°±å¢åŠ 1å²ï¼Œå½“å®ƒçš„å¹´é¾„è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œå°±ä¼šè¢«æ™‹çº§åˆ°è€å¹´ä»£ä¸­ã€‚éƒ¨åˆ†åƒåœ¾å›æ”¶å™¨ä¼šå°†å¤§å¯¹è±¡ç›´æ¥æ”¾å…¥å°±è€ä»£ã€‚</p>
</blockquote>
<h3 id="Minor-GC-x2F-Young-GC"><a href="#Minor-GC-x2F-Young-GC" class="headerlink" title="Minor GC/ Young GC"></a>Minor GC/ Young GC</h3><p>åªå¯¹æ–°ç”Ÿä»£è¿›è¡Œåƒåœ¾æ”¶é›†</p>
<h3 id="Major-GC-x2F-Old-GC"><a href="#Major-GC-x2F-Old-GC" class="headerlink" title="Major GC / Old GC"></a>Major GC / Old GC</h3><p>åªå¯¹è€å¹´ä»£è¿›è¡ŒGCï¼Œæœ‰æ—¶å€™ä¹Ÿå¯ä»¥ä»£æŒ‡Full GC</p>
<h3 id="Full-GC"><a href="#Full-GC" class="headerlink" title="Full GC"></a>Full GC</h3><p>å›æ”¶æ•´ä¸ªJavaå †å’Œæ–¹æ³•åŒº</p>
<h2 id="å†…å­˜è°ƒä¼˜"><a href="#å†…å­˜è°ƒä¼˜" class="headerlink" title="å†…å­˜è°ƒä¼˜"></a>å†…å­˜è°ƒä¼˜</h2><p>å†…å­˜æ³„æ¼(memory leak)ï¼šJavaä¸­çš„å¦‚æœä¸å†ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¯¥å¯¹è±¡ä¾ç„¶åœ¨CG ROOTçš„å¼•ç”¨é“¾ä¸Šï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ã€‚<br>ç»å¤§æ•°æƒ…å†µéƒ½æ˜¯ç”±å †å†…å­˜æ³„éœ²å¼•èµ·çš„<br>å¸¸è§ç”±ï¼š</p>
<ol>
<li>æ²¡æœ‰åŠæ—¶åˆ é™¤ç¼“å­˜æ•°æ®</li>
<li>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿç­‰è¿›è¡Œä»»åŠ¡è°ƒåº¦ä»»åŠ¡ç»“æŸä¸­å‡ºç°äº†å†…å­˜æ³„æ¼ã€‚</li>
</ol>
<h3 id="ä»£ç ä¸­çš„å†…å­˜æ³„æ¼"><a href="#ä»£ç ä¸­çš„å†…å­˜æ³„æ¼" class="headerlink" title="ä»£ç ä¸­çš„å†…å­˜æ³„æ¼"></a>ä»£ç ä¸­çš„å†…å­˜æ³„æ¼</h3><h4 id="equalså’ŒhashCodeï¼Œä¸æ­£ç¡®ä½¿ç”¨ä¼šå¯¼è‡´æ³„æ¼"><a href="#equalså’ŒhashCodeï¼Œä¸æ­£ç¡®ä½¿ç”¨ä¼šå¯¼è‡´æ³„æ¼" class="headerlink" title="equalså’ŒhashCodeï¼Œä¸æ­£ç¡®ä½¿ç”¨ä¼šå¯¼è‡´æ³„æ¼"></a>equalså’ŒhashCodeï¼Œä¸æ­£ç¡®ä½¿ç”¨ä¼šå¯¼è‡´æ³„æ¼</h4><ol>
<li><strong>ä¸ä¸€è‡´çš„&nbsp;<code>equals()</code>&nbsp;å’Œ&nbsp;<code>hashCode()</code>&nbsp;å®ç°</strong>ï¼š<ul>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ®&nbsp;<code>equals()</code>&nbsp;æ–¹æ³•è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆå®ƒä»¬çš„&nbsp;<code>hashCode()</code>&nbsp;å€¼ä¹Ÿå¿…é¡»ç›¸ç­‰ã€‚å¦‚æœè¿™ä¸ªè§„åˆ™è¢«è¿åï¼Œå¯èƒ½ä¼šå¯¼è‡´å“ˆå¸Œè¡¨ä¸­çš„å¯¹è±¡æ— æ³•æ­£ç¡®åœ°è¢«è®¿é—®å’Œåˆ é™¤ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li>
</ul>
</li>
<li><strong>å¯¹è±¡æ— æ³•è¢«æ­£ç¡®ç§»é™¤</strong>ï¼š<ul>
<li>åœ¨ä½¿ç”¨å“ˆå¸Œè¡¨æ—¶ï¼Œå¦‚æœå¯¹è±¡çš„&nbsp;<code>hashCode()</code>&nbsp;å€¼åœ¨æ’å…¥åå‘ç”Ÿå˜åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡æ— æ³•è¢«æ­£ç¡®ç§»é™¤ï¼Œå› ä¸ºå“ˆå¸Œè¡¨ä¾èµ–äº&nbsp;<code>hashCode()</code>&nbsp;å€¼æ¥å®šä½å¯¹è±¡ã€‚<br>åœ¨å®šä¹‰æ–°ç±»æ—¶æ²¡æœ‰é‡å†™æ­£ç¡®çš„equals()å’ŒhashCode()æ–¹æ³•ã€‚åœ¨ä½¿ç”¨HashMapçš„åœºæ™¯ä¸‹ï¼Œå¦‚æœä½¿ç”¨è¿™ä¸ªç±»å¯¹è±¡ä½œä¸ºkeyï¼ŒHashMapåœ¨åˆ¤æ–­keyæ˜¯å¦å·²ç»å­˜åœ¨æ—¶ä¼šä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œå¦‚æœé‡å†™æ–¹å¼ä¸æ­£ç¡®ï¼Œä¼šå¯¼è‡´ç›¸åŒçš„æ•°æ®è¢«ä¿å­˜å¤šä»½ã€‚<br>æ­£å¸¸æƒ…å†µï¼š</li>
</ul>
</li>
<li>ä»¥JDK8ä¸ºä¾‹ï¼Œé¦–å…ˆè°ƒç”¨hashæ–¹æ³•è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œhashæ–¹æ³•ä¸­ä¼šä½¿ç”¨åˆ°keyçš„hashcodeæ–¹æ³•ã€‚æ ¹æ®hashæ–¹æ³•çš„ç»“æœå†³å®šå­˜æ”¾çš„æ•°ç»„ä¸­ä½ç½®ã€‚</li>
<li>å¦‚æœæ²¡æœ‰å…ƒç´ ï¼Œç›´æ¥æ”¾å…¥ã€‚å¦‚æœæœ‰å…ƒç´ ï¼Œå…ˆåˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰ï¼Œä¼šç”¨åˆ°equalsæ–¹æ³•ï¼Œå¦‚æœkeyç›¸ç­‰ï¼Œç›´æ¥æ›¿æ¢valueï¼›keyä¸ç›¸ç­‰ï¼Œèµ°é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘æŸ¥æ‰¾é€»è¾‘ï¼Œå…¶ä¸­ä¹Ÿä¼šä½¿ç”¨equalsæ¯”å¯¹æ˜¯å¦ç›¸åŒã€‚<br>å¼‚å¸¸æƒ…å†µï¼š</li>
<li>hashCodeæ–¹æ³•ä¸å¯¹ï¼Œå¯¼è‡´ç›¸åŒidçš„å­¦ç”Ÿå¯¹è±¡è®¡ç®—å‡ºæ¥çš„hashå€¼ä¸åŒè¢«æ”¾åœ¨ä¸åŒçš„æ§½ä¸­</li>
<li>equalsæ–¹æ³•ä¸å¯¹ï¼Œå¯¼è‡´å³ä½¿idç›¸åŒï¼Œä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„å¯¹è±¡<br>ä¸‹åˆ—ä»£ç ä¼šé‡å¤æ·»åŠ è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œå› ä¸ºä¸æ˜¯ç›¸åŒçš„å¯¹è±¡å®ä¾‹</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">  <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
        <span class="token class-name">String</span> name<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> id<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
	    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">,</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
	        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	            <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	            student<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	            student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>student<span class="token punctuation">,</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>åœ¨å®šä¹‰æ–°å®ä½“æ—¶ï¼Œå§‹ç»ˆé‡å†™equals()å’ŒhashCode()æ–¹æ³•ã€‚</li>
<li>é‡å†™æ—¶ä¸€å®šè¦ç¡®å®šä½¿ç”¨äº†å”¯ä¸€æ ‡è¯†å»åŒºåˆ†ä¸åŒçš„å¯¹è±¡ï¼Œæ¯”å¦‚ç”¨æˆ·çš„idç­‰ã€‚</li>
<li>hashmapä½¿ç”¨æ—¶å°½é‡ä½¿ç”¨ç¼–å·idç­‰æ•°æ®ä½œä¸ºkeyï¼Œä¸è¦å°†æ•´ä¸ªå®ä½“ç±»å¯¹è±¡ä½œä¸ºkeyå­˜æ”¾ã€‚</li>
</ol>
<h4 id="ThreadLocalçš„ä½¿ç”¨"><a href="#ThreadLocalçš„ä½¿ç”¨" class="headerlink" title="ThreadLocalçš„ä½¿ç”¨"></a>ThreadLocalçš„ä½¿ç”¨</h4><p>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¸è¢«å›æ”¶å¯¼è‡´çš„ThreadLocalå†…å­˜æ³„æ¼<br>å¦‚æœä»…ä»…ä½¿ç”¨æ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ï¼Œå°±ç®—æ²¡æœ‰è°ƒç”¨ThreadLocalçš„removeæ–¹æ³•æ¸…ç†æ•°æ®ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚å› ä¸ºå½“çº¿ç¨‹è¢«å›æ”¶æ—¶ï¼ŒThreadLocalä¹ŸåŒæ ·è¢«å›æ”¶ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨çº¿ç¨‹æ± å°±ä¸ä¸€å®šäº†ã€‚<br>è§£å†³æ–¹æ¡ˆï¼š<br>çº¿ç¨‹æ–¹æ³•æ‰§è¡Œå®Œï¼Œä¸€å®šè¦è°ƒç”¨ThreadLocalä¸­çš„removeæ–¹æ³•æ¸…ç†å¯¹è±¡ã€‚</p>
<h4 id="å†…éƒ¨ç±»å¼•ç”¨å¤–éƒ¨ç±»"><a href="#å†…éƒ¨ç±»å¼•ç”¨å¤–éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»å¼•ç”¨å¤–éƒ¨ç±»"></a>å†…éƒ¨ç±»å¼•ç”¨å¤–éƒ¨ç±»</h4><p>éé™æ€çš„å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»çš„é”™è¯¯ä½¿ç”¨å¯¼è‡´å†…å­˜æ³„æ¼</p>
<ol>
<li><strong>éé™æ€çš„å†…éƒ¨ç±»é»˜è®¤ä¼šæŒæœ‰å¤–éƒ¨ç±»</strong> ï¼Œå°½ç®¡ä»£ç ä¸Šä¸å†ä½¿ç”¨å¤–éƒ¨ç±»ï¼Œæ‰€ä»¥å¦‚æœæœ‰åœ°æ–¹å¼•ç”¨äº†è¿™ä¸ªéé™æ€å†…éƒ¨ç±»ï¼Œä¼šå¯¼è‡´å¤–éƒ¨ç±»ä¹Ÿè¢«å¼•ç”¨ï¼Œåƒåœ¾å›æ”¶æ—¶æ— æ³•å›æ”¶è¿™ä¸ªå¤–éƒ¨ç±»ã€‚</li>
<li>åŒ¿åå†…éƒ¨ç±»å¯¹è±¡å¦‚æœåœ¨éé™æ€æ–¹æ³•ä¸­è¢«åˆ›å»ºï¼Œä¼šæŒæœ‰è°ƒç”¨è€…å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶æ—¶æ— æ³•å›æ”¶è°ƒç”¨è€…ã€‚</li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä½¿ç”¨é™æ€å†…éƒ¨ç±»ä»è€Œä¸æŒæœ‰å¤–éƒ¨å¯¹è±¡</li>
<li>ä½¿ç”¨é™æ€æ–¹æ³•ï¼Œé¿å…åŒ¿åå†…éƒ¨ç±»æŒæœ‰è°ƒç”¨è€…å¯¹è±¡</li>
</ol>
<h4 id="Stringçš„internæ–¹æ³•"><a href="#Stringçš„internæ–¹æ³•" class="headerlink" title="Stringçš„internæ–¹æ³•"></a>Stringçš„internæ–¹æ³•</h4><p>ç”±äºJDK6ä¸­çš„å­—ç¬¦ä¸²å¸¸é‡æ± ä½äºæ°¸ä¹…ä»£ï¼Œinternè¢«å¤§é‡è°ƒç”¨å¹¶ä¿å­˜äº§ç”Ÿçš„å†…å­˜æ³„æ¼</p>
<h4 id="é€šè¿‡é™æ€å­—æ®µä¿å­˜å¯¹è±¡"><a href="#é€šè¿‡é™æ€å­—æ®µä¿å­˜å¯¹è±¡" class="headerlink" title="é€šè¿‡é™æ€å­—æ®µä¿å­˜å¯¹è±¡"></a>é€šè¿‡é™æ€å­—æ®µä¿å­˜å¯¹è±¡</h4><p>å¤§é‡çš„æ•°æ®åœ¨é™æ€å˜é‡ä¸­è¢«å¼•ç”¨ï¼Œä½†æ˜¯ä¸å†ä½¿ç”¨ï¼Œæˆä¸ºäº†å†…å­˜æ³„æ¼<br>é—®é¢˜ï¼š<br>å¦‚æœå¤§é‡çš„æ•°æ®åœ¨é™æ€å˜é‡ä¸­è¢«é•¿æœŸå¼•ç”¨ï¼Œæ•°æ®å°±ä¸ä¼šè¢«é‡Šæ”¾ï¼Œå¦‚æœè¿™äº›æ•°æ®ä¸å†ä½¿ç”¨ï¼Œå°±æˆä¸ºäº†å†…å­˜æ³„æ¼ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>1ã€å°½é‡å‡å°‘å°†å¯¹è±¡é•¿æ—¶é—´çš„ä¿å­˜åœ¨é™æ€å˜é‡ä¸­ï¼Œå¦‚æœä¸å†ä½¿ç”¨ï¼Œå¿…é¡»å°†å¯¹è±¡åˆ é™¤ï¼ˆæ¯”å¦‚åœ¨é›†åˆä¸­ï¼‰æˆ–è€…å°†é™æ€å˜é‡è®¾ç½®ä¸ºnullã€‚<br>2ã€ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶ï¼Œå°½é‡ä½¿ç”¨æ‡’åŠ è½½ï¼Œè€Œä¸æ˜¯ç«‹å³åŠ è½½ã€‚</p>
<pre class="line-numbers language-Java" data-language="Java"><code class="language-Java">package com.itheima.jvmoptimize.leakdemo.demo7;

import org.springframework.context.annotation.Lazy;
import org.springframework.stereotype.Component;

@Lazy //æ‡’åŠ è½½
@Component
public class TestLazy {
    private byte[] bytes = new byte[1024 * 1024 * 1024];
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="èµ„æºæ²¡æœ‰æ­£å¸¸å…³é—­"><a href="#èµ„æºæ²¡æœ‰æ­£å¸¸å…³é—­" class="headerlink" title="èµ„æºæ²¡æœ‰æ­£å¸¸å…³é—­"></a>èµ„æºæ²¡æœ‰æ­£å¸¸å…³é—­</h4><p>ç”±äºèµ„æºæ²¡æœ‰è°ƒç”¨closeæ–¹æ³•æ­£å¸¸å…³é—­ï¼Œå¯¼è‡´çš„å†…å­˜æº¢å‡º<br>è¿æ¥å’Œæµè¿™äº›èµ„æºä¼šå ç”¨å†…å­˜ï¼Œå¦‚æœä½¿ç”¨å®Œä¹‹åæ²¡æœ‰å…³é—­ï¼Œè¿™éƒ¨åˆ†å†…å­˜ä¸ä¸€å®šä¼šå‡ºç°å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯ä¼šå¯¼è‡´closeæ–¹æ³•ä¸è¢«æ‰§è¡Œã€‚<br>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä¸ºäº†é˜²æ­¢å‡ºç°è¿™ç±»çš„èµ„æºå¯¹è±¡æ³„æ¼é—®é¢˜ï¼Œå¿…é¡»åœ¨finallyå—ä¸­å…³é—­ä¸å†ä½¿ç”¨çš„èµ„æºã€‚</li>
<li>ä» Java 7 å¼€å§‹ï¼Œä½¿ç”¨try-with-resourcesè¯­æ³•å¯ä»¥ç”¨äºè‡ªåŠ¨å…³é—­èµ„æºã€‚<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span>
    <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"file1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BufferedReader</span> br2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"file2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨èµ„æº</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h4 id="å¹¶å‘è¯·æ±‚é—®é¢˜"><a href="#å¹¶å‘è¯·æ±‚é—®é¢˜" class="headerlink" title="å¹¶å‘è¯·æ±‚é—®é¢˜"></a>å¹¶å‘è¯·æ±‚é—®é¢˜</h4><h2 id="GCè°ƒä¼˜"><a href="#GCè°ƒä¼˜" class="headerlink" title="GCè°ƒä¼˜"></a>GCè°ƒä¼˜</h2><p>GCè°ƒä¼˜æ˜¯å¯¹åƒåœ¾å›æ”¶è¿›è¡Œè°ƒä¼˜ï¼ŒGCè°ƒä¼˜çš„ä¸»è¦ç›®æ ‡æ˜¯é¿å…ç”±åƒåœ¾å›æ”¶å¼•èµ·ç¨‹åºæ€§èƒ½ä¸‹é™<br>å¯ä»¥è¿›è¡Œè°ƒä¼˜çš„å†…å®¹ï¼š</p>
<ol>
<li>é€šç”¨JVMå‚æ•°çš„è®¾ç½®</li>
<li>ç‰¹å®šåƒåœ¾å›æ”¶å™¨çš„JVMå‚æ•°çš„è®¾ç½®</li>
<li>è§£å†³ç”±é¢‘ç¹FULLGCå¼•èµ·çš„ç¨‹åºæ€§èƒ½é—®é¢˜</li>
</ol>
<h3 id="è°ƒä¼˜æŒ‡æ ‡ï¼š"><a href="#è°ƒä¼˜æŒ‡æ ‡ï¼š" class="headerlink" title="è°ƒä¼˜æŒ‡æ ‡ï¼š"></a>è°ƒä¼˜æŒ‡æ ‡ï¼š</h3><h4 id="åƒåœ¾å›æ”¶çš„ååé‡"><a href="#åƒåœ¾å›æ”¶çš„ååé‡" class="headerlink" title="åƒåœ¾å›æ”¶çš„ååé‡"></a>åƒåœ¾å›æ”¶çš„ååé‡</h4><ul>
<li>ååé‡ï¼Œä¸€æ®µæ—¶é—´å†…ç¨‹åºéœ€è¦å®Œæˆçš„ä¸šåŠ¡æ•°é‡ã€‚<br>ä¿è¯é«˜ååé‡çš„å¸¸è§„æ‰‹æ®µæœ‰ä¸¤æ¡ï¼š<br>1ã€ä¼˜åŒ–ä¸šåŠ¡æ‰§è¡Œæ€§èƒ½ï¼Œå‡å°‘å•æ¬¡ä¸šåŠ¡çš„æ‰§è¡Œæ—¶é—´<br>2ã€ä¼˜åŒ–åƒåœ¾å›æ”¶ååé‡</li>
</ul>
<p>åƒåœ¾å›æ”¶ååé‡æŒ‡çš„æ˜¯ CPU ç”¨äºæ‰§è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸ CPU æ€»æ‰§è¡Œæ—¶é—´çš„æ¯”å€¼ï¼Œå³ååé‡ = æ‰§è¡Œç”¨æˆ·ä»£ç æ—¶é—´ /ï¼ˆæ‰§è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + GCæ—¶é—´ï¼‰ã€‚ååé‡æ•°å€¼è¶Šé«˜ï¼Œåƒåœ¾å›æ”¶çš„æ•ˆç‡å°±è¶Šé«˜ï¼Œå…è®¸æ›´å¤šçš„CPUæ—¶é—´å»å¤„ç†ç”¨æˆ·çš„ä¸šåŠ¡ï¼Œç›¸åº”çš„ä¸šåŠ¡ååé‡ä¹Ÿå°±è¶Šé«˜ã€‚</p>
<h4 id="å»¶è¿Ÿ"><a href="#å»¶è¿Ÿ" class="headerlink" title="å»¶è¿Ÿ"></a>å»¶è¿Ÿ</h4><p>1å»¶è¿ŸæŒ‡çš„æ˜¯ä»ç”¨æˆ·å‘èµ·ä¸€ä¸ªè¯·æ±‚åˆ°æ”¶åˆ°å“åº”è¿™å…¶ä¸­ç»å†çš„æ—¶é—´ã€‚æ¯”å¦‚ä¼ä¸šä¸­å¯¹äºå»¶è¿Ÿçš„è¦æ±‚å¯èƒ½ä¼šæ˜¯è¿™æ ·çš„ï¼š<br>æ‰€æœ‰çš„è¯·æ±‚å¿…é¡»åœ¨5ç§’å†…è¿”å›ç»™ç”¨æˆ·ç»“æœ</p>
<p>å»¶è¿Ÿ = GCå»¶è¿Ÿ + ä¸šåŠ¡æ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥å¦‚æœGCæ—¶é—´è¿‡é•¿ï¼Œä¼šå½±å“åˆ°ç”¨æˆ·çš„ä½¿ç”¨ã€‚</p>
<h4 id="å†…å­˜ä½¿ç”¨é‡"><a href="#å†…å­˜ä½¿ç”¨é‡" class="headerlink" title="å†…å­˜ä½¿ç”¨é‡"></a>å†…å­˜ä½¿ç”¨é‡</h4><p>å†…å­˜ä½¿ç”¨é‡æŒ‡çš„æ˜¯Javaåº”ç”¨å ç”¨ç³»ç»Ÿå†…å­˜çš„æœ€å¤§å€¼ï¼Œä¸€èˆ¬é€šè¿‡Jvmå‚æ•°è°ƒæ•´ï¼Œåœ¨æ»¡è¶³ä¸Šè¿°ä¸¤ä¸ªæŒ‡æ ‡çš„å‰æä¸‹ï¼Œè¿™ä¸ªå€¼è¶Šå°è¶Šå¥½ã€‚</p>
<h3 id="è°ƒä¼˜å·¥å…·"><a href="#è°ƒä¼˜å·¥å…·" class="headerlink" title="è°ƒä¼˜å·¥å…·"></a>è°ƒä¼˜å·¥å…·</h3><h4 id="jstatå·¥å…·"><a href="#jstatå·¥å…·" class="headerlink" title="jstatå·¥å…·"></a>jstatå·¥å…·</h4><p>Jstatå·¥å…·æ˜¯JDKè‡ªå¸¦çš„ä¸€æ¬¾ç›‘æ§å·¥å…·ï¼Œå¯ä»¥æä¾›å„ç§åƒåœ¾å›æ”¶ã€ç±»åŠ è½½ã€ç¼–è¯‘ä¿¡æ¯<br>ç­‰ä¸åŒçš„æ•°æ®ã€‚ä½¿ç”¨æ–¹æ³•ä¸ºï¼š<code>jstat -gc è¿›ç¨‹ID æ¯æ¬¡ç»Ÿè®¡çš„é—´éš”ï¼ˆæ¯«ç§’ï¼‰ ç»Ÿè®¡æ¬¡æ•°</code></p>
<p>Cä»£è¡¨Capacityå®¹é‡ï¼ŒUä»£è¡¨Usedä½¿ç”¨é‡<br>S â€“ å¹¸å­˜è€…åŒºï¼ŒE â€“ ä¼Šç”¸å›­åŒºï¼ŒO â€“ è€å¹´ä»£ï¼ŒM â€“ å…ƒç©ºé—´<br>YGCã€YGTï¼šå¹´è½»ä»£GCæ¬¡æ•°å’ŒGCè€—æ—¶ï¼ˆå•ä½ï¼šç§’ï¼‰<br>FGCã€FGCTï¼šFull GCæ¬¡æ•°å’ŒFull GCè€—æ—¶<br>GCTï¼šGCæ€»è€—æ—¶</p>
<h4 id="Visualvmæ’ä»¶"><a href="#Visualvmæ’ä»¶" class="headerlink" title="Visualvmæ’ä»¶"></a>Visualvmæ’ä»¶</h4><h4 id="Prometheus-Grafana"><a href="#Prometheus-Grafana" class="headerlink" title="Prometheus + Grafana"></a>Prometheus + Grafana</h4><h4 id="GCæ—¥å¿—"><a href="#GCæ—¥å¿—" class="headerlink" title="GCæ—¥å¿—"></a>GCæ—¥å¿—</h4><h5 id="åˆ†æGCæ—¥å¿—-GCViewer"><a href="#åˆ†æGCæ—¥å¿—-GCViewer" class="headerlink" title="åˆ†æGCæ—¥å¿— - GCViewer"></a>åˆ†æGCæ—¥å¿— - GCViewer</h5><hr>
<h2 id="GraalVM"><a href="#GraalVM" class="headerlink" title="GraalVM"></a>GraalVM</h2><p>GraalVMæ˜¯Oracleå®˜æ–¹æ¨å‡ºçš„ä¸€æ¬¾é«˜æ€§èƒ½JDKï¼Œä½¿ç”¨å®ƒäº«å—æ¯”OpenJDKæˆ–è€…OracleJDKæ›´å¥½çš„æ€§èƒ½ã€‚<br>ä¸¤ç§æ¨¡å¼ï¼š</p>
<ul>
<li>JITï¼ˆ Just-In-Time ï¼‰æ¨¡å¼ ï¼Œå³æ—¶ç¼–è¯‘æ¨¡å¼ï¼Œåœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘ä¸ºæœ¬åœ°æœºå™¨ç ï¼Œä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚</li>
<li>AOTï¼ˆAhead-Of-Timeï¼‰æ¨¡å¼ ï¼Œæå‰ç¼–è¯‘æ¨¡å¼</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/06/17/08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/17/08/" class="post-title-link" itemprop="url">æ·±å…¥æµ…å‡ºZookeeper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-17 15:12:08" itemprop="dateCreated datePublished" datetime="2024-06-17T15:12:08+08:00">2024-06-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-09-12 20:29:55" itemprop="dateModified" datetime="2024-09-12T20:29:55+08:00">2024-09-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">åˆ†å¸ƒå¼</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.2k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://javaguide.cn/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html">https://javaguide.cn/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html</a></p>
<h2 id="ZooKeeperæ˜¯ä»€ä¹ˆ"><a href="#ZooKeeperæ˜¯ä»€ä¹ˆ" class="headerlink" title="ZooKeeperæ˜¯ä»€ä¹ˆ"></a>ZooKeeperæ˜¯ä»€ä¹ˆ</h2><p>ZooKeeperæ˜¯ä¸€ä¸ªå¼€æºçš„<strong>åˆ†å¸ƒå¼åè°ƒæœåŠ¡</strong>ï¼Œè®¾è®¡ç›®æ ‡æ˜¯å°†å“ªäº›å¤æ‚ä¸”å®¹æ˜“å‡ºé”™çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§æœåŠ¡å°è£…èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªé«˜æ•ˆçš„åŸè¯­(åŸè¯­çš„æ‰§è¡Œå¿…é¡»è¿ç»­ä¸”ä¸å¯åˆ†å‰²)é›†ï¼Œå¹¶ä»¥ä¸€ç³»åˆ—ç®€å•æ˜“ç”¨çš„æ¥å£æä¾›ç»™ç”¨æˆ·æ—¶ä½¿ç”¨</p>
<h2 id="å¸¸ç”¨åœºæ™¯"><a href="#å¸¸ç”¨åœºæ™¯" class="headerlink" title="å¸¸ç”¨åœºæ™¯"></a>å¸¸ç”¨åœºæ™¯</h2><ol>
<li>å‘½åæœåŠ¡ï¼šé€šè¿‡ZooKeepeçš„é¡ºåºèŠ‚ç‚¹ç”Ÿæˆå…¨å±€å”¯ä¸€ID</li>
<li>æ•°æ®å‘å¸ƒ/è®¢é˜…ï¼šé€šè¿‡Watcheræœºåˆ¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°æ•°æ®å‘å¸ƒ/è®¢é˜…ã€‚å…¶ä»–æœºå™¨å¯ä»¥é€šè¿‡ç›‘å¬ZooKeeperä¸Šçš„èŠ‚ç‚¹å˜åŒ–æ¥å®ç°é…ç½®çš„åŠ¨æ€æ›´æ–°</li>
<li>åˆ†å¸ƒå¼é”ï¼šé€šè¿‡åˆ›å»ºå”¯ä¸€èŠ‚ç‚¹è·å¾—åˆ†å¸ƒå¼é”ï¼Œå½“è·å¾—é”çš„ä¹™æ–¹æ‰§è¡Œå®Œç›¸å…³çš„ä»£ç æˆ–è€…æŒ‚æ‰åå°±é‡Šæ”¾ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨Watcheræœºåˆ¶</li>
</ol>
<h2 id="ä¸€äº›å¯ä»¥ä½¿ç”¨çš„åœºæ™¯"><a href="#ä¸€äº›å¯ä»¥ä½¿ç”¨çš„åœºæ™¯" class="headerlink" title="ä¸€äº›å¯ä»¥ä½¿ç”¨çš„åœºæ™¯"></a>ä¸€äº›å¯ä»¥ä½¿ç”¨çš„åœºæ™¯</h2><h3 id="æ‰‹å†™rpc-æ³¨å†Œä¸­å¿ƒ-ä½¿ç”¨ZooKeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒæ‰‹å†™RPC"><a href="#æ‰‹å†™rpc-æ³¨å†Œä¸­å¿ƒ-ä½¿ç”¨ZooKeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒæ‰‹å†™RPC" class="headerlink" title="[[æ‰‹å†™rpc#æ³¨å†Œä¸­å¿ƒ|ä½¿ç”¨ZooKeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒæ‰‹å†™RPC]]"></a>[[æ‰‹å†™rpc#æ³¨å†Œä¸­å¿ƒ|ä½¿ç”¨ZooKeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒæ‰‹å†™RPC]]</h3><h3 id="ä½¿ç”¨ZooKeeperä½œä¸ºåˆ†å¸ƒå¼é”"><a href="#ä½¿ç”¨ZooKeeperä½œä¸ºåˆ†å¸ƒå¼é”" class="headerlink" title="ä½¿ç”¨ZooKeeperä½œä¸ºåˆ†å¸ƒå¼é”"></a>ä½¿ç”¨ZooKeeperä½œä¸ºåˆ†å¸ƒå¼é”</h3><h2 id="é‡è¦æ¦‚å¿µ"><a href="#é‡è¦æ¦‚å¿µ" class="headerlink" title="é‡è¦æ¦‚å¿µ"></a>é‡è¦æ¦‚å¿µ</h2><h3 id="Data-model"><a href="#Data-model" class="headerlink" title="Data model"></a>Data model</h3><p>ZooKeeperæ•°æ®æ¨¡å‹ä½¿ç”¨å±‚æ¬¡åŒ–çš„å¤šå‰æ ‘å½¢ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œè€Œä¸”æ•°æ®å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€äºŒè¿›åˆ¶åºåˆ—ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰Nä¸ªå­èŠ‚ç‚¹ã€‚æ¯ä¸ªæ•°æ®èŠ‚ç‚¹å«åšznodeï¼Œæ˜¯æ•°æ®çš„æœ€å°å•å…ƒï¼Œæ¯ä¸ªznodeéƒ½æœ‰å”¯ä¸€çš„è·¯å¾„æ ‡è¯†<br><strong>znodeå­˜å‚¨çš„æ•°æ®å¤§å°ä¸Šçº¿ä¸º1M</strong>ï¼Œé¿å…å°†å¤§æ•°æ®ä¿å­˜åœ¨ZooKeeperä¸­</p>
<h3 id="znode"><a href="#znode" class="headerlink" title="znode"></a>znode</h3><h3 id="åˆ†ç±»ï¼š"><a href="#åˆ†ç±»ï¼š" class="headerlink" title="åˆ†ç±»ï¼š"></a>åˆ†ç±»ï¼š</h3><ul>
<li>æŒä¹…(PERSISTENT)èŠ‚ç‚¹ï¼šä¸€æ—¦åˆ›å»ºå°±å­˜åœ¨å³ä½¿ZooKeeperé›†ç¾¤å®•æœºï¼ŒçŸ¥é“å°†å…¶åˆ é™¤</li>
<li>ä¸´æ—¶(<strong>EPHEMERAL</strong>)èŠ‚ç‚¹ï¼šä¸´æ—¶èŠ‚ç‚¹çš„å£°æ˜å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®šã€‚ä¼šè¯èŠ‚ç‚¹å°æ—¶åˆ™èŠ‚ç‚¹æ¶ˆå¤±ï¼Œä¸´æ—¶èŠ‚ç‚¹åªèƒ½ä½œä¸ºå¶å­èŠ‚ç‚¹ï¼Œä¸å¯åˆ›å»ºå±äºè‡ªå·±çš„å­èŠ‚ç‚¹ã€‚</li>
<li>æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼šé™¤äº†å…·æœ‰æŒä¹…èŠ‚ç‚¹å¤–ï¼Œå­èŠ‚ç‚¹çš„åç§°è¿˜æœ‰é¡ºåºæ€§ã€‚</li>
</ul>
<h3 id="znodeçš„ç»„æˆï¼š"><a href="#znodeçš„ç»„æˆï¼š" class="headerlink" title="znodeçš„ç»„æˆï¼š"></a>znodeçš„ç»„æˆï¼š</h3><ul>
<li>statï¼šçŠ¶æ€ä¿¡æ¯<img src="/2024/06/17/08/znode%E7%8A%B6%E6%80%81%E4%BF%A1%E6%81%AF.png"></li>
<li>dataï¼šèŠ‚ç‚¹å­˜æ”¾æ•°æ®çš„å…·ä½“å†…å®¹</li>
</ul>
<h3 id="ç‰ˆæœ¬ï¼š"><a href="#ç‰ˆæœ¬ï¼š" class="headerlink" title="ç‰ˆæœ¬ï¼š"></a>ç‰ˆæœ¬ï¼š</h3><p>ZooKeeperä¼šä¸ºæ¯ä¸€ä¸ªznodeç»´æŠ¤ä¸€ä¸ªå«åšStatçš„æ•°æ®ç»“æ„<br>Statä¸­è®°å½•äº†ä¸‰ä¸ªznodeç›¸å…³çš„ç‰ˆæœ¬ï¼š</p>
<ul>
<li>dataVersionï¼šå½“å‰znodeèŠ‚ç‚¹çš„ç‰ˆæœ¬å·</li>
<li>cversionï¼šå½“å‰znodeå­èŠ‚ç‚¹çš„ç‰ˆæœ¬</li>
<li>aclVersionï¼šå½“å‰znodeçš„ACLçš„ç‰ˆæœ¬</li>
</ul>
<h3 id="ACLï¼šæƒé™æ§åˆ¶"><a href="#ACLï¼šæƒé™æ§åˆ¶" class="headerlink" title="ACLï¼šæƒé™æ§åˆ¶"></a>ACLï¼šæƒé™æ§åˆ¶</h3><ul>
<li>CREATEï¼šåˆ›å»ºå­èŠ‚ç‚¹</li>
<li>READï¼šè·å–èŠ‚ç‚¹æ•°æ®å’Œåˆ—å‡ºå…¶å­èŠ‚ç‚¹</li>
<li>WRITEï¼šè®¾ç½®/æ›´æ–°èŠ‚ç‚¹æ•°æ®</li>
<li>DELETEï¼šåˆ é™¤å­èŠ‚ç‚¹</li>
<li>ADMINï¼šè®¾ç½®èŠ‚ç‚¹ACLçš„æƒé™<br>èº«ä»½è®¤è¯æœ‰å››ç§æ–¹å¼ï¼š</li>
<li>worldï¼šé»˜è®¤ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æ— æ¡ä»¶è®¿é—®</li>
<li>auth ï¼š ä¸é€‚ç”¨ä»»ä½•idï¼Œä»£è¡¨ä»»ä½•å·²ç»è®¤è¯çš„ç”¨æˆ·</li>
<li>digestï¼šç”¨æˆ·å:å¯†ç çš„æ–¹å¼</li>
<li>ipï¼šå¯¹æŒ‡å®šipè¿›è¡Œé™åˆ¶</li>
</ul>
<h2 id="Watcher-äº‹ä»¶ç›‘å¬å™¨"><a href="#Watcher-äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="Watcher(äº‹ä»¶ç›‘å¬å™¨)"></a>Watcher(äº‹ä»¶ç›‘å¬å™¨)</h2><p>ZooKeeperå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº›Watcherï¼Œå¹¶ä¸”åœ¨ä¸€äº›ç‰¹å®šäº‹ä»¶è§¦å‘æ—¶ï¼ŒZooKeeperæœåŠ¡å™¨ä¼šå°†äº‹ä»¶é€šçŸ¥åˆ°æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ä¸Šã€‚<img src="/2024/06/17/08/watcher%E7%9A%84%E4%BD%9C%E7%94%A8.png"></p>
<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>ZooKeeperæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„ä¸€ä¸ªTCPé•¿è¿æ¥ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å®ƒè¿›è¡Œå¿ƒè·³æ£€æµ‹ä¸æœåŠ¡å™¨ä¿æŒæœ‰æ•ˆçš„ä¼šè¯ï¼Œä¹Ÿèƒ½å¤Ÿå‘ZooKeeperæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶æ¥å—å“åº”ã€‚åŒæ—¶ä¹Ÿèƒ½æ¥æ”¶æ¥åœ¨æœåŠ¡å™¨çš„Watcheräº‹ä»¶é€šçŸ¥</p>
<h2 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h2><h3 id="ZooKeeperå°†é›†ç¾¤ä¸­èŠ‚ç‚¹çš„è§’è‰²åˆ†ä¸ºä¸‰ç±»ï¼š"><a href="#ZooKeeperå°†é›†ç¾¤ä¸­èŠ‚ç‚¹çš„è§’è‰²åˆ†ä¸ºä¸‰ç±»ï¼š" class="headerlink" title="ZooKeeperå°†é›†ç¾¤ä¸­èŠ‚ç‚¹çš„è§’è‰²åˆ†ä¸ºä¸‰ç±»ï¼š"></a>ZooKeeperå°†é›†ç¾¤ä¸­èŠ‚ç‚¹çš„è§’è‰²åˆ†ä¸ºä¸‰ç±»ï¼š</h3><ul>
<li>Leader ä¸ºå®¢æˆ·ç«¯æä¾›è¯»å†™æœåŠ¡ï¼Œè´Ÿè´£æŠ•ç¥¨çš„å‘èµ·å’Œå†³è®®ï¼Œæ›´æ–°ç³»ç»ŸçŠ¶æ€</li>
<li>Followerï¼š<strong>åªè¯»</strong>ï¼Œå°†å†™æœåŠ¡è½¬å‘ç»™Leaderï¼Œå‚ä¸é€‰ä¸¾è¿‡ç¨‹çš„å¤´ç¥¨</li>
<li>Observerï¼š<strong>åªè¯»</strong>ï¼Œå†™æœåŠ¡è½¬å‘ç»™Leaderï¼Œä¸å‚ä¸é€‰ä¸¾ä¸­çš„æŠ•ç¥¨ï¼Œä¹Ÿä¸å‚ä¸â€è¿‡åŠå†™æˆåŠŸâ€ç­–ç•¥ã€‚ åœ¨ä¸å½±å“å†™æ€§èƒ½çš„æƒ…å†µä¸‹æå‡é›†ç¾¤çš„è¯»æ€§èƒ½ã€‚</li>
</ul>
<h3 id="Leaderçš„é€‰ä¸¾è¿‡ç¨‹"><a href="#Leaderçš„é€‰ä¸¾è¿‡ç¨‹" class="headerlink" title="Leaderçš„é€‰ä¸¾è¿‡ç¨‹"></a>Leaderçš„é€‰ä¸¾è¿‡ç¨‹</h3><p>æ¡ä»¶ï¼š<br>å½“LeaderæœåŠ¡å™¨å‡ºç°ç½‘ç»œä¸­æ–­ã€å´©æºƒé€€å‡ºä¸é‡å¯ç­‰å¼‚å¸¸æƒ…å†µæ˜¯ï¼Œä¼šè¿›å»Leaderé€‰ä¸¾è¿‡ç¨‹ã€‚<br>æµç¨‹ï¼š</p>
<ol>
<li>Leader election é€‰ä¸¾é˜¶æ®µï¼šå¼€å§‹æŠ•ç¥¨ï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹è·å¾—è¿‡åŠèŠ‚ç‚¹çš„ç¥¨æ•°å³å¯ä½œä¸ºå‡†Leader</li>
<li>Discoveryå‘ç°é˜¶æ®µï¼šfollowersè·Ÿå‡†èŠ‚ç‚¹leaderè¿›è¡Œé€šä¿¡ï¼ŒåŒæ­¥followersæœ€è¿‘æ¥æ”¶çš„äº‹åŠ¡æè®®</li>
<li>Synchronization åŒæ­¥é˜¶æ®µï¼šåˆ©ç”¨leaderå‰ä¸€é˜¶æ®µè·å¾—çš„æœ€æ–°æè®®å†å²ï¼ŒåŒæ­¥é›†ç¾¤ä¸­æ‰€æœ‰çš„å‰¯æœ¬ï¼ŒåŒæ­¥ä¹‹åï¼Œå‡†leaderæˆä¸ºæ­£å¼èŠ‚ç‚¹</li>
<li>Broadcast å¹¿æ’­é˜¶æ®µï¼šZookeeperé›†ç¾¤æ­£å¼å¯¹å¤–æä¾›äº‹åŠ¡æœåŠ¡ï¼ŒleaderåŠé€†è¡Œæ¶ˆæ¯å¹¿æ’­ï¼Œå¦‚æœæœ‰æ–°çš„èŠ‚ç‚¹åŠ å…¥ï¼Œè¿˜éœ€è¦è¿›è¡ŒåŒæ­¥<br>èŠ‚ç‚¹çš„çŠ¶æ€ï¼š</li>
</ol>
<ul>
<li>LOOKINGï¼šå¯»æ‰¾Leader</li>
<li>LEADINGï¼šLeaderçŠ¶æ€ï¼Œå¯¹åº”çš„èŠ‚ç‚¹æˆä¸ºLeader</li>
<li>FOLLOWINGï¼šå¯¹åº”çš„èŠ‚ç‚¹æˆä¸ºFollower</li>
<li>OBSERVINGï¼šå¯¹åº”çš„èŠ‚ç‚¹æˆä¸ºOBSERVING<br>è„‘è£‚é—®é¢˜é€šè¿‡è¿‡åŠæœºåˆ¶è§£å†³</li>
</ul>
<h2 id="ZABåè®®"><a href="#ZABåè®®" class="headerlink" title="ZABåè®®"></a>ZABåè®®</h2><p>ZooKeeper Atomic Broadcastï¼ŒåŸå­å¹¿æ’­<br>###3 æ¨¡å¼</p>
<ul>
<li>å´©æºƒæ¢å¤ï¼šå¯åŠ¨æˆ–è€…å‡ºç°å¼‚å¸¸çŠ¶å†µæ—¶ï¼Œè¿›è¡Œå´©æºƒæ¢å¤çŠ¶æ€ï¼Œå½“é€‰ä¸¾å‡ºæ–°çš„LeaderèŠ‚ç‚¹ï¼Œå¹¶ä¸”å·²ç»è¿›è¡ŒçŠ¶æ€åŒæ­¥ä¹‹åï¼Œé€€å‡ºæ¢å¤çŠ¶æ€ã€‚</li>
<li>æ¶ˆæ¯å¹¿æ’­ï¼šå½“é›†ç¾¤ä¸­å·²ç»å®ŒæˆçŠ¶æ€é€šè¿‡ï¼Œæ•´ä¸ªæœåŠ¡æ¶æ„è¿›å…¥æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ã€‚æ–°åŠ å…¥çš„èŠ‚ç‚¹ä¼šè‡ªè§‰è¿›å…¥æ•°æ®æ¢å¤çŠ¶æ€ã€‚</li>
</ul>
<h2 id="å¸¸è§çš„Java-API"><a href="#å¸¸è§çš„Java-API" class="headerlink" title="å¸¸è§çš„Java API"></a>å¸¸è§çš„Java API</h2><blockquote>
<p>curator-x-discoveryæ˜¯ Apache Curator åº“ä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºç®€åŒ–ä¸ Apache ZooKeeper äº¤äº’æ—¶çš„æœåŠ¡å‘ç°å’Œæ³¨å†ŒåŠŸèƒ½</p>
</blockquote>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ServiceDiscovery</span> ç”¨äºç®¡ç†æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°
<span class="token class-name">ServiceInstance</span> æè¿°ä¸€ä¸ªæœåŠ¡çš„ä¿¡æ¯
<span class="token class-name">CuratorFramework</span> zkè¿æ¥å®¢æˆ·ç«¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/06/17/36/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/17/36/" class="post-title-link" itemprop="url">RPC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-17 10:48:36 / ä¿®æ”¹æ—¶é—´ï¼š15:04:09" itemprop="dateCreated datePublished" datetime="2024-06-17T10:48:36+08:00">2024-06-17</time>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>648</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="RPCï¼ˆRemote-Procedure-Callï¼‰-è¿œç¨‹è°ƒç”¨"><a href="#RPCï¼ˆRemote-Procedure-Callï¼‰-è¿œç¨‹è°ƒç”¨" class="headerlink" title="RPCï¼ˆRemote Procedure Callï¼‰ è¿œç¨‹è°ƒç”¨"></a><strong>RPCï¼ˆRemote Procedure Callï¼‰</strong> è¿œç¨‹è°ƒç”¨</h1><h2 id="RPCåŸç†"><a href="#RPCåŸç†" class="headerlink" title="RPCåŸç†"></a>RPCåŸç†</h2><p>å¯ä»¥åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†å®ç°</p>
<ol>
<li>å®¢æˆ·ç«¯(æœåŠ¡æ¶ˆè´¹ç«¯)ï¼š è°ƒç”¨æ–¹æ³•çš„ä¸€ç«¯</li>
<li>å®¢æˆ·ç«¯Stub(æ¡©):ä»£ç†ç±»ï¼Œå°†è°ƒç”¨çš„æ–¹æ³•ã€ç±»ã€æ–¹æ³•å‚æ•°ä½œä¸ºä¿¡æ¯ä¼ é€’åˆ°æœåŠ¡ç«¯</li>
<li>ç½‘ç»œä¼ è¾“: å°†ä¿¡æ¯ä¼ è¾“åˆ°æœåŠ¡ç«¯ï¼Œå¹¶ä¸”å°†è¿”å›ç»“æœå‘æŒ¥ç»™è°ƒç”¨ç«¯ï¼Œæ¨èä½¿ç”¨Netty</li>
<li>æœåŠ¡ç«¯Stub: æ¥æ”¶ä¿¡æ¯ï¼Œå»æ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼Œå°†ç»“æœè¿”å›</li>
<li>æœåŠ¡ç«¯(æœåŠ¡æä¾›ç«¯): æä¾›æœåŠ¡çš„ä¸€ç«¯<br>è¿‡ç¨‹ï¼š</li>
<li>æœåŠ¡æ¶ˆè´¹ç«¯clientä»¥æœ¬åœ°è°ƒç”¨çš„æ–¹å¼å»è°ƒç”¨è¿œç¨‹æœåŠ¡</li>
<li>å®¢æˆ·ç«¯Stub (client stud) æ¥æ”¶è°ƒç”¨åå°†æ–¹æ³•ã€å‚æ•°ç­‰ç»„è£…è¿›èƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“(åºåˆ—åŒ–ä¹‹å) : RpcRequest</li>
<li>å®¢æˆ·ç«¯Stub æ‰¾åˆ°è¿œç¨‹æœåŠ¡çš„åœ°å€ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡æä¾›ç«¯</li>
<li>æœåŠ¡ç«¯Stub æ”¶åˆ°æ¶ˆæ¯åï¼Œååºåˆ—åŒ–ä¸ºRpcRequest å¯¹è±¡</li>
<li>æœåŠ¡ç«¯Stub æ ¹æ®RpcRequestä¸­çš„ç±»ï¼Œæ–¹æ³•ï¼Œæ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯è°ƒç”¨æœ¬åœ°æ–¹æ³•1</li>
<li>æœåŠ¡ç«¯Stub å°†å¾—åˆ°çš„ç»“æœå°è£…ä¸º RpcResponseåºåˆ—åŒ–åå‘é€ç»™æ¶ˆè´¹æ–¹</li>
<li>å®¢æˆ·ç«¯Stubæ¥æ”¶æ¶ˆæ¯å¹¶å°†å…¶ååºåˆ—åŒ–ä¸ºRpcReponse</li>
</ol>
<h2 id="Invokeræ˜¯ä»€ä¹ˆ"><a href="#Invokeræ˜¯ä»€ä¹ˆ" class="headerlink" title="Invokeræ˜¯ä»€ä¹ˆ"></a>Invokeræ˜¯ä»€ä¹ˆ</h2><p>Inboker æ˜¯Dubboå¯¹è¿œç¨‹è°ƒç”¨çš„æŠ½è±¡<img src="/2024/06/17/36/invoker.png"></p>
<h2 id="Dubbo-çš„SPIæœºåˆ¶"><a href="#Dubbo-çš„SPIæœºåˆ¶" class="headerlink" title="Dubbo çš„SPIæœºåˆ¶"></a>Dubbo çš„SPIæœºåˆ¶</h2><p>SPI (Service Provider Interface)ï¼šå°†æ¥å£çš„å®ç°æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­è¯»å–é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡åå°„åŠ è½½å®ç°ç±»ã€‚ä¹Ÿå°±æ˜¯æä¾›æ¥å£ï¼Œå…è®¸ç¬¬ä¸‰æ–¹å®ç°è¿™ä¸ªæ¥å£</p>
<h2 id="Dubbo-çš„å¾®å†…æ ¸æ¶æ„"><a href="#Dubbo-çš„å¾®å†…æ ¸æ¶æ„" class="headerlink" title="Dubbo çš„å¾®å†…æ ¸æ¶æ„"></a>Dubbo çš„å¾®å†…æ ¸æ¶æ„</h2><blockquote>
<p>å¾®å†…æ ¸æ¶æ„æ¨¡å¼åˆåæ’ä»¶æ¶æ„æ¨¡å¼ï¼Œæ˜¯åŸºäºäº§å“åº”ç”¨ç¨‹åºçš„ä¸€ç§è‡ªç„¶æ¨¡å¼ã€‚å…è®¸ç”¨æˆ·æ·»åŠ é¢å¤–çš„åº”ç”¨åˆ°æ ¸å¿ƒåº”ç”¨ã€‚ä¾‹å¦‚IDE</p>
</blockquote>
<h2 id="Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/06/16/16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/16/16/" class="post-title-link" itemprop="url">è®¾è®¡æ¨¡å¼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-16 10:10:16" itemprop="dateCreated datePublished" datetime="2024-06-16T10:10:16+08:00">2024-06-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-08-04 22:52:17" itemprop="dateModified" datetime="2024-08-04T22:52:17+08:00">2024-08-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">è®¾è®¡æ¨¡å¼</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.7k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h1><p>è®¾è®¡æ¨¡å¼æ˜¯â¼€å¥—è¢«åå¤ä½¿â½¤çš„ã€å¤šæ•°â¼ˆçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–â½¬çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚</p>
<h2 id="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„åŸåˆ™</h2><ol>
<li>å¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</li>
<li>å•ä¸€èŒè´£åŸï¼šä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸä¸­çš„ç›¸åº”èŒè´£</li>
<li>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»å¯¹è±¡</li>
<li>ä¾èµ–å€’ç½®åŸåˆ™ï¼šä»¥æ¥æœˆæŠ½è±¡ï¼Œä¸èƒ½ä¾èµ–äºå…·ä½“å®ç°</li>
<li>æ¥å£éš”ç¦»åŸåˆ™ï¼šç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»åº”è¯¥ç®€å†åœ¨æœ€å°æ¥å£ä¸Š</li>
<li>åˆæˆ/èšåˆå¤ç”¨åŸåˆ™ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚</li>
<li>è¿ªç±³ç‰¹æ³•åˆ™ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“åº”è¯¥å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨</li>
</ol>
<h2 id="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"><a href="#è®¾è®¡æ¨¡å¼çš„åˆ†ç±»" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"></a>è®¾è®¡æ¨¡å¼çš„åˆ†ç±»</h2><ul>
<li>åˆ›å»ºå‹ï¼šåœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘ï¼Œä¸é€‚ç”¨new ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚ ä¸»è¦æœ‰ å·¥å‚/æŠ½è±¡å·¥å‚/å•ä¾‹/åˆ›é€ è€…/åŸå‹æ¨¡å¼</li>
<li>ç»“æ„å‹ï¼šé€šè¿‡ç±»å’Œæ¥å£é—´çš„ç»§æ‰¿å’Œå¼•ç”¨å®ç°åˆ›å»ºè´Ÿè´£ç»“æ„çš„å¯¹è±¡ã€‚åŒ…æ‹¬é€‚é…å™¨/æ¡¥æ¥æ¨¡å¼/è¿‡æ»¤å™¨/ç»„åˆ/è£…é¥°å™¨/å¤–è§‚/äº«å…ƒ/ä»£ç†æ¨¡å¼</li>
<li>è¡Œä¸ºå‹ï¼šé€šè¿‡ç±»ä¹‹é—´ä¸åŒé€šä¿¡æ–¹å¼å®ç°ä¸åŒè¡Œä¸ºï¼ŒåŒ…æ‹¬è´£ä»»é“¾/å‘½å/è§£é‡Šå™¨/è¿­ä»£å™¨/ç»ˆç»“è€…/å¤‡å¿˜å½•/è§‚å¯Ÿè€…/çŠ¶æ€/ç­–ç•¥/æ¨¡æ¿/è®¿é—®è€…æ¨¡å¼<br><img src="/2024/06/16/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%88%86%E7%B1%BB.png"></li>
</ul>
<h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><h4 id="ç®€å•å·¥å‚"><a href="#ç®€å•å·¥å‚" class="headerlink" title="ç®€å•å·¥å‚"></a>ç®€å•å·¥å‚</h4><p>ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡æ¥åˆ›å»ºå®ä¾‹ï¼Œå®¢æˆ·ä½†ä¸éœ€è¦å…³æ³¨åˆ›å»ºé€»è¾‘ï¼Œåªéœ€è¦ä¼ é€’å·¥å‚å‚æ•°ã€‚</p>
<h4 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h4><p>å·¥å‚æ–¹æ³•æ¨¡å¼å°†å…·ä½“äº§å“çš„ä»»åŠ¡åˆ†å‘ç»™å…·ä½“çš„äº§å“å·¥å‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæŠ½è±¡å·¥å‚ï¼Œå®šä¹‰ç”Ÿäº§æ¥å£ä½†æ˜¯ä¸è´Ÿè´£å…·ä½“çš„äº§å“ã€‚</p>
<h4 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="headerlink" title="æŠ½è±¡å·¥å‚"></a>æŠ½è±¡å·¥å‚</h4><p>ç®€å•å’Œæ–¹æ³•åªæ˜¯é’ˆå¯¹ä¸€ç±»äº§å“ã€‚<br>æŠ½è±¡å·¥å‚é€šè¿‡åœ¨AbstactFactoryä¸­å¢å‡åˆ›å»ºäº§å“çš„æ¥å£ï¼Œç„¶åç”±å­ç±»å·¥å‚å»å®ç°æ–°å¢äº§å“çš„åˆ›å»ºã€‚</p>
<h3 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h3><p>å•ä¾‹æ¨¡å¼æ˜¯åˆ›å»ºå‹æ¨¡å¼ï¼Œä»»ä½•æƒ…å†µä¸‹åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œæ„é€ æ–¹æ³•å¿…é¡»æ˜¯ç§æœ‰ï¼Œç”±è‡ªå·±åˆ›å»ºä¸€ä¸ªé™æ€å˜é‡å­˜å‚¨å®ä¾‹ï¼Œå¯¹å¤–æä¾›ä¸€ä¸ªé™æ€å…¬æœ‰æ–¹æ³•è·å–å®ä¾‹ã€‚<br>ä¼˜ç‚¹æ˜¯åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å¼€é”€ã€‚</p>
<h4 id="å¸¸è§çš„å†™æ³•"><a href="#å¸¸è§çš„å†™æ³•" class="headerlink" title="å¸¸è§çš„å†™æ³•"></a>å¸¸è§çš„å†™æ³•</h4><h5 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h5><p>ç±»â¼€åŠ è½½å°±åˆ›å»ºå¯¹è±¡</p>
<p>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ²¡æœ‰åŠ é”ï¼Œæ‰§â¾æ•ˆç‡è¾ƒâ¾¼<br>ç¼ºç‚¹ï¼šä¸æ˜¯æ‡’åŠ è½½ï¼Œç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–ï¼Œæµªè´¹å†…å­˜ç©ºé—´</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
 <span class="token comment">// 1ã€ç§æœ‰åŒ–æ„é€ â½…æ³•</span>
 <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token comment">// 2ã€å®šä¹‰â¼€ä¸ªé™æ€å˜é‡æŒ‡å‘â¾ƒâ¼°ç±»å‹</span>
 <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span>
<span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// 3ã€å¯¹å¤–æä¾›â¼€ä¸ªå…¬å…±çš„â½…æ³•è·å–å®ä¾‹</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	 <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h5><p>å•çº¿ç¨‹æ¨¡å¼ä¸‹æ²¡é—®é¢˜ï¼Œå¤šçº¿ç¨‹æ— æ³•ä¿è¯å•ä¾‹<br>ä¼˜ç‚¹æ˜¯ï¼šæ‡’åŠ è½½<br>ç¼ºç‚¹æ˜¯ï¼šçº¿ç¨‹å®‰å…¨</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
	 <span class="token comment">// 1ã€ç§æœ‰åŒ–æ„é€ â½…æ³•</span>
	 <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
	 <span class="token comment">// 2ã€å®šä¹‰â¼€ä¸ªé™æ€å˜é‡æŒ‡å‘â¾ƒâ¼°ç±»å‹</span>
	 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>
	 <span class="token comment">// 3ã€å¯¹å¤–æä¾›â¼€ä¸ªå…¬å…±çš„â½…æ³•è·å–å®ä¾‹</span>
	 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		 <span class="token comment">// åˆ¤æ–­ä¸º null çš„æ—¶å€™å†åˆ›å»ºå¯¹è±¡</span>
		 <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			 instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token punctuation">}</span>
		 <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼"><a href="#çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼"></a>çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼</h4><p>ä½¿ç”¨synchronizedå…³é”®å­—æ·é”ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å¯ä»¥åŠ åœ¨æ–¹æ³•ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ·»åŠ åœ¨ä»£ç å—ä¸Šé¢ã€‚</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
	 <span class="token comment">// 1ã€ç§æœ‰åŒ–æ„é€ â½…æ³•</span>
	 <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
	 <span class="token comment">// 2ã€å®šä¹‰â¼€ä¸ªé™æ€å˜é‡æŒ‡å‘â¾ƒâ¼°ç±»å‹</span>
	 <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>
	 <span class="token comment">// 3ã€å¯¹å¤–æä¾›â¼€ä¸ªå…¬å…±çš„â½…æ³•è·å–å®ä¾‹</span>
	 <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		 <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		 instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token punctuation">}</span>
		 <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h3><p>é€‚é…å™¨æ¨¡å¼å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬åŒ–ä¸ºç”¨æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œè®©åŸæœ¬ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£èƒ½å¤Ÿæ— ç¼å®Œæˆå¯¹æ¥ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>æâ¾¼äº†ç±»çš„å¤â½¤ï¼›</li>
<li>ç»„åˆè‹¥â¼²å…³è”å¯¹è±¡å½¢æˆå¯¹å¤–æä¾›ç»Ÿâ¼€æœåŠ¡çš„æ¥â¼ï¼›</li>
<li>æ‰©å±•æ€§ã€çµæ´»æ€§å¥½ã€‚<br>ç¼ºç‚¹ï¼š</li>
<li>è¿‡å¤šä½¿â½¤é€‚é…æ¨¡å¼å®¹æ˜“é€ æˆä»£ç åŠŸèƒ½å’Œé€»è¾‘æ„ä¹‰çš„æ··æ·†ã€‚</li>
<li>éƒ¨åˆ†è¯­â¾”å¯¹ç»§æ‰¿çš„é™åˆ¶ï¼Œå¯èƒ½â¾„å¤šåªèƒ½é€‚é…â¼€ä¸ªé€‚é…è€…ç±»ï¼Œâ½½ä¸”â½¬æ ‡ç±»å¿…é¡»æ˜¯æŠ½è±¡ç±»</li>
</ol>
<h4 id="ç±»é€‚é…å™¨"><a href="#ç±»é€‚é…å™¨" class="headerlink" title="ç±»é€‚é…å™¨"></a>ç±»é€‚é…å™¨</h4><p>é€šè¿‡ç±»ç»§æ‰¿ï¼Œç»§æ‰¿Targetæ¥å£ï¼Œç»§æ‰¿Adapteeçš„å®ç°</p>
<h4 id="å¯¹è±¡é€‚é…å™¨"><a href="#å¯¹è±¡é€‚é…å™¨" class="headerlink" title="å¯¹è±¡é€‚é…å™¨"></a>å¯¹è±¡é€‚é…å™¨</h4><p>é€šè¿‡ç±»å¯¹è±¡ç»„åˆå®ç°é€‚é…</p>
<h3 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h3><p>æœ¬è´¨æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¸»è¦ç›®çš„æ˜¯è§£è€¦æœåŠ¡çš„æä¾›è€…å’Œä½¿ç”¨è€…ï¼Œä½¿ç”¨è€…é€šè¿‡ä»£ç†é—´æ¥çš„è®¿é—®æœåŠ¡æä¾›è€…ã€‚<br>æ˜¯ä¸€ç§ç»“æ„æ€§æ¨¡å¼</p>
<h4 id="åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†çš„åŒºåˆ«"><a href="#åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†çš„åŒºåˆ«" class="headerlink" title="åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†çš„åŒºåˆ«"></a>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†çš„åŒºåˆ«</h4><p>åŠ¨æ€ä»£ç†<br>åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡çš„æœºåˆ¶ã€‚ä»£ç†å¯¹è±¡å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹å¯¹è±¡ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œå¹¶åœ¨è°ƒç”¨å‰åæ·»åŠ é¢å¤–çš„é€»è¾‘ã€‚Java ä¸­çš„åŠ¨æ€ä»£ç†ä¸»è¦æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š<br>é™æ€ä»£ç†<br>é™æ€ä»£ç†æ˜¯åœ¨ç¼–è¯‘æ—¶åˆ›å»ºä»£ç†ç±»çš„æœºåˆ¶ã€‚ä»£ç†ç±»åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å­˜åœ¨ï¼Œå¹¶ä¸”å®ç°äº†ä¸ç›®æ ‡å¯¹è±¡ç›¸åŒçš„æ¥å£ã€‚é™æ€ä»£ç†é€šè¿‡åœ¨ä»£ç†ç±»ä¸­è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ¥å®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„ä»£ç†ã€‚</p>
<ol>
<li>åŠ¨æ€ä»£ç†ä¸éœ€è¦å®ç°æ¥å£å¯ä»¥ç›´æ¥ä»£ç†å®ç°ç±»ï¼Œå¹¶ä¸”å¯ä»¥ä¸è®¸å“Ÿå•Šé’ˆå¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ã€‚é™æ€ä»£ç†ä¸­æ¥å£ä¸€æ—¦è¦æ–°å¢æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚</li>
<li>JVMå±‚é¢ï¼šé™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†ã€æ¥å£ã€å®ç°ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆä¸€ä¸ªä¸ªå®é™…çš„classæ–‡ä»¶ã€‚ åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ï¼Œå¹¶ä¸”åŠ è½½åˆ°JVMä¸­ã€‚</li>
</ol>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œä½å“Ÿå•Šå¤„ç†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šå…³ç³»ã€‚å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰è¯¥å¯¹è±¡çš„å…³æ³¨ç€éƒ½èƒ½æ”¶åˆ°çŠ¶æ€å˜åŒ–é€šçŸ¥è¿›è¡Œå“åº”çš„å¤„ç†</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆçš„ï¼›</li>
<li>è€¦åˆåº¦è¾ƒä½ï¼Œä¸¤è€…ä¹‹é—´çš„å…³è”ä»…ä»…åœ¨äºæ¶ˆæ¯çš„é€šçŸ¥</li>
<li>è¢«è§‚å¯Ÿè€…â½†éœ€å…³â¼¼ä»–çš„è§‚å¯Ÿè€…ï¼›</li>
<li>â½€æŒâ¼´æ’­é€šä¿¡ï¼›</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>è§‚å¯Ÿè€…åªçŸ¥é“è¢«è§‚å¯Ÿå¯¹è±¡å‘â½£äº†å˜åŒ–ï¼Œä½†ä¸çŸ¥å˜åŒ–çš„è¿‡ç¨‹å’Œç¼˜ç”±ï¼›</li>
<li>è§‚å¯Ÿè€…åŒæ—¶ä¹Ÿå¯èƒ½æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œæ¶ˆæ¯ä¼ é€’çš„é“¾è·¯å¯èƒ½ä¼šè¿‡â»“ï¼Œå®Œæˆæ‰€æœ‰é€šçŸ¥èŠ±è´¹æ—¶é—´è¾ƒå¤šï¼›</li>
<li>å¦‚æœè§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´äº§â½£å¾ªç¯ä¾èµ–ï¼Œæˆ–è€…æ¶ˆæ¯ä¼ é€’é“¾è·¯å½¢æˆé—­ç¯ï¼Œä¼šå¯¼è‡´â½†é™å¾ªç¯ï¼›</li>
</ol>
<h4 id="ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"><a href="#ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"></a>ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ</h4><blockquote>
<p>åœ¨â½€ä»˜åœºæ™¯ä¸‹ï¼Œâ½¤æˆ·è´­ä¹°â¼€ä»¶å•†å“ï¼Œå½“â½€ä»˜æˆåŠŸä¹‹åä¸‰â½…ä¼šå›è°ƒâ¾ƒèº«ï¼Œåœ¨è¿™ä¸ªæ—¶å€™ç³»ç»Ÿå¯èƒ½ä¼šæœ‰å¾ˆå¤šéœ€è¦æ‰§â¾çš„é€»è¾‘ï¼ˆå¦‚ï¼šæ›´æ–°è®¢å•çŠ¶æ€ï¼Œå‘é€é‚®<br>ä»¶é€šçŸ¥ï¼Œèµ é€ç¤¼å“â€¦ï¼‰ï¼Œè¿™äº›é€»è¾‘ä¹‹é—´å¹¶æ²¡æœ‰å¼ºè€¦åˆï¼Œå› æ­¤å¤©ç„¶é€‚åˆä½¿â½¤è§‚å¯Ÿè€…æ¨¡å¼å»å®ç°è¿™äº›åŠŸèƒ½ï¼Œå½“æœ‰æ›´å¤šçš„æ“ä½œæ—¶ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„è§‚å¯Ÿè€…å°±èƒ½å®ç°ï¼Œå®Œç¾å®ç°äº†å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„å¼€é—­åŸåˆ™ã€‚</p>
</blockquote>
<h3 id="ä¿®é¥°å™¨æ¨¡å¼"><a href="#ä¿®é¥°å™¨æ¨¡å¼" class="headerlink" title="ä¿®é¥°å™¨æ¨¡å¼"></a>ä¿®é¥°å™¨æ¨¡å¼</h3><p>ä¿®é¥°å™¨æ¨¡å¼ä½ä¸»è¦æ˜¯å¯¹ç°æœ‰çš„ç±»å¯¹è±¡è¿›è¡ŒåŒ…è£¹å’Œå°è£…ï¼Œä»¥æœŸåœ¨ä¸æ”¹å˜ç±»å¯¹è±¡åŠå…¶ç±»å®šä¹‰çš„æƒ…å†µä¸‹ä¸ºå¯¹è±¡æ·»åŠ é¢å¤–åŠŸèƒ½ã€‚æ˜¯ä¸€ç§å¯¹è±¡æ¥å£æ¨¡å¼ã€‚</p>
<h4 id="è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯"><a href="#è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯" class="headerlink" title="è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯"></a>è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯</h4><p>å¦‚æœä½ å¸Œæœ›åœ¨â½†éœ€ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹å³å¯ä½¿â½¤å¯¹è±¡ï¼Œ ä¸”å¸Œæœ›åœ¨è¿â¾æ—¶ä¸ºå¯¹è±¡æ–°å¢é¢å¤–çš„â¾ä¸ºï¼Œ å¯ä»¥ä½¿â½¤è£…é¥°æ¨¡å¼ã€‚</p>
<p>è£…é¥°èƒ½å°†ä¸šåŠ¡é€»è¾‘ç»„ç»‡ä¸ºå±‚æ¬¡ç»“æ„ï¼Œ ä½ å¯ä¸ºå„å±‚åˆ›å»ºâ¼€ä¸ªè£…é¥°ï¼Œ åœ¨è¿â¾æ—¶<br>å°†å„ç§ä¸åŒé€»è¾‘ç»„åˆæˆå¯¹è±¡ã€‚ ç”±äºè¿™äº›å¯¹è±¡éƒ½éµå¾ªé€šâ½¤æ¥â¼ï¼Œ å®¢æˆ·ç«¯ä»£ç èƒ½ä»¥ç›¸åŒçš„â½…å¼ä½¿â½¤è¿™äº›å¯¹è±¡ã€‚</p>
<p>å¦‚æœâ½¤ç»§æ‰¿æ¥æ‰©å±•å¯¹è±¡â¾ä¸ºçš„â½…æ¡ˆéš¾ä»¥å®ç°æˆ–è€…æ ¹æœ¬ä¸å¯â¾ï¼Œ ä½ å¯ä»¥ä½¿â½¤è¯¥æ¨¡å¼ã€‚</p>
<p>è®¸å¤šç¼–ç¨‹è¯­â¾”ä½¿â½¤ final æœ€ç»ˆå…³é”®å­—æ¥é™åˆ¶å¯¹æŸä¸ªç±»çš„è¿›â¼€æ­¥æ‰©å±•ã€‚ å¤â½¤æœ€ç»ˆç±»å·²æœ‰â¾ä¸ºçš„å”¯â¼€â½…æ³•æ˜¯ä½¿â½¤è£…é¥°æ¨¡å¼ï¼š â½¤å°è£…å™¨å¯¹å…¶è¿›â¾å°è£…ã€‚</p>
<h3 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h3><p>ä¸€ä¸ªè¯·æ±‚æ²¿ç€è´£ä»»é“¾è¿›è¡Œä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šæœ‰æŸä¸ªå¤„ç†è€…å¤„ç†å®ƒä½ä¸ºæ­¢ã€‚</p>
<h4 id="è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯"><a href="#è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯" class="headerlink" title="è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯"></a>è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯</h4><p>å½“ç¨‹åºéœ€è¦ä½¿â½¤ä¸åŒâ½…å¼å¤„ç†ä¸åŒç§ç±»è¯·æ±‚ï¼Œ â½½ä¸”è¯·æ±‚ç±»å‹å’Œé¡ºåºé¢„</p>
<p>å…ˆæœªçŸ¥æ—¶ï¼Œ å¯ä»¥ä½¿â½¤è´£ä»»é“¾æ¨¡å¼ã€‚è¯¥æ¨¡å¼èƒ½å°†å¤šä¸ªå¤„ç†è€…è¿æ¥æˆâ¼€æ¡</p>
<p>é“¾ã€‚ æ¥æ”¶åˆ°è¯·æ±‚åï¼Œ å®ƒä¼š â€œè¯¢é—®â€ æ¯ä¸ªå¤„ç†è€…æ˜¯å¦èƒ½å¤Ÿå¯¹å…¶è¿›â¾å¤„ç†ã€‚</p>
<p>è¿™æ ·æ‰€æœ‰å¤„ç†è€…éƒ½æœ‰æœºä¼šæ¥å¤„ç†è¯·æ±‚ã€‚</p>
<p>å½“å¿…é¡»æŒ‰é¡ºåºæ‰§â¾å¤šä¸ªå¤„ç†è€…æ—¶ï¼Œ å¯ä»¥ä½¿â½¤è¯¥æ¨¡å¼ã€‚ â½†è®ºä½ ä»¥ä½•ç§é¡º</p>
<p>åºå°†å¤„ç†è€…è¿æ¥æˆâ¼€æ¡é“¾ï¼Œ æ‰€æœ‰è¯·æ±‚éƒ½ä¼šä¸¥æ ¼æŒ‰ç…§é¡ºåºé€šè¿‡é“¾ä¸Šçš„å¤„</p>
<p>ç†è€…</p>
<h4 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h4><p>å¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œé’ˆå¯¹ä¸€ç»„ç®—æ³•å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒè§£è€¦çš„ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œæ˜¯ä»–ä»¬èƒ½å¤Ÿç›¸äº’æ›¿æ¢ã€‚</p>
<h2 id="Spring-ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#Spring-ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="Spring ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>Spring ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h2><p>Spring æ¡†æ¶ä¸­â½¤åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</p>
<ul>
<li>â¼¯â¼šè®¾è®¡æ¨¡å¼ : Spring ä½¿â½¤â¼¯â¼šæ¨¡å¼é€šè¿‡BeanFactory ã€ ApplicationContext åˆ›å»º bean å¯¹è±¡ã€‚</li>
<li>ä»£ç†è®¾è®¡æ¨¡å¼ : Spring AOP åŠŸèƒ½çš„å®ç°ã€‚</li>
<li>å•ä¾‹è®¾è®¡æ¨¡å¼ : Spring ä¸­çš„ Bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚</li>
<li>æ¨¡æ¿â½…æ³•æ¨¡å¼ : Spring ä¸­ jdbcTemplate ã€ hibernateTemplate ç­‰ä»¥Template ç»“å°¾çš„å¯¹æ•°æ®åº“æ“ä½œçš„ç±»ï¼Œå®ƒä»¬å°±ä½¿â½¤åˆ°äº†æ¨¡æ¿æ¨¡å¼ã€‚</li>
<li>åŒ…è£…å™¨è®¾è®¡æ¨¡å¼ : æˆ‘ä»¬çš„é¡¹â½¬éœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œâ½½ä¸”ä¸åŒçš„å®¢æˆ·åœ¨æ¯æ¬¡è®¿é—®ä¸­æ ¹æ®éœ€è¦ä¼šå»è®¿é—®ä¸åŒçš„æ•°æ®åº“ã€‚è¿™ç§æ¨¡å¼è®©æˆ‘ä»¬å¯ä»¥æ ¹æ®å®¢æˆ·çš„éœ€æ±‚èƒ½å¤ŸåŠ¨æ€åˆ‡æ¢ä¸åŒçš„æ•°æ®æºã€‚</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼: Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„â¼€ä¸ªåº”â½¤ã€‚</li>
<li>é€‚é…å™¨æ¨¡å¼ :Spring AOP çš„å¢å¼ºæˆ–é€šçŸ¥(Advice)ä½¿â½¤åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€spring MVC ä¸­ä¹Ÿæ˜¯â½¤åˆ°äº†é€‚é…å™¨æ¨¡å¼é€‚é… Controller ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/06/13/21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/13/21/" class="post-title-link" itemprop="url">è½¯ä»¶å·¥ç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-13 21:56:21 / ä¿®æ”¹æ—¶é—´ï¼š22:09:19" itemprop="dateCreated datePublished" datetime="2024-06-13T21:56:21+08:00">2024-06-13</time>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>662</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="è½¯ä»¶å·¥ç¨‹ç›¸å…³"><a href="#è½¯ä»¶å·¥ç¨‹ç›¸å…³" class="headerlink" title="è½¯ä»¶å·¥ç¨‹ç›¸å…³"></a>è½¯ä»¶å·¥ç¨‹ç›¸å…³</h2><h3 id="è½¯ä»¶å¼€å‘æ¨¡å‹"><a href="#è½¯ä»¶å¼€å‘æ¨¡å‹" class="headerlink" title="è½¯ä»¶å¼€å‘æ¨¡å‹"></a>è½¯ä»¶å¼€å‘æ¨¡å‹</h3><p>ç€‘å¸ƒæ¨¡å‹ï¼ˆWaterfall Modelï¼‰ã€å¿«é€ŸåŸå‹æ¨¡å‹ï¼ˆRapid Prototype Modelï¼‰ã€V æ¨¡å‹ï¼ˆV-modelï¼‰ã€W æ¨¡å‹ï¼ˆW-modelï¼‰ã€æ•æ·å¼€å‘æ¨¡å‹ç­‰</p>
<h4 id="æ•æ·å¼€å‘"><a href="#æ•æ·å¼€å‘" class="headerlink" title="æ•æ·å¼€å‘"></a>æ•æ·å¼€å‘</h4><p><strong>æ•æ·å¼€å‘</strong> æ˜¯ä¸€ç§ä»¥äººä¸ºæ ¸å¿ƒã€è¿­ä»£ã€å¾ªåºæ¸è¿›çš„å¼€å‘æ–¹æ³•ã€‚åœ¨æ•æ·å¼€å‘ä¸­ï¼Œè½¯ä»¶é¡¹ç›®çš„æ„å»ºè¢«åˆ‡åˆ†æˆå¤šä¸ªå­é¡¹ç›®ï¼Œå„ä¸ªå­é¡¹ç›®çš„æˆæœéƒ½ç»è¿‡æµ‹è¯•ï¼Œå…·å¤‡é›†æˆå’Œå¯è¿è¡Œçš„ç‰¹å¾ã€‚æ¢è¨€ä¹‹ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤§é¡¹ç›®åˆ†ä¸ºå¤šä¸ªç›¸äº’è”ç³»ï¼Œä½†ä¹Ÿå¯ç‹¬ç«‹è¿è¡Œçš„å°é¡¹ç›®ï¼Œå¹¶åˆ†åˆ«å®Œæˆï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­è½¯ä»¶ä¸€ç›´å¤„äºå¯ä½¿ç”¨çŠ¶æ€ã€‚</p>
<h3 id="è½¯ä»¶å¼€å‘çš„åŸºæœ¬ç­–ç•¥"><a href="#è½¯ä»¶å¼€å‘çš„åŸºæœ¬ç­–ç•¥" class="headerlink" title="è½¯ä»¶å¼€å‘çš„åŸºæœ¬ç­–ç•¥"></a>è½¯ä»¶å¼€å‘çš„åŸºæœ¬ç­–ç•¥</h3><h4 id="è½¯ä»¶å¤ç”¨"><a href="#è½¯ä»¶å¤ç”¨" class="headerlink" title="è½¯ä»¶å¤ç”¨"></a>è½¯ä»¶å¤ç”¨</h4><p>æ„å»ºæ–°è½¯ä»¶ä¸éœ€è¦ä»å¤´å¼€å§‹ï¼Œå¯ä»¥å¤ç”¨å·²æœ‰çš„è½®å­</p>
<h4 id="åˆ†è€Œæ²»ä¹‹"><a href="#åˆ†è€Œæ²»ä¹‹" class="headerlink" title="åˆ†è€Œæ²»ä¹‹"></a>åˆ†è€Œæ²»ä¹‹</h4><h4 id="é€æ­¥æ¼”è¿›"><a href="#é€æ­¥æ¼”è¿›" class="headerlink" title="é€æ­¥æ¼”è¿›"></a>é€æ­¥æ¼”è¿›</h4><p>ä¸æ–­è¿›è¡Œè¿­ä»£å¼å¢é‡å¼€å‘<br>MVP(<strong>Minimum Viable Product</strong> æœ€å°å¯è¡Œäº§å“)</p>
<h4 id="ä¼˜åŒ–æŠ˜ä¸­"><a href="#ä¼˜åŒ–æŠ˜ä¸­" class="headerlink" title="ä¼˜åŒ–æŠ˜ä¸­"></a>ä¼˜åŒ–æŠ˜ä¸­</h4><p>ä¸éœ€è¦å®Œå…¨ä¼˜åŒ–ï¼Œç”¨æœ‰æ•ˆçš„æŠ•å…¥å†…ä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼æé«˜ç°æœ‰è½¯ä»¶çš„è´¨é‡</p>
<h2 id="ä»£ç è§„èŒƒ"><a href="#ä»£ç è§„èŒƒ" class="headerlink" title="ä»£ç è§„èŒƒ"></a>ä»£ç è§„èŒƒ</h2><h3 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h3><ul>
<li><strong>ç±»åéœ€è¦ä½¿ç”¨å¤§é©¼å³°å‘½åæ³•</strong></li>
<li><strong>æ–¹æ³•åã€å‚æ•°åã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡éœ€è¦ä½¿ç”¨å°é©¼å³°å‘½åæ³•ï¼ˆlowerCamelCase</strong></li>
<li><strong>æµ‹è¯•æ–¹æ³•åã€å¸¸é‡ã€æšä¸¾åç§°éœ€è¦ä½¿ç”¨è›‡å½¢å‘½åæ³•ï¼ˆsnake_caseï¼‰</strong> (å„ä¸ªå•è¯ä¹‹é—´é€šè¿‡ä¸‹åˆ’çº¿â€œ_â€è¿æ¥ï¼Œæ¯”å¦‚<code>should_get_200_status_code_when_request_is_valid</code>ã€<code>CLIENT_CONNECT_SERVER_FAILURE</code>)</li>
<li>é¡¹ç›®æ–‡ä»¶å¤¹åç§°ä½¿ç”¨ä¸²å¼å‘½åæ³•ï¼Œåœ¨ä¸²å¼å‘½åæ³•ä¸­ï¼Œå„ä¸ªå•è¯ä¹‹é—´é€šè¿‡è¿æ¥ç¬¦â€œ-â€è¿æ¥ï¼Œæ¯”å¦‚<code>dubbo-registry</code>ã€‚</li>
<li><strong>æŠ½è±¡ç±»å‘½åä½¿ç”¨ Abstract</strong></li>
<li><strong>å¼‚å¸¸ç±»å‘½åä½¿ç”¨ Exception ç»“å°¾ã€‚</strong></li>
<li><strong>æµ‹è¯•ç±»å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹ï¼Œä»¥ Test ç»“å°¾ã€‚</strong></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zuofw.github.io/2024/06/07/17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="QingQiu">
      <meta itemprop="description" content="ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QingQiu'Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/07/17/" class="post-title-link" itemprop="url">é¢è¯•è®°å½•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2024-06-07 16:52:17" itemprop="dateCreated datePublished" datetime="2024-06-07T16:52:17+08:00">2024-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-10-01 20:23:54" itemprop="dateModified" datetime="2024-10-01T20:23:54+08:00">2024-10-01</time>
              </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>15k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>DevOps</p>
<h2 id="2024-05-11-åŒä½™ä¿¡ç§‘ä¸€é¢ï¼ˆäºŒé¢å·²è¿‡ï¼Œä½†æ˜¯ä¸è¦26å±Šçš„ï¼‰"><a href="#2024-05-11-åŒä½™ä¿¡ç§‘ä¸€é¢ï¼ˆäºŒé¢å·²è¿‡ï¼Œä½†æ˜¯ä¸è¦26å±Šçš„ï¼‰" class="headerlink" title="2024-05-11 åŒä½™ä¿¡ç§‘ä¸€é¢ï¼ˆäºŒé¢å·²è¿‡ï¼Œä½†æ˜¯ä¸è¦26å±Šçš„ï¼‰"></a>2024-05-11 åŒä½™ä¿¡ç§‘ä¸€é¢ï¼ˆäºŒé¢å·²è¿‡ï¼Œä½†æ˜¯ä¸è¦26å±Šçš„ï¼‰</h2><h3 id="é¡¹ç›®ä¸­æ‰¿æ‹…çš„å¼€å‘å·¥ä½œ"><a href="#é¡¹ç›®ä¸­æ‰¿æ‹…çš„å¼€å‘å·¥ä½œ" class="headerlink" title="é¡¹ç›®ä¸­æ‰¿æ‹…çš„å¼€å‘å·¥ä½œ"></a>é¡¹ç›®ä¸­æ‰¿æ‹…çš„å¼€å‘å·¥ä½œ</h3><h3 id="å†™è¿‡å“ªäº›æ¨¡å—"><a href="#å†™è¿‡å“ªäº›æ¨¡å—" class="headerlink" title="å†™è¿‡å“ªäº›æ¨¡å—"></a>å†™è¿‡å“ªäº›æ¨¡å—</h3><h3 id="Redisé›†ç¾¤"><a href="#Redisé›†ç¾¤" class="headerlink" title="Redisé›†ç¾¤"></a>Redisé›†ç¾¤</h3><h3 id="Javaçš„å¸¸ç”¨é›†åˆç”¨è¿‡å“ªäº›"><a href="#Javaçš„å¸¸ç”¨é›†åˆç”¨è¿‡å“ªäº›" class="headerlink" title="Javaçš„å¸¸ç”¨é›†åˆç”¨è¿‡å“ªäº›"></a>Javaçš„å¸¸ç”¨é›†åˆç”¨è¿‡å“ªäº›</h3><ol>
<li><strong>ArrayList</strong>f</li>
<li>LinkedList</li>
<li>HashSet</li>
<li>TreeSet</li>
<li>HashMap</li>
</ol>
<h3 id="Streamæµ"><a href="#Streamæµ" class="headerlink" title="Streamæµ"></a>Streamæµ</h3><h3 id="HashMapçš„æ‰©å®¹æœºåˆ¶"><a href="#HashMapçš„æ‰©å®¹æœºåˆ¶" class="headerlink" title="HashMapçš„æ‰©å®¹æœºåˆ¶"></a>HashMapçš„æ‰©å®¹æœºåˆ¶</h3><ol>
<li>å½“è¶…è¿‡æœ€å¤§é•¿åº¦çš„0.75çš„æ—¶å€™å¼€å§‹æ‰©å®¹</li>
<li>åˆ›å»ºæ–°çš„å“ˆå¸Œè¡¨ï¼Œå®¹é‡ä¸ºåŸæ¥çš„ä¸¤å€</li>
<li>é‡æ–°å“ˆå¸Œï¼šéå†æ—§çš„å“ˆå¸Œè¡¨ï¼Œå°†æ¯ä¸ªå…ƒç´ é‡æ–°å“ˆå¸Œåˆ°æ–°çš„å“ˆå¸Œè¡¨ä¸­ã€‚</li>
<li>æ›¿æ¢æ—§çš„å“ˆå¸Œè¡¨ã€‚</li>
</ol>
<h3 id="ç±»åŠ è½½çš„è¿‡ç¨‹"><a href="#ç±»åŠ è½½çš„è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½çš„è¿‡ç¨‹"></a>ç±»åŠ è½½çš„è¿‡ç¨‹</h3><ol>
<li>ç±»åŠ è½½å™¨æ‰¾åˆ°å­—èŠ‚ç æ–‡ä»¶ï¼Œä»è¿™ä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªåœ¨å†…å­˜ä¸­è¡¨ç¤ºçš„java.lang.Classå¯¹è±¡</li>
<li>é“¾æ¥ï¼š<ul>
<li>éªŒè¯ï¼šç¡®ä¿è¢«åŠ è½½çš„ç±»æ˜¯å¦æ»¡è¶³Javaè™šæ‹Ÿæœºçš„é™åˆ¶ï¼Œä¾‹å¦‚ï¼šå­—èŠ‚ç æ˜¯å¦æœ‰æ­£ç¡®çš„æ ¼å¼ï¼Œç¬¦å·å¼•ç”¨æ˜¯å¦å¯ä»¥æ­£ç¡®è§£æç­‰</li>
<li>å‡†å¤‡ï¼šåœ¨ä½å‘¢æ¯”é˜¶æ®µï¼ŒJavaè™šæ‹Ÿæœºä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”åˆå§‹åŒ–é»˜è®¤å€¼</li>
<li>è§£æï¼šJavaè™šæ‹Ÿæœºå°†ç±»çš„ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨</li>
</ul>
</li>
<li>åˆå§‹åŒ–ï¼šæ‰§è¡Œç±»çš„åˆå§‹åŒ–æ–¹æ³•å’Œé™æ€åˆå§‹åŒ–å—å’Œé™æ€å­—æ®µçš„åˆå§‹åŒ–ã€‚</li>
</ol>
<h3 id="MySQLçš„å­˜å‚¨å¼•æ“"><a href="#MySQLçš„å­˜å‚¨å¼•æ“" class="headerlink" title="MySQLçš„å­˜å‚¨å¼•æ“"></a>MySQLçš„å­˜å‚¨å¼•æ“</h3><h4 id="InnoDBçš„åº•å±‚æ•°æ®ç»“æ„ï¼ŒB-æ ‘å’ŒBæ ‘çš„åŒºåˆ«"><a href="#InnoDBçš„åº•å±‚æ•°æ®ç»“æ„ï¼ŒB-æ ‘å’ŒBæ ‘çš„åŒºåˆ«" class="headerlink" title="InnoDBçš„åº•å±‚æ•°æ®ç»“æ„ï¼ŒB+æ ‘å’ŒBæ ‘çš„åŒºåˆ«"></a>InnoDBçš„åº•å±‚æ•°æ®ç»“æ„ï¼ŒB+æ ‘å’ŒBæ ‘çš„åŒºåˆ«</h4><p>B+æ ‘<br>åŒºåˆ«ï¼š</p>
<ol>
<li>B+æ ‘ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œéå¶å­èŠ‚ç‚¹åªå­˜å‚¨å…³é”®å­—ä¿¡æ¯ã€‚è€Œåœ¨Bæ ‘ä¸­ï¼Œå…³é”®å­—å’Œæ•°æ®å¯ä»¥å­˜å‚¨åœ¨ä»»ä½•èŠ‚ç‚¹</li>
<li>å¶å­èŠ‚ç‚¹é“¾æ¥ï¼šåœ¨B+æ ‘ä¸­ï¼Œæ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½é€šè¿‡æŒ‡é’ˆè¿æ¥åœ¨ä¸€æ¬¡ï¼Œå½¢æˆä¸€ä¸ªé“¾è¡¨ç»“æ„ã€‚Bæ ‘ä¸­å¶å­èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰é“¾æ¥</li>
<li>å…³é”®å­—é‡å¤ï¼šB+æ ‘ç§ï¼Œéå¶å­èŠ‚ç‚¹çš„å…³é”®å­—ä¼šé‡å¤å‡ºç°å¶å­èŠ‚ç‚¹ï¼Œè€Œåœ¨Bæ ‘ç§ï¼Œå…³é”®å­—åªå‡ºç°ä¸€æ¬¡ã€‚<br>ä¼˜ç‚¹ï¼š</li>
<li>B+æ ‘çš„å¶å­èŠ‚ç‚¹ä¸å­˜æ•°æ®ï¼Œä»…å­˜é”®å€¼ï¼Œç›¸åŒçš„é¡µè¡¨å¤§å°çš„æƒ…å†µä¸‹ï¼ŒB+æ ‘å¯ä»¥å­˜æ›´å¤šçš„é”®å€¼ï¼Œä»è€Œä½¿å¾—æ ‘çš„é«˜åº¦æ›´çŸ®ï¼ŒæŸ¥æ‰¾æ•°æ®è¿›è¡Œç£ç›˜IOæ¬¡æ•°å°±ä¼šå‡å°‘ã€‚æ•°æ®æŸ¥è¯¢æ•ˆç‡ä¹Ÿä¼šæ›´å¿«</li>
<li>B+æ ‘ç´¢å¼•çš„æ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ï¼Œè€Œä¸”æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™æ›´å®¹æ˜“æŸ¥æ‰¾ï¼Œæ•ˆç‡æ›´é«˜</li>
</ol>
<h4 id="MVCC"><a href="#MVCC" class="headerlink" title="MVCC"></a>MVCC</h4><p>ä¸å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜</p>
<h3 id="æ•°æ®åº“çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜"><a href="#æ•°æ®åº“çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="æ•°æ®åº“çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜"></a>æ•°æ®åº“çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜</h3><ol>
<li><p><strong>è„è¯»ï¼ˆDirty Readï¼‰</strong>ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„ä¿®æ”¹ã€‚å¦‚æœé‚£ä¸ªäº‹åŠ¡å›æ»šï¼Œé‚£ä¹ˆè¿™ä¸ªè¯»å–æ“ä½œå°±ä¼šè¯»åˆ°é”™è¯¯çš„æ•°æ®ã€‚</p>
</li>
<li><p><strong>ä¸å¯é‡å¤è¯»ï¼ˆNon-repeatable Readï¼‰</strong>ï¼šåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œä¸€ä¸ªæŸ¥è¯¢æ“ä½œå¯¹åŒä¸€è¡Œæ•°æ®è¿›è¡Œäº†å¤šæ¬¡è¯»å–ï¼Œä½†ç”±äºå…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¯¼è‡´å¤šæ¬¡è¯»å–çš„ç»“æœä¸ä¸€è‡´ã€‚</p>
</li>
<li><p><strong>å¹»è¯»ï¼ˆPhantom Readï¼‰</strong>ï¼šåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œä¸€ä¸ªæŸ¥è¯¢æ“ä½œåœ¨å‰åä¸¤æ¬¡æŸ¥è¯¢ä¸­ï¼Œç”±äºå…¶ä»–äº‹åŠ¡çš„æ’å…¥æˆ–åˆ é™¤æ“ä½œï¼Œå¯¼è‡´è¯»å–åˆ°äº†é¢å¤–çš„è¡Œæˆ–è€…å°‘äº†ä¸€äº›è¡Œã€‚</p>
</li>
<li><p><strong>ä¸¢å¤±æ›´æ–°ï¼ˆLost Updateï¼‰</strong>ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹åŒä¸€è¡Œæ•°æ®ï¼Œåæäº¤çš„äº‹åŠ¡ä¼šè¦†ç›–å‰ä¸€ä¸ªäº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¯¼è‡´å‰ä¸€ä¸ªäº‹åŠ¡çš„ä¿®æ”¹ä¸¢å¤±ã€‚</p>
</li>
</ol>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h3 id="ç´¢å¼•åœ¨é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨"><a href="#ç´¢å¼•åœ¨é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨" class="headerlink" title="ç´¢å¼•åœ¨é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨"></a>ç´¢å¼•åœ¨é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨</h3><h3 id="AOPç›¸å…³"><a href="#AOPç›¸å…³" class="headerlink" title="AOPç›¸å…³"></a>AOPç›¸å…³</h3><p>ä¸šåŠ¡é€»è¾‘æˆåŠŸï¼ŒAOPæ•°æ®åº“æ’å…¥æ“ä½œå¤±è´¥ï¼Œå¦‚ä½•è§£å†³<br>æ€ä¹ˆæŠŠæ—¥å¿—å†™åˆ°æ–‡ä»¶é‡Œ</p>
<h3 id="å¯¹äºå¤§é‡çš„æ•°æ®åŒæ­¥ï¼Œå¦‚ä½•å¤„ç†"><a href="#å¯¹äºå¤§é‡çš„æ•°æ®åŒæ­¥ï¼Œå¦‚ä½•å¤„ç†" class="headerlink" title="å¯¹äºå¤§é‡çš„æ•°æ®åŒæ­¥ï¼Œå¦‚ä½•å¤„ç†"></a>å¯¹äºå¤§é‡çš„æ•°æ®åŒæ­¥ï¼Œå¦‚ä½•å¤„ç†</h3><h4 id="æ€ä¹ˆä»Nginxçš„è½¬å‘ä¸­è·å–å®é™…çš„IP"><a href="#æ€ä¹ˆä»Nginxçš„è½¬å‘ä¸­è·å–å®é™…çš„IP" class="headerlink" title="æ€ä¹ˆä»Nginxçš„è½¬å‘ä¸­è·å–å®é™…çš„IP"></a>æ€ä¹ˆä»Nginxçš„è½¬å‘ä¸­è·å–å®é™…çš„IP</h4><p>ä½¿ç”¨proxy_set_headeræŒ‡ä»¤å°†å®¢æˆ·ç«¯å®é™…IPåœ°å€æ·»åŠ åˆ°HTTPè¯·æ±‚ä¸­å³å¯</p>
<pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
//Java
<span class="token directive"><span class="token keyword">import</span> javax.servlet.http.HttpServletRequest</span><span class="token punctuation">;</span>

@RestController
<span class="token directive"><span class="token keyword">public</span> class MyController</span> <span class="token punctuation">{</span>

    @RequestMapping("/")
    <span class="token directive"><span class="token keyword">public</span> String index(HttpServletRequest request)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">String</span> ipAddress = request.getHeader(<span class="token string">"X-Forwarded-For"</span>)</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">if</span> (ipAddress == null)</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">ipAddress</span> = request.getHeader(<span class="token string">"X-Real-IP"</span>)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token string">"Client IP: "</span> + ipAddress</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Canalå¦‚ä½•ä½¿ç”¨ï¼Œæœ‰ä½•å¥½å¤„ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨"><a href="#Canalå¦‚ä½•ä½¿ç”¨ï¼Œæœ‰ä½•å¥½å¤„ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨" class="headerlink" title="Canalå¦‚ä½•ä½¿ç”¨ï¼Œæœ‰ä½•å¥½å¤„ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨"></a>Canalå¦‚ä½•ä½¿ç”¨ï¼Œæœ‰ä½•å¥½å¤„ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨</h3><h3 id="å¤šçº¿ç¨‹å¯¹é€»è¾‘ä¼˜åŒ–"><a href="#å¤šçº¿ç¨‹å¯¹é€»è¾‘ä¼˜åŒ–" class="headerlink" title="å¤šçº¿ç¨‹å¯¹é€»è¾‘ä¼˜åŒ–"></a>å¤šçº¿ç¨‹å¯¹é€»è¾‘ä¼˜åŒ–</h3><h4 id="ä½¿ç”¨å¹¶è¡ŒStreamæµæ¥å¤„ç†å¸¸ç”¨æ•°æ®"><a href="#ä½¿ç”¨å¹¶è¡ŒStreamæµæ¥å¤„ç†å¸¸ç”¨æ•°æ®" class="headerlink" title="ä½¿ç”¨å¹¶è¡ŒStreamæµæ¥å¤„ç†å¸¸ç”¨æ•°æ®"></a>ä½¿ç”¨å¹¶è¡ŒStreamæµæ¥å¤„ç†å¸¸ç”¨æ•°æ®</h4><h4 id="å¹¶è¡Œæµçš„å„ç§é—®é¢˜"><a href="#å¹¶è¡Œæµçš„å„ç§é—®é¢˜" class="headerlink" title="å¹¶è¡Œæµçš„å„ç§é—®é¢˜"></a>å¹¶è¡Œæµçš„å„ç§é—®é¢˜</h4><ol>
<li><p><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼šå¹¶è¡Œå¤„ç†æ•°æ®æ—¶ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¦‚æœå¹¶è¡Œæµä¿®æ”¹äº†å…±äº«èµ„æºï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
</li>
<li><p><strong>é¡ºåºé—®é¢˜</strong>ï¼šå¹¶è¡Œæµåœ¨å¤„ç†æ•°æ®æ—¶ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å¤„ç†é¡ºåºã€‚</p>
</li>
<li><p><strong>å¼€é”€é—®é¢˜</strong>ï¼šå¹¶è¡Œæµè™½ç„¶å¯ä»¥æé«˜å¤„ç†é€Ÿåº¦ï¼Œä½†æ˜¯å®ƒä¹Ÿä¼šå¢åŠ é¢å¤–çš„å¼€é”€ï¼Œå¦‚çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ã€‚å¯¹äºå°æ•°æ®é›†ï¼Œè¿™ç§å¼€é”€å¯èƒ½ä¼šä½¿å¹¶è¡Œæµçš„æ€§èƒ½ä½äºä¸²è¡Œæµã€‚</p>
</li>
<li><p><strong>é˜»å¡é—®é¢˜</strong>ï¼šå¦‚æœå¹¶è¡Œæµçš„ä»»åŠ¡ä¸­æœ‰é˜»å¡æ“ä½œï¼Œå¦‚ I/O æ“ä½œï¼Œé‚£ä¹ˆå¹¶è¡Œæµçš„æ€§èƒ½å¯èƒ½ä¼šå¤§å¤§é™ä½ã€‚</p>
</li>
</ol>
<h3 id="å¯ä»¥å¯¹è‡ªå·±çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œè€ƒè™‘æ€§èƒ½ä¼˜åŒ–"><a href="#å¯ä»¥å¯¹è‡ªå·±çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œè€ƒè™‘æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å¯ä»¥å¯¹è‡ªå·±çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œè€ƒè™‘æ€§èƒ½ä¼˜åŒ–"></a>å¯ä»¥å¯¹è‡ªå·±çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œè€ƒè™‘æ€§èƒ½ä¼˜åŒ–</h3><h3 id="SpringSecurityç›¸å…³"><a href="#SpringSecurityç›¸å…³" class="headerlink" title="SpringSecurityç›¸å…³"></a>SpringSecurityç›¸å…³</h3><p>SecurityContextæ˜¯Spring Securityä¸­çš„ä¸€ä¸ªé‡è¦ç»„ä»¶ï¼Œå®ƒç”¨äºå­˜å‚¨ä¸å½“å‰æ‰§è¡Œçº¿ç¨‹ç›¸å…³çš„å®‰å…¨æ€§å’Œèº«ä»½éªŒè¯ä¿¡æ¯ã€‚åœ¨ä»»ä½•åœ°æ–¹ï¼Œä½ éƒ½å¯ä»¥é€šè¿‡SecurityContextHolderæ¥è®¿é—®å½“å‰çš„SecurityContextã€‚</p>
<h2 id="2024-05-18-é’é¹¤ä¿¡æ¯ä¸€é¢ï¼ˆç¬”è¯•æŒ‚"><a href="#2024-05-18-é’é¹¤ä¿¡æ¯ä¸€é¢ï¼ˆç¬”è¯•æŒ‚" class="headerlink" title="2024-05-18 é’é¹¤ä¿¡æ¯ä¸€é¢ï¼ˆç¬”è¯•æŒ‚)"></a>2024-05-18 é’é¹¤ä¿¡æ¯ä¸€é¢ï¼ˆç¬”è¯•æŒ‚)</h2><h3 id="MyBatisçš„å»¶è¿ŸåŠ è½½ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡"><a href="#MyBatisçš„å»¶è¿ŸåŠ è½½ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡" class="headerlink" title="MyBatisçš„å»¶è¿ŸåŠ è½½ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡"></a>MyBatisçš„å»¶è¿ŸåŠ è½½ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡</h3><p>å½“ä½¿ç”¨ä¸€å¯¹å¤šæˆ–è€…å¤šå¯¹å¤šçš„å…³è”æŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨å»¶è¿ŸåŠ è½½å¯ä»¥åœ¨ä¸éœ€è¦è·å–å…³è”æ•°æ®æ—¶ï¼Œå¯ä»¥é¿å…æ‰§è¡Œå…³è”æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<h3 id="å¸ƒéš†è¿‡æ»¤å™¨"><a href="#å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨"></a>å¸ƒéš†è¿‡æ»¤å™¨</h3><h3 id="MySQLçš„ä¸»ä»åŒæ­¥è¿‡ç¨‹"><a href="#MySQLçš„ä¸»ä»åŒæ­¥è¿‡ç¨‹" class="headerlink" title="MySQLçš„ä¸»ä»åŒæ­¥è¿‡ç¨‹"></a>MySQLçš„ä¸»ä»åŒæ­¥è¿‡ç¨‹</h3><p>ä½¿ç”¨binlog</p>
<ul>
<li>ä¸»ä»å¤åˆ¶ï¼š<ul>
<li>masterèŠ‚ç‚¹ä¼šä¸æ–­å°†sqlå‘½ä»¤å†™å…¥Binary Logï¼Œå­èŠ‚ç‚¹ä½¿ç”¨I/Oçº¿ç¨‹è¯»å…¥masterèŠ‚ç‚¹ä¸­çš„Bin Log</li>
<li>å­—èŠ‚ç‚¹ä½¿ç”¨SQLçº¿ç¨‹æ‰§è¡ŒBin Logçš„è¯­å¥</li>
</ul>
</li>
</ul>
<h3 id="ä¸»ä¸»åŒæ­¥å¦‚ä½•å®ç°ï¼Œå¦‚ä½•è§£å†³å¹¶å‘é—®é¢˜"><a href="#ä¸»ä¸»åŒæ­¥å¦‚ä½•å®ç°ï¼Œå¦‚ä½•è§£å†³å¹¶å‘é—®é¢˜" class="headerlink" title="ä¸»ä¸»åŒæ­¥å¦‚ä½•å®ç°ï¼Œå¦‚ä½•è§£å†³å¹¶å‘é—®é¢˜"></a>ä¸»ä¸»åŒæ­¥å¦‚ä½•å®ç°ï¼Œå¦‚ä½•è§£å†³å¹¶å‘é—®é¢˜</h3><h3 id="å¦‚ä½•è§£å†³IOçš„è´Ÿè½½å‡è¡¡åˆ†å¸ƒ"><a href="#å¦‚ä½•è§£å†³IOçš„è´Ÿè½½å‡è¡¡åˆ†å¸ƒ" class="headerlink" title="å¦‚ä½•è§£å†³IOçš„è´Ÿè½½å‡è¡¡åˆ†å¸ƒ"></a>å¦‚ä½•è§£å†³IOçš„è´Ÿè½½å‡è¡¡åˆ†å¸ƒ</h3><h3 id="AOPçš„ä¼˜åŠ¿"><a href="#AOPçš„ä¼˜åŠ¿" class="headerlink" title="AOPçš„ä¼˜åŠ¿"></a>AOPçš„ä¼˜åŠ¿</h3><h3 id="JDK17å’ŒJDK8çš„åŒºåˆ«"><a href="#JDK17å’ŒJDK8çš„åŒºåˆ«" class="headerlink" title="JDK17å’ŒJDK8çš„åŒºåˆ«"></a>JDK17å’ŒJDK8çš„åŒºåˆ«</h3><h2 id="2024-06-19-ä¸­å’Œå†œä¿¡ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰"><a href="#2024-06-19-ä¸­å’Œå†œä¿¡ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰" class="headerlink" title="2024-06-19 ä¸­å’Œå†œä¿¡ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰"></a>2024-06-19 ä¸­å’Œå†œä¿¡ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰</h2><h3 id="MySQLç´¢å¼•"><a href="#MySQLç´¢å¼•" class="headerlink" title="MySQLç´¢å¼•"></a>MySQLç´¢å¼•</h3><h4 id="ç´¢å¼•å¤±æ•ˆçš„åœºæ™¯ï¼ˆé‡ç‚¹ï¼‰"><a href="#ç´¢å¼•å¤±æ•ˆçš„åœºæ™¯ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="ç´¢å¼•å¤±æ•ˆçš„åœºæ™¯ï¼ˆé‡ç‚¹ï¼‰"></a>ç´¢å¼•å¤±æ•ˆçš„åœºæ™¯ï¼ˆé‡ç‚¹ï¼‰</h4><ol>
<li>LiIKEæ“ä½œç¬¦ä»¥é€šé…ç¬¦å¼€å¤´ä¾‹å¦‚ â€œ%xxâ€æˆ– â€œ%xx%â€ ï¼Œä½†æ˜¯ â€œxx%â€ å¯ä»¥ä½¿ç”¨ç´¢å¼•ã€‚</li>
<li>å¯¹ç´¢å¼•ä½¿ç”¨å‡½æ•°æˆ–è€…è¡¨è¾¾å¼æ“ä½œ <code>select * from t_user where length(name)=6 </code></li>
<li>å¯¹ç´¢å¼•éšå¼è½¬æ¢ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­çš„ç±»å‹å’Œåˆ—çš„ç±»å‹ä¸åŒ¹é…ï¼ŒMySQLå¯èƒ½ä¼šè¿›è¡Œç±»å‹è½¬æ¢ï¼Œç´¢å¼•å°±ä¼šå¤±æ•ˆ</li>
<li>è”åˆç´¢å¼•éæœ€å·¦åŒ¹é…ï¼Œå¤šä¸ªæ™®é€šå­—æ®µç»„åˆåœ¨ä¸€èµ·åˆ›å»ºçš„ç´¢å¼•å«åšè”åˆç´¢å¼•ï¼Œä¸éµå¾ªæœ€å·¦ä¼˜å…ˆçš„æ–¹å¼å°±ä¼šå¤±æ•ˆã€‚</li>
<li>whereå­å¥ä¸­ä½¿ç”¨äº†ORï¼Œå¦‚æœORåçš„æ¡ä»¶ä¸æ˜¯ç´¢å¼•åˆ—å°±ä¼šå¤±æ•ˆ</li>
<li>å‡ºç°NULLå€¼ï¼šå¦‚æœåˆ—ä¸­åŒ…å«NULLå€¼ï¼Œé‚£ä¹ˆä½¿ç”¨IS NULLæˆ–IS NOT NULL æŸ¥è¯¢æ—¶ç´¢å¼•å¯èƒ½ä¼šå¤±æ•ˆã€‚</li>
</ol>
<h4 id="Textå¯¹äºå­—æ®µç±»å‹ç´¢å¼•ä¼šå¤±æ•ˆå—"><a href="#Textå¯¹äºå­—æ®µç±»å‹ç´¢å¼•ä¼šå¤±æ•ˆå—" class="headerlink" title="Textå¯¹äºå­—æ®µç±»å‹ç´¢å¼•ä¼šå¤±æ•ˆå—"></a>Textå¯¹äºå­—æ®µç±»å‹ç´¢å¼•ä¼šå¤±æ•ˆå—</h4><p><code>TEXT</code>ç±»å‹çš„å­—æ®µæ˜¯å¯ä»¥è¢«ç´¢å¼•çš„ï¼Œä½†æ˜¯ç”±äº<code>TEXT</code>ç±»å‹çš„é•¿åº¦å¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥å¿…é¡»æŒ‡å®šå‰ç¼€é•¿åº¦ã€‚è¿™æ˜¯å› ä¸ºMySQLçš„B-Treeç´¢å¼•åªèƒ½å­˜å‚¨å›ºå®šé•¿åº¦çš„å€¼ã€‚å¦‚æœä¸æŒ‡å®šå‰ç¼€é•¿åº¦ï¼ŒMySQLä¼šæŠ¥é”™ã€‚</p>
<h4 id="MySQLå¦‚ä½•ä½¿ç”¨ç´¢å¼•çš„"><a href="#MySQLå¦‚ä½•ä½¿ç”¨ç´¢å¼•çš„" class="headerlink" title="MySQLå¦‚ä½•ä½¿ç”¨ç´¢å¼•çš„"></a>MySQLå¦‚ä½•ä½¿ç”¨ç´¢å¼•çš„</h4><h3 id="JavaåŸºç¡€"><a href="#JavaåŸºç¡€" class="headerlink" title="JavaåŸºç¡€"></a>JavaåŸºç¡€</h3><h4 id="Javaä¸­çš„ç±»ä»€ä¹ˆæ—¶å€™ä¼šåŠ è½½åˆ°å†…å­˜ä¸­"><a href="#Javaä¸­çš„ç±»ä»€ä¹ˆæ—¶å€™ä¼šåŠ è½½åˆ°å†…å­˜ä¸­" class="headerlink" title="Javaä¸­çš„ç±»ä»€ä¹ˆæ—¶å€™ä¼šåŠ è½½åˆ°å†…å­˜ä¸­"></a>Javaä¸­çš„ç±»ä»€ä¹ˆæ—¶å€™ä¼šåŠ è½½åˆ°å†…å­˜ä¸­</h4><ol>
<li>å®ä¾‹åŒ–çš„æ—¶å€™ï¼šnew </li>
<li>è®¿é—®é™æ€å¯¹è±¡æ—¶ï¼Œ</li>
<li>å­ç±»åŠ è½½æ—¶ä¼šæŠŠçˆ¶ç±»ä¹ŸåŠ è½½è¿›å†…å­˜</li>
<li>é€šè¿‡åå°„APIæ—¶ï¼Œä½¿ç”¨åå°„æ—¶ä¼šæŠŠå¯¹åº”çš„ç±»åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li>
</ol>
<h4 id="Hashå†²çª-amp-HashMapå¦‚ä½•è§£å†³Hashå†²çªçš„ï¼ŒHashMapæ’å…¥æ•°æ®çš„è¿‡ç¨‹"><a href="#Hashå†²çª-amp-HashMapå¦‚ä½•è§£å†³Hashå†²çªçš„ï¼ŒHashMapæ’å…¥æ•°æ®çš„è¿‡ç¨‹" class="headerlink" title="Hashå†²çª &amp; HashMapå¦‚ä½•è§£å†³Hashå†²çªçš„ï¼ŒHashMapæ’å…¥æ•°æ®çš„è¿‡ç¨‹"></a>Hashå†²çª &amp; HashMapå¦‚ä½•è§£å†³Hashå†²çªçš„ï¼ŒHashMapæ’å…¥æ•°æ®çš„è¿‡ç¨‹</h4><p>HashMapä½¿ç”¨é“¾åœ°å€æ³•è§£å†³å“ˆå¸Œå†²çªçš„ã€‚HashMapä½¿ç”¨æ•°ç»„åŠ é“¾è¡¨çš„æ–¹å¼ï¼Œæ•°ç»„ä¸­çš„ä½ç½®å¯ä»¥çœ‹ä½œä¸€ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶å®é™…å°±æ˜¯ä¸€ä¸ªé“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ã€‚<br>å½“æ¡¶ä¸­çš„æ•°æ®è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼æ—¶ï¼Œé»˜è®¤ä¸º8ï¼Œä¼šè½¬ä¸ºçº¢é»‘æ ‘ã€‚<br>æ’å…¥è¿‡ç¨‹ï¼š</p>
<ol>
<li>è®¡ç®—å“ˆå¸Œå€¼ï¼Œä½¿ç”¨é”®çš„hashCode()</li>
<li>ç¡®å®šæ¡¶çš„ä½ç½®ï¼Œä½¿ç”¨å“ˆå¸Œå€¼çš„ä¸€éƒ¨åˆ†æ¥ç¡®è®¤é”®å€¼å¯¹åº”è¯¥å­˜å‚¨åœ¨å“ªä¸ªæ¡¶ä¸­ã€‚ä¸€èˆ¬ç”¨å“ˆå¸Œå€¼çš„åœ°ä½æ¥é€‰æ‹©æ¡¶</li>
<li>æ£€æŸ¥å†²çªï¼š<ul>
<li>æ²¡æœ‰å†²çªå°±ç›´æ¥å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</li>
<li>æœ‰å†²çªå°±åˆ¤æ–­é”®å€¼æ˜¯å¦ç›¸åŒï¼Œä½¿ç”¨çš„æ˜¯equalsæ–¹æ³•ï¼Œç›¸ç­‰å°±è¦†ç›–ï¼Œä¸ç›¸ç­‰å°±æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹å­˜å‚¨é”®å€¼å¯¹</li>
</ul>
</li>
<li>å¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†æ•°ç»„é•¿åº¦çš„0.75å°±ä¼šè¿›è¡Œæ‰©å®¹ï¼Œæ‰©å®¹ä¹‹åæ˜¯åŸæ¥çš„ä¸¤å€</li>
</ol>
<h4 id="ThreadLocalçš„å®ç°åŸç†"><a href="#ThreadLocalçš„å®ç°åŸç†" class="headerlink" title="ThreadLocalçš„å®ç°åŸç†"></a>ThreadLocalçš„å®ç°åŸç†</h4><ol>
<li>æ¯ä¸ªThreadå¯¹è±¡å†…éƒ¨æœ‰ä¸€ä¸ªThreadLocalMapå¯¹è±¡ï¼Œç„¶åå®ƒçš„é”®æ˜¯ThreadLocalï¼Œå€¼æ˜¯æˆ‘ä»¬åƒå­˜å‚¨çš„å€¼</li>
<li>ThreadLocalçš„getå®é™…ä¸Šä½¿ç”¨äº†ThreadLocalMapæ¥è·å–å€¼çš„</li>
</ol>
<h3 id="å¹¶å‘é—®é¢˜"><a href="#å¹¶å‘é—®é¢˜" class="headerlink" title="å¹¶å‘é—®é¢˜"></a>å¹¶å‘é—®é¢˜</h3><h4 id="æ …æ -Barrier"><a href="#æ …æ -Barrier" class="headerlink" title="æ …æ  Barrier"></a>æ …æ  Barrier</h4><p>Barrieræ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œå®ƒå¯ä»¥è®©ä¸€ç»„çº¿ç¨‹åœ¨æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾æŸä¸ªç‚¹ä¹‹åå†ä¸€èµ·ç»§ç»­æ‰§è¡Œã€‚CountDownLatchå°±æ˜¯æ …æ çš„å®ç°ã€‚</p>
<h2 id="2024-06-25-æ±Ÿè‹è¿è”ç¬”è¯•ï¼ˆå·²è¿‡"><a href="#2024-06-25-æ±Ÿè‹è¿è”ç¬”è¯•ï¼ˆå·²è¿‡" class="headerlink" title="2024-06-25 æ±Ÿè‹è¿è”ç¬”è¯•ï¼ˆå·²è¿‡)"></a>2024-06-25 æ±Ÿè‹è¿è”ç¬”è¯•ï¼ˆå·²è¿‡)</h2><h3 id="å¦‚ä½•æ•æ‰ä¸€ä¸ªIOå¼‚å¸¸ï¼Œç®€å•è¯´æ˜NULLPoniterExceptionçš„ç†è§£"><a href="#å¦‚ä½•æ•æ‰ä¸€ä¸ªIOå¼‚å¸¸ï¼Œç®€å•è¯´æ˜NULLPoniterExceptionçš„ç†è§£" class="headerlink" title="å¦‚ä½•æ•æ‰ä¸€ä¸ªIOå¼‚å¸¸ï¼Œç®€å•è¯´æ˜NULLPoniterExceptionçš„ç†è§£"></a>å¦‚ä½•æ•æ‰ä¸€ä¸ªIOå¼‚å¸¸ï¼Œç®€å•è¯´æ˜NULLPoniterExceptionçš„ç†è§£</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NullPointerExceptionæ˜¯ç¨‹åºå°è¯•ä½¿ç”¨ä¸€ä¸ªéœ€è¦å¯¹è±¡å¼•ç”¨çš„æ“¦æ¬§æ€»ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡å¼•ç”¨å´æ˜¯nullï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚</p>
<h3 id="ä»£ç è¿è¡Œé¢˜ç›®"><a href="#ä»£ç è¿è¡Œé¢˜ç›®" class="headerlink" title="ä»£ç è¿è¡Œé¢˜ç›®"></a>ä»£ç è¿è¡Œé¢˜ç›®</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningMan</span><span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">RunningMan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>â€œ<span class="token class-name">Hi</span><span class="token punctuation">,</span>man<span class="token operator">!</span> <span class="token class-name">Just</span> run<span class="token operator">!</span>â€<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>i<span class="token operator">--</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="SQLé¢˜ç›®"><a href="#SQLé¢˜ç›®" class="headerlink" title="SQLé¢˜ç›®"></a>SQLé¢˜ç›®</h3><p>å»ºè¡¨ï¼Œå¤šè¡¨è”åˆï¼Œæ›´æ–°æ•°æ®ï¼Œæ’åºï¼Œåˆ†ç»„</p>
<h3 id="ç®—æ³•é¢˜"><a href="#ç®—æ³•é¢˜" class="headerlink" title="ç®—æ³•é¢˜"></a>ç®—æ³•é¢˜</h3><h3 id="MyBatisçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œä»¥åŠéœ€è¦é…ç½®çš„ä¸œè¥¿"><a href="#MyBatisçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œä»¥åŠéœ€è¦é…ç½®çš„ä¸œè¥¿" class="headerlink" title="MyBatisçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œä»¥åŠéœ€è¦é…ç½®çš„ä¸œè¥¿"></a>MyBatisçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œä»¥åŠéœ€è¦é…ç½®çš„ä¸œè¥¿</h3><h2 id="2024-06-28-æ±Ÿè‹è¿è”ä¸€é¢-å·²è¿‡"><a href="#2024-06-28-æ±Ÿè‹è¿è”ä¸€é¢-å·²è¿‡" class="headerlink" title="2024-06-28 æ±Ÿè‹è¿è”ä¸€é¢(å·²è¿‡)"></a>2024-06-28 æ±Ÿè‹è¿è”ä¸€é¢(å·²è¿‡)</h2><h3 id="é¡¹ç›®æé—®ï¼š"><a href="#é¡¹ç›®æé—®ï¼š" class="headerlink" title="é¡¹ç›®æé—®ï¼š"></a>é¡¹ç›®æé—®ï¼š</h3><p>å“ªä¸ªé¡¹ç›®å¯¹ä½ æå‡æœ€å¤§</p>
<h3 id="jdk17æ–°ç‰¹æ€§-ï¼ˆä¸ä¼š"><a href="#jdk17æ–°ç‰¹æ€§-ï¼ˆä¸ä¼š" class="headerlink" title="jdk17æ–°ç‰¹æ€§ ï¼ˆä¸ä¼š)"></a>jdk17æ–°ç‰¹æ€§ ï¼ˆä¸ä¼š)</h3><p>æ¨¡å¼åŒ¹é…for instanceofã€è®°å½•</p>
<h4 id="æ¨¡å¼åŒ¹é…çš„å¢å¼º"><a href="#æ¨¡å¼åŒ¹é…çš„å¢å¼º" class="headerlink" title="æ¨¡å¼åŒ¹é…çš„å¢å¼º"></a>æ¨¡å¼åŒ¹é…çš„å¢å¼º</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">17</span>ä¹‹å‰
<span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
    <span class="token comment">// ä½¿ç”¨s</span>
<span class="token punctuation">}</span>
<span class="token number">17</span>ä¸­
<span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç›´æ¥ä½¿ç”¨s</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="å¯†å°ç±»"><a href="#å¯†å°ç±»" class="headerlink" title="å¯†å°ç±»"></a>å¯†å°ç±»</h4><p>å¯ä»¥æŒ‡å®šå“ªäº›ç±»æˆ–è€…æ¥å£å¯ä»¥ç»§æ‰¿æˆ–å®ç°å®ƒ</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token keyword">permits</span> <span class="token class-name">Circle</span><span class="token punctuation">,</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç±»å®šä¹‰</span>
<span class="token punctuation">}</span>

<span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç±»å®šä¹‰</span>
<span class="token punctuation">}</span>

<span class="token keyword">non-sealed</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç±»å®šä¹‰</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="å¼ºåŒ–çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿¡æ¯"><a href="#å¼ºåŒ–çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿¡æ¯" class="headerlink" title="å¼ºåŒ–çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿¡æ¯"></a>å¼ºåŒ–çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿¡æ¯</h4><p>ä»JDK 17å¼€å§‹ï¼Œå¼‚å¸¸ä¿¡æ¯ä¼šæ˜ç¡®æŒ‡å‡ºæ˜¯å“ªä¸ªå˜é‡æˆ–å“ªä¸ªè¡¨è¾¾å¼çš„ç»“æœä¸º<code>null</code>ï¼Œå¤§å¤§å‡å°‘äº†è°ƒè¯•æ—¶é—´ã€‚</p>
<h3 id="jdk8-æ–°ç‰¹æ€§"><a href="#jdk8-æ–°ç‰¹æ€§" class="headerlink" title="jdk8 æ–°ç‰¹æ€§"></a>jdk8 æ–°ç‰¹æ€§</h3><p>Lambdaï¼ŒStreamï¼Œæ–°çš„æ—¥æœŸAPIã€Optionalç±»</p>
<h4 id="Streamæµç›¸å…³"><a href="#Streamæµç›¸å…³" class="headerlink" title="Streamæµç›¸å…³"></a>Streamæµç›¸å…³</h4><p>Lambdaè¡¨è¾¾å¼æ˜¯Java 8å¼•å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥è¡¨ç¤ºåŒ¿åæ–¹æ³•ã€‚è¿™ç§è¡¨è¾¾å¼åŸºäºæ•°å­¦ä¸­çš„Î»æ¼”ç®—ï¼ˆä¸€ç§ç”¨äºæè¿°å‡½æ•°çš„ç³»ç»Ÿï¼‰ï¼Œåœ¨Javaä¸­ä¸»è¦ç”¨äºå®ç°å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µã€‚<br>åˆ†ç»„ï¼šcollecté‡Œé¢ä½¿ç”¨Collectors.groupingByæ–¹æ³•è¿›è¡Œåˆ†ç»„</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> peopleByAge <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>è¿‡æ»¤ï¼šfilterå’Œ limitå’Œdistinctå’Œskip</p>
<h4 id="lambdaè¡¨è¾¾å¼"><a href="#lambdaè¡¨è¾¾å¼" class="headerlink" title="lambdaè¡¨è¾¾å¼"></a>lambdaè¡¨è¾¾å¼</h4><p>æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼<br>::new æ˜¯æ–¹æ³•å¼•ç”¨çš„ä¸€ç§ï¼Œç”¨äºå¼•ç”¨æ„é€ å‡½æ•°<br>å¯ä»¥æ­é…å‡½æ•°å¼æ¥å£æ¥æ›´åŠ ç®€æ´çš„åˆ›å»ºä¸€ä¸ªç±»</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personSupplier <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> person <span class="token operator">=</span> personSupplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨Personçš„æ— å‚æ•°æ„é€ å‡½æ•°</span>
<span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personFunction <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> person <span class="token operator">=</span> personFunction<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨Personçš„å¸¦æœ‰ä¸€ä¸ªStringå‚æ•°çš„æ„é€ å‡½æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="æœ‰ä»€ä¹ˆç”¨"><a href="#æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="::æœ‰ä»€ä¹ˆç”¨"></a>::æœ‰ä»€ä¹ˆç”¨</h4><ol>
<li>å¼•ç”¨é™æ€æ–¹æ³•ï¼Œä¾‹å¦‚Integer::parseInt</li>
<li>å¼•ç”¨å®ä¾‹æ–¹æ³•ï¼š<code>String s = "hello";</code>ï¼Œåˆ™<code>s::toUpperCase</code></li>
<li>å¼•ç”¨ç‰¹å®šç±»å‹çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ï¼šString::toLowerCase</li>
<li>å¼•ç”¨æ„é€ å‡½æ•°ï¼šArrayList::new</li>
</ol>
<h3 id="SpringCloud-Alibaba"><a href="#SpringCloud-Alibaba" class="headerlink" title="SpringCloud Alibaba"></a>SpringCloud Alibaba</h3><h4 id="å“ªäº›ç»„ä»¶"><a href="#å“ªäº›ç»„ä»¶" class="headerlink" title="å“ªäº›ç»„ä»¶"></a>å“ªäº›ç»„ä»¶</h4><p>Nacosã€Sentinelã€Dubboã€RocketMQã€Seataã€Gateway</p>
<h3 id="Nacosçš„ä½œç”¨"><a href="#Nacosçš„ä½œç”¨" class="headerlink" title="Nacosçš„ä½œç”¨"></a>Nacosçš„ä½œç”¨</h3><h4 id="Nacoså¦‚ä½•åŒºåˆ†ä¸åŒçš„é…ç½®"><a href="#Nacoså¦‚ä½•åŒºåˆ†ä¸åŒçš„é…ç½®" class="headerlink" title="Nacoså¦‚ä½•åŒºåˆ†ä¸åŒçš„é…ç½®"></a>Nacoså¦‚ä½•åŒºåˆ†ä¸åŒçš„é…ç½®</h4><ol>
<li><strong>Data ID</strong>ï¼šé…ç½®IDï¼Œé€šå¸¸ç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªé…ç½®å†…å®¹ã€‚</li>
<li><strong>Group</strong>ï¼šåˆ†ç»„ï¼ŒNacoså…è®¸ç”¨æˆ·é€šè¿‡åˆ†ç»„æ¥å¯¹é…ç½®è¿›è¡Œåˆ†ç±»ï¼Œä¸€ä¸ªGroupä¸­å¯ä»¥æœ‰å¤šä¸ªData IDã€‚</li>
<li><strong>Namespace</strong>ï¼šå‘½åç©ºé—´ï¼Œç”¨äºè¿›ä¸€æ­¥éš”ç¦»é…ç½®ã€‚ä¸€ä¸ªå‘½åç©ºé—´ä¸‹å¯ä»¥æœ‰å¤šä¸ªGroupï¼Œä¸€ä¸ªGroupä¸‹å¯ä»¥æœ‰å¤šä¸ªData IDã€‚å‘½åç©ºé—´é€šå¸¸ç”¨äºåŒºåˆ†ä¸åŒçš„å¼€å‘ç¯å¢ƒï¼Œå¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚</li>
</ol>
<h4 id="å‘½åç©ºé—´é‡å¤äº†ä¼šæ€ä¹ˆç”¨"><a href="#å‘½åç©ºé—´é‡å¤äº†ä¼šæ€ä¹ˆç”¨" class="headerlink" title="å‘½åç©ºé—´é‡å¤äº†ä¼šæ€ä¹ˆç”¨"></a>å‘½åç©ºé—´é‡å¤äº†ä¼šæ€ä¹ˆç”¨</h4><p>å‘½åç©ºé—´æ˜¯é€šè¿‡å”¯ä¸€çš„Namespace IDæ¥æ ‡è¯†çš„ï¼Œè€Œä¸æ˜¯ä»…ä»…é€šè¿‡åç§°ã€‚å³ä½¿ä¸¤ä¸ªå‘½åç©ºé—´çš„åç§°ç›¸åŒï¼Œå®ƒä»¬çš„Namespace IDä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå› æ­¤Nacosä»ç„¶èƒ½å¤ŸåŒºåˆ†å®ƒä»¬ã€‚<br>å¦‚æœæœåŠ¡åˆ†å‘åæœåŠ¡æ–­å¼€äº†ä¼šæ€ä¹ˆåŠ</p>
<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><h4 id="Redisson"><a href="#Redisson" class="headerlink" title="Redisson"></a>Redisson</h4><p>Redissonä¼šæ— é™å»¶é•¿ä¸€ä¸ªé”®çš„è¿‡æœŸæ—¶é—´å—ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">lock<span class="token punctuation">.</span><span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span> å°è¯•<span class="token number">10</span>så†…è·å¾—é”ï¼Œé”çš„æœ€å¤§ç”Ÿå­˜æ—¶é—´æ˜¯<span class="token number">60</span>s
lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>è¿›è¡Œçœ‹é—¨ç‹—
è¿™ä¸¤æ­¥æ“ä½œå®é™…ä¸Šæ˜¯è·å¾—äº†ä¸¤ä¸ªé”ï¼Œä¸èƒ½åšåˆ°å¯¹åŒä¸€ä¸ªé”è¿›è¡Œçœ‹é—¨ç‹—å’Œåˆ°è¾¾ä¸€å®šæ—¶é—´å°±æ”¾å¼ƒè¿™ä¸ªé”
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="JavaåŸºç¡€-JUC"><a href="#JavaåŸºç¡€-JUC" class="headerlink" title="JavaåŸºç¡€ JUC***"></a>JavaåŸºç¡€ JUC***</h3><p><strong>AtomicInteger</strong>ï¼šå¹¶å‘åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å®‰å…¨åœ°æ“ä½œå•ä¸ªæ•´æ•°çš„æ–¹å¼ï¼Œè€Œæ— éœ€ä½¿ç”¨<code>synchronized</code>å…³é”®å­—ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨åº•å±‚çš„éé˜»å¡ç®—æ³•å®ç°çš„ï¼Œé€šå¸¸æ˜¯åˆ©ç”¨CPUçš„åŸå­æŒ‡ä»¤ã€‚<code>AtomicInteger</code>æ”¯æŒåŸå­æ“ä½œï¼Œè¿™æ„å‘³ç€æ¯ä¸ªæ“ä½œéƒ½æ˜¯ä¸å¯åˆ†å‰²çš„ï¼Œä¿è¯äº†åœ¨å¹¶å‘ç¯å¢ƒä¸­çš„çº¿ç¨‹å®‰å…¨ã€‚</p>
<h4 id="å…«å¤§æ•°æ®ç±»å‹å’Œå»¶å±•æ€§"><a href="#å…«å¤§æ•°æ®ç±»å‹å’Œå»¶å±•æ€§" class="headerlink" title="å…«å¤§æ•°æ®ç±»å‹å’Œå»¶å±•æ€§"></a>å…«å¤§æ•°æ®ç±»å‹å’Œå»¶å±•æ€§</h4><h3 id="MyBatiså¦‚ä½•åœ¨æŸ¥è¯¢çš„æ—¶å€™å°±è¿›è¡Œç»„è£…"><a href="#MyBatiså¦‚ä½•åœ¨æŸ¥è¯¢çš„æ—¶å€™å°±è¿›è¡Œç»„è£…" class="headerlink" title="MyBatiså¦‚ä½•åœ¨æŸ¥è¯¢çš„æ—¶å€™å°±è¿›è¡Œç»„è£…"></a>MyBatiså¦‚ä½•åœ¨æŸ¥è¯¢çš„æ—¶å€™å°±è¿›è¡Œç»„è£…</h3><ol>
<li>ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>genderResultMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>YourModelClass<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender_column<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.lang.String<span class="token punctuation">"</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INTEGER<span class="token punctuation">"</span></span> <span class="token attr-name">typeHandler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GenderTypeHandler<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- å…¶ä»–å­—æ®µæ˜ å°„ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">JdbcType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">TypeHandler</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenderTypeHandler</span> <span class="token keyword">implements</span> <span class="token class-name">TypeHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> ps<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">String</span> parameter<span class="token punctuation">,</span> <span class="token class-name">JdbcType</span> jdbcType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">// è®¾ç½®å‚æ•°æ—¶çš„é€»è¾‘ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token class-name">String</span> columnName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> gender <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> gender <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"ç”·"</span> <span class="token operator">:</span> <span class="token string">"å¥³"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> columnIndex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> gender <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span>columnIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> gender <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"ç”·"</span> <span class="token operator">:</span> <span class="token string">"å¥³"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">CallableStatement</span> cs<span class="token punctuation">,</span> <span class="token keyword">int</span> columnIndex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> gender <span class="token operator">=</span> cs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span>columnIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> gender <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"ç”·"</span> <span class="token operator">:</span> <span class="token string">"å¥³"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
æœ€ååœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œ<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.yourpackage.GenderTypeHandler<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeHandlers</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="2024-06-28-æ·±åœ³åŒè¡Œè€…ç§‘æŠ€ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰"><a href="#2024-06-28-æ·±åœ³åŒè¡Œè€…ç§‘æŠ€ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰" class="headerlink" title="2024-06-28 æ·±åœ³åŒè¡Œè€…ç§‘æŠ€ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰"></a>2024-06-28 æ·±åœ³åŒè¡Œè€…ç§‘æŠ€ä¸€é¢ï¼ˆä¸€é¢æŒ‚ï¼‰</h2><h3 id="æ‹·æ‰“ç¬”è¯•é¢˜-x2F-ç®—æ³•é¢˜"><a href="#æ‹·æ‰“ç¬”è¯•é¢˜-x2F-ç®—æ³•é¢˜" class="headerlink" title="æ‹·æ‰“ç¬”è¯•é¢˜/ç®—æ³•é¢˜"></a>æ‹·æ‰“ç¬”è¯•é¢˜/ç®—æ³•é¢˜</h3><h4 id="1000wä¸ªæ•°æ®ä¸­åªæœ‰ä¸¤ä¸ªç›¸åŒçš„æ•°æ®ï¼Œå¦‚ä½•æ‰¾å‡ºæ¥"><a href="#1000wä¸ªæ•°æ®ä¸­åªæœ‰ä¸¤ä¸ªç›¸åŒçš„æ•°æ®ï¼Œå¦‚ä½•æ‰¾å‡ºæ¥" class="headerlink" title="1000wä¸ªæ•°æ®ä¸­åªæœ‰ä¸¤ä¸ªç›¸åŒçš„æ•°æ®ï¼Œå¦‚ä½•æ‰¾å‡ºæ¥"></a>1000wä¸ªæ•°æ®ä¸­åªæœ‰ä¸¤ä¸ªç›¸åŒçš„æ•°æ®ï¼Œå¦‚ä½•æ‰¾å‡ºæ¥</h4><p>ä½¿ç”¨HashSet</p>
<h3 id="è§£é‡Šä¸€ä¸‹ç­¾åˆ°æ¨¡å—ä¸­çš„æ¥å£å¹‚ç­‰æ€§"><a href="#è§£é‡Šä¸€ä¸‹ç­¾åˆ°æ¨¡å—ä¸­çš„æ¥å£å¹‚ç­‰æ€§" class="headerlink" title="è§£é‡Šä¸€ä¸‹ç­¾åˆ°æ¨¡å—ä¸­çš„æ¥å£å¹‚ç­‰æ€§"></a>è§£é‡Šä¸€ä¸‹ç­¾åˆ°æ¨¡å—ä¸­çš„æ¥å£å¹‚ç­‰æ€§</h3><h3 id="è§£é‡Šä¸€ä¸‹å¦‚ä½•ä¿è¯çš„Redisçš„é«˜å¯ç”¨æ€§"><a href="#è§£é‡Šä¸€ä¸‹å¦‚ä½•ä¿è¯çš„Redisçš„é«˜å¯ç”¨æ€§" class="headerlink" title="è§£é‡Šä¸€ä¸‹å¦‚ä½•ä¿è¯çš„Redisçš„é«˜å¯ç”¨æ€§"></a>è§£é‡Šä¸€ä¸‹å¦‚ä½•ä¿è¯çš„Redisçš„é«˜å¯ç”¨æ€§</h3><h3 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h3><h4 id="åˆ†å¸ƒå¼æ¶æ„è¦æ³¨æ„å“ªäº›é—®é¢˜"><a href="#åˆ†å¸ƒå¼æ¶æ„è¦æ³¨æ„å“ªäº›é—®é¢˜" class="headerlink" title="åˆ†å¸ƒå¼æ¶æ„è¦æ³¨æ„å“ªäº›é—®é¢˜"></a>åˆ†å¸ƒå¼æ¶æ„è¦æ³¨æ„å“ªäº›é—®é¢˜</h4><ol>
<li>æ•°æ®ä¸€è‡´æ€§ï¼šè¦ä¿è¯é›†ç¾¤ä¸­çš„æ•°æ®æ˜¯ä¸€è‡´çš„</li>
<li>ç½‘ç»œåˆ†åŒºå®¹å¿æ€§ï¼šå‡ºç°äº†ç½‘ç»œåˆ†åŒºï¼Œæ ¹æ®CAPå®šç†ï¼Œå‡ºç°ç½‘ç»œåˆ†åŒºæ—¶éœ€è¦åœ¨ä¸šåŠ¡éœ€æ±‚çš„ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´åšå‡ºå‡è¡¡</li>
<li>æœåŠ¡å‘ç°ï¼šå½“æœåŠ¡å‡ºç°å¢åŠ å‡å°‘æˆ–è€…ç§»åŠ¨ï¼Œå®¢æˆ·ç«¯éœ€è¦æ‰¾åˆ°è¿™äº›æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨Nacosè§£å†³</li>
<li>è´Ÿè½½å‡è¡¡ï¼šåˆç†åˆ†é…è¯·æ±‚æˆ–ä»»åŠ¡åˆ°å¤šä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œæ¥ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡å’Œå“åº”æ—¶é—´</li>
<li>å®¹é”™å’Œæ•…éšœè½¬ç§»ï¼šå•ç‚¹æ•…éšœä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨</li>
<li>äº‹åŠ¡ç®¡ç†ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç®¡ç†è·¨å¤šä¸ªæœåŠ¡çš„äº‹åŠ¡ï¼Œä¿è¯æ“ä½œçš„åŸå­æ€§å’Œä¸€è‡´æ€§</li>
<li>å®‰å…¨æ€§ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‹‰åŠ±å¤šç§å®‰å…¨å¨èƒï¼Œæ•°æ®æ³„éœ²ï¼ŒæœåŠ¡æ‹’ç»æ”»å‡»</li>
<li>æ€§èƒ½ç›‘æ§å’Œè°ƒä¼˜ï¼š<br>CAPåŸç†<br><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong><br><strong>å¯ç”¨æ€§ï¼ˆAvailability</strong>ï¼‰<br><strong>åˆ†åŒºå®¹å¿æ€§ï¼ˆPartition tolerance</strong>ï¼‰<br>å½“å‡ºç°ç½‘ç»œåˆ†åŒºPæ—¶ï¼ŒCAåªèƒ½ä¿è¯ä¸€ä¸ª</li>
</ol>
<h3 id="é¡¹ç›®ä¸­é‡è§çš„æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³çš„"><a href="#é¡¹ç›®ä¸­é‡è§çš„æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³çš„" class="headerlink" title="é¡¹ç›®ä¸­é‡è§çš„æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³çš„"></a>é¡¹ç›®ä¸­é‡è§çš„æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³çš„</h3><h3 id="æ•°æ®åº“ä¸­çš„è„æ•°æ®å¦‚ä½•å¤„ç†"><a href="#æ•°æ®åº“ä¸­çš„è„æ•°æ®å¦‚ä½•å¤„ç†" class="headerlink" title="æ•°æ®åº“ä¸­çš„è„æ•°æ®å¦‚ä½•å¤„ç†"></a>æ•°æ®åº“ä¸­çš„è„æ•°æ®å¦‚ä½•å¤„ç†</h3><h2 id="2024-07-02-æ±Ÿè‹è¿è”äºŒé¢-ç­‰ç»“æœï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿˜å¯ä»¥"><a href="#2024-07-02-æ±Ÿè‹è¿è”äºŒé¢-ç­‰ç»“æœï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿˜å¯ä»¥" class="headerlink" title="2024-07-02 æ±Ÿè‹è¿è”äºŒé¢(ç­‰ç»“æœï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿˜å¯ä»¥)"></a>2024-07-02 æ±Ÿè‹è¿è”äºŒé¢(ç­‰ç»“æœï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿˜å¯ä»¥)</h2><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸»åŠ¨æŠŠè‡ªå·±çš„äº®ç‚¹é¡¹ç›®ä»‹ç»å‡ºæ¥ï¼Œåœ¨è‡ªæˆ‘ä»‹ç»ç¯èŠ‚å°±åŠªåŠ›ä»‹ç»ã€‚æŠŠè‡ªå·±çš„ä¼˜ç‚¹ï¼ˆè‹±è¯­ã€å…­çº§ã€åšå®¢ã€é¡¹ç›®å¼€å‘ã€githubã€æƒ³ç»™å¼€æºé¡¹ç›®åšè´¡çŒ®ï¼‰</p>
<h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><ol>
<li>è‡ªæˆ‘ä»‹ç»</li>
<li>æ‰¿æ‹…çš„è´£ä»»ã€å‰åç«¯éƒ½å‚ä¸å¼€å‘ï¼Œä¸»è¦æ¡†æ¶æ­å»ºï¼Œå‘¨æœŸ</li>
<li>ä»‹ç»é¡¹ç›®ï¼ˆè¦ä¸»åŠ¨ä»‹ç»è‡ªå·±çš„ç‰¹ç‚¹å’Œäº®ç‚¹ï¼‰</li>
<li>æ¡†æ¶æ­å»ºä½¿ç”¨äº†å“ªäº›æŠ€æœ¯æ ˆ</li>
<li>ç­¾åˆ°ç›¸å…³</li>
<li>éœ€æ±‚æ€ä¹ˆæ¥çš„</li>
<li>æœ‰è¯¾å¦ï¼Ÿå­¦åˆ†èƒ½ä¿®æ»¡å¦ï¼Ÿå¤§ä¸‰ä¸‹å­¦æœŸæœ‰å¯å¦ï¼Ÿå¤§å››è¦å¹²å˜›ï¼Ÿ</li>
<li>è‹±è¯­å¦‚ä½•</li>
<li>æ€ä¹ˆæå‡é˜…è¯»</li>
<li>æœŸæœ›è–ªèµ„</li>
<li>æœ€å¿«åˆ°å²—</li>
<li></li>
</ol>
<h3 id="HashMapå’ŒHashTableä»€ä¹ˆåŒºåˆ«"><a href="#HashMapå’ŒHashTableä»€ä¹ˆåŒºåˆ«" class="headerlink" title="HashMapå’ŒHashTableä»€ä¹ˆåŒºåˆ«"></a>HashMapå’ŒHashTableä»€ä¹ˆåŒºåˆ«</h3><ol>
<li>çº¿ç¨‹å®‰å…¨ï¼š<ul>
<li><strong>HashTable</strong> çº¿ç¨‹æ›´å®‰å…¨,ä»–çš„æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥ç”¨åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨ConcurrentHashMap</li>
</ul>
</li>
<li>æ€§èƒ½ï¼šHashMapæ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦è¿›è¡ŒåŒæ­¥</li>
<li>ç©ºå€¼ï¼šHashTableä¸å…è®¸key/valueä¸ºnullï¼Œè€ŒHashMapå…è®¸ä¸€æ¡è®°å½•çš„keyä¸ºnullï¼Œå…è®¸å¤šä¸ªè®°å½•çš„valueä¸ºnull</li>
<li>ç»§æ‰¿çš„è·Ÿç±»ä¸åŒï¼š<ul>
<li><code>HashTable</code>&nbsp;ç»§æ‰¿è‡ª&nbsp;<code>Dictionary</code>&nbsp;ç±»ã€‚</li>
<li><code>HashMap</code>&nbsp;ç»§æ‰¿è‡ª&nbsp;<code>AbstractMap</code>&nbsp;ç±»å¹¶å®ç°äº†&nbsp;<code>Map</code>&nbsp;æ¥å£ã€‚</li>
</ul>
</li>
<li>è¿­ä»£å™¨<ul>
<li><code>HashTable</code>&nbsp;ä½¿ç”¨&nbsp;<code>Enumerator</code>&nbsp;è¿›è¡Œè¿­ä»£ã€‚</li>
<li><code>HashMap</code>&nbsp;ä½¿ç”¨&nbsp;<code>Iterator</code>&nbsp;è¿›è¡Œè¿­ä»£ã€‚<code>Iterator</code>&nbsp;æ˜¯fail-fastè¿­ä»£å™¨ï¼Œå¦‚æœåœ¨è¿­ä»£è¿‡ç¨‹ä¸­æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†&nbsp;<code>HashMap</code>ï¼Œåˆ™ä¼šæŠ›å‡º&nbsp;<code>ConcurrentModificationException</code>ã€‚</li>
</ul>
</li>
<li><strong>å†…éƒ¨ç»“æ„</strong>ï¼ˆJava 8 åŠä»¥åï¼‰ï¼š<ul>
<li><code>HashMap</code>&nbsp;åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥æé«˜æœç´¢æ•ˆç‡ã€‚</li>
<li><code>HashTable</code>&nbsp;ä¸å…·å¤‡è¿™ç§é“¾è¡¨åˆ°çº¢é»‘æ ‘çš„è½¬æ¢æœºåˆ¶ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ConcurrentHashMapç›¸å…³"><a href="#ConcurrentHashMapç›¸å…³" class="headerlink" title="ConcurrentHashMapç›¸å…³"></a>ConcurrentHashMapç›¸å…³</h3><h3 id="MySQLç´¢å¼•-1"><a href="#MySQLç´¢å¼•-1" class="headerlink" title="MySQLç´¢å¼•"></a>MySQLç´¢å¼•</h3><h3 id="ç´¢å¼•æœ‰ä»€ä¹ˆç”¨"><a href="#ç´¢å¼•æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="ç´¢å¼•æœ‰ä»€ä¹ˆç”¨"></a>ç´¢å¼•æœ‰ä»€ä¹ˆç”¨</h3><h4 id="ç´¢å¼•å¤±æ•ˆåœºæ™¯"><a href="#ç´¢å¼•å¤±æ•ˆåœºæ™¯" class="headerlink" title="ç´¢å¼•å¤±æ•ˆåœºæ™¯"></a>ç´¢å¼•å¤±æ•ˆåœºæ™¯</h4><p>å»ºè®®æ­é…è‡ªå·±é¡¹ç›®ä¸­çš„åœºæ™¯ä»‹ç»</p>
<h3 id="å·¥ä½œæµ"><a href="#å·¥ä½œæµ" class="headerlink" title="å·¥ä½œæµ"></a>å·¥ä½œæµ</h3><h3 id="æ‘„åƒå¤´è¯†åˆ«åˆ†ææ•°æ®ç±»çš„åœºæ™¯äº†è§£è¿‡æ²¡"><a href="#æ‘„åƒå¤´è¯†åˆ«åˆ†ææ•°æ®ç±»çš„åœºæ™¯äº†è§£è¿‡æ²¡" class="headerlink" title="æ‘„åƒå¤´è¯†åˆ«åˆ†ææ•°æ®ç±»çš„åœºæ™¯äº†è§£è¿‡æ²¡"></a>æ‘„åƒå¤´è¯†åˆ«åˆ†ææ•°æ®ç±»çš„åœºæ™¯äº†è§£è¿‡æ²¡</h3><h2 id="2024-07-03-ç¥å·çµäº‘ä¸€é¢-å·²è¿‡ï¼Œå·²å‘ofifer"><a href="#2024-07-03-ç¥å·çµäº‘ä¸€é¢-å·²è¿‡ï¼Œå·²å‘ofifer" class="headerlink" title="2024-07-03 ç¥å·çµäº‘ä¸€é¢(å·²è¿‡ï¼Œå·²å‘ofifer)"></a>2024-07-03 ç¥å·çµäº‘ä¸€é¢(å·²è¿‡ï¼Œå·²å‘ofifer)</h2><h3 id="æµç¨‹-1"><a href="#æµç¨‹-1" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><ol>
<li>è‡ªæˆ‘ä»‹ç»</li>
<li>ä»‹ç»å·¥ä½œå®¤</li>
<li>é¡¹ç›®ä¸Šçº¿äº†orå®éªŒå®¤é¡¹ç›®</li>
<li>å·²ç»å­¦å®Œçš„è¯¾ç¨‹</li>
<li>å…³äºç¬”è¯•é¢˜çš„æé—®ï¼š<ul>
<li>è§£é¢˜çš„å…³é”®ç‚¹æ˜¯ä»€ä¹ˆ</li>
<li>æˆ–è¿ç®—å’Œï¼‹è¿ç®—æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™ä¸ªé¢˜ç›®ä¸­ä¸¤ç§è¿ç®—æœ‰ä»€ä¹ˆåŒºåˆ«</li>
<li>æ•´å‹è½¬å­—ç¬¦ä¸²</li>
</ul>
</li>
<li>ä¸€å‘¨å‡ å¤©/æ—¶é—´/æœ€å¿«åˆ°å²—</li>
<li>é¡¹ç›®ä»£ç /å‡ äººå¼€å‘ </li>
<li>åé—®:<ul>
<li>å¤šä¹…å‡ºé¢è¯•ç»“æœ ç­”ï¼šæŠ€æœ¯é¢ï¼Œè¿˜æœ‰äºŒé¢</li>
<li>é¢çš„æ€ä¹ˆæ ·ï¼Œæœ‰ä»€ä¹ˆå»ºè®®ï¼Œç­”ï¼šé¢çš„è¿˜å¯ä»¥</li>
<li>èŒä½çš„èŒè´£ï¼Œ ç­”ï¼šæ–‡æ¡£ï¼Œç®€å•å¼€å‘ï¼Œå¯¹ç½‘ç»œè¦æ±‚è¾ƒé«˜ã€‚</li>
</ul>
</li>
</ol>
<h3 id="TCPæ¡æ‰‹è¿‡ç¨‹-å¿˜äº†ã€‚ã€‚ã€‚"><a href="#TCPæ¡æ‰‹è¿‡ç¨‹-å¿˜äº†ã€‚ã€‚ã€‚" class="headerlink" title="TCPæ¡æ‰‹è¿‡ç¨‹(å¿˜äº†ã€‚ã€‚ã€‚)"></a>TCPæ¡æ‰‹è¿‡ç¨‹(å¿˜äº†ã€‚ã€‚ã€‚)</h3><ol>
<li>å®¢æˆ·ç«¯å‘é€å¸¦æœ‰åŒæ­¥åºåˆ—ç¼–å·(SYN)æŠ¥æ–‡åˆ°æœåŠ¡å™¨ï¼Œç„¶åå®¢æˆ·ç«¯è¿›å…¥SYN-SENTçš„çŠ¶æ€</li>
<li>æœåŠ¡å™¨æ”¶åˆ°å¸¦æœ‰SYNçš„æŠ¥æ–‡ä¹‹åï¼Œå¦‚æœç»Ÿä¸€å»ºç«‹è¿æ¥ï¼Œå°±ä¼šå‘é€ä¸€ä¸ªSYN-ACKæŠ¥æ–‡ä½œæ–‡å“åº”ï¼Œè¿™ä¸ªæŠ¥æ–‡åŒ…å«æœåŠ¡å™¨è‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼ŒåŒæ—¶å¯¹å®¢æˆ·ç«¯çš„SYNæŠ¥æ–‡è¿›è¡Œç¡®è®¤</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„STN-ACKæŠ¥æ–‡ä¹‹åä¼šå‘é€ä¸€ä¸ªACKæŠ¥æ–‡ä½œä¸ºå“åº”ï¼Œä¹‹åå®¢æˆ·ç«¯è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œä¹‹åæœåŠ¡å™¨æ¥æ”¶åˆ°ä¹‹åä¹Ÿè¿›å…¥è¿æ¥çŠ¶æ€ã€‚</li>
</ol>
<h3 id="JWTæ˜¯ä»€ä¹ˆï¼ŒJWTå°±æ˜¯Tokençš„ä¸€ç§æ ¼å¼"><a href="#JWTæ˜¯ä»€ä¹ˆï¼ŒJWTå°±æ˜¯Tokençš„ä¸€ç§æ ¼å¼" class="headerlink" title="JWTæ˜¯ä»€ä¹ˆï¼ŒJWTå°±æ˜¯Tokençš„ä¸€ç§æ ¼å¼"></a>JWTæ˜¯ä»€ä¹ˆï¼ŒJWTå°±æ˜¯Tokençš„ä¸€ç§æ ¼å¼</h3><h3 id="MongoDBåŸºç¡€æé—®ï¼ˆä¸ä¼š-è¿˜æœ‰ESçš„å‘½ä»¤"><a href="#MongoDBåŸºç¡€æé—®ï¼ˆä¸ä¼š-è¿˜æœ‰ESçš„å‘½ä»¤" class="headerlink" title="MongoDBåŸºç¡€æé—®ï¼ˆä¸ä¼š)è¿˜æœ‰ESçš„å‘½ä»¤"></a>MongoDBåŸºç¡€æé—®ï¼ˆä¸ä¼š)è¿˜æœ‰ESçš„å‘½ä»¤</h3><p>èƒŒèƒŒä¸»è¦çš„æŸ¥è¯¢è¯­å¥å»</p>
<h3 id="æƒé™ç®¡ç†çš„è®¾è®¡"><a href="#æƒé™ç®¡ç†çš„è®¾è®¡" class="headerlink" title="æƒé™ç®¡ç†çš„è®¾è®¡"></a>æƒé™ç®¡ç†çš„è®¾è®¡</h3><h4 id="RBAC-ï¼ˆRole-Based-Access-Controlï¼‰åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶"><a href="#RBAC-ï¼ˆRole-Based-Access-Controlï¼‰åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶" class="headerlink" title="RBAC ï¼ˆRole-Based Access Controlï¼‰åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶"></a>RBAC ï¼ˆ<strong>Role-Based Access Control</strong>ï¼‰åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</h4><p><img src="/2024/06/07/17/RABC.png"><br>å°†æƒé™èµ‹äºˆè§’è‰²ï¼Œç„¶åå°†è§’è‰²èµ‹äºˆç”¨æˆ·ï¼Œè¿™æ ·çš„è®¾è®¡å°±å¯ä»¥å¾ˆæ–¹æŸéœ“çš„æ›´æ”¹è§’è‰²å†…æ‰€æœ‰ç”¨æˆ·çš„æƒé™ï¼Œä¹Ÿæ–¹ä¾¿å°†ç”¨æˆ·çš„æƒé™å˜æ›´</p>
<h4 id="ABAC-Attribute-Based-Access-Control-åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶"><a href="#ABAC-Attribute-Based-Access-Control-åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶" class="headerlink" title="ABAC (**Attribute-Based Access Control ) åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶"></a>ABAC (**Attribute-Based Access Control ) åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶</h4><p>é€šè¿‡å„ç§å±æ€§æ¥åŠ¨æ€åˆ¤æ–­ä¸€ä¸ªæ“ä½œæ˜¯å¦å¯ä»¥è¢«å…è®¸ã€‚<br>æ¯”å¦‚èµ‹äºˆæŸä¸ªäººå¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡æ¡£çš„æƒé™ï¼Œä½†æ˜¯ä¸å¯ä»¥ä¿®æ”¹ã€‚<br>æ˜¯åŸºäºå¯¹è±¡ã€èµ„æºã€æ“ä½œã€ç¯å¢ƒï¼ˆä¸Šä¸‹æ–‡ï¼Œæ—¶é—´å’Œä½ç½®ï¼Œåè®®ç­‰ï¼‰ï¼Œå…·ä½“çš„å®ç°</p>
<h4 id="æ–°æƒé™ç³»ç»Ÿ"><a href="#æ–°æƒé™ç³»ç»Ÿ" class="headerlink" title="æ–°æƒé™ç³»ç»Ÿ"></a>æ–°æƒé™ç³»ç»Ÿ</h4><p><img src="/2024/06/07/17/%E6%96%B0%E6%9D%83%E9%99%90.png"><br>ä¸»è¦å°±æ˜¯åœ¨RBACçš„åŸºç¡€ä¸Šï¼Œå…è®¸ç»•è¿‡è§’è‰²æ¥ç›´æ¥ç»™ç”¨æˆ·æ·»åŠ ä¸€äº›æƒé™</p>
<h3 id="é›†ç¾¤æ€ä¹ˆè®¾è®¡çš„ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œå¦‚ä½•åº”å¯¹è„‘è£‚"><a href="#é›†ç¾¤æ€ä¹ˆè®¾è®¡çš„ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œå¦‚ä½•åº”å¯¹è„‘è£‚" class="headerlink" title="é›†ç¾¤æ€ä¹ˆè®¾è®¡çš„ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œå¦‚ä½•åº”å¯¹è„‘è£‚"></a>é›†ç¾¤æ€ä¹ˆè®¾è®¡çš„ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Œå¦‚ä½•åº”å¯¹è„‘è£‚</h3><h3 id="å¦‚ä½•ä¸­æ­¢SQLè¯­å¥"><a href="#å¦‚ä½•ä¸­æ­¢SQLè¯­å¥" class="headerlink" title="å¦‚ä½•ä¸­æ­¢SQLè¯­å¥"></a>å¦‚ä½•ä¸­æ­¢SQLè¯­å¥</h3><p>åœºæ™¯ï¼šæœ‰ä¸€ä¸ªè®¿é—®éœ€è¦æŸ¥è¯¢ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®åº“ï¼Œç„¶åå‰ç«¯é‚£è¾¹ç­‰ä¸åŠäº†åˆ·æ–°ï¼Œå°±ä¼šä¸æ–­å‘é€è¿™ä¸ªè¯·æ±‚ï¼Œæˆ‘æ•°æ®åº“è¯¥å¦‚ä½•å¤„ç†è¿™äº›æ— æ•ˆçš„æŸ¥è¯¢ï¼Ÿ</p>
<h2 id="2024-08-28-åŒ—äº¬ç”¨å‹ä¸€é¢"><a href="#2024-08-28-åŒ—äº¬ç”¨å‹ä¸€é¢" class="headerlink" title="2024-08-28 åŒ—äº¬ç”¨å‹ä¸€é¢"></a>2024-08-28 åŒ—äº¬ç”¨å‹ä¸€é¢</h2><p>è‡ªæˆ‘ä»‹ç»</p>
<h3 id="ä»‹ç»æ—è·¯ç¼“å­˜ï¼Œæ—è·¯ç¼“å­˜ä¸€å®šèƒ½ä¿è¯ä¸€è‡´æ€§å—"><a href="#ä»‹ç»æ—è·¯ç¼“å­˜ï¼Œæ—è·¯ç¼“å­˜ä¸€å®šèƒ½ä¿è¯ä¸€è‡´æ€§å—" class="headerlink" title="ä»‹ç»æ—è·¯ç¼“å­˜ï¼Œæ—è·¯ç¼“å­˜ä¸€å®šèƒ½ä¿è¯ä¸€è‡´æ€§å—"></a>ä»‹ç»æ—è·¯ç¼“å­˜ï¼Œæ—è·¯ç¼“å­˜ä¸€å®šèƒ½ä¿è¯ä¸€è‡´æ€§å—</h3><p>æ—è·¯ç¼“å­˜æ˜¯ç”±åº”ç”¨ç¨‹åºæ¥ä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œç‰¹ç‚¹æ˜¯ç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œåˆ é™¤ç¼“å­˜ã€‚<br>å¯ä»¥ä¿è¯ä¸€è‡´æ€§ï¼Œå› ä¸ºç¼“å­˜å†™å…¥çš„é€Ÿåº¦æ˜¯è¿œè¿œå¿«äºæ•°æ®åº“çš„å†™å…¥çš„ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨Redissonè€Œä¸æ˜¯ä½¿ç”¨synchronized"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Redissonè€Œä¸æ˜¯ä½¿ç”¨synchronized" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Redissonè€Œä¸æ˜¯ä½¿ç”¨synchronized"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Redissonè€Œä¸æ˜¯ä½¿ç”¨synchronized</h3><ol>
<li>åˆ†å¸ƒå¼é”ï¼ŒSynchronizedåªèƒ½åœ¨å•ä¸ªJVMå†…éƒ¨å·¥ä½œ</li>
<li>å¯é‡å…¥æ€§ï¼ŒRedissonæä¾›äº†å¯é‡å…¥æ€§é”çš„å®ç°ï¼Œè€ŒSynchronizedéœ€è¦æ‰‹åŠ¨ç®¡ç†å¯é‡å…¥æ€§</li>
<li>é”è¶…æ—¶ï¼ŒRedissonæ”¯æŒè¶…æ—¶é‡Šæ”¾é˜²æ­¢æ­»é”å‘ç”Ÿ</li>
</ol>
<h3 id="HashMapã€ConcurrentHashMap-jdk1-7çš„åŒºåˆ«"><a href="#HashMapã€ConcurrentHashMap-jdk1-7çš„åŒºåˆ«" class="headerlink" title="HashMapã€ConcurrentHashMap jdk1.7çš„åŒºåˆ«"></a>HashMapã€ConcurrentHashMap jdk1.7çš„åŒºåˆ«</h3><h3 id="Sentinel-ç›¸å…³"><a href="#Sentinel-ç›¸å…³" class="headerlink" title="Sentinel ç›¸å…³"></a>Sentinel ç›¸å…³</h3><h3 id="å»ºç«‹ç´¢å¼•æœ‰å“ªäº›è€ƒé‡"><a href="#å»ºç«‹ç´¢å¼•æœ‰å“ªäº›è€ƒé‡" class="headerlink" title="å»ºç«‹ç´¢å¼•æœ‰å“ªäº›è€ƒé‡"></a>å»ºç«‹ç´¢å¼•æœ‰å“ªäº›è€ƒé‡</h3><h3 id="ç´¢å¼•å¤±æ•ˆåœºæ™¯-1"><a href="#ç´¢å¼•å¤±æ•ˆåœºæ™¯-1" class="headerlink" title="ç´¢å¼•å¤±æ•ˆåœºæ™¯"></a>ç´¢å¼•å¤±æ•ˆåœºæ™¯</h3><ol>
<li>æŸ¥è¯¢æ¡ä»¶ä¸ç¬¦åˆç´¢å¼•åˆ—çš„é¡ºåº</li>
<li>ä½¿ç”¨å‡½æ•°æˆ–è¡¨è¾¾å¼</li>
<li>éšå¼ç±»å‹è½¬æ¢</li>
<li>ä¸ç­‰äºæ“ä½œ</li>
<li>èŒƒå›´æŸ¥è¯¢</li>
</ol>
<h3 id="ESå’ŒMySQLåŒºåˆ«"><a href="#ESå’ŒMySQLåŒºåˆ«" class="headerlink" title="ESå’ŒMySQLåŒºåˆ«"></a>ESå’ŒMySQLåŒºåˆ«</h3><h3 id="Rediså¸¸è§æ•°æ®ç»“æ„ï¼Œstringåº•å±‚"><a href="#Rediså¸¸è§æ•°æ®ç»“æ„ï¼Œstringåº•å±‚" class="headerlink" title="Rediså¸¸è§æ•°æ®ç»“æ„ï¼Œstringåº•å±‚"></a>Rediså¸¸è§æ•°æ®ç»“æ„ï¼Œstringåº•å±‚</h3><h3 id="JVMå†…å­˜æ³„æ¼å¦‚ä½•å®šä½ã€æ’æŸ¥"><a href="#JVMå†…å­˜æ³„æ¼å¦‚ä½•å®šä½ã€æ’æŸ¥" class="headerlink" title="JVMå†…å­˜æ³„æ¼å¦‚ä½•å®šä½ã€æ’æŸ¥"></a>JVMå†…å­˜æ³„æ¼å¦‚ä½•å®šä½ã€æ’æŸ¥</h3><h3 id="dockerå¸¸è§æŒ‡ä»¤"><a href="#dockerå¸¸è§æŒ‡ä»¤" class="headerlink" title="dockerå¸¸è§æŒ‡ä»¤"></a>dockerå¸¸è§æŒ‡ä»¤</h3><h3 id="å¹¶è¡ŒStreamæµçš„åº•å±‚"><a href="#å¹¶è¡ŒStreamæµçš„åº•å±‚" class="headerlink" title="å¹¶è¡ŒStreamæµçš„åº•å±‚"></a>å¹¶è¡ŒStreamæµçš„åº•å±‚</h3><h2 id="ksæµ‹å¼€ä¸€é¢-2024-09-04"><a href="#ksæµ‹å¼€ä¸€é¢-2024-09-04" class="headerlink" title="ksæµ‹å¼€ä¸€é¢ 2024.09.04"></a>ksæµ‹å¼€ä¸€é¢ 2024.09.04</h2><p>è‡ªæˆ‘ä»‹ç»<br>å®ä¹ è´Ÿè´£çš„ä¸šåŠ¡<br> é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ï¼Œåˆ†åˆ«ä»‹ç»ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨<br> é‡è½½</p>
<blockquote>
<p>å¤šæ€ï¼ˆPolymorphismï¼‰æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå…è®¸å¯¹è±¡ä»¥å¤šç§å½¢å¼å‡ºç°ã€‚å¤šæ€æ€§ä½¿å¾—ç›¸åŒçš„æ“ä½œå¯ä»¥ä½œç”¨äºä¸åŒçš„å¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡å¯ä»¥æ ¹æ®å…·ä½“çš„å®ç°è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚å¤šæ€æ€§ä¸»è¦é€šè¿‡ç»§æ‰¿å’Œæ¥å£å®ç°ã€‚</p>
<ol>
<li><strong>ç¼–è¯‘æ—¶å¤šæ€ï¼ˆé™æ€å¤šæ€ï¼‰</strong>ï¼š<br> é€šè¿‡æ–¹æ³•é‡è½½ï¼ˆMethod Overloadingï¼‰å®ç°ã€‚åŒä¸€ä¸ªç±»ä¸­å¯ä»¥æœ‰å¤šä¸ªæ–¹æ³•ï¼Œå®ƒä»¬å…·æœ‰ç›¸åŒçš„åå­—ä½†å‚æ•°ä¸åŒã€‚<br> <strong>è¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€å¤šæ€ï¼‰</strong>ï¼š<br>  é€šè¿‡æ–¹æ³•é‡å†™ï¼ˆMethod Overridingï¼‰å®ç°ã€‚å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¿è¡Œæ—¶å¯ä»¥æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚</li>
</ol>
</blockquote>
<h3 id="åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡æ˜¯å›æ”¶å¯¹è±¡"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡æ˜¯å›æ”¶å¯¹è±¡" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡æ˜¯å›æ”¶å¯¹è±¡"></a>åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡æ˜¯å›æ”¶å¯¹è±¡</h3><ol>
<li>å¼•ç”¨è®¡æ•°æ³•ï¼Œæ¯ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œå½“æœ‰ä¸€ä¸ªæ–°çš„å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼Œè®¡æ•°å™¨+1ï¼Œå½“ä¸€ä¸ªå¼•ç”¨ä¸å†æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼Œè®¡æ•°å™¨-1ã€‚å¦‚æœå¼•ç”¨è®¡æ•°å™¨ä¸º0ï¼Œåˆ™å¯ä»¥è¢«å›æ”¶ã€‚ç¼ºç‚¹æ˜¯ï¼šå¾ªç¯å¼•ç”¨ï¼Œä¸¤ä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨å¯¹æ–¹ï¼Œå¹¶ä¸”ä¸å†è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œå¼•ç”¨è®¡æ•°å™¨æ°¸è¿œä¸ä¼šä¸º0ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</li>
<li>å¯è¾¾æ€§ç®—æ³•ï¼šé€šè¿‡GC Rootsçš„å¯¹è±¡ä¸ºèµ·ç‚¹ï¼Œä»è¿™äº›å¯¹è±¡å¼€å§‹ï¼Œé€šè¿‡å¼•ç”¨é“¾å¯è¾¾çš„å°±ä¸ä¼šè¢«å›æ”¶ï¼Œä¸å¯è¾¾çš„å°±ä¼šè¢«å›æ”¶ã€‚(å¸¸è§çš„GC Rootsæ˜¯è™šæ‹Ÿæœºæ ˆä¸­çš„å¼•ç”¨å¯¹è±¡ï¼Œæ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±æ€§å¼•ç”¨å¯¹è±¡ï¼Œæ–¹æ³•å»ä¸­çš„å¸¸é‡å¼•ç”¨å¯¹è±¡ï¼Œæœ¬åœ°æ–¹æ³•æ ˆä¸­çš„Nativeæ–¹æ³•å¼•ç”¨çš„å¯¹è±¡)</li>
<li>æ ‡è®°-æ¸…é™¤ç®—æ³•(Mark-Sweep) <ol>
<li>ä»GC Rootså¼€å§‹æ ‡è®°å¯è¾¾å¯¹è±¡</li>
<li>éå†å †ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œæ¸…é™¤é‚£äº›æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚</li>
</ol>
</li>
</ol>
<h3 id="å¸¸è§çš„é›†åˆçš„å®ç°ç±»ï¼Œé›†åˆçš„å¥½å¤„"><a href="#å¸¸è§çš„é›†åˆçš„å®ç°ç±»ï¼Œé›†åˆçš„å¥½å¤„" class="headerlink" title="å¸¸è§çš„é›†åˆçš„å®ç°ç±»ï¼Œé›†åˆçš„å¥½å¤„"></a>å¸¸è§çš„é›†åˆçš„å®ç°ç±»ï¼Œé›†åˆçš„å¥½å¤„</h3><ol>
<li>ç®€åŒ–ä»£ç ï¼Œç®€åŒ–æ•°æ®ç»“æ„çš„ä½¿ç”¨</li>
<li>æé«˜å¼€å‘æ•ˆç‡</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
<li>ç±»å‹å®‰å…¨ï¼Œä½¿ç”¨æ³›å‹å¯ä»¥ç¡®ä¿é›†åˆä¸­çš„å…ƒç´ ç±»å‹ä¸€è‡´é¿å…äº†ç±»å‹è½¬åŒ–é”™è¯¯</li>
<li>ä¸°å¯Œçš„å·¥å…·ç±»</li>
</ol>
<h3 id="MySQLå¸¸è§å‘½ä»¤"><a href="#MySQLå¸¸è§å‘½ä»¤" class="headerlink" title="MySQLå¸¸è§å‘½ä»¤"></a>MySQLå¸¸è§å‘½ä»¤</h3><ol>
<li>åº“ CREATE DATABEASE, DROP DATABASE,USE ,SHOW DATABASES</li>
<li>è¡¨ CREATE TABLE,DROP TABLE,SHOW TABLES, ALTER TABLE ADD/DROP/MODIFY</li>
<li>æ•°æ® INSERT INTO,UPDATE,DELETE FROM,SELECT</li>
</ol>
<p>æŸ¥ä¸€ä¸ªè¡¨çš„ç¬¬10è¡Œå’Œ20è¡Œï¼Œlimit 9,10</p>
<h3 id="MySQLé»˜è®¤ç´¢å¼•çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆ"><a href="#MySQLé»˜è®¤ç´¢å¼•çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆ" class="headerlink" title="MySQLé»˜è®¤ç´¢å¼•çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆ"></a>MySQLé»˜è®¤ç´¢å¼•çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆ</h3><p>é»˜è®¤æ•°æ®ç»“æ„æ˜¯Bæ ‘ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä½¿ç”¨çš„æ˜¯B+æ ‘ä½œä¸ºç´¢å¼•æ•°æ®ç»“æ„<br>Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«ï¼šå°†æ‰€æœ‰çš„å€¼å­˜åœ¨å¶å­èŠ‚ç‚¹ä¸­</p>
<h3 id="Rediså’ŒMySQLçš„åŒºåˆ«"><a href="#Rediså’ŒMySQLçš„åŒºåˆ«" class="headerlink" title="Rediså’ŒMySQLçš„åŒºåˆ«"></a>Rediså’ŒMySQLçš„åŒºåˆ«</h3><h3 id="Linuxå¸¸è§å‘½ä»¤"><a href="#Linuxå¸¸è§å‘½ä»¤" class="headerlink" title="Linuxå¸¸è§å‘½ä»¤"></a>Linuxå¸¸è§å‘½ä»¤</h3><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨äº†Kafka"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨äº†Kafka" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨äº†Kafka"></a>ä¸ºä»€ä¹ˆä½¿ç”¨äº†Kafka</h3><ol>
<li>è§£è€¦</li>
<li>å¼‚æ­¥å¤„ç†</li>
<li>æµé‡å‰Šå³°</li>
<li>å¯é æ€§</li>
<li>å¯æ‰©å±•æ€§</li>
</ol>
<h3 id="ä»‹ç»ä¸€ä¸‹å®ä¹ é¡¹ç›®ä¹‹é—´çš„æœåŠ¡è°ƒç”¨"><a href="#ä»‹ç»ä¸€ä¸‹å®ä¹ é¡¹ç›®ä¹‹é—´çš„æœåŠ¡è°ƒç”¨" class="headerlink" title="ä»‹ç»ä¸€ä¸‹å®ä¹ é¡¹ç›®ä¹‹é—´çš„æœåŠ¡è°ƒç”¨"></a>ä»‹ç»ä¸€ä¸‹å®ä¹ é¡¹ç›®ä¹‹é—´çš„æœåŠ¡è°ƒç”¨</h3><h3 id="æœ‰ç”¨è¿‡æµ‹è¯•å—"><a href="#æœ‰ç”¨è¿‡æµ‹è¯•å—" class="headerlink" title="æœ‰ç”¨è¿‡æµ‹è¯•å—"></a>æœ‰ç”¨è¿‡æµ‹è¯•å—</h3><p>å¦‚ä½•è¿›è¡Œå‹æµ‹</p>
<h3 id="åˆ†å¸ƒå¼é”å¦‚ä½•å®ç°çš„ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼"><a href="#åˆ†å¸ƒå¼é”å¦‚ä½•å®ç°çš„ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼" class="headerlink" title="åˆ†å¸ƒå¼é”å¦‚ä½•å®ç°çš„ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼"></a>åˆ†å¸ƒå¼é”å¦‚ä½•å®ç°çš„ï¼Œæœ‰å“ªäº›å®ç°æ–¹å¼</h3><ol>
<li>åŸºäºRediså®ç°çš„åˆ†å¸ƒå¼é”ï¼Œ</li>
<li>åŸºäºZooKeeperå®ç°</li>
</ol>
<h4 id="ZooKeeperå®ç°"><a href="#ZooKeeperå®ç°" class="headerlink" title="ZooKeeperå®ç°"></a>ZooKeeperå®ç°</h4><p>æœ‰æ›´é«˜çš„å¯é æ€§ä¹‹å¤–ï¼ŒåŠŸèƒ½å¤–å±‚è¿˜æœ‰ä¸€ä¸ªåˆ†å‚æœ‰ç”¨çš„ç‰¹æ€§ï¼šWatchæœºåˆ¶ã€‚è¿™ä¸ªæœºåˆ¶å¯ä»¥ç”¨æ¥å®ç°å…¬å¹³çš„åˆ†å¸ƒå¼é”ã€‚æ€§èƒ½æ–¹é¢è¾ƒå·®</p>
<h5 id="å¦‚ä½•å®ç°"><a href="#å¦‚ä½•å®ç°" class="headerlink" title="å¦‚ä½•å®ç°"></a>å¦‚ä½•å®ç°</h5><p><img src="/2024/06/07/17/ZooKeeper%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.png" alt="|525"><br>ZooKeeperåˆ†å¸ƒå¼é”æ˜¯åŸºäºä¸´æ—¶é¡ºåºèŠ‚ç‚¹å’ŒWatcher(äº‹ä»¶ç›‘å¬å™¨)å®ç°çš„</p>
<ol>
<li>é¦–å…ˆè¦æœ‰ä¸€ä¸ªæŒä¹…èŠ‚ç‚¹/locksï¼Œå®¢æˆ·ç«¯è·å–é”å°±æ˜¯åœ¨locksä¸‹åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹</li>
<li>åˆ›å»º/locks/lock1èŠ‚ç‚¹ä¹‹åï¼Œä¼šåˆ¤æ–­lock1æ˜¯å¦æ˜¯/locksä¸‹æœ€å°çš„å­èŠ‚ç‚¹</li>
<li>å¦‚æœæ˜¯æœ€å°çš„å­èŠ‚ç‚¹ï¼Œåˆ™è·å–é”æˆåŠŸï¼Œå¦åˆ™è·å–å¤±è´¥ã€‚</li>
<li>å¦‚æœè·å–å¤±è´¥ï¼Œå®¢æˆ·ç«¯ä¼šåœ¨/locks/lock0ä¸Šæ³¨å†Œä¸€ä¸ªæ—¶é—´ç›‘å¬å™¨ï¼Œè¿™ä¸ªç›‘å¬å™¨çš„ä½œä¸šç”¨æ˜¯å½“å‰ä¸€ä¸ªèŠ‚ç‚¹é‡Šæ”¾é”ä¹‹åé€šçŸ¥å®¢æˆ·ç«¯1ï¼Œé¿å…æ— æ•ˆè‡ªæ—‹<br>é‡Šæ”¾é”ï¼š</li>
<li>æˆåŠŸè·å–é”çš„å®¢æˆ·ç«¯åœ¨æ‰§è¡Œå®Œä»»åŠ¡æµç¨‹ä¹‹åï¼Œä¼šå°†å¯¹åº”çš„å­èŠ‚ç‚¹åˆ é™¤</li>
<li>æˆåŠŸè·å–é”çš„å®¢æˆ·ç«¯å‡ºç°æ•…éšœä¹‹åï¼Œå¯¹åº”çš„å­èŠ‚ç‚¹æ˜¯ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼Œä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œé¿å…äº†é”æ— æ³•è¢«é‡Šæ”¾</li>
<li>äº‹ä»¶ç›‘å¬å™¨å°±æ˜¯ç›‘å¬è¿™ä¸ªå­èŠ‚ç‚¹åˆ é™¤äº‹ä»¶</li>
</ol>
<h5 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸´æ—¶é¡ºåºèŠ‚ç‚¹"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸´æ—¶é¡ºåºèŠ‚ç‚¹" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸´æ—¶é¡ºåºèŠ‚ç‚¹"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸´æ—¶é¡ºåºèŠ‚ç‚¹</h5><p>znodeæ˜¯ZooKeeperä¸­æ•°æ®çš„æœ€å°å•å…ƒ<br>znodeæœ‰4å¤§åˆ†ç±»</p>
<ol>
<li>æŒä¹…èŠ‚ç‚¹ï¼šä¸€æ—¦åˆ›å»ºå°±ä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿ZooKeeperé›†ç¾¤å®•æœº</li>
<li>ä¸´æ—¶èŠ‚ç‚¹ï¼šä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¼šè¯å°æ—¶åˆ™èŠ‚ç‚¹æ¶ˆå¤±ï¼Œä¸´æ—¶èŠ‚ç‚¹åªèƒ½ä½œä¸ºå¶å­èŠ‚ç‚¹ï¼Œä¸èƒ½å†åˆ›å»ºå­èŠ‚ç‚¹</li>
<li>æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼šæŒä¹…+é¡ºåºæ€§</li>
<li>ä¸´æ—¶é¡ºå¯»èŠ‚ç‚¹ï¼šä¸´æ—¶+é¡ºåºæ€§</li>
</ol>
<h5 id="ä¸ºä»€ä¹ˆè¦å¯¹å‰ä¸€ä¸ªèŠ‚ç‚¹ç›‘å¬"><a href="#ä¸ºä»€ä¹ˆè¦å¯¹å‰ä¸€ä¸ªèŠ‚ç‚¹ç›‘å¬" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¯¹å‰ä¸€ä¸ªèŠ‚ç‚¹ç›‘å¬"></a>ä¸ºä»€ä¹ˆè¦å¯¹å‰ä¸€ä¸ªèŠ‚ç‚¹ç›‘å¬</h5><blockquote>
<p>å½“å‰ä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å®¢æˆ·ç«¯é‡Šæ”¾é”ä¹‹åï¼ˆä¹Ÿå°±æ˜¯å‰ä¸€ä¸ªèŠ‚ç‚¹è¢«åˆ é™¤ä¹‹åï¼Œç›‘å¬çš„æ˜¯åˆ é™¤äº‹ä»¶ï¼‰ï¼Œé€šçŸ¥è·å–é”å¤±è´¥çš„å®¢æˆ·ç«¯ï¼ˆå”¤é†’ç­‰å¾…çš„çº¿ç¨‹ï¼ŒJava ä¸­çš„ <code>wait/notifyAll</code> ï¼‰ï¼Œè®©å®ƒå°è¯•å»è·å–é”ï¼Œç„¶åå°±æˆåŠŸè·å–é”äº†ã€‚</p>
</blockquote>
<h3 id="åé—®"><a href="#åé—®" class="headerlink" title="åé—®"></a>åé—®</h3><ol>
<li>å®ä¹ ç”Ÿè¯¥åšä»€ä¹ˆï¼šç»™å•¥åšå•¥</li>
<li>æµ‹è¯•å¼€å‘æ¯”ä¾‹å¤šå°‘ï¼šè‡³å°‘7ï¼š3</li>
<li>é¢è¯•ç»“æœå¦‚ä½•ï¼Œè¡¨ç°å¦‚ä½•ï¼šä»£ç èƒ½åŠ›å¯ä»¥ï¼Œå¯¹æµ‹è¯•çš„äº†è§£ä¸å¤ªè¡Œï¼Œå¯¹æµ‹è¯•æ˜¯å¦æ„Ÿå…´è¶£</li>
<li>æµ‹è¯•æŒ‚äº†å¯¹å…¶ä»–å²—ä½æœ‰ä»€ä¹ˆå½±å“ï¼šåªæœ‰ä¸æ¥ä¼šå½±å“</li>
</ol>
<h2 id="ç®—æ³•é¢˜-1"><a href="#ç®—æ³•é¢˜-1" class="headerlink" title="ç®—æ³•é¢˜"></a>ç®—æ³•é¢˜</h2><p>æœ€å¤§è·¯å¾„å’Œ(æœ€å°è·¯å¾„å’Œå˜ä½“) midéš¾åº¦<br>å¦‚ä½•éªŒè¯ç®—æ³•é¢˜æ˜¯å¯¹çš„</p>
<h2 id="å…¶ä»–äººé¢è¯•é‡åˆ°çš„é—®é¢˜"><a href="#å…¶ä»–äººé¢è¯•é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å…¶ä»–äººé¢è¯•é‡åˆ°çš„é—®é¢˜"></a>å…¶ä»–äººé¢è¯•é‡åˆ°çš„é—®é¢˜</h2><h3 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†-x2F-é™æ€ä»£ç†"><a href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†-x2F-é™æ€ä»£ç†" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†/é™æ€ä»£ç†"></a>ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†/é™æ€ä»£ç†</h3><p>åŠ¨æ€ä»£ç†<br>åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡çš„æœºåˆ¶ã€‚ä»£ç†å¯¹è±¡å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹å¯¹è±¡ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œå¹¶åœ¨è°ƒç”¨å‰åæ·»åŠ é¢å¤–çš„é€»è¾‘ã€‚Java ä¸­çš„åŠ¨æ€ä»£ç†ä¸»è¦æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š<br>é™æ€ä»£ç†<br>é™æ€ä»£ç†æ˜¯åœ¨ç¼–è¯‘æ—¶åˆ›å»ºä»£ç†ç±»çš„æœºåˆ¶ã€‚ä»£ç†ç±»åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å­˜åœ¨ï¼Œå¹¶ä¸”å®ç°äº†ä¸ç›®æ ‡å¯¹è±¡ç›¸åŒçš„æ¥å£ã€‚é™æ€ä»£ç†é€šè¿‡åœ¨ä»£ç†ç±»ä¸­è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ¥å®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„ä»£ç†ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡ä¼ æ’­"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡ä¼ æ’­" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡ä¼ æ’­"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡ä¼ æ’­</h3><p>äº‹åŠ¡ä¼ æ’­ Transaction Propagation æ˜¯æŒ‡Springæ¡†æ¶ä¸­å®šä¹‰äº‹åŠ¡åœ¨æ–¹æ³•è°ƒç”¨çš„è¿‡ç¨‹ä¸­å¦‚ä½•ä¼ æ’­çš„æœºåˆ¶ã€‚å†³å®šäº†ä¸€ä¸ªæ–¹æ³•åœ¨è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œäº‹åŠ¡åº”è¯¥å¦‚ä½•è¿›è¡Œç®¡ç†ã€‚</p>
<ul>
<li>REQUIREDï¼šé»˜è®¤æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ã€‚è¿™æ˜¯é»˜è®¤çš„<img src="/2024/06/07/17/REQUIRED.png"></li>
<li>REQUIRED_NEWï¼šæ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå½“å‰å­˜åœ¨äº‹åŠ¡å°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·<img src="/2024/06/07/17/REQUIRED_NEW.png"></li>
<li>SUPPORTSï¼šå¦‚æœå­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»¥éäº‹åŠ¡çš„æ–¹å¼æ‰§è¡Œ</li>
<li>NOT_SUPPORTEDï¼šå³ä½¿å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œä¹Ÿä¸è¿›è¡Œäº‹åŠ¡æ“ä½œã€‚</li>
<li>MANDATORYï¼šå­˜åœ¨å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±æŠ›å‡ºå¼‚å¸¸</li>
<li>NEVERï¼šæ€»æ˜¯ä»¥éäº‹åŠ¡çš„æ–¹å¼è¿è¡Œï¼Œå­˜åœ¨äº‹åŠ¡å°±æŠ›å‡ºå¼‚å¸¸</li>
<li>NESTEDï¼šå­˜åœ¨äº‹åŠ¡å°±åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œï¼Œæ²¡æœ‰äº‹åŠ¡å°±åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ã€‚å¯ä»¥è¯»åˆ°åµŒå¥—äº‹åŠ¡</li>
</ul>
<h3 id="g1-full-gcé€€åŒ–è¿‡ç¨‹"><a href="#g1-full-gcé€€åŒ–è¿‡ç¨‹" class="headerlink" title="g1 full gcé€€åŒ–è¿‡ç¨‹"></a>g1 full gcé€€åŒ–è¿‡ç¨‹</h3><h4 id="G1çš„å·¥ä½œåŸç†"><a href="#G1çš„å·¥ä½œåŸç†" class="headerlink" title="G1çš„å·¥ä½œåŸç†"></a>G1çš„å·¥ä½œåŸç†</h4><ol>
<li>åˆ†ä»£æ”¶é›†:G1å°†å †å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„åŒºåŸŸï¼ŒYong GC ä¸»è¦æ”¶é›†EdenåŒºå’ŒSurvivoråŒºçš„åƒåœ¾å¯¹è±¡</li>
<li>æ··åˆæ”¶é›†Mixed GCï¼šä¸ä»…å¹´è½»ä»£ï¼Œè¿˜æ”¶é›†éƒ¨åˆ†è€å¹´ä»£çš„åƒåœ¾å¯¹è±¡</li>
<li>å¹¶å‘æ ‡è®°å‘¨æœŸï¼šå¹¶å‘æ ‡è®°ï¼Œåƒåœ¾æ”¶é›†å¯ä»¥ä¸åº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå‡å°‘åƒåœ¾æ”¶é›†å¯¹åº”ç”¨ç¨‹åºçš„å½±å“æ ‡è®°è€å¹´ä»£ä¸­å­˜æ´»å¯¹è±¡ï¼Œä»¥ä¾¿åœ¨æ··åˆæ”¶é›†ä¸­å›æ”¶ã€‚</li>
</ol>
<h4 id="é€€åŒ–çš„åŸå› "><a href="#é€€åŒ–çš„åŸå› " class="headerlink" title="é€€åŒ–çš„åŸå› "></a>é€€åŒ–çš„åŸå› </h4><ol>
<li>å†…å­˜ä¸è¶³ï¼šå½“å†…å­˜ä¸è¶³ä»¥åˆ†é…æ–°çš„å¯¹è±¡æˆ–æ— æ³•é€šè¿‡Yong GCå’ŒMixed GCä¼šæœç‹ï¼Œè¶³å¤Ÿçš„å†…å­˜æ—¶ï¼Œä¼šè§¦å‘Full GC</li>
<li>å¹¶å‘å¤±è´¥ï¼šåœ¨å¹¶å‘æ ‡è®°å‘¨æœŸä¸­ï¼Œå¦‚æœæ— æ³•å³ä½¿å®Œæˆæ ‡è®°æˆ–è€…å›æ”¶ï¼Œå¯èƒ½ä¼šé€€åŒ–ä¸ºFull GC</li>
<li>æ™‹å‡å¤±è´¥ï¼šå½“å¯¹è±¡ä»å¹´è½»ä»£æ™‹å‡åˆ°è€å¹´ä»£æ—¶ï¼Œå¦‚æœè€å¹´ä»£æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´</li>
<li>å…ƒæ•°æ®ç©ºé—´ä¸è¶³</li>
</ol>
<h4 id="é€€åŒ–è¿‡ç¨‹"><a href="#é€€åŒ–è¿‡ç¨‹" class="headerlink" title="é€€åŒ–è¿‡ç¨‹"></a>é€€åŒ–è¿‡ç¨‹</h4><ol>
<li>å†…å­˜åˆ†é…å¤±è´¥ï¼Œå°è¯•è§¦å‘Yong GC</li>
<li>Yong GCå¤±è´¥ï¼Œè§¦å‘Mixed GC</li>
<li>Mixed GCå¤±è´¥ï¼ŒJVMè¿›å…¥Full GC</li>
<li>Full GCä¼šæš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹ï¼Œè¿›è¡Œå…¨ç«™æ‰«æå’Œå‹ç¼©ï¼Œä»¥ä¼šæœå°½å¯èƒ½å¤šçš„å†…å­˜ã€‚</li>
</ol>
<h3 id="gRPCä¸ºä»€ä¹ˆå¯ä»¥æé«˜æ•ˆç‡"><a href="#gRPCä¸ºä»€ä¹ˆå¯ä»¥æé«˜æ•ˆç‡" class="headerlink" title="gRPCä¸ºä»€ä¹ˆå¯ä»¥æé«˜æ•ˆç‡"></a>gRPCä¸ºä»€ä¹ˆå¯ä»¥æé«˜æ•ˆç‡</h3><ol>
<li>é«˜æ•ˆçš„åè®® Protocol Buffers</li>
<li>åŸºäºHTTP/2çš„ä¼ è¾“åè®®ï¼š<ul>
<li>å¤šè·¯å¤ç”¨ï¼šHTTP/2å…è®¸åœ¨å•ä¸ªTCPè¿æ¥ä¸Šå¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†è¿æ¥å»ºç«‹çš„å¼€é”€</li>
<li>å¤´éƒ¨å‹ç¼©ï¼šä½¿ç”¨HPACKç®—æ³•å¯¹å¤´éƒ¨è¿›è¡Œå‹ç¼©</li>
<li>æœåŠ¡å™¨æ¨é€ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¹‹å‰å‘é€æ•°æ®ï¼Œå‡å°‘å»¶è¿Ÿ</li>
<li>æµæ§åˆ¶ï¼šæ›´ç»†åŠ›åº¦çš„æµæ§åˆ¶ï¼Œä¼˜åŒ–äº†å¸¦å®½åˆ©ç”¨ç‡</li>
</ul>
</li>
<li>åŒå‘æµå’Œæµæ§åˆ¶ï¼šå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å•ä¸ªè¿æ¥ä¸ŠåŒæ—¶æ¥æ”¶å’Œå‘é€æ•°æ®ã€‚</li>
<li>è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°ï¼Œæ”¯æŒå¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥</li>
<li>é«˜æ•ˆçš„å¼‚æ­¥é€šä¿¡ï¼š</li>
<li>å®‰å…¨æ€§ï¼šå†…ç½®å¯¹TLSçš„æ”¯æŒ<br><img src="/2024/06/07/17/grpc%E5%8E%9F%E7%90%86.png"></li>
</ol>
<h3 id="synchronizedä»‹ç»ä¸‹ï¼Ÿåº•å±‚åŸç†ï¼Ÿå’ŒLOCKçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#synchronizedä»‹ç»ä¸‹ï¼Ÿåº•å±‚åŸç†ï¼Ÿå’ŒLOCKçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="synchronizedä»‹ç»ä¸‹ï¼Ÿåº•å±‚åŸç†ï¼Ÿå’ŒLOCKçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>synchronizedä»‹ç»ä¸‹ï¼Ÿåº•å±‚åŸç†ï¼Ÿå’ŒLOCKçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç”¨æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„äº’æ–¥è®¿é—®ï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œè¢«ä¿®é¥°çš„ä»£ç ã€‚</p>
<h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>é€šè¿‡å¯¹è±¡å¤´ä¸­çš„ç›‘è§†å™¨é”Monitorå®ç°ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åŒæ­¥ä»£ç å—æˆ–è€…æ–¹æ³•æ—¶ï¼Œä¼šå°è¯•è·å–è¯¥å¯¹è±¡çš„ç›‘è§†å™¨é”ã€‚<br>ç›‘è§†å™¨é”çš„ç»„æˆ:</p>
<ol>
<li>å¯¹è±¡å¤´ï¼šæ¯ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­éƒ½ä¸€ä¸ªå¯¹è±¡å¤´ï¼ŒåŒ…å«å¯¹è±¡çš„å…ƒæ•°æ®å’Œé”ä¿¡æ¯</li>
<li>Mark Wordï¼šå¯¹è±¡å¤´ä¸­çš„Mark Wordå­˜å‚¨äº†é”è£…å¡«ã€å“ˆå¸Œç ã€GCä¿¡æ¯ç­‰</li>
<li>Monitorï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç›‘è§†å™¨ï¼Œç”¨äºæ˜¯å®ç°åŒæ­¥ã€‚<br>å’ŒLockçš„åŒºåˆ«<br>synchroniedæ˜¯Javaè¯­è¨€çº§åˆ«çš„å…³é”®å­—ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œè€Œä¸”ç”±JVMç®¡ç†ï¼Œæ˜¯éšå¼é”ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹è·å–é”å¤±è´¥ä¼šè¢«é˜»å¡ï¼Œä¸å¯ä¸­æ–­ï¼Œçº¿ç¨‹åœ¨ç­‰å¾…é”æ—¶æ— æ³•è¢«ä¸­æ–­ã€‚<br>Lockæ—¶æ˜¾ç¤ºé”ï¼Œéœ€è¦æ˜¾ç¤ºè·å–å’Œé‡Šæ”¾ï¼Œæ”¯æŒå¯é‡å…¥é”ï¼Œå…¬å¹³é”ç­‰ï¼Œéé˜»å¡ï¼Œå¯ä¸­æ–­</li>
</ol>
<h3 id="Kafkaæ˜¯å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§çš„ï¼Ÿä½ äº†è§£åº•å±‚çš„åŸç†å—ï¼Ÿ"><a href="#Kafkaæ˜¯å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§çš„ï¼Ÿä½ äº†è§£åº•å±‚çš„åŸç†å—ï¼Ÿ" class="headerlink" title="Kafkaæ˜¯å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§çš„ï¼Ÿä½ äº†è§£åº•å±‚çš„åŸç†å—ï¼Ÿ"></a>Kafkaæ˜¯å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§çš„ï¼Ÿä½ äº†è§£åº•å±‚çš„åŸç†å—ï¼Ÿ</h3><h3 id="ä¿éšœæœåŠ¡ç¨³å®šæ€§æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚æ˜¯"><a href="#ä¿éšœæœåŠ¡ç¨³å®šæ€§æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚æ˜¯" class="headerlink" title="ä¿éšœæœåŠ¡ç¨³å®šæ€§æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚æ˜¯"></a>ä¿éšœæœåŠ¡ç¨³å®šæ€§æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚æ˜¯</h3><p>ç›‘æ§å’Œé¢„è­¦</p>
<h4 id="å¦‚ä½•æå‰é¢„ä¼°æ¥å£çš„QPS"><a href="#å¦‚ä½•æå‰é¢„ä¼°æ¥å£çš„QPS" class="headerlink" title="å¦‚ä½•æå‰é¢„ä¼°æ¥å£çš„QPS"></a>å¦‚ä½•æå‰é¢„ä¼°æ¥å£çš„QPS</h4><ol>
<li>å†å²æ•°æ®åˆ†æï¼šåˆ†æå†å²æ—¥å¿—å’Œç›‘æ§æ•°æ®ï¼Œäº†è§£ä¸åŒæ—¶é—´æ®µçš„QPS</li>
<li>ä¸šåŠ¡éœ€æ±‚åˆ†æï¼š</li>
<li>æ¨¡æ‹Ÿæµ‹è¯•ï¼šå‹æµ‹æ¨¡æ‹Ÿ</li>
</ol>
<h3 id="HTTP1-0-x2F-1-1-x2F-2-0çš„åŒºåˆ«"><a href="#HTTP1-0-x2F-1-1-x2F-2-0çš„åŒºåˆ«" class="headerlink" title="HTTP1.0/1.1/2.0çš„åŒºåˆ«"></a>HTTP1.0/1.1/2.0çš„åŒºåˆ«</h3><p>HTTP1.0 é»˜è®¤çŸ­é“¾æ¥ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥<br>1.1 é»˜è®¤é•¿è¿æ¥ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”<br>2.0 å¢åŠ å¤šè·¯å¤ç”¨ï¼ŒæŠ¥æ–‡å¤´å‹ç¼©ï¼Œå…è®¸æœåŠ¡ç«¯æ¨é€èµ„æºç»™å®¢æˆ·ç«¯ã€‚</p>
<h3 id="é˜Ÿå¤´é˜»å¡"><a href="#é˜Ÿå¤´é˜»å¡" class="headerlink" title="é˜Ÿå¤´é˜»å¡"></a>é˜Ÿå¤´é˜»å¡</h3><h3 id="Redisç›¸å…³"><a href="#Redisç›¸å…³" class="headerlink" title="Redisç›¸å…³"></a>Redisç›¸å…³</h3><h4 id="å¤§keyé—®é¢˜"><a href="#å¤§keyé—®é¢˜" class="headerlink" title="å¤§keyé—®é¢˜"></a>å¤§keyé—®é¢˜</h4><p>è§£å†³ï¼šä½¿ç”¨å‹ç¼©gzipç­‰ï¼Œå®šæ—¶æ¸…ç†</p>
<h4 id="çƒ­key"><a href="#çƒ­key" class="headerlink" title="çƒ­key"></a>çƒ­key</h4><p>Redisä¸­ï¼Œé¢‘ç¹è¢«è®¿é—®çš„é”®ï¼Œå¯èƒ½ä¼šå¯¼è‡´Redisæ€§èƒ½ç“¶é¢ˆã€‚<br>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>åœ¨Redisä¹‹å‰å¢åŠ ä¸€ä¸ªç¼“å­˜å±‚</li>
<li>æ•°æ®åˆ†ç‰‡ï¼Œå°†çƒ­keyçš„æ•°æ®åˆ†ç‰‡å­˜å‚¨åˆ°å¤šä¸ªRediså®ä¾‹ä¸­</li>
<li>è¯·æ±‚åˆ†æ‘Š</li>
</ol>
<h3 id="æ•°æ®åº“ç›¸å…³"><a href="#æ•°æ®åº“ç›¸å…³" class="headerlink" title="æ•°æ®åº“ç›¸å…³"></a>æ•°æ®åº“ç›¸å…³</h3><h4 id="åœ¨æœ‰å¤šä¸ªç´¢å¼•æ—¶ï¼Œæ•°æ®åº“ä¼šå¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼Ÿ"><a href="#åœ¨æœ‰å¤šä¸ªç´¢å¼•æ—¶ï¼Œæ•°æ®åº“ä¼šå¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼Ÿ" class="headerlink" title="åœ¨æœ‰å¤šä¸ªç´¢å¼•æ—¶ï¼Œæ•°æ®åº“ä¼šå¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼Ÿ"></a>åœ¨æœ‰å¤šä¸ªç´¢å¼•æ—¶ï¼Œæ•°æ®åº“ä¼šå¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼Ÿ</h4><p>ä¼šä½¿ç”¨é€‰æ‹©æ€§é«˜(ç´¢å¼•åˆ—ä¸­çš„ä¸é€šçŸ¥çš„æ•°é‡ä¸æ€»è¡Œæ•°çš„æ¯”ç‡)ã€ç´¢å¼•è¦†ç›–(å¯ä»¥é¿å…å›è¡¨æ“ä½œçš„)ã€ç´¢å¼•ç±»å‹()ã€æŸ¥è¯¢æ¡ä»¶(ä¾‹å¦‚æœ€å·¦åŒ¹é…ï¼Œå¤åˆç´¢å¼•(A,B)ä¸å¯å•ç‹¬ä½œç”¨äºB)</p>
<h3 id="åˆ†å¸ƒå¼ç›¸å…³"><a href="#åˆ†å¸ƒå¼ç›¸å…³" class="headerlink" title="åˆ†å¸ƒå¼ç›¸å…³"></a>åˆ†å¸ƒå¼ç›¸å…³</h3><h4 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h4><p><a target="_blank" rel="noopener" href="https://xiaomi-info.github.io/2020/01/02/distributed-transaction/">https://xiaomi-info.github.io/2020/01/02/distributed-transaction/</a></p>
<h3 id="ä¸šåŠ¡ç›¸å…³"><a href="#ä¸šåŠ¡ç›¸å…³" class="headerlink" title="ä¸šåŠ¡ç›¸å…³"></a>ä¸šåŠ¡ç›¸å…³</h3><h4 id="å¦‚ä½•å®ç°å»¶è¿Ÿé˜Ÿåˆ—"><a href="#å¦‚ä½•å®ç°å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="å¦‚ä½•å®ç°å»¶è¿Ÿé˜Ÿåˆ—"></a>å¦‚ä½•å®ç°å»¶è¿Ÿé˜Ÿåˆ—</h4><ol>
<li>ä½¿ç”¨DelayQueue,<code>DelayQueue</code>çš„<code>put</code>æ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸º<code>put</code>æ–¹æ³•å†…éƒ¨ä½¿ç”¨äº†<code>ReentrantLock</code>é”è¿›è¡Œçº¿ç¨‹åŒæ­¥ã€‚<code>DelayQueue</code>è¿˜æä¾›äº†ä¸¤ç§å‡ºé˜Ÿçš„æ–¹æ³• <code>poll()</code> å’Œ <code>take()</code> ï¼Œ <code>poll()</code> ä¸ºéé˜»å¡è·å–ï¼Œæ²¡æœ‰åˆ°æœŸçš„å…ƒç´ ç›´æ¥è¿”å›nullï¼›<code>take()</code> é˜»å¡æ–¹å¼è·å–ï¼Œæ²¡æœ‰åˆ°æœŸçš„å…ƒç´ çº¿ç¨‹å°†ä¼šç­‰å¾…ã€‚</li>
<li>åŸºäºå®šæ—¶ä»»åŠ¡</li>
<li>åŸºäºRedisè¿‡æœŸé”®çš„å›è°ƒå‡½æ•°</li>
</ol>
<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><h4 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h4><p>åå°„çš„åŸç†åŸºäºJavaçš„å…ƒæ•°æ®ï¼ˆmetadataï¼‰ï¼Œè¿™äº›å…ƒæ•°æ®åœ¨ç¼–è¯‘æ—¶è¢«åµŒå…¥åˆ°ç±»æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨è¿è¡Œæ—¶é€šè¿‡Javaåå°„APIè¿›è¡Œè®¿é—®ã€‚</p>
<h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><h4 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h4><blockquote>
<p>AOPåŸºäºåŠ¨æ€ä»£ç†ï¼Œå¦‚æœè¦ä»£ç†çš„å¯¹è±¡å®ç°äº†æŸä¸ªæ¥å£ï¼Œé‚£é¢ä¼šä½¿ç”¨JDKProxyï¼Œå¦‚æœæ²¡å®ç°æ¥å£ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨åŸºäºasmæ¡†æ¶å­—èŠ‚æµçš„CglibåŠ¨æ€ä»£ç†æ¥ç”Ÿæˆä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å­ç±»æ¥ä½œä¸ºä»£ç†ã€‚</p>
</blockquote>
<h3 id="åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼"><a href="#åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼" class="headerlink" title="åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼"></a>åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼</h3><ol>
<li>new</li>
<li>Class.newInstanceï¼šéœ€è¦æœ‰publicæ— å‚æ„é€ å™¨</li>
<li>Contructor.newInstanceï¼šè°ƒç”¨æœ‰å‚æ•°å’Œç§æœ‰çš„æ„é€ å‡½æ•°</li>
<li>ä½¿ç”¨Clone</li>
<li>ååºåˆ—åŒ–</li>
<li></li>
</ol>
<h4 id="Bean"><a href="#Bean" class="headerlink" title="Bean"></a>Bean</h4><h5 id="åˆ›å»ºæµç¨‹"><a href="#åˆ›å»ºæµç¨‹" class="headerlink" title="åˆ›å»ºæµç¨‹"></a>åˆ›å»ºæµç¨‹</h5><ol>
<li>å®ä¾‹åŒ–ï¼šä¹Ÿå°±æ˜¯new</li>
<li>IOCæ³¨å…¥</li>
</ol>
<h4 id="å¾ªç¯ä¾èµ–"><a href="#å¾ªç¯ä¾èµ–" class="headerlink" title="å¾ªç¯ä¾èµ–"></a>å¾ªç¯ä¾èµ–</h4><blockquote>
<p>ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„Beanäº’ç›¸æŒæœ‰å¯¹æ–¹ï¼Œå½¢æˆç›¸äº’æŒæœ‰å¯¹æ–¹ï¼Œæœ€ç»ˆå½¢æˆé—­ç¯ã€‚</p>
</blockquote>
<h5 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h5><p>ä¸‰çº§ç¼“å­˜</p>
<ol>
<li>Springå®¹å™¨é€šè¿‡æ„é€ å™¨åˆå§‹åŒ–å¯¹è±¡ä¹‹åæå‰æš´æ¼åˆ°Springå®¹å™¨çš„singletonFactorys(ä¸‰çº§ç¼“å­˜)</li>
<li>è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå°è¯•ä»å®¹å™¨ä¸­è·å–ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆå§‹åŒ–ï¼Œç°å°†è‡ªå·±æ”¾åœ¨ä¸‰çº§ç¼“å­˜ä¸­ï¼Œä¹‹åä»ä¸€çº§ã€äºŒçº§ã€ä¸‰çº§ç¼“å­˜ä¸­ä¸€æ¬¡è·å–ç¬¬ä¸€ä¸ªå¯¹è±¡</li>
<li>è·å–ä¹‹åå°†è‡ªå·±æ”¾åœ¨å•ä¾‹æ± ä¸­ï¼Œä¾›ç¬¬ä¸€ä¸ªå®ä¾‹å®Œæˆåˆå§‹åŒ–ã€‚</li>
</ol>
<h3 id="å¦‚ä½•ä¿è¯å¤šæ¬¡è¯·æ±‚-x2F-åˆ·æ–°çš„å¹‚ç­‰æ€§"><a href="#å¦‚ä½•ä¿è¯å¤šæ¬¡è¯·æ±‚-x2F-åˆ·æ–°çš„å¹‚ç­‰æ€§" class="headerlink" title="å¦‚ä½•ä¿è¯å¤šæ¬¡è¯·æ±‚/åˆ·æ–°çš„å¹‚ç­‰æ€§"></a>å¦‚ä½•ä¿è¯å¤šæ¬¡è¯·æ±‚/åˆ·æ–°çš„å¹‚ç­‰æ€§</h3><ol>
<li>ä½¿ç”¨PRG(POST/Redirect/GET)ï¼šç”¨æˆ·å¡«å†™è¡¨å•ï¼Œä¹‹åæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¹‹åè¿›è¡Œå¤„ç†ï¼Œç„¶åé€šè¿‡è¿”å›é‡å®šå‘ï¼Œåç»­ç”¨æˆ·é€šè¿‡GETè¿›è¡Œè¯·æ±‚</li>
<li>Tokenæœºåˆ¶ï¼šæœåŠ¡ç«¯é€šè¿‡ç”Ÿæˆå”¯ä¸€æœ‰æ—¶æ•ˆæ€§çš„Tokenï¼Œä¹‹åå®¢æˆ·ç«¯æºå¸¦è¿™ä¸ªTokenå‘é€è¯·æ±‚ï¼Œå¦‚æœTokenå¤±æ•ˆåˆ™æ‹’ç»æ‰§è¡Œã€‚å¹¶å‘åœºæ™¯ä¸‹å¯ä»¥ä½¿ç”¨SETNXæ¥ä¿è¯æœ‰æ•ˆï¼ŒåŒæ—¶é¿å…å¤šä¸ªè¯·æ±‚åŒæ—¶é€šè¿‡éªŒè¯</li>
</ol>
<h3 id="SpringBootè‡ªåŠ¨è£…é…çš„åŸç†"><a href="#SpringBootè‡ªåŠ¨è£…é…çš„åŸç†" class="headerlink" title="SpringBootè‡ªåŠ¨è£…é…çš„åŸç†"></a>SpringBootè‡ªåŠ¨è£…é…çš„åŸç†</h3><h4 id="SpringBootApplicationåˆ°åº•æœ‰ä»€ä¹ˆå†…å®¹"><a href="#SpringBootApplicationåˆ°åº•æœ‰ä»€ä¹ˆå†…å®¹" class="headerlink" title="@SpringBootApplicationåˆ°åº•æœ‰ä»€ä¹ˆå†…å®¹"></a>@SpringBootApplicationåˆ°åº•æœ‰ä»€ä¹ˆå†…å®¹</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token generics"><span class="token punctuation">&lt;</span>1<span class="token punctuation">.</span><span class="token punctuation">&gt;</span></span><span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token generics"><span class="token punctuation">&lt;</span>2<span class="token punctuation">.</span><span class="token punctuation">&gt;</span></span><span class="token annotation punctuation">@ComponentScan</span>
<span class="token generics"><span class="token punctuation">&lt;</span>3<span class="token punctuation">.</span><span class="token punctuation">&gt;</span></span><span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Configuration</span> <span class="token comment">//å®é™…ä¸Šå®ƒä¹Ÿæ˜¯ä¸€ä¸ªé…ç½®ç±»</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootConfiguration</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¯ä»¥çœ‹è§ï¼Œæ˜¯åŒ…å«@Configurationã€@ComponentScan(ç»„ä»¶æ‰«æ)ã€@EnableAutoConfiguration(å¯ç”¨è‡ªåŠ¨è£…é…)</p>
<p>æ‰€ä»¥Spring Bootçš„è‡ªåŠ¨é…ç½®å®è´¨å°±æ˜¯ å°†è¿™äº›éœ€è¦è‡ªåŠ¨é…ç½®çš„ç±»çš„å…¨ç±»åå…ˆä¿å­˜åœ¨è¿™äº›æ–‡ä»¶ä¸­ ç„¶åè¯»å–åˆ°Listé›†åˆé‡Œé¢ ç„¶åé€šè¿‡@Importæ³¨è§£è¯»å–å¯¼å…¥ï¼Œä¹Ÿå°±æ˜¯SPIå®ç°çš„</p>
<p>#todo </p>
<ul>
<li><input disabled="" type="checkbox"> leetcodeæ‰‹å†™LRU</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">QingQiu</p>
  <div class="site-description" itemprop="description">ä¸ªäººç½‘ç«™ï¼Œå­¦ä¹ è®°å½•ï¼Œé¢è¯•è®°å½•å’Œç»éªŒæ€»ç»“ã€äº’è”ç½‘ä¸­ä¸€å—å±äºè‡ªå·±çš„å°çª</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Zuofw/zuofw-rpc" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Zuofw&#x2F;zuofw-rpc" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 â€“ 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QingQiu</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">423k</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
